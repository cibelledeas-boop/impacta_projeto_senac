"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="0c535041-67ed-5387-9552-5dcba091f6c4")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([["2570"],{695920:function(e,t,r){r.d(t,{$J:()=>p,E3:()=>s,HJ:()=>i,Nj:()=>o,YW:()=>x,Z2:()=>f,ZL:()=>m,cc:()=>b,cv:()=>n,dt:()=>y,eC:()=>u,j$:()=>d,le:()=>c,os:()=>v,pP:()=>g,q7:()=>_,tx:()=>l,uA:()=>h,wZ:()=>a});let a="mini_community_cards--mini_cardBottomRowSizing--rK6OI",i="mini_community_cards--mini_cardImageContainer--w1MDy base_community_cards--base_cardImageContainer--M7dqa base_community_cards--_hasBorder--U9Tp6",s="mini_community_cards--mini_cardBottomRow_Metadata--u23Sv",n="mini_community_cards--mini_cardBottomRow_Metadata_AvatarContainer--g7JHe",o="mini_community_cards--mini_cardBottomRow_Metadata_Avatar--CmE9G",l="mini_community_cards--mini_cardBottomRow_Metadata_TextContainer--Bk0b2",d="mini_community_cards--mini_cardBottomRow_MetadataFocusBorder--WN6lc",c="mini_community_cards--mini_cardBottomRow_Metadata_FileIcon--Z99UM",u="mini_community_cards--mini_cardBottomRow_Metadata_Name--htTRx text--fontPos11--rO47d text--_fontBase--VaHfk ellipsis--ellipsis--70pHK",m="mini_community_cards--mini_cardBottomRow_Metadata_NameOnly--Y7VQ9 text--fontPos13--5OfL8 text--_fontBase--VaHfk ellipsis--ellipsis--70pHK",_="mini_community_cards--mini_cardBottomRow_Metadata_AuthorName--BTTGO text--fontPos11--rO47d text--_fontBase--VaHfk ellipsis--ellipsis--70pHK",p="mini_community_cards--mini_cardBottomRow_Metadata_AuthorName_WithHoverText--1QY-K mini_community_cards--mini_cardBottomRow_Metadata_AuthorName--BTTGO text--fontPos11--rO47d text--_fontBase--VaHfk ellipsis--ellipsis--70pHK",f="mini_community_cards--mini_cardBottomRow_HoverText--E5bcY mini_community_cards--mini_cardBottomRow_Metadata_AuthorName--BTTGO text--fontPos11--rO47d text--_fontBase--VaHfk ellipsis--ellipsis--70pHK",x="mini_community_cards--mini_cardHover_Center--l8ZPp mini_community_cards--_mini_cardHover--nbzfL base_community_cards--base_cardHover--GZ15z",g="mini_community_cards--mini_cardHover_Cover--4XJbr mini_community_cards--_mini_cardHover--nbzfL base_community_cards--base_cardHover--GZ15z",h="mini_community_cards--mini_cardHover_BottomRowRight--CkS8P mini_community_cards--_mini_cardHover--nbzfL base_community_cards--base_cardHover--GZ15z",v="mini_community_cards--mini_cardHover_BottomLeft--fL7BE mini_community_cards--_mini_cardHover--nbzfL base_community_cards--base_cardHover--GZ15z",b="mini_community_cards--mini_cardContainer--WpyM8",y="mini_community_cards--mini_cardContainerWithFocus---RCha"},530589:function(e,t,r){r.d(t,{i:()=>i});var a=r(276634);let i=r(148171).Z.createLazyComponent(()=>Promise.all([r.e("3841"),r.e("428"),r.e("3275")]).then(r.bind(r,892566)).then(e=>e.EduReviewPage),{loading:()=>null,error:a.NY.NONE,componentName:"EduReviewPage"})},272901:function(e,t,r){r.d(t,{J:()=>s});var a=r(276634),i=r(259946);let s=r(148171).Z.createLazyComponent(()=>Promise.all([r.e("3841"),r.e("428"),r.e("3275")]).then(r.bind(r,629339)).then(e=>e.OrgSelfServeBillingRemodelPage),{loading:i.ww,error:a.NY.NONE,componentName:"OrgSelfServeBillingRemodelPage"})},717331:function(e,t,r){r.d(t,{V:()=>i});var a=r(276634);let i=r(148171).Z.createLazyComponent(()=>Promise.all([r.e("3841"),r.e("428"),r.e("3275")]).then(r.bind(r,132162)).then(e=>e.PromoReviewPage),{loading:()=>null,error:a.NY.NONE,componentName:"PromoReviewPage"})},900400:function(e,t,r){r.d(t,{H:()=>i});var a=r(276634);let i=r(148171).Z.createLazyComponent(()=>Promise.all([r.e("3841"),r.e("428"),r.e("3275")]).then(r.bind(r,28276)).then(e=>e.TeamUpgradePageBillingRemodel),{loading:()=>null,error:a.NY.NONE,componentName:"TeamUpgradePageBillingRemodel"})},22411:function(e,t,r){r.d(t,{t:()=>i});var a=r(276634);let i=r(148171).Z.createLazyComponent(()=>Promise.all([r.e("3841"),r.e("428"),r.e("3275")]).then(r.bind(r,452665)).then(e=>e.TierUpgradeFlow),{loading:()=>null,error:a.NY.NONE,componentName:"TierUpgradeFlow"})},830423:function(e,t,r){r.d(t,{n:()=>j});var a=r(750357),i=r(853505),s=r(577851),n=r(273634),o=r(158639),l=r(486245),d=r(661193),c=r(35930),u=r(861289);if(9793==r.j)var m=r(868907);var _=r(404639),p=r(845277);if(9793==r.j)var f=r(479852);var x=r(864638),g=r(118960),h=r(13590),v=r(643035),b=r(515963),y=r(192080);function j(){return(0,a.jsx)(o.X,{label:"SeatRequestsPageView",children:(0,a.jsx)(w,{})})}function w(){let e=(0,s.I0)(),t=(0,g.I6)(),r=(0,g.lE)(),o=(0,p.A6)(),j=(0,s.v9)(e=>(0,x.getPermissionsStateMemoized)(e)),w=(0,s.v9)(e=>e.teams),T=(0,g.N1)(r),I="loaded"===T.status&&(0,u.cN)({isAdminOrg:T.data,permissions:j,teams:w,view:o}),E=(0,h.e_)(o),k="loaded"===t.status&&"loaded"===r.status&&r.data.permission!==f.WM.ADMIN;return(i.useEffect(()=>{I?e(_.fv({view:"resourceUnavailable",resourceType:E})):k&&e(_.fv(v.r_))},[e,E,k,I]),"loaded"!==t.status||"loaded"!==r.status||k||I)?(0,a.jsx)("div",{className:d.B.wFull.pl32.py24.bb1.colorBorder.bSolid.$,children:(0,a.jsx)(l.g4,{className:d.B.w200.h32.$,dataTestId:"srpv-loading"})}):(0,a.jsx)(m.S,{containerClass:y.Cq,scrollableContainerClass:y.il,content:(0,a.jsx)(b.C,{plan:t.data,isOrgAdmin:t.data.type===f.k9.ORG}),toolbar:(0,a.jsx)(c.C,{}),errorBoundaryConfig:{figmaTeam:n.k.MONETIZATION_EXPANSION,boundaryKeySuffix:"SeatRequestsPageView"}})}},482156:function(e,t,r){r.r(t),r.d(t,{ConfirmDowngradeEditorsModal:()=>l});var a=r(750357),i=r(818723),s=r(590914),n=r(926941),o=r(68634);function l(e){let{team:t,editors:r}=e,{id:l}=t,d=r.length,c=r.filter(e=>e.id).map(e=>e.id).join(),u=(0,s.t)("team_view.downgrade_editor_modal.downgrade_user_team_permissions",{username:(0,i.aF)(e.editors[0].name||e.editors[0].email,20)}),m=(0,s.t)("team_view.downgrade_editor_modal.downgrade_multiple_users_team_permissions",{numSelectedUsers:d});return(0,a.jsx)(n.Ui,{name:"Team Admin Downgrade Editors Modal",properties:{editorCount:d,editorIds:c,teamId:l},children:(0,a.jsx)(o.P6,{title:d>1?m:u,confirmText:(0,s.t)("team_view.downgrade_editor_modal.downgrade"),onConfirm:e.onConfirm,children:(0,a.jsxs)("p",{children:[d>1&&(0,s.t)("team_view.downgrade_editor_modal.are_you_sure_you_want_to_downgrade",{numSelectedUsers:d}),(0,s.tx)("team_view.downgrade_editor_modal.downgrading_their_team_permission_will_change_all_permissions_to_can_view")]})})})}},495389:function(e,t,r){r.r(t),r.d(t,{MemberEditAccessModal:()=>I});var a=r(750357),i=r(853505),s=r(577851),n=r(527986),o=r(825945),l=r(551916),d=r(45190),c=r(558089),u=r(590914),m=r(469271),_=r(926941),p=r(877208),f=r(561261),x=r(300941),g=r(10553),h=r(750077),v=r(68634);let b="edit_access_modal--column--byd-v",y="edit_access_modal--resource--edET9",j="edit_access_modal--resourceTitle--Y8RvY edit_access_modal--resource--edET9",w="edit_access_modal--greyResource--cKIIv edit_access_modal--resource--edET9",T=(0,o.ws)((e,t)=>{let r={privateResourceCount:0,editableResources:[]};return e&&0!==e.length&&(e.forEach(e=>{let a=((e,t)=>{if("file"===e.resource_type){let r=t[e.resource_id_or_key];if(r)return{name:r.name,id_or_key:r.key}}else{let r=t[e.resource_id_or_key];if(r)return{name:r.name,id_or_key:r.id}}})(e,t);a?r.editableResources.push(a):r.privateResourceCount++}),(0,n.po)(r.editableResources,e=>e.name)),r});function I(e){let t=(0,s.I0)(),r=function(e,t){let r=(0,d.DG)(g.iN2,{teamId:e,userId:t});return i.useMemo(()=>r.transform(e=>{let t=e.teamUserDescendedRoles;if(!t)return{team_user:void 0,team_role:void 0,edit_roles:{whiteboard_files:[],design_files:[],folders:[]},file_edit_roles_count:0,name:"",id:""};let r=t[0];if(!r.teamUser)return{team_user:void 0,team_role:void 0,edit_roles:{whiteboard_files:[],design_files:[],folders:[]},file_edit_roles_count:0,name:"",id:""};let a=r.teamUser,i=r.teamUser.teamRole;return{...x.y.toSinatra(a.user),team_user:{id:a.id,user_id:a.user.id,team_id:r.teamId,active_seat_type:(0,p.fH)(a.activeSeatTypeUpgrade?.billableProduct)},team_role:i?(0,f.zk)(i,a.user):void 0,file_edit_roles_count:r.fileEditRolesCount,edit_roles:{whiteboard_files:[],design_files:[],folders:r.projectEditRoles?.map(e=>(0,f.zk)(e,a.user))||[]}}}),[r])}(e.teamId,e.userId),n=(0,s.v9)(e=>e.folders),o=i.useMemo(()=>r.transform(e=>T(e?.edit_roles?.folders,n)),[n,r]),y=i.useMemo(()=>r.transform(e=>e?{privateResourceCount:e.file_edit_roles_count,editableResources:[]}:{privateResourceCount:0,editableResources:[]}),[r]),w=(0,s.v9)(t=>t.teams[e.teamId]),I=l.IE.all([r,o,y]);if("loaded"!==I.status)return null;let[k,N,C]=I.data;if(!k)return console.error("Member not found"),null;let R=!!k.team_role&&k.team_role?.level>=h.V5.EDITOR,S=N.editableResources.length+N.privateResourceCount,O=C.editableResources.length+C.privateResourceCount;return(0,a.jsx)(_.Ui,{name:"Member Edit Access Modal",properties:{teamId:w.id,userId:k.id,folderCount:S,fileCount:O},children:(0,a.jsxs)(v.xm,{title:(0,u.t)("team_view.member_edit_access_modal.title",{memberName:k.name??""}),maxWidth:432,minWidth:432,containerClassName:"edit_access_modal--modalStyle--5uzHI",onClose:()=>{t(m.hV())},children:[(0,a.jsxs)("div",{className:"edit_access_modal--headerContainer--hTEar edit_access_modal--resourceContainer--SVnc2",children:[(0,a.jsx)("div",{className:b,children:(0,a.jsx)("div",{className:j,children:(0,u.tx)("team_view.member_edit_access_modal.projects_title_v2")})}),(0,a.jsx)("div",{className:b,children:(0,a.jsx)("div",{className:j,children:(0,u.tx)("team_view.member_edit_access_modal.files_title_v2")})})]}),(0,a.jsx)(c.l,{className:"edit_access_modal--scrollContainer--MFAs-",hideScrollbar:!0,children:(0,a.jsxs)("div",{className:"edit_access_modal--resourceContainer--SVnc2",children:[(0,a.jsx)("div",{className:b,children:(0,a.jsx)(E,{hasTeamEditPermissions:R,resources:N,resourceType:"project"})}),(0,a.jsx)("div",{className:b,children:(0,a.jsx)(E,{hasTeamEditPermissions:R,resources:C,resourceType:"file"})})]})})]})})}function E(e){let t,{hasTeamEditPermissions:r,resourceType:i}=e;if(r)if("project"===i)return(0,a.jsx)("div",{className:w,children:(0,u.tx)("team_view.member_edit_access_modal.all_projects")});else return(0,a.jsx)("div",{className:w,children:(0,u.tx)("team_view.member_edit_access_modal.all_files")});let s=e.resources;if(0===s.privateResourceCount&&0===s.editableResources.length)return(0,a.jsx)("div",{className:w,children:"file"===i?(0,u.tx)("team_view.member_edit_access_modal.none_files"):(0,u.tx)("team_view.member_edit_access_modal.none_projects")});if(s.privateResourceCount>0){let e=(0,a.jsx)("span",{});0===s.editableResources.length&&"project"===i?e=(0,u.tx)("team_view.member_edit_access_modal.invite_only_projects",{numProjects:s.privateResourceCount}):0===s.editableResources.length&&"file"===i?e=(0,u.tx)("team_view.member_edit_access_modal.invite_only_files",{numFiles:s.privateResourceCount}):s.editableResources.length>0&&"project"===i?e=(0,u.tx)("team_view.member_edit_access_modal.invite_only_projects_list_end",{numProjects:s.privateResourceCount}):s.editableResources.length>0&&"file"===i&&(e=(0,u.tx)("team_view.member_edit_access_modal.invite_only_files_list_end",{numFiles:s.privateResourceCount})),t=(0,a.jsx)("div",{className:y,children:e})}return(0,a.jsxs)(a.Fragment,{children:[s.editableResources.map(e=>(0,a.jsx)("div",{className:y,children:e.name},e.id_or_key)),t]})}},974905:function(e,t,r){r.d(t,{Cm:()=>s,D6:()=>_,Lz:()=>c,Qu:()=>u,Vx:()=>l,gV:()=>m,lS:()=>n,rT:()=>d,zr:()=>o});var a=r(276634),i=r(471776);r(830423);let s=i.Z.createLazyComponent(()=>Promise.all([r.e("1259"),r.e("7424"),r.e("9392"),r.e("6481"),r.e("1402"),r.e("313"),r.e("1779"),r.e("6985"),r.e("6761"),r.e("4126"),r.e("6006"),r.e("8925"),r.e("114"),r.e("5522"),r.e("6635"),r.e("1780"),r.e("3990"),r.e("1889"),r.e("8247"),r.e("224"),r.e("9268"),r.e("6811"),r.e("125")]).then(r.bind(r,12833)).then(e=>e.BillingGroupDashboardSettingsPageView),{loading:()=>null,error:a.NY.NONE,componentName:"BillingGroupDashboardSettingsPageView"}),n=i.Z.createLazyComponent(()=>Promise.all([r.e("1259"),r.e("7424"),r.e("9392"),r.e("6481"),r.e("1402"),r.e("313"),r.e("1779"),r.e("6985"),r.e("6761"),r.e("4126"),r.e("6006"),r.e("8925"),r.e("114"),r.e("5522"),r.e("6635"),r.e("1780"),r.e("3990"),r.e("1889"),r.e("8247"),r.e("224"),r.e("9268"),r.e("6811"),r.e("125")]).then(r.bind(r,90961)).then(e=>e.LicenseGroupAdminSettingsPageView),{loading:()=>null,error:a.NY.NONE,componentName:"LicenseGroupAdminSettingsPageView"}),o=i.Z.createLazyComponent(()=>Promise.all([r.e("1259"),r.e("7424"),r.e("9392"),r.e("6481"),r.e("1402"),r.e("313"),r.e("1779"),r.e("6985"),r.e("6761"),r.e("4126"),r.e("6006"),r.e("8925"),r.e("114"),r.e("5522"),r.e("6635"),r.e("1780"),r.e("3990"),r.e("1889"),r.e("8247"),r.e("224"),r.e("9268"),r.e("6811"),r.e("125")]).then(r.bind(r,398672)).then(e=>e.OrgAdminSettingsPageView),{loading:()=>null,error:a.NY.NONE,componentName:"OrgAdminSettingsPageView"}),l=i.Z.createLazyComponent(()=>Promise.all([r.e("1259"),r.e("7424"),r.e("9392"),r.e("6481"),r.e("1402"),r.e("313"),r.e("1779"),r.e("6985"),r.e("6761"),r.e("4126"),r.e("6006"),r.e("8925"),r.e("114"),r.e("5522"),r.e("6635"),r.e("1780"),r.e("3990"),r.e("1889"),r.e("8247"),r.e("224"),r.e("9268"),r.e("6811"),r.e("125")]).then(r.bind(r,743106)).then(e=>e.WorkspaceAdminSettingsPageView),{loading:()=>null,error:a.NY.NONE,componentName:"WorkspaceAdminSettingsPageView"}),d=i.Z.createLazyComponent(()=>Promise.all([r.e("1259"),r.e("7424"),r.e("9392"),r.e("6481"),r.e("1402"),r.e("313"),r.e("1779"),r.e("6985"),r.e("6761"),r.e("4126"),r.e("6006"),r.e("8925"),r.e("114"),r.e("5522"),r.e("6635"),r.e("1780"),r.e("3990"),r.e("1889"),r.e("8247"),r.e("224"),r.e("9268"),r.e("6811"),r.e("125")]).then(r.bind(r,285342)).then(e=>e.OrgDomainManagementPageView),{loading:()=>null,error:a.NY.NONE,componentName:"OrgDomainManagementPageView"}),c=i.Z.createLazyComponent(()=>Promise.all([r.e("1259"),r.e("7424"),r.e("9392"),r.e("6481"),r.e("1402"),r.e("313"),r.e("1779"),r.e("6985"),r.e("6761"),r.e("4126"),r.e("6006"),r.e("8925"),r.e("114"),r.e("5522"),r.e("6635"),r.e("1780"),r.e("3990"),r.e("1889"),r.e("8247"),r.e("224"),r.e("9268"),r.e("6811"),r.e("125")]).then(r.bind(r,875553)).then(e=>e.AbandonedDraftFilesPageView),{loading:()=>null,error:a.NY.NONE,componentName:"AbandonedDraftFilesPageView"}),u=i.Z.createLazyComponent(()=>Promise.all([r.e("1259"),r.e("7424"),r.e("9392"),r.e("6481"),r.e("1402"),r.e("313"),r.e("1779"),r.e("6985"),r.e("6761"),r.e("4126"),r.e("6006"),r.e("8925"),r.e("114"),r.e("5522"),r.e("6635"),r.e("1780"),r.e("3990"),r.e("1889"),r.e("8247"),r.e("224"),r.e("9268"),r.e("6811"),r.e("125")]).then(r.bind(r,638577)).then(e=>e.TeamAdminConsoleView),{loading:()=>null,error:a.NY.NONE,componentName:"TeamAdminConsoleView"}),m=i.Z.createLazyComponent(()=>Promise.all([r.e("1259"),r.e("7424"),r.e("9392"),r.e("6481"),r.e("1402"),r.e("313"),r.e("1779"),r.e("6985"),r.e("6761"),r.e("4126"),r.e("6006"),r.e("8925"),r.e("114"),r.e("5522"),r.e("6635"),r.e("1780"),r.e("3990"),r.e("1889"),r.e("8247"),r.e("224"),r.e("9268"),r.e("6811"),r.e("125")]).then(r.bind(r,172674)).then(e=>e.AdminSidebar),{loading:()=>null,error:a.NY.NONE,componentName:"AdminSidebar"}),_=i.Z.createLazyComponent(()=>Promise.all([r.e("1259"),r.e("7424"),r.e("9392"),r.e("6481"),r.e("1402"),r.e("313"),r.e("1779"),r.e("6985"),r.e("6761"),r.e("4126"),r.e("6006"),r.e("8925"),r.e("114"),r.e("5522"),r.e("6635"),r.e("1780"),r.e("3990"),r.e("1889"),r.e("8247"),r.e("224"),r.e("9268"),r.e("6811"),r.e("125")]).then(r.bind(r,975317)).then(e=>e.OrgIdpManagementPageView),{loading:()=>null,error:a.NY.NONE,componentName:"OrgIdpManagementPageView"})},678135:function(e,t,r){r.d(t,{D:()=>c});var a=r(853505),i=r(577851),s=r(342534);if(9793==r.j)var n=r(453393);var o=r(404639),l=r(998324);let d=9793==r.j?{ctrlKey:"metaKey"}:null;function c(e,t={}){let r=(0,i.I0)(),u=(0,i.oR)(),m=a.useMemo(()=>({metaKey:e=>{let t=(0,l.hM)(u.getState(),e);r(n.YQ({url:t}))},...t}),[t,r,u]);return a.useCallback((t,a)=>{let i=e(a),n=Object.keys(m).find(e=>t[e]);if(n){let e=m[s.ZP.mac?n:d[n]||n];if(e){t.preventDefault(),e(i);return}}r(o.fv(i))},[m,r,e])}},943126:function(e,t,r){r.r(t),r.d(t,{BlockConnectedFileMoveModal:()=>f});var a=r(750357),i=r(451410),s=r(810973),n=r(514177),o=r(317429),l=r(45190),d=r(158639),c=r(661193),u=r(590914),m=r(926941),_=r(10553),p=r(826086);function f(e){return(0,a.jsx)(d.X,{label:"BlockConnectedFileMoveModal",children:(0,a.jsx)(x,{...e})})}function x(e){let t=i.dd({open:e.open,onClose:e.onClose}),r=(0,l.DG)(_.A2,{fileKey:e.fileKey}),d=r?.data?.file?.project?.name,f=r?.data?.file?.plan?.name;return(0,a.jsx)(m.Ui,{name:"Block Connected File Move Modal",children:(0,a.jsx)(n.fC,{manager:t,width:"md",children:(0,a.jsxs)(o.AU,{children:[(0,a.jsx)(o.h4,{children:(0,a.jsx)(o.Dx,{children:d?(0,u.tx)("resource_connection.block_file_move.unable_to_move_out_of_project_name",{projectName:d}):(0,u.tx)("resource_connection.block_file_move.unable_to_move_out_of_this_project")})}),(0,a.jsx)(o.uT,{className:p.Y6,children:(0,a.jsx)("div",{className:c.B.mt4.mb4.$,children:(0,u.tx)("resource_connection.block_file_move.learn_more_about_what_you_can_do_in_connected_projects",{learnMore:(0,a.jsx)(s.r,{href:"https://help.figma.com/hc/articles/30124855491863-Guide-to-connected-projects",children:(0,u.tx)("resource_connection.request_modal.learn_more")}),hostPlanName:f??""})})})]})})})}},591960:function(e,t,r){r.r(t),r.d(t,{FileMoveHiddenDiv:()=>e9,TeamSection:()=>e0,isSubscribedLG:()=>eZ,FileMoveModalComponent:()=>eq,FileMoveModal:()=>eJ,getCurrentFolderId:()=>e$,getTargetAttribute:()=>eY,FileMoveSearch:()=>eX,TeamsDisplay:()=>e5,FileMoveDropdown:()=>e4});var a,i=r(750357),s=r(853505),n=r(577851),o=r(850340),l=r(492342),d=r(656190),c=r.n(d),u=r(444947),m=r(100079),_=r(424969),p=r(45190),f=r(195787),x=r(903132),g=r(483636),h=r(158639),v=r(879370),b=r(739842),y=r(19274),j=r(617054),w=r(259946),T=r(558089),I=r(240473),E=r(661193),k=r(590914),N=r(132880),C=r(996303),R=r(394847),S=r(101670);function O(e){let t=(0,n.I0)(),r=s.useCallback(r=>{r.stopPropagation(),e.team.canEdit&&((0,u.L9)("New Folder",{trackingContext:e.trackingContextName}),t((0,N.nw)({where:R.A4.FolderListView,team:{...(0,C.SR)(e.team),name:e.team.name||"",canEdit:e.team.canEdit}})))},[t,e.team,e.trackingContextName]);return e.team.canEdit?(0,i.jsx)(S.V,{data_tooltip:(0,k.t)("sidebar.new_project"),data_onboarding_key:"new-project-icon",innerText:"Creates new project",onClick:r,isBackgroundTransparent:e.isBackgroundTransparent}):null}var P=r(404639),A=r(258612),D=r(921836),F=r(469271),M=r(926941),L=r(877208),B=r(479852),U=r(800583),V=r(699379),G=r(750077),z=r(380904),W=r(898331),H=r(10553),K=r(998324),Y=r(752212),Z=r(524234),$=((a=$||{})[a.FOLDER_ROW=0]="FOLDER_ROW",a[a.NEW_FOLDER_TEAM=1]="NEW_FOLDER_TEAM",a),q=r(762498),Q=r(260736),J=r(95238),X=r(377064);let ee=new class{constructor(){this.TeamRestrictionsListsSchemaValidator=(0,X.PP)()}getTeamRestrictionsLists(e){return this.TeamRestrictionsListsSchemaValidator.validate(async({xr:t})=>await t.get("/api/team_restrictions_lists",{team_ids:e.teamIds}))}};var et=r(609461),er=r(68634),ea=r(702251),ei=r(840239),es=r(681768);function en(e){return(0,i.jsxs)("div",{className:"page_move--fileCreateNameContainer--bYZTs",children:[(0,i.jsx)("div",{className:"page_move--fileCreateNameSvgContainer--BJlij",children:(0,i.jsx)(ea.e,{})}),(0,i.jsx)(b.Sc,{value:e.newFileName,onChange:e.onChange,maxLength:255,autoFocus:!0,placeholder:(0,k.t)("page_move.add_new_file_name"),className:"page_move--fileCreateNameInput--z53ya"})]})}var eo=r(534750),el=r(870102),ed=r(122610),ec=r(129237),eu=r(672650),em=r(205348),e_=r(24075),ep=r(700483);let ef="32px",ex=(0,m.zg)(ef),eg=e=>e?.id||A.ft,eh=new em.D3({keys:["folder.path","team.name"],threshold:.3,tokenize:!0}),ev=(e,t,r,a,i)=>!(e.orgId!==i&&t?.orgId!==i||!e.canEdit||t&&(0,eu.Q6)(e,t,r)&&!(0,z.O2)(e))&&(!a||!!(0,eu.gP)(t)),eb=(e,t,r)=>!r||!!(0,eu.gP)(e),ey=async(e,t,r,a,i=!1,s=!1,n,d,c,u)=>{var m,_;let p=e.getState(),f=null,x=null;t.type===Z.M.FILE?(f=t.file.parent_org_id||null,x=t.file.team_id):t.type===Z.M.REPO?(f=t.repo.parent_org_id||null,x=t.repo.team_id):t.type===Z.M.FILE_IMPORT&&(f=t.orgId);let g=[];if(r){let e=((e,t,r)=>{let a=Object.create(null),i=Object.create(null),s=0,n=0,o=t.orgId&&t.user?t.orgUsers[t.orgId][t.user.id]:null,l=(0,z.tR)(t.user?t.user.id:null,t.folders,t.roles.byFolderId,o);for(let r of e){let e=r.item.folder,o=l&&e.id===l.id?0:r.score,d=e.teamId?t.teams[e.teamId]:null,c=l&&e.id===l.id?A.a3:eg(d);!(c in a)&&(a[c]=[],c!==A.ft&&c!==A.a3&&n++),a[c].push(e),null==i[c]?i[c]=o:i[c]=Math.min(i[c],o),s++}let d=s+n;return r(A.JG({indexCount:d})),[i,a]})(await eh.search(r),a,n);_=e[0],(g=Object.keys(m=e[1])).length&&g.sort((e,t)=>_[e]-_[t])}else if(m=(({folders:e,roles:t,user:r,orgUsers:a,teams:i,orgId:s,implicitTeamRolesTeamIds:n},o,d,c)=>{let u=Object.create(null),m=0,_=0,p=(0,z.tR)(r&&r.id,e,t.byFolderId,r&&s?a[s][r.id]:null);for(let e in u[A.a3]=[],u[A.ft]=[],t.byTeamId)eb(i[e],r,o)&&(_++,u[e]=[]);n&&n.forEach(e=>{eb(i[e],r,o)&&(_++,u[e]=[])}),Object.keys(e).forEach(t=>{let a={...e[t]},n=ev(a,a.teamId?i[a.teamId]:null,r,o,s);if((0,l.BZ)().file_move_show_all_resources){if(n&&(!d||a.subscription||(0,z.O2)(a))){let e=a.teamId?i[a.teamId]:null;u[p&&a.id===p.id?A.a3:eg(e)].push(a),m++}}else if(n&&(a.subscription||(0,z.O2)(a))){let e=a.teamId?i[a.teamId]:null;u[p&&a.id===p.id?A.a3:eg(e)].push(a),m++}});let f=m+_;return c(A.JG({indexCount:f})),c(A.iO()),u})(a,i,!!u,e.dispatch),a.user)g.push(A.a3),g=g.concat((0,Y.i2)(Object.values(a.teams),a.fileBrowserPreferences?.orderedTeamIds||[])),m[A.ft].length>0&&g.push(A.ft);else{let e;(g=Object.keys(m)).sort((e=a.teams,(t,r)=>{if(t===A.ft)return 1;let a=e[t],i=e[r];return a?i&&a.name.toLowerCase()<i.name.toLowerCase()?-1:1:-1}))}let h=(()=>{switch(t.type){case Z.M.FILE:return[t.file.editor_type];case Z.M.REPO:return[B.gg.DESIGN];case Z.M.FILE_IMPORT:return t.files.map(e=>(0,e_.VX)(e));default:(0,o.vE)(t)}})(),v=new Set(Object.values(m).flat().filter(e=>h.every(t=>!!t&&(0,ed.tw)(e,t))).map(e=>e.id)),b=g.filter(e=>{if(e===A.ft)return null===m||m[e].length>0;let t=a.teams;if(e!==A.a3){let r=t[e]?.orgId||null;if(f||r){if(r!==f)return!1}else if(x&&e===A.ft)return!1}return!t[e]?.deletedAt&&!!m[e]?.some(e=>v.has(e.id))}),[y,j,w]=((e,t,r,a,i)=>{let s=Object.create(null),n=Object.create(null),o=[],l=0,d=0;if(i){let t=e.indexOf(i);t>-1&&(e.splice(t,1),e.splice(1,0,i))}return e.forEach(e=>{if(n[e]=l,d+=8,e!==A.ft&&e!==A.a3){let t={type:$.NEW_FOLDER_TEAM,id:e,positionTop:d};o.push(t),d+=ex,l+=1}let r=t[e];l+=r.length,r.sort((e,t)=>""===e.path?-1:""===t.path?1:e.path.toLowerCase()<t.path.toLowerCase()?-1:1);let c=Array.from(r);a&&i&&e===i&&c.forEach((e,t)=>{e.id===a&&(r.splice(t,1),r.unshift(e))}),r.forEach(e=>{let t={type:$.FOLDER_ROW,id:e.id,positionTop:d};d+=ex,o.push(t)}),s[e]=r,d+=9}),[s,n,o]})(b,m,0,d,c);e.dispatch(A.Bv({rows:w})),e.dispatch(A.FX({indexOffsets:j})),e.dispatch(A._I({foldersByTeamId:y})),e.dispatch(A.uD({teamIds:b})),r||e.dispatch(A.SA({userTeamCount:b.length})),p.fileMove.isSearchResult!==s&&e.dispatch(A.SV({isSearchResult:s}));let T=A.a3 in j&&w[0].type===$.FOLDER_ROW;r&&T?e.dispatch(A.VD({indexAt:0})):r&&!T&&e.dispatch(A.VD({indexAt:1}))},ej=(0,el.D)((e,t,r,a,i=!1)=>{ey(e,t,r,a,i,!!r,e.dispatch)},200),ew=(0,ec.u4)((e,t)=>{((e,t=!1)=>{let r=[];Object.keys(e.folders).forEach(a=>{let i=e.folders[a],s=i.teamId?e.teams[i.teamId]:null;ev(i,s,e.user,t,e.orgId)&&((0,z.O2)(i)&&(i={...i,path:(0,ep.Q5)()}),r.push(i))}),eh.set(r.map(t=>{let r=t.teamId&&e.teams[t.teamId]&&{name:e.teams[t.teamId].name},a={path:t.path,teamId:t.teamId,id:t.id,subscription:!!t.subscription,...(0,ed.ZD)(t)};return r?{folder:a,team:r}:{folder:a}}))})(t.userResources,t.modalData.isPublishing),((e,t,r,a=!1,i,s,n)=>{ey(e,t,"",r,a,!1,e.dispatch,s,n,i)})(e,t.modalData,t.userResources,t.modalData.isPublishing,!1,t.currentFolderId,t.currentFolderTeamId)}),eT=(0,ec.u4)((e,t)=>{ej(e,t.modalData,t.query,t.userResources),e.dispatch(A.VG(t))});var eI=r(661897),eE=r(733791),ek=r(453393),eN=r(70523),eC=r(397739),eR=r(5794);let eS="file_move--main--RJ-w5",eO="file_move--iconContainer--IdUpK",eP="file_move--folderRowWrapper--Zmdf0",eA="file_move--folderRow--MU2cr",eD="file_move--horizontalDivider--3baYL";var eF=r(194401);function eM(e){let t=(0,n.v9)(e=>e.user),[r,a]=(0,s.useState)(""),o=e.dispatch,[l,d]=(0,s.useState)(!0);return(0,i.jsx)("form",{onSubmit:t=>{t.preventDefault(),(0,u.L9)("Create Team Inline",{trackingContext:e.trackingContextName}),r?(o((0,eC.$Y)({teamName:r,orgAccess:B.Zn.PUBLIC,dontRedirect:!0})),d(!0),a("")):o(eE.l.error((0,k.t)("flash.team_name_cannot_be_empty")))},children:(0,i.jsx)("div",{className:"file_move--teamCreateRow--k8Pna file_move--folderRow--MU2cr",children:l?(0,i.jsxs)("button",{type:"button",className:"file_move--rowButton--1xi2Q",onClick:()=>{null!=t&&!e.orgId&&(0,eN.hy)({userId:t.id,teams:Object.values(e.teams),rolesByTeamId:e.rolesByTeamId})?(o(F.hV()),o(ek.Nf({openInNewTab:!eI.YO}))):(d(!1),o(A.iO()))},children:[(0,i.jsx)(I.n,{className:"file_move--newProjectIconFileMove--GFGyN sidebar--icon--UneEX",svg:eF.Z}),(0,i.jsx)("span",{className:"file_move--newFolderNameCustomSections--3pvFN sidebar--sectionNameCustomSections--IeiYT sidebar--sectionTextCustomSections--WjjKl sidebar--sectionContentCustomSections--6Hzl4 ellipsis--ellipsis--70pHK",children:(0,k.tx)("file_browser.inline_team_creation.button_text")})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:eO,children:(0,i.jsx)(eR.qV,{size:16,shape:"SQUARE",color:"#E5E5E5"})}),(0,i.jsx)("div",{className:"file_move--newTeamTitleText--lIL4u file_move--teamTitleText--6mNiD ellipsis--ellipsis--70pHK",children:(0,i.jsx)(b.Sc,{value:r||"",onChange:e=>{a(e.target.value)},onBlur:()=>{d(!0)},className:"file_move--newTeamInput--Wd98h",maxLength:e.teamNameMaxWidth,placeholder:(0,k.t)("file_browser.inline_team_creation.placeholder"),autoFocus:!0})})]})})})}var eL=r(501164),eB=r(57742),eU=r(729947),eV=r(947501),eG=r(610614),ez=r(315238),eW=r(83906);let eH=(0,m.zg)(ef),eK="FileMoveModalContent";function eY(e){return"folder"===e.view||(0,K.gC)(e)?"_self":"_blank"}function eZ(e){return!!e.subscription||(0,z.O2)(e)}function e$(e){switch(e.type){case Z.M.FILE:let t=e.file;return t?.folder_id||null;case Z.M.REPO:let r=e.repo;return r?.folder_id||null;case Z.M.FILE_IMPORT:return null;default:(0,o.vE)(e)}}function eq(e){return(0,i.jsx)(h.X,{label:"FileMoveModalComponent",children:(0,i.jsx)(eQ,{...e})})}function eQ(e){let t=null;e.type===Z.M.FILE?t=e.file.parent_org_id||null:e.type===Z.M.REPO?t=e.repo.parent_org_id||null:e.type===Z.M.FILE_IMPORT&&(t=e.orgId);let r=(0,n.v9)(e=>e.orgById),a=t?r[t]:null,o=(0,n.v9)(e=>e.fileMove),l=(0,n.v9)(e=>!!e.creatingNewFolder),d=(0,n.v9)(e=>e.dropdownShown),c=(0,n.v9)(e=>e.selectedView),m=e$(e),_=(0,p.DG)(H.SF3,{projectId:m},{enabled:!!m}),x=(0,p.DG)(H.d$I,{orgId:t});"errors"===x.status&&(console.error("Loading AccessibleFolders from LiveGraph: "),console.error(x.errors));let h="loaded"===x.status&&("loaded"===_.status||e.type===Z.M.FILE_IMPORT)?{fetched:x,transformed:function(e,t,r){let a={id:e.currentUser.id,student_validated_at:e.currentUser.studentValidatedAt&&e.currentUser.studentValidatedAt.toString()},i={},s={},n={},o={byFolderId:{},byTeamId:{}},l=(0,U.$9)(e.currentUser),d=[],c=e=>{s[e.id]={...e,canEdit:!0,canRename:!!e.path}};e.currentUser.allOrgUsers&&e.currentUser.allOrgUsers.forEach(e=>{n[e.orgId]={[e.userId]:{...e,type:V.II.ORG_USER,account_type:e.accountType,design_paid_status:e.accountType,id:e.id,org_id:e.orgId,user_id:e.userId,user:{id:e.user.id,email:e.user.email||void 0,img_url:e.user.imgUrl,name:e.user.name||void 0,handle:e.user.handle},permission:e.permission,drafts_folder_id:e.draftsFolderId,created_at:e.createdAt.toString(),updated_at:e.updatedAt?.toString()||"",disabled_at:e.disabledAt&&e.disabledAt.toString(),whiteboard_paid_status:e.whiteboardPaidStatus||B.oz.STARTER,show_figjam_user_onboarding:null,has_shown_figjam_admin_launch_onboarding:null,has_shown_figjam_admin_onboarding:null,ecc_upgrading_locked:null,dev_mode_paid_status:e.devModePaidStatus||B.oz.RESTRICTED,active_seat_type:(0,L.fH)(e.activeSeatTypeUpgrade?.billableProduct)}},e.draftsProject&&(c(e.draftsProject),e.draftsProject.ownerRole&&(o.byFolderId[e.draftsProject.id]={[a.id]:(0,U.j9)(e.draftsProject.ownerRole,l,null,null)}))}),e.currentUser.teamEditRoles&&e.currentUser.teamEditRoles.forEach(e=>{if(!e.team)return;let{id:t,projects:r}=e.team;i[t]={...e.team,canView:e.level>=G.V5.VIEWER,canEdit:e.level>=G.V5.EDITOR,canAdmin:e.level>=G.V5.ADMIN,currentTeamUser:e.team.currentTeamUser,licenseGroup:null},o.byTeamId[t]={[a.id]:(0,U.j9)(e,l,null,null)},r&&r.forEach(e=>c(e))});let u=e&&e.org?e.org:null;if(u){if(t){let e=(0,f.Wg)(t.project);e&&e.canEdit&&c(e)}u.teams&&u.teams.forEach(e=>{let{id:t,orgEditProjects:r}=e;if(!i[t]){let r=e.canEdit,a=e.canAdmin,s=e.licenseGroup;i[t]={...e,canView:!1,canEdit:r??!1,canAdmin:a??!1,licenseGroup:s||null},d.push(t)}let a=(0,f.Wg)(r);a&&a.forEach(e=>{c(e)})})}return e.currentUser.teamRoles?.forEach(e=>{if(!e.team)return;let{id:t}=e.team;i[t]||(i[t]={...e.team,canEdit:!1,canAdmin:!1,canView:!1,currentTeamUser:e.team.currentTeamUser,licenseGroup:null},o.byTeamId[t]={[a.id]:(0,U.j9)(e,l,null,null)})}),e.currentUser.projectEditRoles&&e.currentUser.projectEditRoles.forEach(e=>{e.project&&(c(e.project),o.byFolderId[e.project.id]={[a.id]:(0,U.j9)(e,l,null,null)})}),e.currentUser.draftsProject&&(c(e.currentUser.draftsProject),e.currentUser.draftsProject.ownerRole&&(o.byFolderId[e.currentUser.draftsProject.id]={[a.id]:(0,U.j9)(e.currentUser.draftsProject.ownerRole,l,null,null)})),{org:u,user:a,teams:i,folders:s,roles:o,orgUsers:n,orgId:r,fileBrowserPreferences:e.currentUser.fileBrowserPreferences,implicitTeamRolesTeamIds:d}}(x.data,e.type!==Z.M.FILE_IMPORT?_.data:null,t)}:null,v=null===h?{loaded:!1}:{loaded:!0,userResources:h.transformed},b=null==m||null===h?null:h.transformed.folders[m],y=b?b.teamId:null,j=(0,n.I0)();s.useEffect(()=>{v.loaded&&j(ew({modalData:e,userResources:v.userResources,currentFolderId:m,currentFolderTeamId:y}))},[h&&h.fetched]);let w=[];if(v.loaded&&!t)for(let e in v.userResources.teams){let t=v.userResources.teams[e];"ok"!==t.subscription&&w.push(t.id)}let T=function(e){let[t,r]=s.useState((0,f.AC)()),a=e.join(",");return s.useEffect(()=>{if(0===a.length)return void r((0,f.wl)({}));r((0,f.AC)());let e=!1;return(async()=>{let t=await ee.getTeamRestrictionsLists({teamIds:a});e||r((0,f.wl)(t.data.meta))})(),()=>{e=!0}},[a]),t}(w);if("loaded"===T.status&&v.loaded)for(let e in v.userResources.teams){let t=v.userResources.teams[e];T.data[e]&&(t.restrictionsList=T.data[e])}return(0,g.fL)("loaded"===x.status,e=>{(0,u.L9)("file_move_modal_latency",{latency_ms:e},{forwardToDatadog:!0})}),(0,i.jsx)(eJ,{creatingNewFolder:l,currentOrg:a,dispatch:j,dropdownShown:d,fileMove:o,fileMoveData:e,modalId:e._modalId,selectedView:c,userResources:v})}class eJ extends s.PureComponent{constructor(){super(...arguments),this.state={newFileName:""},this.FILE_MOVE_DROPDOWN="file-move-dropdown",this.setScrollContainer=e=>{this.scrollContainer=e},this.scrollContainerRef=s.createRef(),this.isMovePageToNewFile=(0,l.BZ)().move_page_to_new_file&&this.props.fileMoveData.isMovePageToNewFile,this.onScroll=()=>{clearTimeout(this.previousTimeOutKey),this.props.fileMove.upDownKeyPressed&&this.props.dispatch(A.Tp({canFocus:!1})),this.previousTimeOutKey=setTimeout(()=>{this.props.fileMove.canMouseFocus||this.props.dispatch(A.Tp({canFocus:!0}))},200)},this.onkeydown=e=>{if(!this.props.userResources.loaded||this.props.creatingNewFolder||this.props.fileMove.folderRenaming||this.props.fileMove.isSearchFocused)return;let t=document.getElementById(eK);if((0,et.cr)(t))return;let{userResources:r}=this.props.userResources;switch(e.keyCode){case _.sr.ESCAPE:this.onClose();break;case _.sr.UP_ARROW:this.props.dispatch(A.PB());break;case _.sr.DOWN_ARROW:this.props.fileMove.indexCount&&this.props.dispatch(A.ld({upperBound:this.props.fileMove.indexCount}));break;case _.sr.ENTER:{if(-1===this.props.fileMove.focusedIndex)return;let e=this.props.fileMove.folderRows[this.props.fileMove.focusedIndex];if(e.type===$.NEW_FOLDER_TEAM){let t=e.id,a=r.teams[t];this.props.dispatch((0,N.nw)({where:this.props.modalId.type,team:{...(0,C.SR)(a),name:a.name,canEdit:!0}}))}else if(e.type===$.FOLDER_ROW){let t=r.folders[e.id];if(!t)break;this.move(t)}}}},this.onClose=()=>{this.props.fileMoveData.displayBanner?this.props.dispatch(F.eI()):this.props.dispatch(F.hV())},this.openOrgView=e=>{this.props.dispatch(P.fv({view:"org",orgId:e,orgViewTab:q.i.HOME}))},this.onOrgViewLinkClick=()=>{this.props.dispatch(F.hV()),this.props.currentOrg&&this.openOrgView(this.props.currentOrg.id)},this.moveToSelectedFolder=()=>{let e=this.getFocusedFolder();if(!e)return;let t=()=>{this.move(e)};if(this.isMovePageToNewFile&&this.props.fileMoveData.type!==Z.M.FILE_IMPORT){var r,a,i;this.onClose();let t=this.props.fileMoveData.type===Z.M.FILE?this.props.fileMoveData.fileKey:this.props.fileMoveData.repoId;r=this.props.fileMoveData.page_id,a=e.id,i=this.state.newFileName,(0,ei.sd)("startMovePagesJob","Send request to start move pages job."),es.ZP.post(`/api/files/${t}/move_pages`,{folder_id:a,page_ids:r,file_name:i}).catch(e=>{(0,ei.YD)("startMovePagesJob","Error with starting move pages job.",{err:e})}).then(()=>{(0,ei.sd)("startMovePagesJob","Move pages job successfully started.")});return}let s=this.props.fileMoveData;if(s.type===Z.M.FILE&&s.file.is_team_template&&(0,z.O2)(e))return void this.props.dispatch(F.K4({type:eo.Kz,data:{title:(0,k.tx)("templates.confirmation.move_to_drafts.title",{count:1}),content:(0,k.tx)("templates.confirmation.move_to_drafts.description"),confirmText:(0,k.tx)("templates.confirmation.move_to_drafts.button_v2"),destructive:!1,onConfirm:t}}));t()},this.move=c()(e=>{let t=this.props.fileMoveData;switch(t.type){case Z.M.FILE:this.moveFile(e,t.file);break;case Z.M.REPO:this.moveRepo(e,t.repo);break;case Z.M.FILE_IMPORT:for(let r of t.files)this.props.dispatch((0,W._)({name:r.name,blob:new Blob([r.contents]),folderId:e.id}));break;default:(0,o.vE)(t)}},2e3,{leading:!0,trailing:!1}),this.closeModal=()=>{this.props.dispatch(F.h0(this.props.modalId))},this.moveFile=(e,t)=>{if(e&&e.id!==t.folder_id){if(this.props.userResources.loaded){let r=this.props.userResources.userResources.teams[e.teamId||""]||null;this.closeModal(),this.props.dispatch(D.M({files:[t],folder:e,team:r,fromFileModal:!0,onFinishCallback:this.props.fileMoveData.afterFileMove?.callback}))}}else this.onClose()},this.moveRepo=(e,t)=>{if(e&&e.id!==t.folder_id){if(this.props.userResources.loaded){let r=this.props.userResources.userResources.teams[e.teamId||""]||null;this.closeModal(),this.props.dispatch(D.M({files:[],repos:[t],folder:e,team:r,fromFileModal:!0}))}}else this.onClose()},this.getModalTitle=()=>{let e=this.props.fileMoveData;if(this.isMovePageToNewFile)return(0,k.t)("file_browser.file_move.move_pages_to_new_file");{if(e.type===Z.M.FILE_IMPORT)return 1===e.files.length?(0,k.t)("file_browser.file_move.modal_header_import_file",{fileName:e.files[0].name}):(0,k.t)("file_browser.file_move.modal_header_import_files");let t=e.type===Z.M.FILE?e.file.name:e.repo.name;return(0,k.t)("file_browser.file_move.modal_header_move_file",{fileName:t})}},this.getFocusedFolder=()=>{if(!this.props.userResources.loaded)return null;let{userResources:e}=this.props.userResources,t=this.props.fileMove.folderRows[this.props.fileMove.focusedIndex];return t&&t.type===$.FOLDER_ROW?e.folders[t.id]:null},this.onFileMoveContextMenu=(e,t)=>{e.stopPropagation(),e.preventDefault(),this.props.fileMove.folderRenaming||this.props.dispatch(P.SP({type:this.FILE_MOVE_DROPDOWN,data:{folderId:t.id,position:{top:e.clientY,left:e.clientX,right:"auto",bottom:"auto"}}}))},this.handleInputChange=e=>{this.setState({newFileName:e.currentTarget.value})}}componentDidMount(){document.addEventListener("keydown",this.onkeydown),this.componentMountedAt=new Date}componentWillUnmount(){document.removeEventListener("keydown",this.onkeydown)}componentDidUpdate(e,t){!e.userResources.loaded&&this.props.userResources.loaded&&(this.props.fileMoveData.autoSelect&&this.props.dispatch(A.Tn({fileMove:this.props.fileMove})),this.props.dispatch(A.rE({isSearchFocused:!0})));let r=this.props.fileMove.focusedIndex;if(this.props.fileMove.upDownKeyPressed&&e.fileMove.focusedIndex!==r){if(!this.scrollContainerRef.current||-1===r)return;let e=this.props.fileMove.folderRows[r].positionTop,t=this.scrollContainer.getScrollTop(),a=this.scrollContainerRef.current.clientHeight;e<t?0===r?this.scrollContainer.scrollToTop():this.scrollContainer.scrollTo(e):e+eH>t+a&&(null!=this.props.fileMove.indexCount&&r===this.props.fileMove.indexCount-1?this.scrollContainer.scrollToBottom():this.scrollContainer.scrollTo(e-a+eH))}this.props.fileMove.upDownKeyPressed&&this.props.dispatch(A.Mh())}renderDropdown(){if(!this.props.userResources.loaded)return;let{userResources:e}=this.props.userResources,t=this.props.dropdownShown;if(!(t&&t.type===this.FILE_MOVE_DROPDOWN&&t.data&&t.data.folderId))return null;let r=e.folders[t.data.folderId];return r?(0,i.jsx)(e4,{folder:r,dropdownShown:this.props.dropdownShown,selectedView:this.props.selectedView,dispatch:this.props.dispatch}):null}render(){let e,t,r,a=this.props.fileMoveData.modalWidth||288,s=this.getModalTitle();if(!this.props.userResources.loaded)return(0,i.jsx)(er.xm,{title:s,fixedTop:!0,minWidth:a,maxWidth:a,onClose:this.onClose,truncateTitleText:!0,children:(0,i.jsx)("div",{className:eS,children:(0,i.jsx)(w.zP,{className:"file_move--spinner--sdS57"})})});let{userResources:n}=this.props.userResources,l=e$(this.props.fileMoveData),d=null==l?null:n.folders[l],c=this.getFocusedFolder();e=this.isMovePageToNewFile?null!=c&&0!==this.state.newFileName.length:this.props.fileMoveData.type===Z.M.FILE_IMPORT?null!=c:null!=c&&null!=d&&c.id!==d.id;let u=0===this.props.fileMove.teamOrder.length,m=!this.props.fileMove.folderSearchQuery&&this.props.fileMove.userTeamCount&&this.props.fileMove.userTeamCount<=1&&this.props.fileMoveData.type!==Z.M.FILE_IMPORT,_=this.props.fileMoveData;switch(_.type){case Z.M.FILE:t={fileKey:_.fileKey,fileTeamId:_.file&&_.file?.team_id,fileMoveModalEmptyState:m,orgId:this.props.currentOrg&&this.props.currentOrg?.id},r=_.file.editor_type??B.gg.DESIGN;break;case Z.M.REPO:t={repoId:_.repoId,fileMoveModalEmptyState:m,orgId:this.props.currentOrg&&this.props.currentOrg?.id},r=B.gg.DESIGN;break;case Z.M.FILE_IMPORT:t={},r=null;break;default:(0,o.vE)(_)}return(0,i.jsx)(M.Ui,{name:J.V4.FILE_MOVE_MODAL,properties:t,children:(0,i.jsxs)(er.xm,{title:s,fixedTop:!0,minWidth:a,maxWidth:a,onClose:this.onClose,truncateTitleText:!0,children:[m?(0,i.jsx)("div",{className:"file_move--mainZeroState---nRYj file_move--main--RJ-w5",id:eK,children:(0,i.jsxs)("div",{className:"file_move--zeroStateModal--yGiU1",children:[(0,i.jsx)("div",{style:{paddingTop:"100px"},children:(0,k.tx)("file_browser.file_move.zero_state")}),this.props.currentOrg&&(0,i.jsx)("div",{className:E.B.pt20.$,children:(0,i.jsx)(b.DF,{onClick:this.onOrgViewLinkClick,children:this.props.currentOrg.bigma_enabled?(0,k.t)("file_browser.file_move.view_workspaces"):(0,k.t)("file_browser.file_move.view_teams")})})]})}):(0,i.jsxs)("div",{className:eS,id:eK,children:[this.isMovePageToNewFile?(0,i.jsx)(en,{newFileName:this.state.newFileName,onChange:this.handleInputChange}):(0,i.jsx)("div",{className:"file_move--searchWrapperNew--iosBP",children:(0,i.jsx)(eX,{fileMoveData:this.props.fileMoveData,folderCount:this.props.fileMove.indexCount,focusedIndex:this.props.fileMove.focusedIndex,getFocusedFolder:this.getFocusedFolder,searchQuery:this.props.fileMove.folderSearchQuery,moveFolder:this.move,dispatch:this.props.dispatch,userResources:n})}),(0,i.jsx)("div",{className:eD}),this.props.fileMoveData.displayBanner&&!this.isMovePageToNewFile&&(0,i.jsxs)(i.Fragment,{children:[this.props.fileMoveData.displayBanner,(0,i.jsx)("div",{className:eD})]}),this.props.fileMove.folderSearchQuery&&!this.isMovePageToNewFile&&u?(0,i.jsx)("div",{className:"file_move--emptyModal--MU0ey",children:(0,k.tx)("search.file_move.no_results_found",{folderSearchQuery:this.props.fileMove.folderSearchQuery})}):(0,i.jsx)(T.l,{width:a,className:"file_move--teamSectionBody--tt4Lj",ref:this.setScrollContainer,scrollContainerRef:this.scrollContainerRef,onScroll:this.onScroll,children:(0,i.jsx)(e5,{componentMountedAt:this.componentMountedAt,creatingNewFolder:this.props.creatingNewFolder,currentFolderId:l,dispatch:this.props.dispatch,fileEditorType:r,fileMove:this.props.fileMove,folders:n.folders,indexOffsets:this.props.fileMove.indexOffsets,onDoubleClick:this.moveToSelectedFolder,onFileMoveContextMenu:this.onFileMoveContextMenu,orgId:n.orgId,rolesByTeamId:n.roles.byTeamId,selectedView:this.props.selectedView,teamNameMaxWidth:a-88,teams:n.teams})}),(0,i.jsxs)("div",{className:"file_move--footer--oq3rF",children:[(0,i.jsx)(b.PL,{onClick:this.onClose,children:(0,k.tx)("modal.cancel")}),(0,i.jsx)(b.RS,{disabled:!e,onClick:this.moveToSelectedFolder,children:this.props.fileMoveData.moveText||(0,k.t)("file_browser.file_move.move")})]})]}),this.renderDropdown(),(0,i.jsx)(e9,{fileMove:this.props.fileMove,creatingNewFolder:this.props.creatingNewFolder})]})})}}eJ.displayName="FileMoveModal";class eX extends s.PureComponent{constructor(e){super(e),this.onFocus=()=>{this.props.dispatch(A.iO()),this.props.dispatch(A.rE({isSearchFocused:!0}))},this.onBlur=()=>{this.props.dispatch(A.rE({isSearchFocused:!1}))},this.onChange=e=>{e.stopPropagation(),this.props.dispatch(eT({modalData:this.props.fileMoveData,query:e.currentTarget.value,userResources:this.props.userResources}))},this.onSearchKeyDown=e=>{e.stopPropagation();let t=this.searchInputRef.current;switch(e.keyCode){case _.sr.DOWN_ARROW:t&&t.blur(),null!=this.props.folderCount&&this.props.dispatch(A.ld({upperBound:this.props.folderCount}));break;case _.sr.UP_ARROW:t&&t.blur(),this.props.dispatch(A.PB());break;case _.sr.ESCAPE:if(!t)break;t.value?(t.value="",this.props.dispatch(eT({modalData:this.props.fileMoveData,query:"",userResources:this.props.userResources}))):this.props.dispatch(F.hV()),this.props.dispatch(A.iO());break;case _.sr.TAB:t&&t.blur(),this.props.dispatch(A.iO());break;case _.sr.ENTER:{t&&t.blur();let e=this.props.getFocusedFolder();e&&this.props.moveFolder(e)}}},this.searchInputRef=s.createRef()}componentDidMount(){let e=this.searchInputRef.current;e&&e.focus()}render(){return(0,i.jsxs)("div",{className:"file_move--searchContainer--SCO5E",children:[(0,i.jsx)("div",{className:eO,children:(0,i.jsx)(I.n,{svg:eV.Z})}),(0,i.jsx)(j.H,{ref:this.searchInputRef,placeholder:(0,k.t)("file_browser.file_move.search_placeholder"),onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onSearchKeyDown,className:this.props.searchQuery?"file_move--searchInputNew--hC3Co":"file_move--searchInputEmptyNew--KO3-o file_move--searchInputNew--hC3Co",value:this.props.searchQuery,onChange:this.onChange})]})}}function e0(e){let{team:t,teamId:r}=e,[a,{onMouseOver:n,onMouseOut:o}]=(()=>{let[e,t]=(0,s.useState)(!1),r=(0,s.useCallback)(()=>t(!0),[t]),a=(0,s.useCallback)(()=>t(!1),[t]);return(0,s.useMemo)(()=>[e,{onMouseOver:r,onMouseOut:a}],[e,r,a])})(),l=(0,p.DG)(H.rAQ,{teamId:t?.id??""},{enabled:!!t?.id}),d=l.data?.team?.teamFileCounts||Y.Ms,c=e.fileNotInTeam&&e.fileEditorType&&t&&!(0,Y.K3)(t,{type:Y.Xy.ADD_FILE,editorType:e.fileEditorType,teamFileCounts:d});return(0,i.jsx)(i.Fragment,{children:e.showTitle&&(0,i.jsxs)("div",{className:"file_move--teamTitleNew--OMMcM text--fontPos12--oWc5z text--_fontBase--VaHfk",onMouseOver:n,onMouseLeave:o,children:[(r===A.ft||r===A.a3)&&(0,i.jsx)("div",{className:eO,children:(0,i.jsx)(I.n,{svg:ez.Z})}),(0,i.jsxs)("div",{className:"file_move--teamTitleRow--cryRD",children:[(0,i.jsxs)("div",{className:"file_move--teamName--dIqNj",children:[(0,i.jsx)("div",{className:"file_move--teamTitleText--6mNiD ellipsis--ellipsis--70pHK",style:{maxWidth:e.teamNameMaxWidth},children:r===A.ft||r===A.a3?(0,k.t)("file_browser.shared_projects"):t.name}),c&&(0,i.jsx)("div",{className:"file_move--warningIcon--2vg1t",children:(0,i.jsx)(I.n,{svg:eB.Z,"data-tooltip-type":Q.fR.TEXT,"data-tooltip":(0,k.t)("file_browser.file_move.paywall_team_tooltip")})})]}),a&&t&&!c&&(0,i.jsx)("div",{className:"file_move--newProjButton--9lnDU",children:(0,i.jsx)(O,{team:t,isBackgroundTransparent:!0,trackingContextName:J.V4.FILE_MOVE_MODAL})})]})]})})}function e1(e){let t=(0,s.useRef)(null),[r,a]=(0,s.useState)(!1),o=(0,n.I0)();return(0,s.useEffect)(()=>{!r&&e.isTeamNew&&t.current&&e.hasFolderSection&&(o(A.VD({indexAt:e.firstFolderFocusedIndex})),t.current.scrollIntoView(),a(!0))},[e.isTeamNew,e.hasFolderSection,e.firstFolderFocusedIndex,r,t,o]),(0,i.jsx)("div",{className:e.className,ref:t,children:e.children})}function e5(e){let{fileMove:t,teams:r,selectedView:a}=e,s=Object.values(r).map(e=>(function(e){let t=null!=e.orgId,r=e.subscription===B.Qe.INCOMPLETE||e.subscription===B.Qe.OK;return{id:e.id,subscription:e.subscription,starter_team:!t&&!r,pro_team:r,org_team:t,student_team:!!e.studentTeamAt,deleted_at:e.deletedAt?.toString()||null}})(e));return(0,i.jsxs)("div",{children:[null!=t.teamOrder&&t.teamOrder.map(a=>{let s=a!==A.a3,n=a!==A.ft&&a!==A.a3,o=(t.foldersByTeamId?.[a]||[]).length>0;if(!(s||n||o))return null;let l=r[a];if(!l&&a!==A.ft&&a!==A.a3||a===A.a3&&!e.orgId)return null;let d=l?new Date(r[a].createdAt):void 0,c=d&&d>e.componentMountedAt,u=t.indexOffsets[a]+1,m=!!e.currentFolderId&&a!==e.folders[e.currentFolderId]?.teamId;return(0,i.jsxs)(e1,{className:"file_move--teamSection--icBDq",isTeamNew:c,firstFolderFocusedIndex:u,hasFolderSection:o,children:[(0,i.jsx)(e0,{team:l,teamId:a,showTitle:s,isACustomTeam:n,fileNotInTeam:m,teamNameMaxWidth:e.teamNameMaxWidth,indexOffsets:e.indexOffsets,fileEditorType:e.fileEditorType}),o&&(t.foldersByTeamId[a]||[]).map((r,s)=>{let o=s+e.indexOffsets[a];return n&&(o+=1),(0,i.jsx)(e2,{currentFolderId:e.currentFolderId,focusedFolderIndex:t.focusedIndex,folder:r,folderBeingRenamed:t.folderRenaming,folders:e.folders,index:o,isSearchingFolders:!!t.isSearchResult,onDoubleClick:e.onDoubleClick,onFileMoveContextMenu:e.onFileMoveContextMenu,trackingContextName:J.V4.FILE_MOVE_MODAL},`${r.teamId} ${r.id}`)})]},`Team Section ${a}`)}),!e.orgId&&(0,i.jsx)(eM,{teamNameMaxWidth:e.teamNameMaxWidth,trackingContextName:J.V4.FILE_MOVE_MODAL,orgId:e.orgId,selectedView:a,teams:s,rolesByTeamId:e.rolesByTeamId,dispatch:e.dispatch})]})}function e2(e){let t=(0,n.I0)(),r=(0,x.wV)(N.Y$),a=e.folderBeingRenamed===e.folder.id,s=e.focusedFolderIndex===e.index,o=e.folderBeingRenamed?eP:s?"file_move--folderRowWrapperFocusedNew--t6En2 file_move--folderRowWrapper--Zmdf0":eP,{folder:l}=e;return(0,i.jsx)("div",{className:o,onMouseDown:()=>{t(A.VD({indexAt:e.index}))},onContextMenu:t=>{e.onFileMoveContextMenu(t,l)},onDoubleClick:()=>{a||e.onDoubleClick()},children:a?(0,i.jsx)("div",{className:eA,children:(0,i.jsx)(y.I,{className:"file_move--renameInput--K-mmB",placeholderValue:(0,z.R_)(l),submit:a=>{(0,u.L9)("Rename Folder",{trackingContext:e.trackingContextName}),r({folderId:l.id,folderName:a}),t(A.eH())},cancel:()=>{t(A.eH())}},`input ${l.id}`)}):((t,r)=>{let a=eZ(t)&&e.isSearchingFolders,s=e.focusedFolderIndex&&e.focusedFolderIndex>-1?r:e.currentFolderId===t.id,n=(0,z.Tf)(t)?eW.Z:eU.Z;return(0,i.jsxs)("div",{className:eA,children:[(0,i.jsx)("div",{className:eO,children:(0,i.jsx)(I.n,{svg:s?eL.Z:n})}),(0,i.jsx)("span",{className:"file_move--folderName--IrfXM ellipsis--ellipsis--70pHK",children:(0,z.R_)(t)}),(0,i.jsx)("div",{className:eO,children:a&&(0,i.jsx)(I.n,{svg:eG.Z})})]})})(l,s)},`${l.teamId} ${l.id}`)}eX.displayName="FileMoveSearch";class e4 extends s.PureComponent{constructor(){super(...arguments),this.renameFolder=()=>{this.props.dispatch(A.$8({folderId:this.props.folder.id}))}}render(){let e=this.props.folder,t=e.canRename,r=eY(this.props.selectedView);return(0,i.jsxs)(v.Lt,{className:"file_move--fileMoveContextMenu--ZLCYC",style:this.props.dropdownShown.data.position,children:[(0,i.jsx)(v.Wx,{disabled:!t,onClick:this.renameFolder,children:(0,k.tx)("file_browser.file_move.context_menu_rename")}),(0,i.jsx)(v.Z0,{}),(0,i.jsx)(v.Wx,{href:(0,R.DS)(e.id,e.orgId),target:r,children:(0,k.tx)("file_browser.file_move.context_menu_show_in_files")})]})}}e4.displayName="FileMoveDropdown";class e9 extends s.PureComponent{constructor(){super(...arguments),this.hiddenDivRef=e=>{this.hiddenDiv=e}}componentDidUpdate(){!this.props.fileMove||this.props.fileMove.folderRenaming||this.props.fileMove.isSearchFocused||this.props.creatingNewFolder||null==this.hiddenDiv||this.hiddenDiv.focus()}render(){return(0,i.jsx)("div",{ref:this.hiddenDivRef,tabIndex:0})}}e9.displayName="FileMoveHiddenDiv"},713837:function(e,t,r){r.r(t),r.d(t,{MoveDraftToProjectInterstitialModal:()=>g});var a=r(750357),i=r(577851),s=r(53022),n=r.n(s),o=r(365448),l=r(739842),d=r(590914),c=r(627482),u=r(469271),m=r(121142),_=r(926941),p=r(155969),f=r(274065),x=r(117666);function g(e){let t=(0,i.I0)(),r=()=>{t(m.v({dismissed_move_draft_to_project_interstitial_modal:!0})),t(u.eI())};return(0,a.jsx)(_.Ui,{name:"MoveDraftToProjectInterstitialModal",children:(0,a.jsxs)(p.A2,{title:(0,d.t)("file_browser.draft_to_project.title.plan_spaces"),titleClassName:f.r9,className:f.WC,size:320,popStack:!0,disableClickOutsideToHide:!0,children:[(0,a.jsx)(o.PZ,{className:n()(x.OY,x.UL),onClick:r}),(0,a.jsxs)("span",{children:[(0,d.tx)("file_browser.draft_to_project.body.plan_spaces"),(0,a.jsx)("br",{})]}),(0,a.jsxs)("div",{className:n()(f.UN,f.kD),children:[(0,a.jsx)("a",{target:"_blank",href:"https://help.figma.com/hc/articles/13838684089751-Starter-plan-permissions#drafts",children:(0,a.jsx)(l.pJ,{children:(0,d.tx)("general.learn_more")})}),(0,a.jsx)(l.RS,{className:f.iY,onClick:()=>{r(),(0,c.E)(e.file,e.repo,t,e.afterFileMove,e.bannerToDisplay)},children:(0,d.tx)("file_browser.draft_to_project.move")})]})]})})}},253591:function(e,t,r){r.d(t,{RD:()=>n,ap:()=>s});var a=r(276634),i=r(109643);r(608600);let s=i.Z.createLazyComponent(()=>Promise.all([r.e("7625"),r.e("1259"),r.e("7424"),r.e("4248"),r.e("592"),r.e("6481"),r.e("1402"),r.e("7571"),r.e("313"),r.e("1779"),r.e("6985"),r.e("6761"),r.e("476"),r.e("4126"),r.e("6006"),r.e("33"),r.e("3841"),r.e("390"),r.e("114"),r.e("9042"),r.e("5522"),r.e("6635"),r.e("1780"),r.e("8461"),r.e("3990"),r.e("1889"),r.e("8247"),r.e("224"),r.e("7907"),r.e("5157"),r.e("428"),r.e("2570")]).then(r.bind(r,608600)).then(e=>e.default),{loading:()=>null,error:a.NY.NONE,componentName:"FileBrowserOverlays"}),n=i.Z.createLazyComponent(()=>Promise.all([r.e("7625"),r.e("1259"),r.e("7424"),r.e("4248"),r.e("592"),r.e("6481"),r.e("1402"),r.e("7571"),r.e("313"),r.e("1779"),r.e("6985"),r.e("6761"),r.e("476"),r.e("4126"),r.e("6006"),r.e("33"),r.e("3841"),r.e("390"),r.e("114"),r.e("9042"),r.e("5522"),r.e("6635"),r.e("1780"),r.e("8461"),r.e("3990"),r.e("1889"),r.e("8247"),r.e("224"),r.e("7907"),r.e("5157"),r.e("428"),r.e("2570")]).then(r.bind(r,128642)).then(e=>e.MakeFileCreationTooltip),{loading:()=>null,error:a.NY.NONE,componentName:"MakeFileCreationTooltip"})},384360:function(e,t,r){r.r(t),r.d(t,{EduUpgradeModal:()=>b});var a=r(750357),i=r(853505),s=r(577851),n=r(451410),o=r(514177),l=r(317429),d=r(739842),c=r(590914),u=r(513827),m=r(499503),_=r(453393),p=r(469271),f=r(404756),x=r(926941),g=r(956964),h=r(672650);function v({handleClose:e}){let t=(0,s.I0)(),r=i.useCallback(()=>{e(),t((0,_.Nf)({isEduTeam:!0}))},[t,e]);return(0,a.jsx)(d.Cr,{className:"edu_upgrade_modal--createTeamLink--1Y0f8 edu_upgrade_modal--link--G-rSj",onClick:r,trusted:!0,children:(0,c.tx)("edu.or_create_a_new_team")})}function b(){let e=(0,g.Mn)(),t=(0,s.I0)(),r=(0,u.k)(),b=i.useCallback(()=>{t(p.hV())},[t]),y=i.useCallback(e=>{b(),t(f.y4({teamId:e.id}))},[t,b]),j=i.useMemo(()=>(0,h.n$)(e),[e]);i.useLayoutEffect(()=>{0!==j.length||r||(b(),t((0,_.Nf)({isEduTeam:!0})))},[t,j.length,b,r]);let w=n.dd({open:!0,onClose:b});return(0,a.jsx)(x.Ui,{name:"Edu Team Upgrade Modal",children:(0,a.jsx)(o.fC,{manager:w,width:"lg",children:(0,a.jsxs)(l.AU,{children:[(0,a.jsx)(l.h4,{children:(0,a.jsx)(l.Dx,{autofocus:!0,children:(0,c.t)("edu.upgrade_teams.headline")})}),(0,a.jsx)(l.uT,{children:(0,a.jsxs)("div",{className:"edu_upgrade_modal--container--0PXkz",children:[(0,a.jsxs)("p",{className:"edu_upgrade_modal--bodyText--43miW",children:[(0,c.tx)("edu.upgrade_teams.body",{link:(0,a.jsx)(d.Cr,{className:"edu_upgrade_modal--link--G-rSj",href:"/pricing",target:"_blank",trusted:!0,children:(0,c.tx)("edu.upgrade_teams.body_link_text")})}),j.length>1&&(0,a.jsxs)(a.Fragment,{children:[" ",(0,c.tx)("edu.upgrade_teams.body_multiple_teams")]})]}),(0,a.jsx)(m.F,{eligibleTeams:j,selectTeam:y,showEditorCount:!1,customUpgradeText:(0,c.t)("general.next")}),!r&&(0,a.jsx)(v,{handleClose:b})]})})]})})})}},547699:function(e,t,r){r.d(t,{G:()=>a});let a="make-file-creation-tooltip-target"},128642:function(e,t,r){r.r(t),r.d(t,{MakeFileCreationTooltip:()=>O});var a=r(750357),i=r(853505),s=r(545449),n=r(574059),o=r(590914),l=r(606499),d=r(733265),c=r(70523),u=r(871567),m=r(919601),_=r(621298),p=r(479852),f=r(940358),x=r(661759),g=r(913408),h=r(417027),v=r(547699),b=r(492342),y=r(363240),j=r(551916),w=r(996679),T=r(595475),I=r(976682),E=r(577851),k=r(122610),N=r(694340),C=r(118960),R=r(676864);let S=(0,T.n_)("has_created_figma_make_file");function O({newFileFrom:e}){let t=function(){let e=function(){let e=(0,E.v9)(e=>e.user?.drafts_folder_id),t=(0,k.RY)(e),r=(0,N.N)(t.data),a=(0,C.Rm)(),i=(0,C.KO)(a).unwrapOr(!1);return t.transform(e=>{let t=r.find(({editorType:e})=>e===p.gg.FIGMAKE),a=i&&(0,R.O)();return!!t?.canCreate&&!a})}(),t=(0,b.BZ)().marketing_promo_modal_figmake_launch,r=(0,y.Dv)((0,I.RN)(h.S3t.lifecycle)),a=(0,y.Dv)(S),i=(0,y.Dv)((0,I.RN)(h.ieY.lifecycle));return j.IE.all([e,r,a,i]).transform(([e,r,a,i])=>{if(t){if(!r.lifecycleState||0===r.lifecycleState.count)return!1;let e=new Date(r.lifecycleState.updatedAt);if((0,w.Z)(e).isAfter((0,w.Z)().subtract(14,"day")))return!1}return!(a||(i.lifecycleState?.count??0)>0&&(0,w.Z)(i.lifecycleState?.updatedAt).isAfter((0,w.Z)().subtract(3,"day")))&&e})}(),r=(0,c.Ff)(),T="dark"===(0,m.Fg)(),{show:O,isShowing:P,complete:A}=(0,_.I)({overlay:h.VO,priority:f.b.SECONDARY_MODAL,experiment:{check:r,predicate:e=>e,postCheck:()=>!0}},[t]),D=(0,d.r)({isDraftsFolder:!0,editorType:p.gg.FIGMAKE,newFileFrom:e,contextClicked:"make_file_creation_tooltip"});(0,s.O)(()=>{O({canShow:e=>e})});let F=(0,l.B)();return i.useEffect(()=>{F&&A()},[F,A]),(0,a.jsx)(g.ZZ,{clickOutsideToHide:!0,description:(0,o.tx)("file_browser.make_file_creation_promos.description"),disableHighlight:!1,forceEditorTheme:"seascape",isShowing:P,media:(0,a.jsx)(x.H,{src:(0,n.o1)(T?"1a369818117cc7e77826ee246da5938968f29e43":"fcba05f6d2193657ef692fedecfcdf36b4eae871"),aspectRatio:726/540}),onClose:A,primaryCta:{label:(0,o.tx)("file_browser.make_file_creation_promos.cta"),type:"button",onClick:D,ctaTrackingDescriptor:u.y.TRY_FIGMA_MAKE},targetKey:v.G,title:(0,o.tx)("file_browser.make_file_creation_promos.title"),trackingContextName:"Figma Make File Creation Tooltip"})}},489504:function(e,t,r){r.r(t),r.d(t,{DowngradeSurveyModalAdmin:()=>D,DowngradeSurveyModalLeaveTeam:()=>F,DowngradeSurveyModal:()=>A});var a=r(750357),i=r(577851),s=r(632959),n=r(590914),o=r(65181),l=r(853505),d=r(444947),c=r(739842),u=r(469271),m=r(845277),_=r(68634);function p({id:e,label:t,children:r,onChange:i}){let[s,n]=l.useState(!1);return(0,a.jsxs)("fieldset",{name:e,children:[(0,a.jsxs)("div",{className:"survey_option--inputContainer--cUodA",children:[(0,a.jsx)(c.v_,{id:e,checked:s,onChange:e=>{n(!s),i&&i(e)}}),(0,a.jsx)("label",{className:"survey_option--label--h7n9c",htmlFor:e,children:t})]}),s&&r&&(0,a.jsx)("div",{className:"survey_option--subContainer--24OGX",children:r})]})}var f=r(527986),x=r(53022),g=r.n(x),h=r(879370),v=r(67e4),b=r(240191);function y(e){let[t,r]=l.useState(""),i=e=>{r(e.target.value)};return e.textarea?(0,a.jsx)(b.C,{value:t,onChange:i,...e}):(0,a.jsx)(c.Sc,{id:e.id,className:"survey_text_input--input--4NQaZ",placeholder:e.placeholder,maxLength:100,value:t,onChange:i})}let j="downgrade_survey_modal_component_v2--surveyQuestions--tMILw",w="downgrade_survey_modal_component_v2--researchContact--ctiJb",T="downgrade_survey_modal_component_v2--hiddenInput--8PlvS",I="downgrade_survey_modal_component_v2--radio--vVW1z",E=[{id:"brl",shorthand:"BRL"},{id:"cad",shorthand:"CAD"},{id:"eur",shorthand:"EUR"},{id:"gbp",shorthand:"GBP"},{id:"jpy",shorthand:"JPY"}];function k({id:e,shorthand:t}){return(0,a.jsxs)("div",{className:"downgrade_survey_modal_component_v2--currencyContainer--wMWT5",children:[(0,a.jsx)("p",{children:(0,n.tx)(`downgrade_survey.survey_option.too_expensive.${e}`)}),(0,a.jsx)("p",{className:"downgrade_survey_modal_component_v2--currencyShorthand--Kq066",children:t})]})}let N=[{id:"too_expensive",value:"Too expensive",children:(0,a.jsx)(function(){let e="other_currency",[t,r]=l.useState(""),i=e=>{r(e.currentTarget.id)},s=[...E.map(({id:e,shorthand:t})=>(0,a.jsx)(h.Wx,{id:e,onClick:i,children:(0,a.jsx)(k,{id:e,shorthand:t})},e)),(0,a.jsx)(h.Z0,{},"separator"),(0,a.jsx)(h.Wx,{id:e,onClick:i,children:(0,n.tx)("downgrade_survey.survey_option.too_expensive.other_currency")},e)];return(0,a.jsx)("fieldset",{children:(0,a.jsx)(p,{id:"currency_conversion",label:(0,n.t)("downgrade_survey.survey_option.too_expensive.currency_conversion"),children:(0,a.jsxs)("fieldset",{className:g()({"downgrade_survey_modal_component_v2--currencySelector__other--s59dy":t===e}),children:[(0,a.jsx)(h.ud,{label:t.length?(0,n.t)(`downgrade_survey.survey_option.too_expensive.${t}`):(0,n.t)("downgrade_survey.survey_option.too_expensive.currency_selector"),options:s}),(0,a.jsx)("input",{id:"currency",className:T,readOnly:!0,value:t}),t===e&&(0,a.jsx)(y,{id:"currency_input",placeholder:(0,n.t)("downgrade_survey.survey_option.too_expensive.specify_currency")})]})})})},{}),getSubOptions:e=>{let t=Array.from(e.getElementsByTagName("input")),r=t.find(e=>"currency_conversion"===e.id),a=t.find(e=>"currency"===e.id),i=a?.value,s=t.find(e=>"currency_input"===e.id),n=s?.value||i||void 0;return{currencyConversion:r?.checked,currency:n}}},{id:"billing_structure_unclear",value:"Billing structure is unclear"},{id:"no_longer_using_figma_products",value:"No longer using Figma's products",children:(0,a.jsx)(function(){return(0,a.jsxs)("fieldset",{children:[(0,a.jsx)("legend",{className:"downgrade_survey_modal_component_v2--additionalQuestion--5-GWH",children:(0,n.tx)("downgrade_survey.survey_option.no_longer_using_figma_products.other_products")}),(0,a.jsx)(y,{id:"other_products",placeholder:(0,n.t)("downgrade_survey.survey_option.no_longer_using_figma_products.text_area")})]})},{}),getSubOptions:e=>{let t=Array.from(e.getElementsByTagName("input")).find(e=>"other_products"===e.id);return{products:t?.value||void 0}}},{id:"project_inactive",value:"Project is over or no longer active"},{id:"accidental_upgrade",value:"Did not mean to upgrade"},{id:"switching_plans",value:"Switching to a different plan",children:(0,a.jsx)(function(){let[e,t]=l.useState("");return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(v.E,{value:e,onChange:e=>t(e),children:[(0,a.jsx)(v._,{className:I,value:"Starter plan",children:(0,n.tx)("downgrade_survey.survey_option.switching_plans.starter_plan")}),(0,a.jsx)(v._,{className:I,value:"Organization plan",children:(0,n.tx)("downgrade_survey.survey_option.switching_plans.organization_plan")}),(0,a.jsx)(v._,{className:I,value:"Enterprise plan",children:(0,n.tx)("downgrade_survey.survey_option.switching_plans.enterprise_plan")}),(0,a.jsx)(v._,{className:I,value:"Education plan",children:(0,n.tx)("downgrade_survey.survey_option.switching_plans.education_plan")})]}),(0,a.jsx)("input",{id:"new_plan",className:T,readOnly:!0,value:e})]})},{}),getSubOptions:e=>{let t=Array.from(e.getElementsByTagName("input")).find(e=>"new_plan"===e.id);return{newPlan:t?.value||void 0}}}],C={id:"other",value:"Other",children:(0,a.jsx)(function(){return(0,a.jsx)(y,{className:"downgrade_survey_modal_component_v2--otherTextArea--7UJRT",placeholder:(0,n.t)("downgrade_survey.survey_option.other.text_area"),textarea:!0})},{}),getSubOptions:e=>({explanation:e.getElementsByTagName("textarea")[0].value||void 0})},R=(0,f.TV)(N).concat(C);var S=r(573151),O=r(8690);function P({onSubmit:e}){let[t,r]=l.useState([]),s=e=>{let{id:a}=e.currentTarget;t.includes(a)?r(t.filter(e=>e!==a)):r([...t,a])},o=(0,i.I0)(),f=(0,m.A6)().teamId;return(0,a.jsx)(_.xm,{title:(0,n.t)("downgrade_survey.header"),fixedTop:!0,minWidth:370,maxWidth:370,onClose:()=>{o(u.hV())},dataTestId:"downgrade-survey-modal",children:(0,a.jsxs)("form",{className:"downgrade_survey_modal_component_v2--modalBody--Iwzfh",onSubmit:r=>{r.preventDefault();let a=Array.from(r.currentTarget.getElementsByClassName(j)[0].getElementsByTagName("fieldset")),i=t.map(e=>{let t=a.find(t=>t.name===e),{value:r,getSubOptions:i}=R.find(t=>t.id===e);return{reason:r,...i&&i(t)}}),s=r.currentTarget.getElementsByClassName(w)[0].getElementsByTagName("input")[0].checked;(0,d.L9)("Team Downgrade Survey",{teamId:f,canContact:s,selectedOptions:i.map(e=>JSON.stringify(e))}),e?.(),o(u.hV())},children:[(0,a.jsxs)("div",{className:"downgrade_survey_modal_component_v2--exitSurvey--DTJPO",children:[(0,a.jsxs)("fieldset",{className:j,children:[(0,a.jsx)("legend",{children:(0,n.tx)("downgrade_survey.what_made_you_cancel_your_plan")}),!t.length&&(0,a.jsx)("p",{className:O.j,children:(0,n.tx)("downgrade_survey.select_one")}),R.map(({id:e,children:t})=>(0,a.jsx)(p,{id:e,label:(0,n.t)(`downgrade_survey.survey_option.${e}`),onChange:s,children:t},e))]}),(0,a.jsxs)("fieldset",{className:w,children:[(0,a.jsx)("legend",{children:(0,n.tx)("downgrade_survey.research_contact")}),(0,a.jsx)(p,{id:"research",label:(0,n.t)("downgrade_survey.allow_research_contact")})]})]}),(0,a.jsx)("div",{className:"downgrade_survey_modal_component_v2--buttonRow--HNhw7",children:(0,a.jsx)(c.RS,{type:"submit",disabled:!t.length,className:S.iY,autoFocus:!1,children:(0,n.tx)("downgrade_survey.continue")})})]})})}function A({context:e}){let t=(0,i.I0)(),r=(0,i.v9)(e=>e.modalShown?.data.teamId),l=(0,i.v9)(e=>e.teams[r]),d="admin"===e?(0,n.t)("downgrade_survey.go_back"):(0,n.t)("downgrade_survey.do_not_leave_team"),c="leave-team"===e?()=>{(0,s.x9)("User entered leave team survey"),t(o.IV({team:l,userInitiated:!0}))}:void 0;return(0,a.jsx)(P,{cancelText:d,onSubmit:c})}function D(){return(0,a.jsx)(A,{context:"admin"})}function F(){return(0,a.jsx)(A,{context:"leave-team"})}},921431:function(e,t,r){r.r(t),r.d(t,{FolderBatchAbandonedDraftDeleteConfirmModal:()=>u});var a=r(750357),i=r(577851),s=r(444947),n=r(903132);if(9793==r.j)var o=r(733791);var l=r(590914),d=r(132880),c=r(155969);function u({folders:e}){let t=(0,i.I0)(),r=(0,n.wV)(d.Ek);return(0,a.jsx)(c.Jd,{confirmationTitle:(0,l.t)("file_browser.delete_project.title"),destructive:!0,confirmText:(0,l.t)("file_browser.batch_delete_project.generic_confirm_label"),onConfirm:()=>{e.forEach(e=>{(0,s.L9)("Folder Batch Abandoned Draft Delete Confirmation Click",{folderId:e.id,teamId:e.teamId,orgId:e.orgId})}),r({folderIds:e.map(e=>e.id)}).catch(()=>{t(o.l.error((0,l.t)("file_browser.api_folder.error_when_deleting")))})},children:(0,l.tx)("file_browser.batch_delete_projects.confirm_text_trash_section",{numProjects:e.length})})}},236242:function(e,t,r){r.r(t),r.d(t,{FolderMoveModal:()=>q});var a=r(750357),i=r(853505),s=r(577851),n=r(451410),o=r(514177),l=r(317429),d=r(403706),c=r(492342);r(607906);var u=r(53022),m=r.n(u),_=r(458780),p=r(45190),f=r(195787),x=r(158639),g=r(739842),h=r(589937),v=r(558089),b=r(240473),y=r(590914),j=r(659461),w=r(101670),T=r(469271),I=r(926941),E=r(388798),k=r(132880),N=r(956964),C=r(753392),R=r(10553),S=r(800583),O=r(118960),P=r(892243),A=r(372908),D=r(826250),F=r(95238),M=r(5794),L=r(68634),B=r(830851),U=r(677375),V=r(765997);let G="folder_move--iconContainer--1lQ2Q file_move--iconContainer--IdUpK",z="folder_move--teamTitleRow--vtD-x file_move--teamTitleRow--cryRD",W="folder_move--teamName--gk-XM file_move--teamName--dIqNj",H="folder_move--warningContainer--jdNwu";var K=r(396250),Y=r(501164),Z=r(167894),$=r(266526);function q(e){return(0,a.jsx)(x.X,{label:"FolderMoveModal",children:(0,a.jsx)(Q,{...e})})}function Q(e){let t,r,d=(0,s.I0)(),u=(0,V.b)(),m=(0,s.v9)(e=>e.currentUserOrgId),x=(0,s.v9)(e=>null!=m?e.orgById[m]:null),j=(0,p.DG)(R.cm,{currentOrgId:m,currentTeamId:null,folderId:e.folderId}),w=(0,s.v9)(t=>t.folders[e.folderId]),[C,O]=(0,i.useState)(void 0),[M,G]=(0,i.useState)(void 0),z="loaded"===j.status?{...j.data.currentUser}:null,W=E.t.useTrackingContext({trigger:P.V.FOLDER_MOVE_MODAL}),Y={},$=[],q=(0,N.Mn)();if(z){let e=[];(z.teamRoles??[]).forEach(t=>{if(t.team?.orgId===m&&!t.team?.deletedAt&&!t.pending){if(t.team?.id===w?.team_id){r=t;return}e.push(t),t.team?.workspace?.id?(Y[t.team.workspace?.id]=Y[t.team.workspace?.id]??[],Y[t.team.workspace?.id].push(t)):t.team&&$.push(t)}});let a=z.baseOrgUser?.workspaceUsers;t=a?.find(e=>e?.isMainWorkspace)?.workspaceId}let Q=()=>{(0,c.BZ)().folder_move_modal_fpl&&e.onClose(),d(T.hV())},ee=n.dd({open:e.open,onClose:Q}),et=(e,t)=>{O(e),G(t)},er=(0,i.useCallback)(()=>{if(C&&!M){let e=(0,D.HB)(C?.id,C.orgId);_.ZP.redirect(e,"_blank")}},[C,M]),ea=(0,i.useCallback)(e=>{if(!x)return;let t={workspaceId:e??A.F,onSubmitReturnToPrevView:!1};d(T.K4({type:B.d3,data:t}))},[x,d]),ei=e=>(0,a.jsx)(a.Fragment,{children:e.map(e=>(0,a.jsx)(X,{team:e.team,selectedTeamId:C?.id,onSelectTeam:et,permissionsState:q},e.id))}),es=e=>(0,a.jsx)(X,{team:e.team,selectedTeamId:C?.id,isCurrentTeam:!0,permissionsState:q,onSelectTeam:et},e.id);if(!w)return null;let en=Object.keys(Y).length>0,eo=C&&r&&r.team.id===C.id,el=(0,y.t)("file_browser.folder_move.modal_header",{folderName:w.name}),ed=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.PL,{onClick:Q,children:(0,y.tx)("modal.cancel")}),(0,a.jsx)(g.RS,{onClick:()=>{null!=C&&w?d((0,k.II)({folder:(0,S.ld)(w),team:C,onSuccess:Q})):Q()},disabled:void 0===C||!M||!!eo,children:(0,y.tx)("file_browser.folder_move.move_project")})]}),ec=(0,a.jsx)("div",{className:"folder_move--teamSection--vYShZ file_move--teamSection--icBDq",children:en?(function(e,t,r){let a=t?.team?.workspace?.id??null,i=[a];return r&&r!==a&&e[r]&&i.push(r),Object.keys(e).filter(e=>e!==a&&e!==r).sort((t,r)=>{let a=e[t][0]?.team?.workspace?.name?.toLocaleUpperCase()??"",i=e[r][0]?.team?.workspace?.name?.toLocaleUpperCase()??"";return a<i?-1:+(a>i)}).forEach(e=>{i.push(e)}),null!==a&&i.push(null),i})(Y,r,t).map(e=>{if(null===e){if($.length>0)return(0,a.jsxs)(i.Fragment,{children:[(0,a.jsx)(J,{headerName:(0,y.t)("sidebar.workspaces.other_teams"),onCreateNewTeamClick:ea,workspaceId:null}),null!=r&&r.team?.workspace?.id==null&&es(r),ei($)]},"other_teams_key")}else if(Y[e]){let t=Y[e],s=t?t[0].team?.workspace??null:null;return(0,a.jsxs)(i.Fragment,{children:[(0,a.jsx)(J,{headerName:s?.name??"",onCreateNewTeamClick:ea,workspaceId:s?.id??null}),null!=r&&r.team?.workspace?.id===e&&es(r),ei(t)]},e)}}):(0,a.jsxs)(a.Fragment,{children:[x&&(0,a.jsx)(J,{headerName:x.name,onCreateNewTeamClick:ea,workspaceId:null},"org_teams_header"),null!=r&&es(r),ei($)]})}),eu=C&&!M&&(0,a.jsx)("div",{className:H,children:(0,a.jsxs)("div",{className:"folder_move--warningBanner--3H5LR",children:[(0,a.jsx)("div",{className:"folder_move--warningSectionIcon--gFjr8",children:(0,a.jsx)(b.n,{svg:Z.Z})}),(0,a.jsxs)("div",{children:[(0,y.tx)("file_browser.folder_move.move_project_no_edit_access_warning"),(0,a.jsxs)("div",{className:"folder_move--warningCTALink--vLsqs",onClick:er,role:"link",tabIndex:0,children:[(0,y.tx)("file_browser.folder_move.view_team"),(0,a.jsx)("div",{className:"folder_move--arrowRightIcon--hQ9Tr",children:(0,a.jsx)(b.n,{svg:K.Z})})]})]})]})}),em=(u||(0,U.Sj)())&&!x&&C&&M&&"loaded"===j.status&&j.data?.project?.hasPublishedSite.status==="loaded"&&(0,f.Wg)(j.data?.project?.hasPublishedSite)&&(0,a.jsx)("div",{className:H,children:(0,a.jsx)(h.f,{dataTestId:"project-move-site-unpublish-banner",color:h.Z.ERROR,text:(0,y.t)("file_browser.file_move.sites_unpublished_on_project_move_warning")})});return(0,c.BZ)().folder_move_modal_fpl?(0,a.jsx)(I.Ui,{name:F.V4.FILE_MOVE_MODAL,properties:W,children:(0,a.jsx)(o.fC,{manager:ee,width:"md",children:(0,a.jsxs)(l.AU,{children:[(0,a.jsx)(l.h4,{children:(0,a.jsx)(l.Dx,{children:el})}),(0,a.jsx)(l.uT,{padding:0,children:ec}),(0,a.jsxs)(l.Ui,{...{className:"x78zum5 xdt5ytf xkib98w x167g77z"},children:[eu,em,(0,a.jsx)(l.Dj,{children:ed})]})]})})}):(0,a.jsx)(I.Ui,{name:F.V4.FILE_MOVE_MODAL,properties:W,children:(0,a.jsx)(L.xm,{title:el,fixedTop:!0,minWidth:288,maxWidth:288,onClose:Q,truncateTitleText:!0,children:(0,a.jsxs)("div",{className:"folder_move--main--CjzaL file_move--main--RJ-w5",children:[(0,a.jsx)(v.l,{className:"folder_move--teamSectionBody--NaYTK file_move--teamSectionBody--tt4Lj",children:ec}),(0,a.jsxs)("div",{...{className:"x78zum5 xdt5ytf x178xt8z x13fuv20 x16ufvko"},children:[eu,em,(0,a.jsx)("div",{className:"folder_move--footer--N6gQD file_move--footer--oq3rF",children:ed})]})]})})})}function J(e){let[t,r]=(0,i.useState)(!1);return(0,a.jsxs)("div",{className:"folder_move--teamsHeaderRow--VMFmx text--fontPos12--oWc5z text--_fontBase--VaHfk",onMouseMove:()=>r(!0),onMouseLeave:()=>r(!1),children:[(0,a.jsx)("div",{children:e.headerName}),t&&(0,a.jsx)(w.V,{data_tooltip:(0,y.t)("file_browser.inline_team_creation.button_text"),data_onboarding_key:"new-team-button",innerText:(0,y.t)("file_browser.inline_team_creation.button_text"),onClick:()=>{e.onCreateNewTeamClick(e.workspaceId)}})]})}function X(e){let{team:t}=e,r=t?.canEdit??!1,i=(0,O.Rm)().unwrapOr(null),s=(0,C.R)(i?.planRecordId);if(null==t)return(0,a.jsx)(a.Fragment,{});let n=m()("folder_move--teamTitle--TUdW9 file_move--teamTitle--8QZeR text--fontPos12--oWc5z text--_fontBase--VaHfk",e.isCurrentTeam&&!e.selectedTeamId||e.selectedTeamId===e.team?.id?"folder_move--selectedTeamTitle--x4lNR":"",(0,c.BZ)().folder_move_modal_fpl?"folder_move--teamTitleFpl--GmVVE":""),o=t?(0,a.jsx)(M.lO,{shape:"ROUNDED_SQUARE",hideFallbackInitial:!0,entity:t,size:{imgSize:j.DZ.SMALL,fallbackSize:j.DZ.SMALL}}):$.Z,l=s?e.isCurrentTeam?(0,a.jsx)(b.n,{svg:Y.Z}):o:(0,a.jsx)(b.n,{svg:e.isCurrentTeam?Y.Z:$.Z});return(0,c.BZ)().folder_move_modal_fpl?(0,a.jsxs)(d.h,{className:n,onClick:()=>{e.onSelectTeam&&e.onSelectTeam(t,r)},"aria-pressed":e.isCurrentTeam&&!e.selectedTeamId||e.selectedTeamId===e.team?.id,children:[(0,a.jsx)("div",{className:G,children:l}),(0,a.jsx)("div",{className:z,children:(0,a.jsx)("div",{className:W,children:t.name})}),e.selectedTeamId===t.id&&!r&&(0,a.jsx)("div",{className:G,children:(0,a.jsx)(b.n,{svg:Z.Z})})]}):(0,a.jsxs)("div",{className:n,onClick:()=>{e.onSelectTeam&&e.onSelectTeam(t,r)},role:"button",tabIndex:0,children:[(0,a.jsx)("div",{className:G,children:l}),(0,a.jsx)("div",{className:z,children:(0,a.jsx)("div",{className:W,children:t.name})}),e.selectedTeamId===t.id&&!r&&(0,a.jsx)("div",{className:G,children:(0,a.jsx)(b.n,{svg:Z.Z})})]})}},797770:function(e,t,r){r.r(t),r.d(t,{FolderPermanentlyDeleteConfirmModal:()=>h});var a=r(750357),i=r(577851),s=r(451410),n=r(514177),o=r(317429),l=r(5929),d=r(444947),c=r(903132),u=r(661193),m=r(733791),_=r(590914),p=r(860318),f=r(132880),x=r(380904),g=r(939037);function h(e){var t;let r=(0,i.I0)(),h=s.dd({open:e.open,onClose:e.onClose}),v=(0,c.wV)(f.Q6),b=(0,g.n)(e.folder.id,!0),y=(0,a.jsx)("span",{className:u.B.fontBold.$,children:(0,x.R_)(e.folder)}),j=(0,_.t)("file_browser.delete_project.delete_project"),w="loaded"!==b.status?(0,_.tx)("file_browser.delete_project.generic_confirm_text_permanently_delete_folder",{folderName:y}):0===(t=b.data)?(0,_.tx)("file_browser.delete_project.zero_file_confirm_text_permanently_delete_folder",{folderName:y}):(0,_.tx)("file_browser.delete_project.plural_files_confirm_text_permanently_delete_folder",{folderName:y,numFiles:(0,p.H)(t)}),T="loaded"===b.status&&0===b.data?(0,_.tx)("file_browser.delete_project.once_deleted_this_project_can_no_longer_be_restored"):(0,_.tx)("file_browser.delete_project.once_deleted_this_project_and_its_files_can_no_longer_be_restored");return(0,a.jsx)(n.fC,{manager:h,width:"lg",children:(0,a.jsxs)(o.AU,{children:[(0,a.jsx)(o.h4,{children:(0,a.jsx)(o.Dx,{children:(0,_.tx)("file_browser.trash_project.delete_project_forever")})}),(0,a.jsxs)(o.uT,{children:[(0,a.jsx)("div",{className:u.B.mb16.$,children:w}),(0,a.jsx)("div",{children:T})]}),(0,a.jsx)(o.$_,{children:(0,a.jsxs)(o.Dj,{children:[(0,a.jsx)(l.zx,{variant:"secondary",onClick:e.onClose,children:(0,_.tx)("modal.cancel")}),(0,a.jsx)(l.zx,{variant:"destructive",onClick:()=>{(0,d.L9)("Folder Permanently Delete Confirmation Click",{folderId:e.folder.id,teamId:e.folder.teamId,orgId:e.folderOrgId}),v({folderId:e.folder.id}).catch(()=>{r(m.l.error((0,_.t)("file_browser.api_folder.error_when_permanently_deleting_folder")))}),e.onClose()},children:j})]})})]})})}},725230:function(e,t,r){r.r(t),r.d(t,{FolderTrashConfirmModal:()=>T});var a=r(750357),i=r(577851),s=r(850340),n=r(451410),o=r(317429),l=r(303501),d=r(514177),c=r(435114),u=r(5929),m=r(444947),_=r(903132),p=r(589937),f=r(661193),x=r(733791),g=r(590914),h=r(159440),v=r(860318),b=r(469271),y=r(132880),j=r(380904),w=r(939037);function T(e){let{folder:t}=e,r=n.dd({open:e.open,onClose:e.onClose}),i=(0,w.v)(t.id),s="loaded"===i.status?(0,a.jsx)(I,{...e,numFiles:i.data.fileCount,hasPublishedSite:i.data.publishedSiteCount>0}):(0,a.jsx)(o.uT,{padding:{top:"1rem",bottom:"1rem"},children:(0,a.jsx)("div",{className:f.B.flex.justifyCenter.$,"data-testid":"loading-spinner-container",children:(0,a.jsx)(l.T,{})})});return(0,a.jsx)(d.fC,{manager:r,width:"lg",height:"fixed",children:(0,a.jsxs)(o.AU,{children:[(0,a.jsx)(o.h4,{children:(0,a.jsx)(o.Dx,{children:(0,g.t)("file_browser.trash_project.move_project_to_trash")})}),s]})})}function I(e){let t=(0,i.I0)(),r=(0,c.e)(),{folder:n,numFiles:l,hasPublishedSite:d}=e,w=(0,a.jsx)("span",{className:f.B.fontBold.$,children:(0,g.tx)("file_browser.tool_bar.trash")}),T=(e=>{switch(e){case 0:return(0,g.t)("file_browser.trash_project.generic_confirm_label");case 1:return(0,g.t)("file_browser.trash_project.one_file_confirm_label");default:return(0,g.t)("file_browser.trash_project.plural_files_confirm_label",{numFiles:(0,v.H)(e)})}})(l),I=(0,a.jsx)("span",{className:f.B.fontBold.$,children:(0,j.R_)(n)}),E=(e=>{switch(e){case 0:return(0,g.tx)("file_browser.trash_project.zero_file_confirm_text_trash_folder",{folderName:I});case 1:return(0,g.tx)("file_browser.trash_project.one_file_confirm_text_trash_folder",{folderName:I});default:return(0,g.tx)("file_browser.trash_project.plural_files_confirm_text_trash_folder",{folderName:I,numFiles:(0,v.H)(e)})}})(l),k=(0,_.wV)(y.FI);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(o.uT,{children:[e.folderState&&(0,a.jsx)("div",{className:f.B.mb12.$,children:(0,a.jsx)(p.f,{dataTestId:"trash-folder-warning-banner",color:p.Z.ERROR,text:(e=>{switch(e){case h.tQ.PENDING_ASSET_TRANSFER:return(0,g.tx)("file_browser.trash_project.warning.pending_asset_transfer");case h.tQ.PENDING_RESOURCE_CONNECTION:return(0,g.tx)("file_browser.trash_project.warning.pending_resource_connection");case h.tQ.ACTIVE_RESOURCE_CONNECTION:return(0,g.tx)("file_browser.trash_project.warning.active_resource_connection");default:(0,s.vE)(e)}})(e.folderState)})}),(0,a.jsx)("div",{className:f.B.mb12.$,children:E}),d&&(0,a.jsx)("div",{className:f.B.mb12.$,children:(0,g.tx)("file_browser.trash_project.published_site_warning")}),(0,a.jsx)("div",{children:(0,g.tx)("file_browser.trash_project.description_restore",{trashStyled:w})})]}),(0,a.jsx)(o.$_,{children:(0,a.jsxs)(o.Dj,{children:[(0,a.jsx)(u.zx,{variant:"secondary",onClick:()=>{e.onClose()},ref:r,children:(0,g.t)("modal.cancel")}),(0,a.jsx)(u.zx,{variant:"destructive",onClick:()=>{(0,m.L9)("Folder Trash Confirmation Click",{folderId:n.id,teamId:n.teamId,orgId:n.orgId}),k({folderId:n.id}).catch(()=>{t(x.l.error((0,g.t)("file_browser.api_folder.error_when_moving_to_trash")))}),t(b.hV())},children:T})]})})]})}},821675:function(e,t,r){r.r(t),r.d(t,{TeamChangePaymentModal:()=>w});var a=r(750357),i=r(853505),s=r(577851),n=r(53022),o=r.n(n),l=r(826871),d=r(739842),c=r(259946),u=r(661193),m=r(590914),_=r(469271),p=r(7710),f=r(877795),x=r(479852),g=r(998324),h=r(806520),v=r(68634),b=r(678811),y=r(269751);function j({currency:e,customerInfo:t,defaultCountry:r,estimatedChargeCents:n,isReactivating:j,canSeeBillingAddressExp:w}){let T=j?(0,m.t)("change_payment.success.successfully_reactivated_subscription"):(0,m.t)("change_payment.success.successfully_updated_your_payment_method"),I=(0,s.v9)(e=>(0,g.np)(e,{view:"teamAdminConsole",teamId:t.teamId,teamAdminConsoleViewTab:h.mb.SETTINGS})),{createPaymentElement:E,unmountPaymentElement:k,savePayment:N,billingAddress:C,updateBillingAddress:R,nameOnPaymentMethod:S,setNameOnPaymentMethod:O,paymentMethodType:P,error:A}=(0,p.HR)({setupIntentParams:{redirect_url:I,subtotal_estimate:n,success_message:T,currency:e},paymentFlowSource:p.E.PRO_CHANGE_PAYMENT,customerInfo:t,defaultCountry:r,currency:e,canSeeBillingAddressExp:w,isCheckout:!1}),[D,F]=i.useState(!1),[M,L]=i.useState(!1),[B,U]=i.useState(window.innerHeight),V=(0,s.I0)(),G=A?.code===p.qo.UNINITIALIZED_STRIPE_ELEMENTS_ERROR,z=()=>V(_.hV());(0,l.c)(({height:e})=>{U(e)});let W=async e=>{if(e&&e.preventDefault(),L(!0),await N(),j&&t.teamId)try{await (0,f.ek)({planType:x.k9.TEAM,planId:t.teamId})}catch(e){console.error(e)}L(!1)};return(0,a.jsx)(v.xm,{title:w?(0,m.t)("change_payment.update_payment_details"):(0,m.t)("change_payment.enter_payment_method"),onClose:z,maxWidth:465,headerSize:"large",children:(0,a.jsxs)("div",{className:o()({[y.U3]:!D,[y.L$]:G}),children:[(0,a.jsxs)("form",{onSubmit:W,children:[(0,a.jsxs)("div",{className:y.Lk,style:{maxHeight:Math.min(B-49-65,660)},children:[D&&w&&(0,a.jsx)("div",{className:u.B.mb16.$,children:(0,a.jsx)("label",{htmlFor:"updatePaymentDetails",className:u.B.colorTextSecondary.$,children:(0,m.tx)("change_payment.update_payment_details_description_default")})}),(0,a.jsx)(b.u,{billingAddress:C,canSeeBillingAddressExp:w,createPaymentElement:E,error:A,nameOnPaymentMethod:S,paymentElementEventHandlers:{ready:()=>F(!0)},paymentFlow:p.E.PRO_CHANGE_PAYMENT,paymentMethodType:P,unmountPaymentElement:k,updateBillingAddress:R,updateNameOnPaymentMethod:O})]}),D&&!G&&(0,a.jsxs)("div",{className:y.qP,children:[M&&(0,a.jsx)(c.TK,{className:y.lY}),(0,a.jsx)(d.pJ,{onClick:z,children:(0,m.tx)("change_payment.cancel")}),(0,a.jsx)(d.RS,{tabIndex:0,type:"submit",disabled:M,children:(0,m.tx)("change_payment.save")})]})]}),G&&(0,a.jsx)(d.pJ,{onClick:z,children:(0,m.tx)("change_payment.close_window")})]})})}function w({currency:e,customerInfo:t,defaultCountry:r,monthlySub:i,annualSub:s,isReactivating:n,canSeeBillingAddressExp:o,estimatedChargeCents:l}){let d=i?.estimated_amount_due??0,c=s?.estimated_amount_due??0,u=l||Math.max(c,d);return(0,a.jsx)(j,{currency:e,customerInfo:t,defaultCountry:r,estimatedChargeCents:u,isReactivating:n,canSeeBillingAddressExp:o})}},629132:function(e,t,r){r.r(t),r.d(t,{ChangeVatGstIdModal:()=>b});var a=r(750357),i=r(853505),s=r(577851),n=r(53022),o=r.n(n),l=r(45190),d=r(158639),c=r(739842),u=r(589937),m=r(590914),_=r(469271),p=r(479852),f=r(10553),x=r(68634),g=r(721926),h=r(274065);function v(e,t){return e&&"loaded"===t.status?t.data.org:e||"loaded"!==t.status?null:t.data.team}let b=i.memo(function(e){return(0,a.jsx)(d.X,{label:"ChangeVatGstIdModal",children:(0,a.jsx)(y,{...e})})}),y=i.memo(function(e){let t=(0,s.I0)(),{updateVatGstId:r}=e,n=!!e.org?.id,d=(0,l.DG)(f.dRO,{orgId:e.org?.id||""},{enabled:n}),b=(0,l.DG)(f.WNd,{teamId:e.team?.id||""},{enabled:!n}),y=n?d:b,j=v(n,y),w=j?.taxIdVerificationStatus,[T,I]=i.useState(),[E,k]=i.useState(""),[N,C]=i.useState(""),[R,S]=i.useState(!1),[O,P]=i.useState({country:"",state:""}),[A,D]=i.useState(!1);i.useEffect(()=>{let e=j?.taxInfo;if(!A&&"loaded"===y.status&&e?.status==="loaded"){let t=v(n,y),r=e?.data;k(t?.vatGstId||""),C(r?.regionalVatGstId||""),S(r?.canUpdateRegionalVatGst||!1),P({country:r?.country||"",state:r?.state||""}),D(!0)}},[n,y,A,j?.taxInfo]);let F=()=>{t(_.hV())};return(0,a.jsxs)(x.xm,{onClose:F,title:(0,m.t)("change_vat_gst_id.input_id"),minWidth:344,maxWidth:344,fixedTop:!0,children:[T&&(0,a.jsx)("div",{className:"change_vat_gst_id_modal--errorBanner--eBVc5","data-testid":"change-vat-gst-id-error",children:(0,a.jsx)(u.f,{color:u.Z.ERROR,rounded:!1,text:T})}),w===p.v4.VERIFIED&&(0,a.jsx)("div",{"data-testid":"change-vat-gst-id-information",children:(0,a.jsx)(u.f,{color:u.Z.INFORMATION,rounded:!1,text:(0,m.t)("change_vat_gst_id.tax_id_verification_succeeded")})}),w===p.v4.UNVERIFIED&&(0,a.jsx)("div",{"data-testid":"change-vat-gst-id-warning",children:(0,a.jsx)(u.f,{color:u.Z.WARNING,rounded:!1,text:(0,m.t)("change_vat_gst_id.tax_id_verification_failed")})}),(0,a.jsxs)("div",{className:h.yT,children:[(0,a.jsx)("p",{className:"change_vat_gst_id_modal--description--advvQ",children:(0,m.tx)("change_vat_gst_id.description")}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),r(E,e=>I(e),R?N:"").then(e=>{e&&F()})},"data-testid":"change-vat-form",children:[A&&(0,a.jsx)(g.Z,{onChange:k,country:O.country,vatId:E,isCommunityCheckout:!1}),R&&(0,a.jsx)(g.Z,{onChange:C,country:O.country,region:O.state,vatId:N,isCommunityCheckout:!1,variant:"regional"}),(0,a.jsx)("div",{className:o()(h.UN,h.kD),children:(0,a.jsx)(c.RS,{className:h.iY,type:"submit",disabled:!A,children:(0,m.tx)("change_vat_gst_id.save_id")})})]})]})]})})},370336:function(e,t,r){r.r(t),r.d(t,{ConfirmDowngradeModal:()=>x});var a=r(750357),i=r(853505),s=r(577851),n=r(53022),o=r.n(n),l=r(739842),d=r(590914),c=r(737025),u=r(469271),m=r(404756),_=r(68634),p=r(274065);let f=i.memo(function(e){let t=(0,s.I0)(),{teamId:r,billingEndDate:i}=e.modalShown.data,n=e.teams[r],f=()=>{t(u.hV())},x=i?(0,a.jsxs)(a.Fragment,{children:[(0,d.tx)("confirm_downgrade.team_name_will_be_downgraded_to_our_free_starter_plan",{teamName:n?.name})," ",(0,d.tx)("confirm_downgrade.any_seats_you_add",{billingEndDate:i})]}):(0,d.tx)("confirm_downgrade.on_your_next_billing_date_team_name_will_be_downgraded_to_our_free_starter_plan",{teamName:n?.name});return(0,a.jsx)(_.xm,{onClose:f,title:(0,d.t)("confirm_downgrade.cancel_professional_plan"),minWidth:344,maxWidth:344,dataTestId:"downgrade-confirmation-modal",fixedTop:!0,children:(0,a.jsxs)("div",{className:p.yT,children:[(0,a.jsx)("p",{children:x}),(0,a.jsxs)("div",{className:o()(p.UN,p.kD),children:[(0,a.jsx)(l.pJ,{onClick:f,children:(0,d.tx)("confirm_downgrade.go_back")}),(0,a.jsx)(l.VG,{className:p.iY,onClick:()=>{t(m.U3({teamId:r})),t((0,u.K4)({type:(0,c.R)()}))},children:(0,d.tx)("confirm_downgrade.finish_cancellation")})]})]})})});function x(e){return(0,a.jsx)(f,{...e})}},581725:function(e,t,r){r.r(t),r.d(t,{TeamPermissionsModal:()=>en});var a=r(750357),i=r(853505),s=r(577851),n=r(892398),o=r(317429),l=r(451410),d=r(514177),c=r(444947),u=r(330837),m=r(424969),_=r(483636),p=r(158639),f=r(259946),x=r(590914),g=r(581294),h=r(469271),v=r(926941),b=r(748387),y=r(356671),j=r(412981),w=r(242802),T=r(237335),I=r(753392),E=r(479852),k=r(73838),N=r(761050),C=r(218048),R=r(20023),S=r(410237),O=r(31147),P=r(750077),A=r(157973),D=r(617758),F=r(854758),M=r(417407),L=r(792241),B=r(469287),U=r(76316),V=r(134951),G=r(202216),z=r(864493),W=r(403706),H=r(826465),K=r(257507),Y=r(35558),Z=r(240473),$=r(611141),q=r(370669),Q=r(278901),J=r(745592);function X(e){let t=e.canAdmin,r=(0,a.jsx)("div",{className:Q.j3,children:(0,a.jsx)(H.f,{})});e.sharingAudienceControl===E.I1.ORG_EDIT||e.sharingAudienceControl===E.I1.ORG_VIEW?r=(0,a.jsx)("div",{className:Q.Ms,children:(0,a.jsx)(K.O,{})}):(e.sharingAudienceControl===E.I1.WORKSPACE_EDIT||e.sharingAudienceControl===E.I1.WORKSPACE_VIEW)&&(r=(0,a.jsx)("div",{className:Q.Ms,children:(0,a.jsx)(Y.e,{})}));let i=e.sharingAudienceControl===E.I1.INVITE_ONLY&&e.isTeamOrgBrowsable,s=i?Q.UJ:Q.ek;return(0,a.jsxs)(W.h,{className:t?s:Q.Ao,onClick:t?()=>e.changeModalView(1):void 0,"data-onboarding-key":$.X,children:[r,(0,a.jsxs)("div",{className:Q.xR,children:[(0,a.jsxs)("div",{children:[e.sharingAudienceControl&&(0,q.g0)(e.sharingAudienceControl,e.org,e.workspace),i&&(0,a.jsx)("div",{className:Q.IB,children:(0,x.t)("team_creation.anyone_can_find_this_team")})]}),e.org&&(0,a.jsxs)("div",{className:Q.nR,"data-onboarding-key":$.X,children:[e.sharingAudienceControl&&(0,q.GU)(e.sharingAudienceControl),t&&(0,a.jsx)(Z.n,{svg:J.Z,className:Q._3}),t&&(0,a.jsx)($.Y,{})]})]})]})}var ee=r(123985),et=r(560495),er=r(420467),ea=r(644188),ei=r(374218);let es=i.memo(function({roles:e,virtualItems:t,totalSize:r,user:s,parentOrg:n,team:o,teamOrgDomains:l,canAdmin:d,canEdit:c,isCurrentUserTeamOwner:u}){let m=i.useMemo(()=>({team:o,type:E._g.TEAM}),[o]);return(0,a.jsx)("div",{style:{height:`${r}px`,position:"relative"},children:t.map(t=>{let r=t.index,i=e[r],_=(0,C.NZ)(i,d,c);return(0,a.jsx)(er.S,{canEditRole:_,canMakeAdmin:d,currentOrg:n,currentUserOrgId:n?.id??null,isOwnerOfResource:u,orgDomains:l,readOnlyOverrideWarningMessage:null,resource:m,resourceName:o.name,role:i,user:s,virtualRowItem:t},`role-row-${r}`)})})});function en(e){return(0,a.jsx)(p.X,{label:"TeamPermissionsModal",children:(0,a.jsx)(eo,{...e})})}function eo(e){let{teamId:t,initialInviteLevel:r,prepopulateEmail:p,initialView:W}=e,H=(0,s.I0)(),K=(0,w.XU)(),Y=(0,s.v9)(e=>e.autocomplete),Z=(0,s.v9)(e=>e.contacts),$=(0,s.v9)(e=>e.dropdownShown),q=k.t1.Team.useValue(t).data,Q=(0,j.EE)(t),J=(0,j.Fg)(t),er=!!(0,T.p)("affco_suggestions_populated");(0,_.fL)("loaded"===Q.status&&"loaded"===J.status,e=>{let t=J.data?.length??0,r="unknown";r=t<=100?"small":t<=300?"medium":"large",(0,c.L9)("share_modal_latency",{latency_ms:e,modal_type:"team",is_outlier:e>500,role_size:r},{forwardToDatadog:!0})});let en=Q.data,eo=en&&en.org,el=en&&en.teamSharingSettings,ed=eo?eo.id:null,ec=en&&en.workspace,eu=eo&&eo.org_domains?eo.org_domains:O.Nj,em=en?.plan?.planRecordId||null,e_=(0,I.R)(em),ep=i.useMemo(()=>J.data?.sort((e,t)=>e.pending===t.pending?(0,ea.K6)(e,Z).toLocaleLowerCase()<(0,ea.K6)(t,Z).toLocaleLowerCase()?-1:1:e.pending?1:-1)??[],[Z,J]),ef=en?.userGroupResourcePermissions,ex=en&&en.pendingTeamRoleRequests?en.pendingTeamRoleRequests:[],{default:eg,inviteLevel:eh,setInviteLevel:ev}=(0,j.Dj)({initialValue:r,teamId:t,teamPermissions:en}),eb=i.useMemo(()=>{let e=[];return en?.canAdmin&&e.push(P.V5.ADMIN),en?.canEdit&&e.push(P.V5.EDITOR),en?.canRead&&e.push(P.V5.VIEWER),e},[en]),{validateToken:ey,searchResultToken:ej}=(0,y.B)({parentOrg:eo,prepopulatedEmail:p,orgDomains:eu}),ew=(0,B.TY)(eo),eT=e=>{let r=(0,A.vc)(e),a=r.emails,i=r.userGroups;H((0,R.Pv)({emails:a,userGroupIds:e_?i:[],resourceType:E._g.TEAM,resourceIdOrKey:t,level:eh,emailsToExclude:(0,S.y0)(Z.usersByEmail,K,ep),source:"team_share_modal",orgName:eo?eo.name:void 0,teamId:t}))},eI=()=>{H(h.hV()),H(g.mc())},[eE,ek]=i.useState(W||0),eN=!!q&&!q.org_id,eC=l.dd({open:e.open,onClose:e.onClose}),eR=e=>(0,a.jsx)(v.Ui,{name:"Share Modal",properties:{resourceType:E._g.TEAM,resourceId:t},children:(0,a.jsx)(d.fC,{manager:eC,width:"lg",children:(0,a.jsxs)(o.AU,{children:[(0,a.jsx)(o.h4,{children:0===eE?(0,a.jsx)(o.Dx,{children:(0,x.tx)("team_view.team_permissions_modal.invite_other_members",{teamName:q?.name??""})}):(0,a.jsx)(V.i,{title:(0,x.t)("team_view.team_permissions_modal.share_settings"),onClick:()=>ek(0)})}),(0,a.jsx)(o.uT,{children:e})]})})}),{sharingSuggestions:eS,sharingSuggestionIdsToExclude:eO,sharingSuggestionEmailsToExclude:eP}=(0,G.j)({orgId:ed,teamId:t,contacts:Z.usersByEmail,roles:ep,user:K,autocompleteTokens:Y.tokens}),eA=(0,b.N1)(Y.tokens),eD=i.useCallback(()=>36,[]),eF=i.useRef(null),eM=(0,n.o)({size:ep.length,parentRef:eF,estimateSize:eD,overscan:10,paddingStart:0});return eR(q&&en?0===eE?en?(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{onKeyDown:e=>{e.keyCode!==m.sr.ESCAPE&&e.stopPropagation()},children:[eN&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ee.f,{includeCopyLinkButton:!0,teamId:t,dropdownShown:$,initialInviteLevel:eg,teamPermissions:{canAdmin:!!en?.canAdmin,canEdit:!!en?.canEdit}}),(0,a.jsx)("div",{className:ei.i7,children:(0,x.tx)("team_view.team_permissions_modal.invite_by_email")})]}),!!en?.canAdmin&&(0,a.jsx)(U.Mj,{teamId:t,teamRoleRequests:ex,teamRoles:ep}),(0,M.i)(K)?(0,a.jsx)(M.c,{resourceType:"team"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:ei.lV,children:(0,a.jsx)(D.x,{SearchResultComponent:e_?F.VM:F.ay,TokenComponent:e_?F.k7:F.EZ,autocomplete:Y,buttonText:(0,x.t)("team_view.team_permissions_modal.invite"),dispatch:H,dropdownKey:"permissions-invite-dropdown",dropdownShown:$,fixedAutocompleteResults:!0,getSearchResults:e_?e=>(0,S.Dm)(e,Z.usersByEmail,K,ep,em,{inviteLevel:eh,source:"team-permissions-modal"},{resourceType:E._g.TEAM,resourceIdOrKey:t}):e=>(0,S.Qf)(e,Z.usersByEmail,K,ep,ed,t,null,{inviteLevel:eh,source:"team-permissions-modal"}),getSelectText:C.h1,getTokenIdentifier:F._o,getTokenPopover:e_?e=>(0,F.z)(e,eA):void 0,hideDropdownOnEmpty:!0,inviteLevel:eh,joinLinkShown:eN,onHideModal:eI,onInviteLevelChange:ev,onSubmit:e=>{if(eo&&eo.domain_capture&&eu&&eu.domains.length>0){let t=(0,A.vc)(e).emails.filter(e=>(0,u.Jh)(e)&&!(0,N.nv)(eu.domains,e));if(eo?.invite_whitelist_guest_invite_setting==null&&t.length>0)return void H(h.K4({type:L.E,data:{emails:t,onConfirm:()=>{eT(e)},popStack:!0,orgName:eo.name}}))}eT(e)},options:eb,placeholderText:e_?(0,x.t)("user_groups.add_emails_names_or_user_groups"):(0,x.t)("team_creation.add_a_name_or_email"),searchResultDisabled:e_?F.Yb:void 0,searchResultToken:e_?ew:ej,shouldAutoFocus:!eN,validateToken:ey,validateTokensAsEmail:!0})}),(0,a.jsx)(G.V,{suggestions:eS??void 0,autocomplete:Y,searchResultToken:ej,resourceType:"team",resourceId:t,idsToExclude:eO??void 0,emailsToExclude:eP??void 0,affcoSuggestionsPopulated:er})]}),eo&&(0,a.jsx)("div",{className:ei.G3,ref:eF,children:(0,a.jsxs)("div",{className:ei.bO,children:[(0,a.jsx)("div",{className:ei.zv,children:(0,x.t)("file_permissions_modal.who_has_access")}),(0,a.jsx)(X,{team:q,workspace:ec,org:eo,changeModalView:ek,sharingAudienceControl:el?.sharingAudienceControl,isTeamOrgBrowsable:el?.orgBrowsable,canAdmin:!!en?.canAdmin}),e_&&(e_?ef?.map(e=>(0,a.jsx)(et.y,{userGroupResourcePermission:e,canEditPermission:!!en?.canEdit,canMakeAdmin:!!en?.canAdmin,isPrototypePermission:!1},e.id)):null),(0,a.jsx)(es,{canAdmin:!!en?.canAdmin,canEdit:!!en?.canEdit,isCurrentUserTeamOwner:!!en?.isOwner,parentOrg:eo,roles:ep,team:q,teamOrgDomains:eu,totalSize:eM.totalSize,user:K,virtualItems:eM.virtualItems})]})})]},"container")}):(0,a.jsx)("div",{className:ei.V_,children:(0,a.jsx)(f.jz,{})}):eo?el&&(0,a.jsx)(z.Y_,{team:q,workspace:ec||void 0,org:eo,teamSharingSettings:el,hideModal:eI,goBack:()=>ek(0)}):(0,a.jsx)(a.Fragment,{}):(0,a.jsx)("div",{className:ei.V_,children:(0,a.jsx)(f.jz,{})}))}},140821:function(e,t,r){r.r(t),r.d(t,{TeamRenameModal:()=>d});var a=r(750357),i=r(577851),s=r(590914),n=r(397739),o=r(826250),l=r(620756);function d({team:e}){let t=(0,i.I0)();return(0,a.jsx)(l.q,{initialName:e.name,maxLength:o.zO,placeholder:(0,s.t)("resource_rename_modal.team.placeholder"),submitText:(0,s.t)("resource_rename_modal.team.submit"),onRename:r=>t((0,n.gZ)({team:e,name:r}))})}},796295:function(e,t,r){let a;r.d(t,{FileBrowserView:()=>vY});var i,s,n,o,l,d,c=r(750357),u=r(853505),m=r(577851),_=r(193447),p=r(492342),f=r(258754),x=r(661897),g=r(458780),h=r(545449),v=r(689342),b=r(45190),y=r(903132),j=r(139349),w=r(342534),T=r(581370),I=r(437955),E=r(22411),k=r(900400),N=r(272901),C=r(717331),R=r(530589),S=r(453393),O=r(850340),P=r(661193),A=r(590914),D=r(225094),F=r(135834),M=r(552034),L=r(974905),B=r(830423),U=r(424969),V=r(763250),G=r(594170),z=r(498869),W=r(1640),H=r(273634),K=r(53022),Y=r.n(K),Z=r(532379),$=r(921474),q=r(70523),Q=r(260251),J=r(866218),X=r(132880),ee=r(231229),et=r(764162),er=r(860195),ea=r(242802),ei=r(450413),es=r(277413),en=r(559062),eo=r(410802),el=r(29260),ed=r(607906),ec=r(195787),eu=r(968945),em=r(259946),e_=r(558089),ep=r(488480),ef=r(555792),ex=r(363240),eg=r(996679),eh=r(87509),ev=r(871567),eb=r(621298),ey=r(595475),ej=r(153074),ew=r(940358),eT=r(913408),eI=r(382455),eE=r(417027);let ek="seen_org_admin_moved_unassigned_drafts_onboarding",eN=(0,eg.Z)("2024-10-15").startOf("day"),eC=(0,ey.n_)(ek);function eR(){let e=(0,ex.Dv)(eC),{show:t,isShowing:r,complete:a}=(0,eb.I)({overlay:eE.qBE,priority:ew.b.DEFAULT_MODAL},[e]),i=(0,m.v9)(e=>(0,ej.YM)(e)),s=i?.created_at,n=!!s&&(0,eg.Z)(s).isSameOrAfter(eN);return(0,h.O)(()=>{t({canShow:e=>!(e||n)})}),(0,c.jsx)(eT.ZZ,{arrowPosition:eI.xI.LEFT_TITLE,clickOutsideToHide:!0,description:(0,A.tx)("org_admin_onboarding.tooltip.moved_unassigned_drafts.body"),isShowing:r,onClose:a,primaryCta:{label:(0,A.tx)("general.got_it"),type:"button",onClick:a,ctaTrackingDescriptor:ev.y.DONE},secondaryCta:{label:(0,A.tx)("general.learn_more"),type:"link",href:"https://help.figma.com/hc/articles/4420549259799",ctaTrackingDescriptor:ev.y.LEARN_MORE},shouldCenterArrow:eI.Ht.FALLBACK,targetKey:eh.nU,title:(0,A.tx)("org_admin_onboarding.tooltip.moved_unassigned_drafts.title"),trackingContextName:eh.DI,userFlagOnShow:ek})}var eS=r(218048),eO=r(745371),eP=r(630838);function eA({project:e}){let t=(0,ea.xJ)(),r=(0,et.$0)(),a=(0,m.v9)(e=>e.currentTeamId),i="drafts"===e?r:e.team?.org?.id,s="drafts"===e?a:e.team?.id,n=(0,eP.ZR)(s),o=(0,eO.kP)();return!(0,eS.E_)(t,i)&&!w.tS&&!(n||o)}var eD=r(690160),eF=r(493073),eM=r(534857),eL=r(404639),eB=r(845277);function eU(){let e=(0,m.I0)(),t=(0,eB.fh)();return(0,c.jsx)(eM.SidebarRow,{onClick:()=>{e(eL.fv({view:"recentsAndSharing"})),e(eF.D5({clickedResourceType:"recentsAndSharing"}))},isSelected:"recentsAndSharing"===t,icon:(0,c.jsx)(eD.B,{}),text:(0,A.t)("sidebar.recents"),wrapInListItem:!0})}var eV=r(26343),eG=r(121142),ez=r(151119),eW=r(956964),eH=r(479852),eK=r(761050),eY=r(911340),eZ=r(770490),e$=r(224051),eq=r(731039),eQ=r(109923),eJ=r(85127),eX=r(355002),e0=r(10553),e1=r(118960),e5=r(691811),e2=r(806520),e4=r(421177);let e9=(0,ey.n_)("seen_connected_projects_admin_settings_overlay"),e7="connect_admin_settings_onboarding_key";function e3(e){let t=(0,ex.Dv)(e9),{show:r,isShowing:a,complete:i}=(0,eb.I)({overlay:eE.RWK,priority:ew.b.DEFAULT_MODAL},[t]);return(0,h.O)(()=>{r({canShow:e=>!e})}),(0,c.jsx)(eT.ZZ,{arrowPosition:eI.xI.LEFT_TITLE,description:(0,c.jsx)("p",{children:(0,A.tx)("resource_connection.onboarding.use_admin_settings_to_see_all_your_connected_projects")}),emphasized:!0,isShowing:a,onClose:i,primaryCta:{label:(0,A.tx)("resource_connection.onboarding.show_me"),type:"button",onClick:()=>{e.openConnectedProjectsTab(),i()},ctaTrackingDescriptor:ev.y.DONE},targetKey:e7,trackingContextName:"Connected Projects Admin Settings Onboarding",width:350,zIndex:e4.c.MODAL})}function e6(e){let t=(0,m.I0)(),r=(0,e1.ZG)("GoToAdminRow").unwrapOr(null),a=(0,b.DG)(e0.ByV,{name:"initiated_first_resource_connection"}),i=u.useMemo(()=>"loaded"===a.status&&!!a.data?.currentUser?.userFlagByName,[a])&&(0,p.BZ)().fc_initial_onboarding_enabled&&(r?.tier===eH.Lz.PRO||r?.tier===eH.Lz.ORG||r?.tier===eH.Lz.ENTERPRISE),s=(0,c.jsx)("div",{className:P.B.h24.w24.$,children:(0,c.jsx)(eJ.v,{})}),n=(0,c.jsx)(e8,{badge:e.badge}),o=(0,c.jsx)(eM.SidebarRow,{wrapInListItem:!1,icon:s,text:(0,A.t)("sidebar.admin_dashboard"),isSelected:e.isSelected,onClick:e.onClick,badge:n,dataTestId:e.dataTestId,"data-onboarding-key":e7,includeBadgeInLabel:!0});return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("li",{className:"go_to_admin_row--goToAdminRow--TJjah",children:o}),i&&(0,c.jsx)(e3,{openConnectedProjectsTab:()=>{r?.type===eH.k9.TEAM?t(eL.fv({view:"teamAdminConsole",teamId:r?.key.parentId??"",teamAdminConsoleViewTab:e2.mb.CONTENT,teamAdminConsoleViewSecondaryTab:e2.Ge.CONNECTED_PROJECTS})):t(eL.fv({view:"orgAdminSettings",orgAdminSettingsViewTab:e5.rN.CONTENT,orgAdminSettingsViewSecondaryTab:e5.Et.CONNECTED_PROJECTS}))}})]})}function e8(e){return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"go_to_admin_row--badgeContainer--LJ-CY",children:e.badge}),(0,c.jsx)("div",{className:"go_to_admin_row--iconContainer--Ni18o","aria-hidden":!0,children:(0,c.jsx)(eX.M,{})})]})}var te=r(634408),tt=r(799002),tr=r(570243),ta=r(185667),ti=r(916500),ts=r(373285),tn=r(880944);function to(e){let t=(0,m.I0)(),r=e.orgUser.permission===eH.Gu.ADMIN,a=(0,tr.US)(),i=(0,tr.$4)(),{groupsUserIsAdminOf:s}=(0,tr.O)(i,e.orgUser.user_id,!r),n=(0,e$.A9)(e.org.id),o="loaded"===n.status?n.data?.invoices??[]:void 0;u.useEffect(()=>{t(te.U2({forceRefetch:!1}))},[t,e.org.id]);let{groupsToReview:l}=(0,tr.hj)(s,o),d=s[0]?.id,_=e.org.bigma_enabled&&a&&!!d,p=(0,es.d3)(e.org.id).data??[],f=e.org.bigma_enabled&&p.length>0,x=(0,eq.iv)({isIntendedAudience:e.org.bigma_enabled&&!r});if(!(r||_||f))return null;let g=function(e){switch(e.view){case"orgAdminSettings":case"billingGroupDashboard":return!0;case"licenseGroup":return e.subView===ts.gp.ADMIN;case"workspace":return e.subView===tn.ep.ADMIN;default:return!1}}(e.selectedView),h=(0,c.jsx)(eQ.NO,{org:e.org,orgUser:e.orgUser,selectedView:e.selectedView,isSelected:g});return(0,c.jsx)(e6,{badge:h,onClick:()=>{let e=o&&(0,ta.qQ)(o);if(r){let e=e5.rN.DASHBOARD;t(eL.fv({view:"orgAdminSettings",orgAdminSettingsViewTab:e})),t(eF.D5({clickedResourceType:"orgAdminSettings"}))}else _?x?t(eL.fv({view:"billingGroupDashboard",selectedTab:ti.A.REQUESTS})):(t(eL.fv({view:"licenseGroup",subView:ts.gp.ADMIN,licenseGroupId:e&&l.length>0?l[0].id:d,selectedTab:(0,tt.j)(e&&l.length>0?ts.nb.MEMBERS:ts.Uq["0"])})),t(eF.D5({clickedResourceType:"licenseGroupAdminSettings"}))):f&&(t(eL.fv({view:"workspace",subView:tn.ep.ADMIN,workspaceId:p[0].id,selectedTab:tn.Li})),t(eF.D5({clickedResourceType:"workspaceAdminSettings"})))},dataTestId:"admin-settings-link",dataOnboardingKey:eh.nU,isSelected:g})}var tl=r(35558);function td(e){let t=(0,m.v9)(e=>e.currentTeamId),r=(0,m.I0)();return t?(0,c.jsx)(eM.SidebarRow,{isSelected:e.selectedView&&"team"===e.selectedView.view,onClick:()=>{r(S.g(t)),r(eF.D5({clickedResourceType:"allProjects"}))},"data-onboarding-key":"ALL_PROJECTS_LINK_ONBOARIND_KEY",icon:(0,c.jsx)(tl.e,{}),text:(0,A.t)("sidebar.all_projects"),wrapInListItem:!0}):null}var tc=r(567239),tu=r(704516),tm=r(656075),t_=r(159440),tp=r(1093),tf=r(921836);function tx(e,t,r,a,i,s){let n=[],o=[];if(a.isFigFiles()){if(!(n=a.getData()))return}else if(a.isRepos()){let e=a.getReposData();e&&(n=e.files,o=e.repos)}else if(a.isTiles()){let e=a.getTilesData();e&&(n=e.files,o=e.repos)}if(n.some(e=>e.editor_type===eH.gg.FIGMAKE)&&!s)return void e(tp.R.enqueue({message:(0,A.t)("file_browser.file_move.paywall_team_tooltip"),error:!0}));e(tf.M({files:n,repos:o,folder:t,team:r,draftsMoveData:i?i(n,o):null}))}var tg=r(459041),th=r(603816),tv=r(927177),tb=r(237335);let ty=(0,ey.n_)("seen_dtm_deprecation_nav_to_plan_overlay");function tj(e){let t=(0,ex.Dv)(ty),{show:r,isShowing:a,complete:i}=(0,eb.I)({overlay:eE.vKg,priority:ew.b.DEFAULT_MODAL},[t]);(0,h.O)(()=>{r({canShow:e=>!e})});let s=(0,A.tx)("file_browser.drafts_to_move.your_drafts_to_move_files_are_right_here"),n=e.isOrg?(0,A.tx)("file_browser.drafts_to_move.you_can_find_them_in_drafts_previously_deleted_files_will_appear_in_trash"):e.starterTeamCreated?(0,A.tx)("file_browser.drafts_to_move.you_can_find_them_in_drafts_and_can_always_move_them_to_another_team_or_project"):(0,A.tx)("file_browser.drafts_to_move.you_can_find_them_in_drafts_previously_deleted_files_will_appear_in_trash");return(0,c.jsx)(eT.ZZ,{arrowPosition:eI.xI.LEFT_TITLE,description:(0,c.jsx)("p",{children:n}),emphasized:!0,isShowing:a,onClose:i,primaryCta:{label:(0,A.tx)("file_browser.modal.got_it"),type:"button",onClick:()=>{i()},ctaTrackingDescriptor:ev.y.DONE},secondaryCta:{label:(0,A.tx)("file_browser.drafts_to_move.viewbar_learn_more_link"),type:"link",href:"https://help.figma.com/hc/articles/18409526530967",ctaTrackingDescriptor:ev.y.LEARN_MORE},targetKey:t_.lY,title:s,trackingContextName:"Dtm Deprecation Nav To Plan Overlay",width:300,zIndex:e4.c.MODAL})}var tw=r(979035),tT=r(677375),tI=r(689642);function tE(e){let t=(0,tb.p)("file_browser_onboarded"),[r,a]=u.useState(!1),i=(0,tT.Sj)(),s=(0,e1.I6)(),{dtmMigrationPlanName:n,starterTeamCreated:o,dtmPlanParentType:l}=(0,tv.X)((0,tu.unwrap)(s.data)||void 0),{shouldShowFirstDtmPostMigrationOverlay:d,switchedFromDtmOnboarding:m}=function(){let e=(0,e1.I6)(),{isDraftsToMovePlan:t,dtmMigrationCompleted:r}=(0,tv.X)((0,tu.unwrap)(e.data)||void 0),a=(0,b.DG)((0,e0.ByV)({name:"switched_to_new_plan_from_dtm_deprecation_onboarding"})),i=!!a?.data?.currentUser?.userFlagByName&&(0,p.BZ)().dtm_deprecation_post_migration_onboarding&&t;return{shouldShowFirstDtmPostMigrationOverlay:!i&&t&&r&&(0,p.BZ)().dtm_deprecation_post_migration_onboarding,switchedFromDtmOnboarding:i}}();return(0,c.jsx)("li",{children:(0,c.jsxs)(tm.h,{isDragTarget:e=>{let t=new th.nb(e);return!!(t.isFigFiles()||t.isRepos()||t.isPrototypes()||t.isTiles())},onTargetDragEnter:()=>{a(!0)},onTargetDragLeave:()=>{a(!1)},onTargetDrop:t=>{let r=new th.nb(t);tx(e.dispatch,e.folder,null,r,void 0,i),e.dispatch(tg.C()),a(!1)},draggable:!1,onMouseOver:()=>{a(!0)},onMouseLeave:()=>{a(!1)},children:[(0,c.jsx)(eM.Z,{isSelected:"folder"===e.selectedView.view&&e.selectedView.folderId===e.folder.id,onClick:t=>{let r=e.folder;t.metaKey||t.ctrlKey||0!==t.button||(e.dispatch(S.B4(r.id)),e.dispatch(eF.D5({clickedResourceType:"drafts",resourceIdOrKey:r.id})))},"data-onboarding-key":t_.lY,icon:(0,c.jsx)(tc.U,{}),text:(0,A.t)("sidebar.drafts"),badge:e.shouldHideCreateFileButton?void 0:(0,c.jsx)(tI.cX,{folderId:e.folder.id,isContainerHovered:r}),wrapInListItem:!1}),d&&t&&(0,c.jsx)(tw.N,{entryPoint:"drafts_sidebar",planName:n,targetKey:t_.lY,isOrg:"org"===l,starterTeamCreated:o??!1}),m&&t&&(0,c.jsx)(tj,{starterTeamCreated:o,planName:n??"",isOrg:"org"===l})]})})}var tk=r(622258),tN=r(527986),tC=r(308488),tR=r(456793),tS=r(608600),tO=r(912707),tP=r(791110),tA=r(712824);let tD=(0,tA.Y3)(function(e){let t=(0,m.I0)(),r=(0,c.jsx)("span",{...ed.NQ(tO.w.textBodyMediumStrong),children:e.sectionName});return(0,c.jsx)(tP.c,{open:e.open,onClose:e.onClose,onConfirm:()=>{t(eV.h7({sidebarSectionId:e.sectionId}))},title:(0,A.t)("sidebar.delete_section"),confirmText:(0,A.t)("sidebar.delete"),destructive:!0,children:(0,A.tx)("sidebar.delete_section_confirmation",{section:r,count:e.count})})},"CONFIRM_SECTION_DELETE_MODAL",tA.Et.YES);var tF=r(469271),tM=r(726794);let tL="custom-section-header-context-menu";function tB(){let e=(0,m.v9)(e=>e.dropdownShown);return e&&e?.type===tL?e:null}function tU(e){let t=(0,m.I0)(),r=tB();if(null==r)return(0,c.jsx)(c.Fragment,{});let a=[{displayText:(0,A.t)("sidebar.rename_section"),callback:()=>void e.setRenamingSectionId(r.data.customSection.id)},{displayText:(0,A.t)("sidebar.delete_section"),callback:()=>void(0===r.data.favoritesCount?t(eV.h7({sidebarSectionId:r.data.customSection.id})):t((0,tF.K4)({type:tD,data:{sectionId:r.data.customSection.id,sectionName:r.data.customSection.name,count:r.data.favoritesCount}})))}];return(0,c.jsx)(tM.z,{depth:0,dispatch:t,hidePointWhenContentOffScreen:!0,items:a,lean:"right",leanPadding:0,minWidth:162,onSelectItem:(e,r)=>{e.callback&&e.callback("",null,t)},parentRect:r.data.targetRect,showPoint:!r.data.isFromRightClick})}var tV=r(5929),tG=r(762498);let tz="favorited_section--emojiIcon--xV5-V",tW="favorited_section--isDragTarget--ujQU-",tH="favorited_section--previewContainer--focY0 _overlayBase--_overlayBase--VoHJ7",tK="favorited_section--previewContainerSidebarRowRedesigned--rSkNW",tY="favorited_section--previewContainerNoDelay--lPf8y favorited_section--previewContainer--focY0 _overlayBase--_overlayBase--VoHJ7",tZ="favorited_section--favoriteClickTarget--uT3R7",t$="favorited_section--thumbnailContainer--rEa3M",tq="favorited_section--lowerContainer--aAfLM",tQ="favorited_section--lowerPartTitles--eCnaB",tJ="favorited_section--title--hN-cA ellipsis--ellipsis--70pHK",tX="favorited_section--fileIconContainer--JXM6r";function t0(){let e=(0,m.I0)(),t=(0,m.v9)(eK._H);return t?(0,c.jsxs)("div",{className:"favorited_section--customSectionsEmptyStateContent--7aDDm",children:[(0,A.tx)("sidebar.just_click_the_on_files_projects_and_teams_to_add_and_organize_them_here"),(0,c.jsx)(tV.zx.Link,{onClick:()=>{e(eL.fv({view:"org",orgId:t.id,orgViewTab:tG.i.HOME}))},children:(0,A.tx)("sidebar.browse_org_custom_sections")})]}):null}function t1(){return(0,c.jsx)("div",{className:"favorited_section--customSectionsEmptyState--42ZbW favorited_section--customSectionsEmptyStateContent--7aDDm",children:(0,c.jsx)(t0,{})})}var t5=r(764517),t2=r(211839),t4=r(976236),t9=r(921988),t7=r(707832),t3=r(788389),t6=r(311565),t8=r(67048),re=r(19274);function rt({customSectionId:e,customSectionName:t,favoritesCount:r,manager:a,setRenamingSectionId:i}){let s=(0,m.I0)();return(0,c.jsx)(t2.fC,{manager:a,children:(0,c.jsxs)(t2.W2,{children:[(0,c.jsx)(t2.ck,{onClick:()=>{i(e)},htmlAttributes:{onPointerUp:_.ZT},children:(0,A.t)("sidebar.rename_section")}),(0,c.jsx)(t2.ck,{onClick:()=>{0===r?s(eV.h7({sidebarSectionId:e})):s((0,tF.K4)({type:tD,data:{sectionId:e,sectionName:t,count:r}}))},children:(0,A.t)("sidebar.delete_section")})]})})}var rr=r(549409),ra=r(659461),ri=r(202593),rs=r(753392),rn=r(826250),ro=r(5794),rl=r(865500),rd=r(274008),rc=r(918246);function ru(e){let t=(0,m.I0)();return(0,c.jsxs)(t2.W2,{children:[(0,c.jsx)(rl.V,{resourceId:e.favorite.team.id,resourceType:eH.IK.TEAM,setFavorite:({sectionId:r})=>{t(eV.Aw({entrypoint:"sidebar",sectionId:r,team:rc.M.toSinatra(e.favorite.team),favoriteId:e.favorite.id}))},removeFavorite:()=>{t(eV.NP({entrypoint:"sidebar",team:e.favorite.team,favoriteId:e.favorite.id}))},userHasMaxFavorites:!1,favoriteId:e.favorite.id,orderedSidebarSections:e.orderedSidebarSections,currentSectionId:e.favorite.sidebarSectionId}),(0,c.jsx)(t2.ZA,{children:(0,c.jsx)(t2.ck,{onClick:()=>{let r=(0,rn.HB)(e.favorite.team.id,e.favorite.orgId);t(rd.fB({url:r}))},children:(0,A.t)("file_browser.copy_link_to_team")})})]})}var rm=r(266526);function r_(e){let t=(0,m.I0)(),r=e.favorite.team,{getContextMenuTriggerProps:a,manager:i}=t2.H9(),s=u.useCallback((e,r)=>{(0,t8.yN)(r.team?.id,eH.IK.TEAM,r.sidebarSectionId??void 0,t8.Qh);let a=(0,rn.HB)(r.resourceId,r.orgId);(0,U.v8)(e)?(g.ZP.redirect(a,"_blank"),e.stopPropagation()):(t(S.g(r.resourceId)),e.preventDefault())},[t]);return(0,c.jsxs)(t2.fC,{manager:i,children:[(0,c.jsx)(eM.SidebarRow,{ariaDescription:(0,A.t)("file_browser.team_capitalized"),dragKey:e.dragKey,icon:(0,c.jsx)(rp,{favoritedTeam:e.favorite}),isDragTarget:e.isDragTarget,isSelected:e.isSelected,onClick:t=>s(t,e.favorite),onDragDrop:e.onDragDrop,onDragEnd:e.onDragEnd,onDragEnter:e.onDragEnter,onDragLeave:e.onDragLeave,onDragQuadrantUpdate:e.onDragQuadrantUpdate,onDragStart:e.onDragStart,showGrabber:e.showGrabber,text:r.name,wrapInListItem:!1,...a()}),(0,c.jsx)(ru,{favorite:e.favorite,orderedSidebarSections:e.orderedSidebarSections})]})}function rp({favoritedTeam:e}){let t=(0,e1.Rm)().unwrapOr(null),r=(0,rs.R)(t?.planRecordId);return e.team?.imgUrl?(0,c.jsx)("div",{className:P.B.colorIcon.$,children:(0,c.jsx)(ra.Ir,{shape:"ROUNDED_SQUARE",size:{imgSize:ra.DZ.SMALL,fallbackSize:ra.DZ.SMALL},fallbackDisplay:ri.D.HIDDEN,team:{...e.team,imgUrl:e.team.imgUrl},fallbackSvg:rm.Z})}):r?(0,c.jsx)(ro.lO,{shape:"ROUNDED_SQUARE",hideFallbackInitial:!0,entity:{...e.team,imgUrl:void 0},size:{imgSize:ra.DZ.SMALL,fallbackSize:ra.DZ.SMALL}}):(0,c.jsx)(rr.q,{})}var rf=r(736689),rx=r(756809),rg=r(633740),rh=r(796287),rv=r(375025),rb=r(240681),ry=r(380904),rj=r(979002),rw=r(73838),rT=r(253086),rI=r(929192),rE=r(670415),rk=r(728039),rN=r(274933),rC=r(206808),rR=r(989823),rS=r(897277),rO=r(203368);let rP="sidebar context menu";function rA(e){let t=(0,m.I0)(),r=(0,m.v9)(e=>e.selectedView),a=(0,rC.N)(),i=e.favorite.file,s=(0,tT.Sj)();if(null==i)return null;let n=i.editorType===eH.gg.FIGMAKE&&!s;return(0,c.jsxs)(t2.W2,{children:[(0,c.jsxs)(t2.ZA,{children:[(0,c.jsx)(t2.ck,{onClick:()=>{(0,t8.Ly)("open"),(0,t8.yN)(i.key,eH.IK.FILE,e.favorite?.sidebarSectionId??void 0,rP,i.editorType??void 0),(0,rE.ZB)(t,i)},children:(0,A.t)("tile.dropdown.open")}),!x.YO&&!(0,f.mC)()&&(0,c.jsx)(t2.ck,{onClick:()=>{(0,rE.$3)((0,rj.z4)({file:i,allowDefaulting:!0}),i.key,r,t),(0,t8.yN)(i.key,eH.IK.FILE,e.favorite?.sidebarSectionId??void 0,rP,i.editorType),(0,t8.Ly)("open_in_new_tab")},children:(0,A.t)("tile.dropdown.open_new_tab")})]}),(0,c.jsx)(rl.V,{resourceId:e.favorite.file.key,resourceType:eH.IK.FILE,orderedSidebarSections:e.orderedSidebarSections,setFavorite:({sectionId:r})=>{t(eV.WV({sectionId:r,favoriteId:e.favorite.id,resourceType:eH.IK.FILE}))},removeFavorite:()=>{t(eV.u9({file:i,repoId:i.fileRepoId??void 0,entrypoint:"sidebar",favoriteId:e.favorite.id}))},userHasMaxFavorites:!1,favoriteId:e.favorite.id,currentSectionId:e.favorite.sidebarSectionId}),(0,c.jsxs)(t2.ZA,{children:[(0,c.jsx)(t2.ck,{onClick:()=>{t(rv.fB({fileKey:i.key,url:(0,rj.z4)({file:i,attributionContext:(0,rR.R)(a,rR.I.FAVORITED_FILE_CONTEXT_MENU),allowDefaulting:!0}),source:rR.I.FAVORITED_FILE_CONTEXT_MENU}))},children:(0,A.t)("file_browser.copy_link")}),!n&&(0,c.jsx)(t2.ck,{onClick:()=>{(0,t8.Ly)("share"),t((0,tF.K4)({type:rO.az,data:{fileKey:i.key,source:rk.ot.fileBrowserFavoritedContextMenu}}))},children:(0,A.t)("sidebar.share")}),null!==i.folderId&&(0,c.jsx)(rD,{favorite:e.favorite,folderId:i.folderId})]})]})}function rD({favorite:e,folderId:t}){let r=(0,m.I0)(),a=e.file?.project?.canView,i=rw.t1.useFile(e.file?.key).data;return null==i?null:(0,c.jsx)(t2.ck,{onClick:()=>{if((0,t8.Ly)("show_in_project"),r(eL.fv({view:"folder",folderId:t})),r(rI.LA()),e.file.fileRepoId){let t=(0,rT.$c)(e);null!=t&&r(rI.pz({type:rS.m.REPOS,tiles:[{type:rN.YU.REPO,repo:t,branches:[],selectedBranchKey:""}]}))}else r(rI.pz({type:rS.m.FILES,tiles:[(0,rN.dX)(i)]}))},disabled:!a,children:(0,A.t)("tile.dropdown.show_in_project")})}function rF(e){let t=(0,m.I0)(),r=(0,m.v9)(e=>e.currentUserOrgId),a=(0,m.v9)(e=>e.currentTeamId),i=(0,m.v9)(e=>e.dropdownShown),s=e.favorite.file,n=rw.t1.useFile(s.key).data,o=(0,rg.gL)(),{getContextMenuTriggerProps:l,manager:d}=t2.H9(),_=u.useMemo(()=>i&&i.type===tL,[i]),f=u.useCallback(()=>{n||t(rv.gz({file:{key:s.key,team_id:s.teamId,file_repo_id:s.fileRepoId,folder_id:s.folderId,library_key:s.libraryKey}}))},[t,s,n]),x=(0,rj.z4)({file:s,allowDefaulting:!0}),h=s.name,v=(0,rb.UG)(h),b=e.favorite.file?o(e.favorite.file):rg.I1.DESIGN,y=v?(0,c.jsx)("div",{className:tz,children:v}):(0,c.jsx)(rg.XV,{size:16,type:b}),j=(0,rg.DY)(b),w=v?(0,rb.ku)(h,v):h,T=e.favorite.file?.project?.path,I=(0,ry.fJ)(T),E=I?tJ:"favorited_section--titleWithoutSubtitle--2nD-E ellipsis--ellipsis--70pHK",{onContextMenu:k,...N}=l();return(0,c.jsxs)(t2.fC,{manager:d,children:[(0,c.jsxs)("div",{className:tZ,children:[(0,c.jsx)(eM.SidebarRow,{ariaDescription:(0,A.t)("file_browser.file_type_icon_aria_label",{fileType:j}),dragKey:e.dragKey,icon:y,isDragTarget:e.isDragTarget,isFavoritesToMove_DEPRECATED:e.isFavoritesToMove_DEPRECATED,isSelected:e.isSelected,onClick:r=>{var a;return a=e.favorite,void((0,t8.yN)(a.file?.key,eH.IK.FILE,a.sidebarSectionId??void 0,t8.Qh,a.file?.editorType??void 0),(0,U.v8)(r)?(t(S.ku({fileKey:a.file?.key??"",entrypoint:t8.Qh})),r.stopPropagation()):r.preventDefault(),a.file&&(g.ZP.redirect(x,"_blank"),t(S.ku({fileKey:a.file.key,entrypoint:t8.Qh}))))},onContextMenu:e=>{k(e),f()},...N,onDragDrop:e.onDragDrop,onDragEnd:e.onDragEnd,onDragEnter:e.onDragEnter,onDragLeave:e.onDragLeave,onDragQuadrantUpdate:e.onDragQuadrantUpdate,onDragStart:e.onDragStart,showGrabber:e.showGrabber,text:""!==w?w:(0,A.t)(e.favorite.file?.editorType==="whiteboard"?"sidebar.fig_jam_file":e.favorite.file?.editorType==="slides"?"sidebar.slides_file":"sidebar.design_file"),wrapInListItem:!1}),!_&&(0,c.jsxs)("div",{className:Y()(e.showPreviewDelay?tH:tY,{[tK]:(0,p.BZ)().file_browser_sidebar_row_ui}),style:{transform:`translateY(${-e.previewYOffset}px)`},children:[(0,c.jsx)("div",{className:t$,children:(0,c.jsx)(rh.mB,{file:s,noBorder:!0})}),(0,c.jsxs)("div",{className:tq,children:[(0,c.jsx)("div",{className:tX,children:(0,c.jsx)(rg.XV,{size:16,type:b})}),(0,c.jsxs)("div",{className:tQ,children:[(0,c.jsx)("div",{className:E,children:e.favorite.file?.name}),I&&(0,c.jsx)("div",{className:"favorited_section--subtitle--oB5UB ellipsis--ellipsis--70pHK",children:I})]})]})]})]}),(null!==r||!!a)&&s.folderId&&(0,c.jsx)(rA,{favorite:e.favorite,orderedSidebarSections:e.orderedSidebarSections})]})}var rM=r(871663),rL=r(177299),rB=r(21699),rU=r(394847);function rV(e){let t=(0,m.I0)();return(0,c.jsxs)(t2.W2,{children:[(0,c.jsx)(rl.V,{resourceId:e.favorite.project.id,resourceType:eH.IK.FOLDER,setFavorite:({sectionId:r})=>{t(eV.Dz({entrypoint:"sidebar",sectionId:r,folder:e.favorite.project,favoriteId:e.favorite.id}))},removeFavorite:()=>{t(eV.fC({entrypoint:"sidebar",folder:e.favorite.project,favoriteId:e.favorite.id}))},userHasMaxFavorites:!1,favoriteId:e.favorite.id,orderedSidebarSections:e.orderedSidebarSections,currentSectionId:e.favorite.sidebarSectionId}),(0,c.jsx)(t2.ZA,{children:(0,c.jsx)(t2.ck,{onClick:()=>{let r=(0,rU.DS)(e.favorite.project.id,e.favorite.orgId);t(rd.fB({url:r}))},children:(0,A.t)("file_browser.copy_link_to_project")})})]})}function rG(e){let t=e.favorite.project,{getContextMenuTriggerProps:r,manager:a}=t2.H9(),i=(0,rB.m)(),s=u.useCallback((e,t)=>{(0,t8.yN)(t.project?.id,eH.IK.FOLDER,t.sidebarSectionId??void 0,t8.Qh),i(t.resourceId,e)},[i]),n=(0,rb.UG)(t.path),o=n?(0,rb.ku)(t.path,n):t.path,l=e.favorite.project.activeProjectResourceConnections?.[0];return(0,c.jsxs)(t2.fC,{manager:a,children:[(0,c.jsx)(eM.SidebarRow,{ariaDescription:(0,A.t)("file_browser.project_capitalized"),badge:l?(0,c.jsx)(rL.r,{hostPlanName:l.hostPlanName,connectedPlanName:l.connectedPlanName}):void 0,dragKey:e.dragKey,icon:n?(0,c.jsx)("div",{children:(0,c.jsx)("div",{className:tz,children:n})}):(0,c.jsx)(rM.s,{}),isDragTarget:e.isDragTarget,isFavoritesToMove_DEPRECATED:e.isFavoritesToMove_DEPRECATED,isSelected:e.isSelected,onClick:t=>s(t,e.favorite),...r(),onDragDrop:e.onDragDrop,onDragEnd:e.onDragEnd,onDragEnter:e.onDragEnter,onDragLeave:e.onDragLeave,onDragQuadrantUpdate:e.onDragQuadrantUpdate,onDragStart:e.onDragStart,showGrabber:e.showGrabber,text:o,wrapInListItem:!1}),(0,c.jsx)(rV,{favorite:e.favorite,orderedSidebarSections:e.orderedSidebarSections})]})}var rz=r(186211),rW=r(563451),rH=r(416894),rK=r(152659);function rY({thumbnailUrl:e,isLocked:t,...r}){return t?(0,c.jsx)(rW.A,{thumbnailType:rK.Z.PROTOTYPE,...r}):(0,c.jsx)(rH.p,{thumbnailUrl:e,thumbnailType:rK.Z.PROTOTYPE,...r})}var rZ=r(800583);function r$(e){let t=(0,m.I0)();return(0,c.jsxs)(t2.W2,{children:[(0,c.jsx)(rl.V,{resourceId:e.favorite.prototype.id,resourceType:eH.IK.PROTOTYPE,setFavorite:({sectionId:r})=>{t(eV.WV({sectionId:r,favoriteId:e.favorite.id,resourceType:eH.IK.PROTOTYPE}))},removeFavorite:()=>{t(eV.Y2({prototype:{file_key:e.favorite.prototype.fileKey,page_id:e.favorite.prototype.pageId},entrypoint:"sidebar",favoriteId:e.favorite.id}))},userHasMaxFavorites:!1,favoriteId:e.favorite.id,orderedSidebarSections:e.orderedSidebarSections,currentSectionId:e.favorite.sidebarSectionId}),(0,c.jsx)(t2.ZA,{children:(0,c.jsx)(t2.ck,{onClick:()=>{let r=(0,rZ.cL)(e.favorite.prototype.fileKey,e.favorite.prototype.file?.name,e.favorite.prototype.pageId);t(rd.fB({url:r}))},children:(0,A.t)("file_browser.copy_link")})})]})}function rq(e){let t=(0,m.v9)(e=>e.dropdownShown),{getContextMenuTriggerProps:r,manager:a}=t2.H9(),i=u.useMemo(()=>t&&t.type===tL,[t]),s=(0,rZ.cL)(e.favorite.prototype.fileKey,e.favorite.prototype.file?.name,e.favorite.prototype.pageId);return(0,c.jsxs)(t2.fC,{manager:a,children:[(0,c.jsxs)("div",{className:tZ,children:[(0,c.jsx)(eM.SidebarRow,{ariaDescription:(0,A.t)("general.file_type.prototype"),dragKey:e.dragKey,icon:(0,c.jsx)(rz.m,{}),isDragTarget:e.isDragTarget,isFavoritesToMove_DEPRECATED:e.isFavoritesToMove_DEPRECATED,isSelected:e.isSelected,onClick:t=>((e,t)=>{if((0,t8.yN)(t.prototype?.fileKey,eH.IK.PROTOTYPE,t.sidebarSectionId??void 0,t8.Qh),(0,U.v8)(e))return void e.stopPropagation();e.preventDefault(),g.ZP.redirect(s,"_blank")})(t,e.favorite),...r(),onDragDrop:e.onDragDrop,onDragEnd:e.onDragEnd,onDragEnter:e.onDragEnter,onDragLeave:e.onDragLeave,onDragQuadrantUpdate:e.onDragQuadrantUpdate,onDragStart:e.onDragStart,showGrabber:e.showGrabber,text:e.favorite.prototype.file?.name,wrapInListItem:!1}),!i&&(0,c.jsxs)("div",{className:Y()(e.showPreviewDelay?tH:tY,{[tK]:(0,p.BZ)().file_browser_sidebar_row_ui}),style:{transform:`translateY(${-e.previewYOffset}px)`},children:[(0,c.jsx)("div",{className:t$,children:(0,c.jsx)(rY,{isLocked:!!e.favorite.prototype.file?.hasProtoLinkPassword&&e.favorite.prototype.file?.hasProtoLinkPassword,thumbnailUrl:e.favorite.prototype.thumbnailUrl,noBorder:!0})}),(0,c.jsxs)("div",{className:tq,children:[(0,c.jsx)("div",{className:tX,children:(0,c.jsx)(rz.m,{})}),(0,c.jsx)("div",{className:tQ,children:(0,c.jsx)("div",{className:tJ,children:e.favorite.prototype.file?.name})})]})]})]}),(0,c.jsx)(r$,{favorite:e.favorite,orderedSidebarSections:e.orderedSidebarSections})]})}var rQ=r(127734);function rJ(e){let t=(0,m.I0)();return(0,c.jsxs)(t2.W2,{children:[(0,c.jsx)(rl.V,{resourceId:e.favorite.workspace.id,setFavorite:({sectionId:r})=>{t(eV.lk({entrypoint:"sidebar",workspace:e.favorite.workspace,sectionId:r,favoriteId:e.favorite.id}))},removeFavorite:()=>{t(eV.r_({entrypoint:"sidebar",workspace:e.favorite.workspace,favoriteId:e.favorite.id}))},userHasMaxFavorites:!1,favoriteId:e.favorite.id,orderedSidebarSections:e.orderedSidebarSections,currentSectionId:e.favorite.sidebarSectionId,resourceType:eH.IK.WORKSPACE}),(0,c.jsx)(t2.ZA,{children:(0,c.jsx)(t2.ck,{onClick:()=>{if(null!==e.favorite.orgId){let r=(0,rQ.i7)(e.favorite.workspace.id,e.favorite.orgId);t(rd.fB({url:r}))}},children:(0,A.t)("file_browser.copy_link_to_workspace")})})]})}function rX(e){let t=(0,m.I0)(),r=e.favorite.workspace,{getContextMenuTriggerProps:a,manager:i}=t2.H9(),s=u.useCallback((e,r)=>{let a=r.workspace;(0,t8.yN)(a?.id,eH.IK.WORKSPACE,r.sidebarSectionId??void 0,t8.Qh),a&&t(eL.fv({view:"workspace",subView:tn.ep.DIRECTORY,workspaceId:a.id,selectedTab:tn.rE.TEAMS}))},[t]),n=e.favorite.workspace?(0,c.jsx)(ro.zf,{entity:e.favorite.workspace,size:16}):(0,c.jsx)(tl.e,{className:P.B.colorIcon.$});return(0,c.jsxs)(t2.fC,{manager:i,children:[(0,c.jsx)(eM.SidebarRow,{ariaDescription:(0,A.t)("file_browser.workspace_capitalized"),dragKey:e.dragKey,icon:n,isDragTarget:e.isDragTarget,isSelected:e.isSelected,onClick:t=>s(t,e.favorite),onDragDrop:e.onDragDrop,onDragEnd:e.onDragEnd,onDragEnter:e.onDragEnter,onDragLeave:e.onDragLeave,onDragQuadrantUpdate:e.onDragQuadrantUpdate,onDragStart:e.onDragStart,showGrabber:e.showGrabber,text:r.name,wrapInListItem:!1,...a()}),(0,c.jsx)(rJ,{favorite:e.favorite,orderedSidebarSections:e.orderedSidebarSections})]})}function r0(e){let t=(0,m.I0)(),r=(0,m.v9)(e=>e.dragState),a=(0,m.v9)(e=>e.currentUserOrgId),{hasPendingRequest:i,getUpgradePathway:s,getUpgradeEligibility:n,getPlanAndPlanUser:o,getHasProvisionalAccess:l,getShouldShowCurf:d,getShouldShowScim:_,getIsUpgradeHandlerLoading:p,getIsEligibleForProvisionalAccess:f}=(0,rx.eW)({folderId:e.favorite.resourceType===eH.IK.FOLDER?e.favorite.resource.project?.id??null:null,isDraftsMove:!0}),x=(0,rf.VS)((0,ex.Dv)(rf.hG)),[g,h]=u.useState(!1),v=e.favorite.resourceType,b=(0,eB.A6)(),[y,j]=u.useState(!1),w=e.rearrangeDragState?.draggedOverFavoriteId===e.favorite.resource.id&&!y,[T,I]=u.useState(!1),E=u.useRef(null),k=(0,tT.Sj)(),N=e.isSelected||(()=>{switch(v){case eH.IK.FOLDER:return"folder"===b.view&&b.folderId===e.favorite.resource.resourceId;case eH.IK.TEAM:return"team"===b.view&&b.teamId===e.favorite.resource.resourceId;case eH.IK.WORKSPACE:return"workspace"===b.view&&b.subView===tn.ep.DIRECTORY&&b.workspaceId===e.favorite.resource.resourceId;default:return!1}})(),C=r=>{r.dataTransfer.effectAllowed="move";let a=new th.nb(r.dataTransfer);a.setArbitraryData(e.favorite.resource.id);let i=r.currentTarget;if(!i)return;let s=i.getBoundingClientRect(),n=r.clientX-s.left,o=r.clientY-s.top;E.current=((e,t)=>{let r=e.cloneNode(!0),a=document.createElement("div");return a.className="favorited_generic_row--favorite--Hv-Fo favorited_generic_row--_favorite--bgYvF sidebar--sidebarSection--iAFAy text--fontPos11--rO47d text--_fontBase--VaHfk",Object.assign(a.style,{position:"absolute",top:"-100%",left:"-100%",width:`${e.clientWidth}px`,height:`${e.clientHeight}px`,overflow:"hidden",zIndex:-1}),r.style.overflow="hidden",t&&(r.classList.add(t),r.classList.add(P.B.colorText.$)),a.appendChild(r),document.body.appendChild(a),a})(i,"favorited_generic_row--draggable--zPakC"),a.setDragImage(E.current,n,o),t(tg.f({type:eZ.D.Favorite,data:e.favorite}))},R=(t,a)=>{let i=new th.nb(t),s=!1;(r.type===eZ.D.Favorite||i.isFigFiles()||i.isRepos()||i.isPrototypes()||i.isTiles())&&((i.isFigFiles()||i.isRepos()||i.isTiles())&&(s=e.favorite.resourceType===eH.IK.FOLDER),e.updateRearrangeDragState({draggedOverFavoriteId:e.favorite.resource.id,dropBefore:s?a.upperQuarter:a.upper,dropInto:s&&a.middleVerticalHalf,draggedOverSectionId:e.favorite.resource.sidebarSectionId}),I(s))},S=t=>{let a=new th.nb(t);(r.type===eZ.D.Favorite||a.isFigFiles()||a.isRepos()||a.isPrototypes()||a.isTiles()&&w)&&(e.clearRearrangeDragState(e.favorite.resource.id),I(!1))},D=(t,r)=>{let a=p();return(0,rf.c)({files:t,repos:r,isDestinationDrafts:e.favorite.resourceType===eH.IK.FOLDER&&e.favorite.resource.project?.path==="",enabledForOrgOnly:!1,originFolderIdToPath:x,hasPendingRequest:i,getUpgradePathway:s,getUpgradeEligibility:n,getPlanAndPlanUser:o,getHasProvisionalAccess:l,getShouldShowCurf:d,getShouldShowScim:_,loading:a,getIsEligibleForProvisionalAccess:f})},F=a=>{let i=new th.nb(a);if(e.rearrangeDragState?.dropInto&&e.favorite.resourceType===eH.IK.FOLDER&&e.favorite.resource.project)tx(t,e.favorite.resource.project,e.favorite.resource.project.team,i,D,k),t(tg.C());else if(i.isFigFiles()||i.isRepos()||i.isPrototypes()||i.isTiles())e.onSetResourceFavoriteDragDrop(a);else if(r.type===eZ.D.Favorite&&w){let a=r.data;e.reorderOrInsertFavorite(a.resource.id,a.resourceType),t(tg.C())}e.clearRearrangeDragState(e.favorite.resource.id),I(!1)},M=r=>{E.current&&E.current.remove(),t(tg.C()),e.clearRearrangeDragState(e.favorite.resource.id),I(!1)},L=t=>{e.updateRearrangeDragState({draggedOverFavoriteId:e.favorite.resource.id,dropBefore:T?t.upperQuarter:t.upper,dropInto:T&&t.middleVerticalHalf,draggedOverSectionId:e.favorite.resource.sidebarSectionId})},B=e=>{let t=new th.nb(e);return j(t.isFile()),r.type!==eZ.D.SidebarSection&&!t.isFile()};return(0,c.jsx)("li",{className:w?e.rearrangeDragState?.dropBefore?"favorited_generic_row--dropBefore--a28Og sidebar--dropBefore--qkRdi":e.rearrangeDragState?.dropInto?"favorited_generic_row--dropInto--1-Yd1":"favorited_generic_row--dropAfter--vlF1F sidebar--dropAfter--KKT1q":void 0,children:(0,c.jsx)("div",{onMouseEnter:()=>{e.preventHoverStyle||h(!0)},onMouseLeave:()=>{e.setShowPreviewDelay(!1),h(!1)},draggable:!e.isFavoritesToMove_DEPRECATED,children:(0,c.jsxs)("div",{className:"favorited_generic_row--rowWithMoveButtons--9v0-H",children:[(0,c.jsx)("div",{className:"favorited_generic_row--rowContentContainer--x18bw",children:(()=>{switch(v){case eH.IK.FILE:if(!e.favorite.resource.file)return null;return(0,c.jsx)(rF,{dragKey:`FavoritedFile_${e.favorite.resource.resourceId}`,favorite:e.favorite.resource,isDragTarget:B,isFavoritesToMove_DEPRECATED:e.isFavoritesToMove_DEPRECATED,isHover:g,isSelected:N,onDragDrop:F,onDragEnd:M,onDragEnter:R,onDragLeave:S,onDragQuadrantUpdate:L,onDragStart:C,orderedSidebarSections:e.orderedSidebarSections,previewYOffset:e.previewYOffset,showGrabber:!1,showPreviewDelay:e.showPreviewDelay});case eH.IK.PROTOTYPE:if(!e.favorite.resource.prototype)return null;return(0,c.jsx)(rq,{dragKey:`FavoritedPrototype_${e.favorite.resource.resourceId}`,favorite:e.favorite.resource,isDragTarget:B,isFavoritesToMove_DEPRECATED:e.isFavoritesToMove_DEPRECATED,isHover:g,isSelected:N,onDragDrop:F,onDragEnd:M,onDragEnter:R,onDragLeave:S,onDragQuadrantUpdate:L,onDragStart:C,orderedSidebarSections:e.orderedSidebarSections,previewYOffset:e.previewYOffset,showGrabber:!1,showPreviewDelay:e.showPreviewDelay});case eH.IK.FOLDER:if(!e.favorite.resource.project)return null;return(0,c.jsx)(rG,{dragKey:`FavoritedProject_${e.favorite.resource.resourceId}`,favorite:e.favorite.resource,isDragTarget:B,isFavoritesToMove_DEPRECATED:e.isFavoritesToMove_DEPRECATED,isHover:g,isSelected:N,onDragDrop:F,onDragEnd:M,onDragEnter:R,onDragLeave:S,onDragQuadrantUpdate:L,onDragStart:C,orderedSidebarSections:e.orderedSidebarSections,showGrabber:!1});case eH.IK.TEAM:if(!e.favorite.resource.team||!a)return null;return(0,c.jsx)(r_,{dragKey:`FavoritedTeam_${e.favorite.resource.resourceId}`,favorite:e.favorite.resource,isDragTarget:B,isHover:g,isSelected:N,onDragDrop:F,onDragEnd:M,onDragEnter:R,onDragLeave:S,onDragQuadrantUpdate:L,onDragStart:C,orderedSidebarSections:e.orderedSidebarSections,orgId:a,showGrabber:!1});case eH.IK.WORKSPACE:if(!e.favorite.resource.workspace||!a)return null;return(0,c.jsx)(rX,{dragKey:`FavoritedWorkspace_${e.favorite.resource.resourceId}`,favorite:e.favorite.resource,isDragTarget:B,isHover:g,isSelected:N,onDragDrop:F,onDragEnd:M,onDragEnter:R,onDragLeave:S,onDragQuadrantUpdate:L,onDragStart:C,orderedSidebarSections:e.orderedSidebarSections,orgId:a,showGrabber:!1});default:(0,O.vE)(v)}})()}),(0,c.jsxs)("div",{className:"favorited_generic_row--moveButtons--emibA visually_hidden--visuallyHidden--sMum-",children:[(0,c.jsx)(eo.h,{"aria-label":(0,A.t)("favorited_resources.move_down"),onClick:()=>{e.keyboardMoveFavorite(e.favorite.resource.id,t_.eS.Down)},disabled:!e.canMoveWithinSection?.(e.favorite.resource.id,t_.eS.Down),children:(0,c.jsx)(t7.i,{})}),(0,c.jsx)(eo.h,{"aria-label":(0,A.t)("favorited_resources.move_up"),onClick:()=>{e.keyboardMoveFavorite(e.favorite.resource.id,t_.eS.Up)},disabled:!e.canMoveWithinSection?.(e.favorite.resource.id,t_.eS.Up),children:(0,c.jsx)(t3.m,{})})]})]})})})}var r1=r(699232);function r5(e){let t=(0,m.I0)(),r=(0,m.v9)(e=>e.currentTeamId),a=(0,et.$0)()??null,i=(0,J.hn)(e.favorites,e.order),s=(0,eB.A6)(),[n,o]=u.useState(!1),l=(0,m.v9)(e=>e.favorites.movingResource),d=(0,m.v9)(e=>e.favorites.collapsedCustomSections),_=e.section?!d.has(e.section?.id):!d.has("favorited"),[f,x]=u.useState(!1),[g,h]=u.useState(),[b,y]=u.useState(),j=(0,m.v9)(e=>e.dragState),w=(0,v.D9)(j);u.useEffect(()=>{j.type===eZ.D.None&&w&&w.type!==eZ.D.None&&y(void 0)},[j,w]),u.useEffect(()=>{!e.isCurrentHoveredSection&&j.type===eZ.D.SidebarSection&&b&&y(void 0)},[e.isCurrentHoveredSection,b,j]);let[T,I]=u.useState(void 0),[E,k]=u.useState(!0),N=u.useRef(null),C=tB();u.useEffect(()=>{T===b?.draggedOverFavoriteId&&y(void 0),I(void 0)},[b,y,T,I]);let R=u.useCallback(r=>{e.section?.id&&(r.dataTransfer.effectAllowed="move",new th.nb(r.dataTransfer).setArbitraryData(e.section.id),t(tg.f({type:eZ.D.SidebarSection,data:e.section.id})))},[t,e.section]),S=u.useCallback(()=>{(0,t8.Yo)(!_);let r=new Set(d);e.section?(r1.Ox({type:"topLevel",id:"custom",orgId:a,sectionId:e.section?.id},!_),_?r.add(e.section.id):r.delete(e.section.id)):(r1.Ox({type:"topLevel",id:"favorited",orgId:a},!_),_?r.add("favorited"):r.delete("favorited")),t(eV.l6({collapsedCustomSections:r}))},[_,a,e.section,d,t]),O=(r,a)=>{let s,n=i.map(e=>e.resource.id);if(!b?.draggedOverFavoriteId)return n;let o=-1!==n.indexOf(r);if(o)s=(0,tN.uo)(n,r,b.draggedOverFavoriteId,b.dropBefore);else{let e=n.indexOf(b.draggedOverFavoriteId);b.dropBefore||(e+=1),s=[...n.slice(0,e),r,...n.slice(e)]}if((0,t8.Ac)(),h(r),e.section?.id)return void(o?t(eV.$n({sectionId:e.section.id,orderedFavoriteIds:s})):t(eV.WV({favoriteId:r,sectionId:e.section.id,resourceType:a,orderedFavoriteIds:s})));o||t(eV.WV({favoriteId:r,sectionId:void 0,resourceType:a})),t(Z.gz({prefs:{id:e.fileBrowserPreferences?.id||"optimistic-id",orderedFavoritedResourceIds:s,orderedTeamIds:e.fileBrowserPreferences?.orderedTeamIds,orderedLicenseGroupIds:e.fileBrowserPreferences?.orderedLicenseGroupIds},userInitiated:!0}))},D=(e,t)=>{let r=i.map(e=>e.resource.id);return(0,t5.T)(r,e,t)},F=(r,a)=>{let s=i.map(e=>e.resource.id),n=(0,t5.A)(s,r,a);(0,t8.Ac)(),e.section?.id?t(eV.$n({sectionId:e.section?.id,orderedFavoriteIds:n})):t(Z.gz({prefs:{id:e.fileBrowserPreferences?.id||"optimistic-id",orderedFavoritedResourceIds:n,orderedTeamIds:e.fileBrowserPreferences?.orderedTeamIds,orderedLicenseGroupIds:e.fileBrowserPreferences?.orderedLicenseGroupIds},userInitiated:!0}))},M=u.useCallback(e=>{e.stopPropagation(),g&&h(void 0)},[g]),L=u.useCallback(()=>{k(!0)},[]),B=u.useCallback(e=>{let t=new th.nb(e);return o(t.isFile()),t.isFigFiles()||t.isRepos()||t.isPrototypes()||t.isTiles()},[]),U=n=>{let o=new th.nb(n),l=[],d=[],c=[];if(x(!1),o.isFigFiles()){if(!(l=o.getData()))return!1}else if(o.isPrototypes()){if(!(c=o.getData()))return!1}else if(o.isRepos()){let e=o.getReposData();if(!e)return!1;d=e.repos}else if(o.isTiles()){let e=o.getTilesData();if(!e)return!1;l=e.files,d=e.repos,c=e.prototypes}l=l.filter(e=>!e.is_favorited),d=d.filter(e=>!e.is_favorited),c=c.filter(e=>!e.is_favorited);let u=i.map(e=>e.resource.id),m=l.length+d.length+c.length,_=(0,J.gC)(a);if(m+i.length>_)return t(tp.R.enqueue({message:(0,A.t)("tile.favoriting.max_favorites",{maxFavorites:_})})),!1;let p=null;return b&&(p=u.indexOf(b.draggedOverFavoriteId)+ +!b.dropBefore),t(eV.S9({files:l,repos:d,prototypes:c,orgId:a,teamId:r,selectedView:s.view,entrypoint:"sidebar",insertAtIndex:p,orderedFavorites:u,sectionId:e.section?.id,fileBrowserPrefs:e.fileBrowserPreferences})),!0},V=u.useCallback(()=>{x(!0)},[]),G=u.useCallback(()=>{x(!1)},[]),z=Y()(P.B.relative.$,f||b?.draggedOverSectionId&&e.section&&!n&&b.draggedOverSectionId===e.section.id?tW:""),W=e.section?.name===""||e.section?.name===void 0?(0,A.tx)("sidebar.starred"):e.section.name,{getTriggerProps:H,manager:K}=t2.H9(),{getContextMenuTriggerProps:$,manager:q}=t2.H9(),Q=(0,p.BZ)().file_browser_sidebar_options_menu_fpl_migration?K.isOpen:C?.data?.customSection?.id===e.section?.id,X=e.isCreatingNewSection||e.isRenaming,ee=e.section?.name===void 0?(0,A.t)("sidebar.new_section"):(0,J.zs)(e.section)?(0,A.t)("sidebar.starred"):e.section.name,er=!!a,ea=(0,p.BZ)().file_browser_sidebar_options_menu_fpl_migration?e.section&&e.setRenamingSectionId&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(rt,{manager:K,customSectionId:e.section.id,customSectionName:e.section.name,favoritesCount:i.length,setRenamingSectionId:e.setRenamingSectionId}),(0,c.jsx)(t4.F,{"aria-label":(0,A.t)("favorited_resources.settings_tooltip"),...H(),children:(0,c.jsx)(t9.O,{})})]}):(0,c.jsx)(t4.F,{"aria-expanded":!!C,"aria-label":(0,A.t)("favorited_resources.settings_tooltip"),onClick:r=>{C?t(eL.kp()):N.current&&t(eL.SP({type:tL,data:{targetRect:N.current.getBoundingClientRect(),customSection:e.section,favoritesCount:i.length}})),r.stopPropagation(),r.preventDefault()},ref:N,children:(0,c.jsx)(t9.O,{})}),ei=(0,p.BZ)().file_browser_sidebar_options_menu_fpl_migration?$():{onContextMenu:r=>{r.stopPropagation(),r.preventDefault();let a={top:r.clientY,right:r.clientX,bottom:r.clientY,left:r.clientX,width:1,height:1};t(eL.SP({type:tL,data:{customSection:e.section,favoritesCount:i.length,isFromRightClick:!0,targetRect:a}}))}},es=(0,p.BZ)().file_browser_sidebar_options_menu_fpl_migration?e.section&&e.setRenamingSectionId&&er&&(0,c.jsx)(rt,{manager:q,customSectionId:e.section.id,customSectionName:e.section.name,favoritesCount:i.length,setRenamingSectionId:e.setRenamingSectionId}):null;return(0,c.jsx)(tm.h,{className:z,isDragTarget:B,draggable:!1,onTargetDrop:U,onTargetDragEnter:V,onTargetDragLeave:G,children:(0,c.jsx)("div",{...{0:{className:"x1n2onr6 xllavft x1ee41r2 xm7qe6o xhx6fvi"},2:{className:"x1n2onr6 xllavft x1ee41r2 xm7qe6o xhx6fvi xlyh1x3 xzssux2"},1:{className:"x1n2onr6 xllavft x1ee41r2 xm7qe6o xhx6fvi xfm57zq"},3:{className:"x1n2onr6 xllavft x1ee41r2 xm7qe6o xhx6fvi xfm57zq"}}[0|!!(Q&&!X)|!X<<1],children:(0,c.jsxs)(tC.fC,{isOpen:_,toggle:S,...ei,children:[(0,c.jsxs)(tC.h4,{children:[e.isRenaming&&(0,c.jsx)(re.I,{...{className:"x10l6tqk x13vifvy x1qpfodn xn5hqff x10w6t97 x4zv5z4"},inputId:`section-name-input-${e.section?.id}`,hiddenLabelText:(0,A.t)("sidebar.section_name_aria_label"),placeholderValue:ee,submit:r=>{e.isCreatingNewSection?(l?t(eV.pv({name:r,insertAtIndex:e.sectionIndex,currentOrderedSections:e.orderedSidebarSections.map(e=>e.id),prefs:e.fileBrowserPreferences??void 0,newResourceForSection:l})):t(eV.mD({name:r,insertAtIndex:e.sectionIndex,currentOrderedSections:e.orderedSidebarSections.map(e=>e.id),prefs:e.fileBrowserPreferences??void 0})),e.setNewCustomSectionIndex&&e.setNewCustomSectionIndex(void 0)):e.section&&(t(eV.$n({sectionId:e.section.id,name:r.trim()})),e.setRenamingSectionId&&e.setRenamingSectionId(void 0))},cancel:()=>{e.isCreatingNewSection?(e.setNewCustomSectionIndex&&e.setNewCustomSectionIndex(void 0),l&&t(eV.lt({movingResource:void 0}))):e.setRenamingSectionId&&e.setRenamingSectionId(void 0)},maxLength:25}),(0,c.jsx)(tC.__,{htmlAttributes:{draggable:!0,onDragStart:R,"data-onboarding-key":1===e.orderedSidebarSections.length?null:"FAVORITES_ONBOARDING_KEY"},children:(0,c.jsx)("div",{...{0:{className:"x1ks10aj xb3r6kr xlyipyv xuxw1ft"},1:{className:"xb3r6kr xlyipyv xuxw1ft x10ig2yy"}}[0|!!(0,p.BZ)().file_browser_sidebar_row_ui],children:W})}),er&&(0,c.jsx)(tC.Qn,{children:(0,c.jsxs)("div",{...{className:"x1hp4vcz x1euntei x78zum5 x6s0dn4"},children:[(0,c.jsx)("div",{...{className:"x12w5q5g x4oz5gu"},children:(0,c.jsx)(eo.h,{"aria-label":e.section?.name===""||e.section?.name===void 0?(0,A.t)("favorited_resources.starred_section_move_down"):(0,A.t)("favorited_resources.custom_section_move_down",{sectionName:e.section?.name}),onClick:()=>{e.keyboardMoveSection?.(e.section?.id??"",t_.eS.Down)},disabled:!e.canKeyboardMoveSection?.(e.section?.id??"",t_.eS.Down),children:(0,c.jsx)(t7.i,{})})}),(0,c.jsx)("div",{...{className:"x12w5q5g x4oz5gu"},children:(0,c.jsx)(eo.h,{"aria-label":e.section?.name===""||e.section?.name===void 0?(0,A.t)("favorited_resources.starred_section_move_up"):(0,A.t)("favorited_resources.custom_section_move_up",{sectionName:e.section?.name}),onClick:()=>{e.keyboardMoveSection?.(e.section?.id??"",t_.eS.Up)},disabled:!e.canKeyboardMoveSection?.(e.section?.id??"",t_.eS.Up),children:(0,c.jsx)(t3.m,{})})}),ea,(0,c.jsx)(r2,{newCustomSectionIndex:e.sectionIndex,setNewCustomSectionIndex:e.setNewCustomSectionIndex})]})})]}),es,(0,c.jsx)(tC.VY,{children:0===i.length?1===e.orderedSidebarSections.length&&(0,J.zs)(e.orderedSidebarSections[0])&&!e.isCreatingNewSection?(0,c.jsx)(t0,{}):(0,c.jsx)(c.Fragment,{}):(0,c.jsx)("ol",{onMouseMove:M,onMouseLeave:L,children:i.map(t=>{let r=g===t.resource.id;return(0,c.jsx)(r0,{canMoveWithinSection:D,clearRearrangeDragState:I,favorite:t,isSelected:r,keyboardMoveFavorite:F,onSetResourceFavoriteDragDrop:U,orderedSidebarSections:e.orderedSidebarSections,preventHoverStyle:void 0!==g,previewYOffset:e.previewYOffset,rearrangeDragState:b,reorderOrInsertFavorite:O,setShowPreviewDelay:k,showPreviewDelay:E,updateRearrangeDragState:y},t.resource.resourceId)})})})]})})})}function r2(e){return(0,c.jsx)("div",{className:"favorited_section--dialogTriggerButtonContainer--gJ-Rf",children:(0,c.jsx)(eo.h,{"aria-label":(0,A.t)("favorited_resources.create_a_new_section_tooltip"),htmlAttributes:{"data-tooltip":(0,A.t)("favorited_resources.create_a_new_section_tooltip"),"data-tooltip-type":"text"},onClick:t=>{t.stopPropagation(),e.setNewCustomSectionIndex&&e.setNewCustomSectionIndex(e.newCustomSectionIndex)},children:(0,c.jsx)(t6.Z,{})})})}function r4(e){let t=(0,J.D6)(e.favoritedFiles,e.favoritedPrototypes,e.favoritedProjects,null,null);return(0,c.jsx)(r5,{favorites:t,order:e.fileBrowserPreferences?.orderedFavoritedResourceIds??void 0,fileBrowserPreferences:e.fileBrowserPreferences,orderedSidebarSections:[],sectionIndex:0,previewYOffset:e.previewYOffset})}function r9(e){let t=(0,m.I0)(),r=(0,m.v9)(e=>e.dragState),a=(0,m.v9)(e=>e.favorites.newCustomSectionIndex),i=(0,m.v9)(e=>e.favorites.favoritesCount),s=(0,J.D6)(e.favoritedFiles,e.favoritedPrototypes,e.favoritedProjects,e.favoritedTeams,e.favoritedWorkspaces),[n,o]=u.useState(),[l,d]=u.useState(),[_,p]=u.useState(!1),f=u.useMemo(()=>(0,J.zF)(e.userSidebarSections??[],e.fileBrowserPreferences?.orderedSidebarSections??void 0),[e.userSidebarSections,e.fileBrowserPreferences?.orderedSidebarSections]);u.useMemo(()=>{i&&i<15&&s.length>=15&&(0,tR.Qo)({id:tS.FAVORITES_COUNT_CROSSED_THRESHOLD_EVENT}),t(eV.md({favoritesCount:s.length}))},[i,s.length,t]);let x={},g=[];s.forEach(e=>{e.resource.sidebarSectionId?x[e.resource.sidebarSectionId]?x[e.resource.sidebarSectionId].push(e):x[e.resource.sidebarSectionId]=[e]:g.push(e)});let h=u.useCallback(()=>r.type===eZ.D.Favorite||r.type===eZ.D.SidebarSection,[r]),v=u.useCallback(e=>{r.type===eZ.D.SidebarSection&&p(e.upper)},[r]),b=u.useCallback(()=>{let a="starred"===n?void 0:n;if(r.type===eZ.D.Favorite){let e=r.data;t(eV.WV({favoriteId:e.resource.id,sectionId:a,resourceType:e.resourceType}))}else if(r.type===eZ.D.SidebarSection&&a){let i=f.map(e=>e.id)??[],s=(0,tN.uo)(i,r.data,a,_);t(Z.gz({prefs:{id:e.fileBrowserPreferences?.id||"optimistic-id",orderedFavoritedResourceIds:e.fileBrowserPreferences?.orderedFavoritedResourceIds,orderedTeamIds:e.fileBrowserPreferences?.orderedTeamIds,orderedLicenseGroupIds:e.fileBrowserPreferences?.orderedLicenseGroupIds,orderedSidebarSections:s},userInitiated:!0}))}p(!1),o(void 0),t(tg.C())},[n,t,r,_,f,e.fileBrowserPreferences]),y=u.useCallback(e=>()=>{o(e)},[]),j=u.useCallback(()=>{o(void 0)},[]),w=u.useCallback(e=>{t(eV.J6({newCustomSectionIndex:e}))},[t]),T=u.useCallback((e,t)=>{let r=f.map(e=>e.id)??[];return(0,t5.T)(r,e,t)},[f]),I=u.useCallback((r,a)=>{let i=f.map(e=>e.id)??[],s=(0,t5.A)(i,r,a);t(Z.gz({prefs:{id:e.fileBrowserPreferences?.id||"optimistic-id",orderedFavoritedResourceIds:e.fileBrowserPreferences?.orderedFavoritedResourceIds,orderedTeamIds:e.fileBrowserPreferences?.orderedTeamIds,orderedLicenseGroupIds:e.fileBrowserPreferences?.orderedLicenseGroupIds,orderedSidebarSections:s},userInitiated:!0}))},[t,e.fileBrowserPreferences,f]);if(0===f.length&&void 0===a)return(0,c.jsx)(t1,{});let E=(0,c.jsx)("div",{className:P.B.mb8.$,children:(0,c.jsx)(r5,{canKeyboardMoveSection:T,favorites:[],fileBrowserPreferences:e.fileBrowserPreferences,isCreatingNewSection:!0,isRenaming:!0,keyboardMoveSection:I,order:[],orderedSidebarSections:f,previewYOffset:e.previewYOffset,sectionIndex:a||0,setNewCustomSectionIndex:w,setRenamingSectionId:d})});return(0,c.jsx)("div",{className:P.B.mt8.$,children:(0,c.jsxs)(tC.ZA,{"aria-label":(0,A.t)("sidebar.starred"),children:[0===a&&E,f.map((t,i)=>{let s=r.type===eZ.D.Favorite?tW:_?"favorited_section--dropBefore--mQnaJ sidebar--dropBefore--qkRdi":"favorited_section--dropAfter--20vRs sidebar--dropAfter--KKT1q",o=Y()(n===t.id?s:"",P.B.mb8.$);return(0,c.jsxs)("div",{children:[(0,c.jsx)(tm.h,{className:o,isDragTarget:h,draggable:!1,onTargetDragQuadrantUpdate:v,onTargetDrop:b,onTargetDragEnter:y(t.id),onTargetDragLeave:j,children:(0,c.jsx)(r5,{canKeyboardMoveSection:T,favorites:x[t.id]??[],isCurrentHoveredSection:n===t.id,isRenaming:l===t.id,keyboardMoveSection:I,order:t.orderedFavoritedResourceIds??[],orderedSidebarSections:f,previewYOffset:e.previewYOffset,section:t,sectionIndex:i,setNewCustomSectionIndex:w,setRenamingSectionId:d})}),a===i+1&&E]},t.id)}),(0,c.jsx)(tU,{setRenamingSectionId:d})]})})}var r7=r(228737),r3=r(640296),r6=r(240473),r8=r(926941),ae=r(260736),at=r(95238),ar=r(739842),aa=r(404008),ai=r(694510),as=r(571622),an=r(68634),ao=r(802989);let al=(0,tA.Y3)(function(e){let[t,r]=(0,u.useState)(null),a=(0,m.I0)(),i=(0,aa.Ok)(),s=(0,ea.dO)(),n=(0,m.v9)(e=>e.teamUserByTeamId),o=(0,m.v9)(e=>s?e.authedUsers.byId[s]?.plans?.filter(e=>!e.is_org):null),l=(0,A.t)("file_browser.planless_favorites.add_favorites_to_modal_title"),d=()=>a(tF.hV()),_={};return s&&(0,as.H)(n,s).forEach(e=>{e.drafts_folder_id&&(_[e.team_id]=e.drafts_folder_id)}),(0,c.jsx)(an.xm,{title:l,fixedTop:!0,minWidth:480,maxWidth:480,onClose:d,truncateTitleText:!0,children:(0,c.jsxs)("div",{className:"move_favorites_modal--modalBody--FnDdW",children:[o&&(0,c.jsx)(e_.l,{width:480,children:(0,c.jsx)("div",{className:P.B.pl8.pr8.$,children:o.map(e=>(0,c.jsx)(ad,{planId:e.plan_id,name:e.name,imgUrl:e.img_url,checked:t?.plan_id===e.plan_id,onSelect:()=>r(t?.plan_id===e.plan_id?null:e)},e.plan_id))})}),(0,c.jsxs)("div",{className:"move_favorites_modal--footer--UstYc",children:[(0,c.jsx)(ar.PL,{onClick:d,children:(0,A.tx)("modal.cancel")}),(0,c.jsx)(ar.RS,{disabled:!t,onClick:()=>{var r;let s=t?.is_org?null:t?.plan_id,n=e.favorites.reduce((e,t)=>t.resourceType===eH.IK.FILE&&t.resource.file?.key?{...e,[t.resource.file?.key]:!0}:e,{}),o={},l=i.filter(e=>{let t=!!n[e.key];return t&&(o[e.key]=!0),t}),c=e.favorites.filter(e=>!(e.resourceType===eH.IK.FILE&&e.resource.file?.key)||!o[e.resource.file?.key]).map(e=>e.resource.id);a(eV.aX({favoriteIds:c,teamId:s})),s&&(r=_[s])&&a(ai.pB({files:l,folderName:"",folderId:r,isDraftsToMove:!0,fromFileModal:!0})),d()},children:(0,A.t)("modal.confirm")})]})]})})},"MoveFavoritesModal");function ad(e){return(0,c.jsxs)("button",{"data-testid":`${e.name}-button`,className:Y()("move_favorites_modal--teamRow--w-t-T",e.checked?P.B.colorBgSelected.$:""),onClick:e.onSelect,children:[(0,c.jsx)("div",{className:"move_favorites_modal--iconContainer--JLuaJ",children:e.checked?(0,c.jsx)(r6.n,{className:P.B.colorIcon.$,svg:ao.Z}):(0,c.jsx)(ra.Ir,{size:ra.DZ.MEDIUM,shape:"CIRCLE",fallbackDisplay:ri.D.HIDDEN,team:{id:e.planId,imgUrl:e.imgUrl}})}),(0,c.jsx)("div",{className:"move_favorites_modal--teamName--cblZ8 ellipsis--ellipsis--70pHK",children:(0,c.jsx)("span",{className:"move_favorites_modal--destinationHeading--q-z5l",children:e.name})})]})}var ac=r(223710),au=r(313434),am=r(507358);let a_="favorited_drafts_to_move";function ap(e){let t=(0,m.I0)(),[r,a]=u.useState(!0),i=(0,ea.dO)(),s=(0,m.v9)(e=>e.favorites.collapsedCustomSections),n=e.teamUser?.planlessFavoritedFiles?.filter(t=>!e.dataDriftCorrectedTeamResources?.favoritedFilesKeySet.has(t.resourceId)),o=e.teamUser?.planlessFavoritedPrototypes?.filter(t=>!e.dataDriftCorrectedTeamResources?.favoritedPrototypesIdSet.has(t.resourceId)),l=e.teamUser?.planlessFavoritedProjects?.filter(t=>!e.dataDriftCorrectedTeamResources?.favoritedFoldersIdSet.has(t.resourceId)),d=(0,J.D6)(n,o,l),p=!s.has(a_),f=u.useCallback(()=>{r1.Ox({type:"topLevel",id:a_,orgId:null},!p),p?s.add(a_):s.delete(a_),t(eV.l6({collapsedCustomSections:s}))},[p,s,t]),x=u.useCallback(()=>{t(eV.CC({favoriteIds:d.map(e=>e.id)}))},[t,d]);if(0===d.length)return(0,c.jsx)(c.Fragment,{});let g=d.map(t=>(0,c.jsx)(r0,{clearRearrangeDragState:_.ZT,favorite:t,isFavoritesToMove_DEPRECATED:!0,isSelected:!1,keyboardMoveFavorite:_.ZT,onSetResourceFavoriteDragDrop:_.ZT,orderedSidebarSections:[],preventHoverStyle:!1,previewYOffset:e.previewYOffset,rearrangeDragState:void 0,reorderOrInsertFavorite:_.ZT,setShowPreviewDelay:a,showPreviewDelay:r,updateRearrangeDragState:_.ZT},t.resource.resourceId));return(0,c.jsx)(r8.Ui,{name:at.V4.FAVORITES_TO_MOVE_SECTION,properties:{userId:i,numFiles:d.length},children:(0,c.jsxs)("div",{className:Y()("favorited_section--moveFavoritesContainer--WhMM9",P.B.pt4.pb4.ml8.mr8.mb8.$),children:[(0,c.jsxs)("div",{className:Y()(P.B.flex.itemsCenter.justifyBetween.pl8.pr8.$,"favorited_section--favoriteToMoveHeaderContainer--ZdCoX favorited_section--sectionHeaderContainer--eUlVH sidebar--sectionHeaderContainer--h8sCQ sidebar--sectionHeaderName--hVHne sidebar--sectionName--w6YCg sidebar--sectionText--NNbnc sidebar--sectionContent--ydL-l ellipsis--ellipsis--70pHK"),children:[(0,c.jsxs)("div",{onClick:f,className:P.B.flex.itemsCenter.justifyBetween.$,role:"button",tabIndex:0,children:[(0,c.jsx)(r6.n,{className:Y()(P.B.flex.itemsCenter.p6.mr12.colorIcon.$,"favorited_section--moveFavoritesContainerHeaderLeftBlockItems---Cvgi"),svg:p?ac.Z:au.Z}),(0,A.tx)("sidebar.move_these_starred_items"),(0,c.jsx)(r6.n,{svg:am.Z,className:Y()("favorited_section--helpIcon--Kk9pv",P.B.flex.itemsBaseline.ml4.$),"data-tooltip-type":ae.fR.TEXT,"data-tooltip":(0,A.t)("file_browser.planless_favorites.your_favorited_items_tooltip"),"data-tooltip-timeout-delay":50,"data-tooltip-max-width":200})]}),p?null:(0,c.jsx)(r7.Ct,{text:d.length>99?"99+":`${d.length}`,color:r7.JV.DEFAULT,className:P.B.mr8.colorText.colorBgSelectedSecondary.$})]}),p?(0,c.jsxs)("div",{className:"favorited_section--favoritesToMoveContentContainer--lbuEW",children:[(0,c.jsx)("ol",{children:g}),(0,c.jsxs)("div",{className:P.B.flex.justifyBetween.m8.h24.$,children:[(0,c.jsx)(r3.DF,{className:"favorited_section--favoritesToMoveActionButtons--v7S67",onClick:()=>{t(tF.K4({type:al,data:{favorites:d}}))},children:(0,A.tx)("file_browser.planless_favorites.add_to_sidebar")}),(0,c.jsx)(r3.PL,{className:"favorited_section--unstarAllButton--TOsLD favorited_section--favoritesToMoveActionButtons--v7S67",onClick:x,children:(0,A.tx)("file_browser.planless_favorites.unstar_all")})]})]}):null]})})}function af(e){let t=(0,m.v9)(e=>e.currentTeamId),r=(0,m.I0)();return t?(0,c.jsx)(eM.SidebarRow,{isSelected:e.selectedView&&"limitedTeamSharedProjects"===e.selectedView.view,onClick:()=>{r(S.jN()),r(eF.D5({clickedResourceType:"limitedTeamSharedProjects"}))},icon:(0,c.jsx)(tl.e,{}),text:(0,A.t)("sidebar.all_shared_projects"),wrapInListItem:!0}):null}function ax(e){return e?(0,A.t)("sidebar.browse.all_workspaces"):(0,A.t)("sidebar.browse.all_teams")}function ag(){let e=(0,m.v9)(e=>e.currentUserOrgId),t=(0,m.v9)(t=>e?t.orgById[e]:null),r=(0,es.GF)(e).data??!1;return t&&e?(0,c.jsx)(c.Fragment,{children:ax(r)}):null}function ah({hasWorkspaces:e}){let t=(0,m.I0)(),r=(0,m.v9)(e=>e.currentUserOrgId),a=(0,m.v9)(e=>e.selectedView),i=(0,m.v9)(e=>r?e.orgById[r]:null),s="org"===a.view&&a.orgId===r,n=ax(e);return i&&r&&n?(0,c.jsx)(eM.SidebarRow,{isSelected:s,onClick:()=>{t(eL.fv({view:"org",orgId:r,orgViewTab:tG.i.HOME})),t(eF.D5({clickedResourceType:"org",resourceIdOrKey:r}))},icon:(0,c.jsx)(tl.e,{className:P.B.colorIcon.$}),text:n,wrapInListItem:!0}):null}var av=r(688854),ab=r(662853);let ay="seen_team_admin_moved_unassigned_drafts_onboarding",aj=(0,ey.n_)(ay);function aw(){let e=(0,ex.Dv)(aj),{show:t,isShowing:r,complete:a}=(0,eb.I)({overlay:eE.hxL,priority:ew.b.DEFAULT_MODAL},[e]);return(0,h.O)(()=>{t({canShow:e=>!e})}),(0,c.jsx)(eT.ZZ,{arrowPosition:eI.xI.LEFT_TITLE,clickOutsideToHide:!0,description:(0,A.tx)("team_admin.onboarding.unassigned_drafts.description"),isShowing:r,onClose:a,primaryCta:{label:(0,A.tx)("general.got_it"),type:"button",onClick:a,ctaTrackingDescriptor:ev.y.DONE},secondaryCta:{label:(0,A.tx)("general.learn_more"),type:"link",href:"https://help.figma.com/hc/articles/4420549259799",ctaTrackingDescriptor:ev.y.LEARN_MORE},shouldCenterArrow:eI.Ht.FALLBACK,targetKey:aT,title:(0,A.tx)("team_admin.onboarding.unassigned_drafts.title"),trackingContextName:ab.DI,userFlagOnShow:ay})}let aT="PRO_ADMIN_SETTINGS_LINK_ONBOARING_KEY";function aI(e){let t=(0,m.I0)(),r=(0,m.v9)(e=>e.currentTeamId),a=(0,e1.lE)(),i=(0,e1.WB)(a).unwrapOr(!1),s=(0,e1.Rm)(),n=(0,u.useMemo)(()=>s.transform(({tier:e})=>({isProTeam:e===eH.Lz.PRO,hasProAccess:e===eH.Lz.PRO||e===eH.Lz.STUDENT})),[s]);if("loaded"!==n.status)return null;let o=n.data;if(!r||!i||!o.hasProAccess)return null;let l=e.selectedView&&"teamAdminConsole"===e.selectedView.view,d=(0,c.jsx)(eQ.PD,{planType:eq.YH.TEAM,planId:r,isSelected:l,isDataLoaded:!0,isOrgAdmin:!1});return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(e6,{badge:o.isProTeam?d:void 0,isSelected:l,dataTestId:"admin-settings-link",dataOnboardingKey:aT,onClick:()=>{t(eL.fv({view:"teamAdminConsole",teamId:r,isProTeam:o.isProTeam,teamAdminConsoleViewTab:o.isProTeam?e2.mb.DASHBOARD:e2.mb.MEMBERS})),t(eF.D5({clickedResourceType:"teamAdminSettings",resourceIdOrKey:r}))}}),(0,c.jsx)(aw,{})]})}var aE=r(324899),ak=r(663914),aN=r(700818),aC=r(407720);function aR(){let e=(0,m.I0)(),t=(0,aN.$2)(),r=(0,aN.Pi)(),a=(0,ak.GF)(aN.pX)?.tab??null;return(0,c.jsx)(eM.SidebarRow,{onClick:()=>{g.ZP.push(new aN.pX({...t,tab:aC.cP.COMMUNITY},r).href),e(eF.D5({clickedResourceType:"resourceHubCommunity"}))},"data-onboarding-key":aC.YU,isSelected:a===aC.cP.COMMUNITY,icon:(0,c.jsx)(aE.H,{}),text:(0,A.t)("sidebar.community"),wrapInListItem:!1})}var aS=r(84306);function aO(){let e=(0,m.I0)(),t=(0,aN.$2)(),r=(0,aN.Pi)(),a=(0,ak.GF)(aN.pX)?.tab??null;return(0,c.jsx)(eM.SidebarRow,{onClick:()=>{g.ZP.push(new aN.pX({...t,tab:aC.cP.INTERNAL},r).href),e(eF.D5({clickedResourceType:"resourceHubInternal"}))},"data-onboarding-key":aC.Jg,isSelected:a===aC.cP.INTERNAL,icon:(0,c.jsx)(aS._,{}),text:(0,A.t)("sidebar.resources"),wrapInListItem:!1})}var aP=r(158639),aA=r(442092),aD=r(734875),aF=r(710706),aM=r(654380),aL=r(396231),aB=r(752212),aU=r(892243),aV=r(989230),aG=r(931821),az=r(889354),aW=r(365448),aH=r(559235);let aK="base_upgrade_section--closeButton--h7cxn",aY=(0,r8.z7)(aG.g),aZ=(0,r8.z7)(az.i);function a$(){return(0,c.jsx)("div",{className:"base_upgrade_section--divider--bxYWV sidebar--divider--u8375"})}function aq(e){return(0,c.jsx)(r8.Ui,{name:e.trackingContext,properties:e.trackingProperties,children:(0,c.jsxs)("div",{className:Y()({"base_upgrade_section--content--bQ9MJ":!e.demure,"base_upgrade_section--contentCollapsible---7-sN base_upgrade_section--contentMindful--3kLR7 base_upgrade_section--content--bQ9MJ":e.demure&&e.collapsible,"base_upgrade_section--contentMindful--3kLR7 base_upgrade_section--content--bQ9MJ":e.demure&&!e.collapsible}),children:[e.collapsible&&(0,c.jsx)("div",{className:aK,children:e.isCollapsed?(0,c.jsx)(aY,{"aria-label":(0,A.t)("base_upgrade_section.expand"),onClick:()=>e.setIsCollapsed(!1),trackingProperties:{action:"expand"}}):(0,c.jsx)(aZ,{"aria-label":(0,A.t)("base_upgrade_section.collapse"),onClick:()=>e.setIsCollapsed(!0),trackingProperties:{action:"collapse"}})}),e.onDismiss&&(0,c.jsx)(aW.PZ,{className:aK,onClick:e.onDismiss,trackingProperties:{trackingDescriptor:ev.y.CLOSE}}),e.header&&(0,c.jsxs)("div",{className:P.B.wFull.if(e.demure,P.B.font13.lh24,P.B.mb12).$,children:[(0,c.jsx)("div",{className:"base_upgrade_section--header--8OJVW",children:e.header}),(!e.demure||e.collapsible&&!e.isCollapsed)&&(0,c.jsx)(a$,{})]}),!!e.icon&&e.icon,e.countDownDaysLeft&&(0,c.jsx)("div",{className:"base_upgrade_section--countdownTicker--HlSNx",children:(0,c.jsx)(D.x,{children:e.countDownDaysLeft,fontWeight:"medium",fontSize:14})}),!(e.collapsible&&e.isCollapsed)&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:e.demure?"base_upgrade_section--textContainerMindful--HfVaU base_upgrade_section--baseTextContainer--mfsJF":"base_upgrade_section--textContainer--Nakg5 base_upgrade_section--baseTextContainer--mfsJF",children:[e.titleText&&(0,c.jsx)("p",{className:"base_upgrade_section--title--6pIk3",children:e.titleText}),(0,c.jsx)("p",{children:e.bodyText})]}),(0,c.jsx)(aH.LZ,{height:12}),(0,c.jsx)(ef.mB,{onClick:e.onClickCTA,"data-testid":e.ctaDataTestId,disabled:e.disabled,trackingProperties:e.ctaTrackingProperties,children:e.ctaText}),e.footerText&&(0,c.jsx)("div",{className:"base_upgrade_section--footerText--yU-ag",children:e.footerText})]})]})})}let aQ="upgrade_section--upgradeTextEmphasized--n1ecr";var aJ=((i=aJ||{})[i.UPGRADE=0]="UPGRADE",i[i.CREATE=1]="CREATE",i);function aX(e){let t=(0,m.I0)(),r=e.type,a=(0,c.jsx)("span",{className:aQ,children:(0,A.t)("edu.sidebar_section.verified")});return(0,c.jsx)(aq,{trackingContext:0===r?"Edu Upgrade Section":"Edu Create Section",icon:(0,c.jsx)(aA.P,{}),bodyText:(0,c.jsxs)(c.Fragment,{children:[a," ",0===r?(0,A.t)("edu.sidebar_section.upgrade"):(0,A.t)("edu.sidebar_section.create_team")]}),ctaText:0===r?(0,A.t)("edu.choose_team"):(0,A.t)("edu.create_free_team"),onClickCTA:0===r?()=>{t((0,tF.K4)({type:aM.m}))}:()=>{t(S.Nf({isEduTeam:!0}))},onDismiss:()=>{t(eG.v({dismissed_edu_sidebar:!0}))},ctaDataTestId:"edu-upgrade-cta"})}function a0({daysLeft:e}){let t=(0,b.mU)((0,e0.vEc)({})),r=t.data?.currentUser?.eduPeriodEnd,a=(0,aL.UR)();return(0,aL.Bw)(r,a)?(0,c.jsx)(a1,{daysLeft:e}):(0,c.jsx)(a5,{daysLeft:e})}function a1({daysLeft:e}){let t=(0,m.I0)(),r=(0,aL.UR)(),a=(0,aB.Rs)();if(e<0)return null;let i=()=>{g.ZP.redirect("/education/apply",w.ZP.isIpadNative?void 0:"_blank")},s=(0,c.jsx)(ef.Ok,{onClick:()=>{a?.id&&t?.((0,tF.K4)({type:aV.Lk,data:{teamId:a?.id}}))},children:(0,A.tx)("edu.banner.learn_more")});return e>0?(0,c.jsx)(aq,{trackingContext:"Universal Upgrade Section Education Plan Countdown New Reverification",countDownDaysLeft:e,titleText:(0,A.tx)("edu.sidebar_section.education_plan_expires_in_days",{daysLeft:e}),bodyText:(0,A.tx)("edu.sidebar_section.all_education_accounts_must_reverify",{offboardingDate:r,linkLearnMore:s}),ctaText:(0,A.tx)("edu.offboarding_modal.verify_your_status"),onClickCTA:i}):(0,c.jsx)(aq,{trackingContext:"Universal Upgrade Section Education Plan Expired New Reverification",icon:(0,c.jsx)(aD.p,{}),titleText:(0,A.tx)("edu.sidebar_section.education_status_expired"),bodyText:(0,A.tx)("edu.sidebar_section.all_education_accounts_are_required",{linkLearnMore:s}),ctaText:(0,A.tx)("edu.offboarding_modal.verify_your_status"),onClickCTA:i})}function a5({daysLeft:e}){let t=(0,m.I0)(),r=!!(0,tb.p)("edu_hide_verification");if(e<0)return null;let a=()=>{t((0,tF.K4)({type:aF.n,data:{upsellSource:aU.V.EDU_UPGRADE_SECTION}}))},i=(0,c.jsx)(ar.UA,{onClick:()=>g.ZP.redirect("/education/apply",w.ZP.isIpadNative?void 0:"_blank"),children:(0,A.tx)("edu.sidebar_section.verify_your_education_status")});return e>0?(0,c.jsx)(aq,{trackingContext:"Universal Upgrade Section Education Plan Countdown",countDownDaysLeft:e,titleText:(0,A.tx)("edu.sidebar_section.education_plan_expires_in_days",{daysLeft:e}),bodyText:r?(0,A.tx)("edu.sidebar_section.bootcamp_users_after_that_you_ll_need_to_upgrade_your_team"):(0,A.tx)("edu.sidebar_section.after_that_you_ll_need_to_upgrade_your_team_or_verify",{verify:i}),ctaText:(0,A.tx)("upgrade.upgrade_to_professional"),onClickCTA:a}):(0,c.jsx)(aq,{trackingContext:"Universal Upgrade Section Education Plan Expired",icon:(0,c.jsx)(aD.p,{}),titleText:(0,A.tx)("edu.sidebar_section.education_plan_expired"),bodyText:r?(0,A.tx)("edu.sidebar_section.bootcamp_users_to_keep_editing_upgrade_your_team"):(0,A.tx)("edu.sidebar_section.to_keep_editing_upgrade_your_team",{verify:i}),ctaText:(0,A.tx)("upgrade.upgrade_to_professional"),onClickCTA:a})}var a2=r(733791),a4=r(197651),a9=r(865880);let a7="dismissed_limited_team_space_uub";function a3(e){let t=(0,m.I0)(),[r,a]=u.useState(!1),i=(0,b.DG)(e0.OXi,{teamId:e.team.id}),s=(0,ea.xJ)(),n="loaded"===i.status&&(0,tu.unwrap)(i.data?.teamRoleRequest),o=!!n&&"pending"===n.status,l=!!n&&"approved"===n.status,d=!!n&&"denied"===n.status;if(u.useEffect(()=>{o&&a(!0)},[o]),"loaded"!==i.status||l||d)return null;let _=async()=>{try{await a9.j.requestTeamRole({teamId:e.team.id}),t(tp.R.enqueue({message:(0,A.t)("view_permissions.request_sent"),type:"request-team-membership"})),(0,Q.iP)("limited_team_plan_request_upgrade_clicked",{user:s},{teamId:e.team.id}),a(!0)}catch(e){t(a2.l.error("Failed to request team role",e))}};return(0,c.jsx)(aq,{bodyText:(0,A.tx)("upgrade.to_get_unlimited_files_must_be_member",{currentTeamName:e.team.name}),ctaText:r?(0,A.tx)("upgrade.access_requested"):(0,A.tx)("upgrade.request_full_access"),ctaTrackingProperties:{},demure:"very",disabled:o||r,header:(0,A.tx)("upgrade.limited_access_in_this_team"),onClickCTA:_,onDismiss:()=>{t(a4.v_({all_team_flags:[{team_id:e.team.id,flags:{[a7]:!0}}]}))},trackingContext:"Limited Team Space Dismissable Upgrade Section",trackingProperties:{teamId:e.team.id}})}var a6=r(994180),a8=r(773053),ie=r(542144),it=r(71590),ir=r(225356);function ia({orgUpsellEligibility:e}){let t=(0,m.I0)(),r=(0,m.v9)(e=>e.userFlags),a=e===ir.ZP.SINGLE_TEAM?(0,A.tx)("upgrade.access_cross_team_design_libraries_sso_and_more"):(0,A.tx)("upgrade.centralize_your_teams_and_share_design_libraries"),i=`${e===ir.ZP.SINGLE_TEAM?"Single-Team":"Multi-Team"} Dismissible Org Upgrade Section`,s=a6.q.getFeatureGate("pro_to_org_upgrades_uub"),n=(0,c.jsx)("span",{...{className:"xkezfkh"},children:(0,A.tx)("upgrade.upgrade_to_an_organization_plan")}),o=e===ir.ZP.SINGLE_TEAM?(0,A.tx)("upgrade.upgrade_to_an_organization_plan_to_access_cross_team_design_libraries_sso_and_more",{upgradeToAnOrganizationPlan:n}):(0,A.tx)("upgrade.upgrade_to_an_organization_plan_to_centralize_your_teams_and_share_design_libraries",{upgradeToAnOrganizationPlan:n}),l=(0,c.jsx)(ar.Z6,{onClick:()=>t((0,tF.K4)({type:ie.gg,data:{source:it.f.ORG_UPGRADE_SECTION}})),trackingProperties:{trackingDescriptor:ev.y.CONTACT_SALES},trusted:!0,children:(0,A.tx)("upgrade.contact_sales")}),d=(0,A.tx)("upgrade.or_contact_sales",{contactSalesLink:l});return(0,c.jsx)(aq,{trackingContext:s?"DismissibleOrgUpgradeSection":i,ctaTrackingProperties:{trackingDescriptor:ev.y.VIEW_PLANS},icon:(0,c.jsx)(a8.r,{}),bodyText:s?o:a,ctaText:(0,A.tx)("upgrade.view_plans"),onClickCTA:s?()=>{t((0,tF.K4)({type:aF.n,data:{upsellSource:aU.V.ORG_UPGRADE_SECTION}}))}:()=>{e===ir.ZP.SINGLE_TEAM&&t((0,tF.K4)({type:ie.E3,data:{upsellSource:aU.V.ORG_UPGRADE_SECTION}})),e===ir.ZP.MULTIPLE_TEAMS&&t((0,tF.K4)({type:ie.kH,data:{upsellSource:aU.V.ORG_UPGRADE_SECTION}}))},onDismiss:()=>t((0,ir.uZ)(r)),ctaDataTestId:"org-upgrade-cta",footerText:s?d:void 0})}var ii=r(879151),is=r(388798);let io="dismissed_paid_free_space_uub";function il(e){let t=(0,m.I0)(),r=is.t.useTrackingContext({trigger:aU.V.UNIVERSAL_UPGRADE_SECTION}),{open:a}=(0,ii.n)(),i=(0,c.jsx)(ar.UA,{onClick:()=>{a()},trackingProperties:{trackingDescriptor:ev.y.WORK_IN_ONE_OF_YOUR_PAID_TEAMS},children:(0,A.tx)("upgrade.work_in_one_of_your_paid_teams")}),s=(0,A.tx)("upgrade.to_get_unlimited_files_and_features_link_switch_teams_or_upgrade_this_team_s_plan",{linkSwitchTeams:i});return(0,c.jsx)(aq,{trackingContext:"Paid Free Space Dismissible Upgrade Section",trackingProperties:{teamId:e.team.id,...r},header:(0,A.tx)("upgrade.this_team_is_on_a_free_plan"),bodyText:s,ctaText:(0,A.tx)("upgrade.view_all_plans"),onClickCTA:()=>{t((0,tF.K4)({type:aF.n,data:{upsellSource:aU.V.UNIVERSAL_UPGRADE_SECTION}}))},ctaTrackingProperties:{trackingDescriptor:ev.y.VIEW_ALL_PLANS},onDismiss:()=>{t(a4.v_({all_team_flags:[{team_id:e.team.id,flags:{[io]:!0}}]}))},demure:"very"})}var id=r(810973),ic=r(898741),iu=r(513366),im=r(996834),i_=r(490656),ip=r(989067),ix=r(889835),ig=r(328403),ih=r(248893),iv=r(790312);function ib(e,t,r){let a=function(e,t){let r=(0,ix.yW)({billableProductKeys:ig.Hs,baseQuery:{currency:e,tier:ih.K0.PRO,renewalTerm:t,unit:t}}),[a]=(0,y.Eh)(r),i=(0,ix.qJ)(a);if(null===i.data)throw Error("Price data is null");return(0,iu.LB)(i.data)}(e,t),i=ig.Hs.dict(e=>r?.[e]||0);return(0,im.zX)(i,a)}function iy({loading:e,data:t}){let r=(0,m.I0)(),a=(0,m.v9)(e=>e.teamBilling.summary),i=a.has_billing_address,[s,n]=(0,ic.Rr)("resubscription_section_collapsed",!1),{currency:o,annual_seats:l,monthly_seats:d}=a,u=ib(o,iv.kT.YEAR,l)??0,_=ib(o,iv.kT.MONTH,d)??0;if(e||!(u||_))return null;let{cancellationDate:p,paymentMethod:f,team:x,annualSubscription:g,monthlySubscription:h}=t,v=0;(0,i_.g)(a)?(v=u,h?.canceled_at&&(v+=_)):v=_;let b=(0,c.jsx)("h4",{...{className:"xfifm61 x1s688f xd4r4e8 x1akne3o"},children:(0,A.tx)("resubscription_section.header_text")}),y=(0,c.jsx)(id.r,{href:"https://www.figma.com/pricing",newTab:!0,children:(0,A.tx)("resubscription_section.link_so_much_more")});return(0,c.jsx)(aq,{bodyText:(0,A.tx)("resubscription_section.body_text",{linkSoMuchMore:y}),collapsible:!0,ctaDataTestId:"user-churning-cta",ctaText:(0,A.tx)("resubscription_section.cta_text"),ctaTrackingProperties:{trackingDescriptor:f?ev.y.REACTIVATE_YOUR_PROFESSIONAL_PLAN:ev.y.UPDATE_PAYMENT},demure:"very",header:b,isCollapsed:s,onClickCTA:()=>{f?r((0,tF.K4)({type:ie.bZ,data:{upsellSource:aU.V.RESUBSCRIBE_SECTION,paymentMethod:f,nextBillDate:p,amount:v,team:x,monthlySub:h,annualSub:g,currency:o,canSeeBillingAddressExp:i}})):(0,ip.nM)({team:x,dispatch:r,cancelling:!0,monthlySub:h,annualSub:g,currency:o,canSeeBillingAddressExp:i,estimatedChargeCents:v})},setIsCollapsed:n,titleText:(0,A.tx)("resubscription_section.title_text",{teamName:x.name,date:p}),trackingContext:"Resubscribe UUB"})}var ij=r(817644);function iw({onTeam:e,hitFileLimit:t}){let r=(0,m.I0)(),a=is.t.useTrackingContext({trigger:aU.V.UNIVERSAL_UPGRADE_SECTION}),i=t?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{className:aQ,children:(0,A.tx)("upgrade.running_out_of_files_in_your_free_team")})," ",(0,A.tx)("upgrade.upgrade_to_give_your_ideas_and_designs_room_to_grow_without_limits")]}):(0,A.tx)("upgrade.ready_to_go_beyond_free_plan_upgrade_for_premium_features");return(0,c.jsx)(aq,{trackingContext:"Universal Upgrade Section",trackingProperties:{onTeam:e,hitFileLimit:t,...a},icon:(0,c.jsx)(a8.r,{}),bodyText:i,ctaText:(0,A.tx)("upgrade.view_plans"),ctaTrackingProperties:{trackingDescriptor:ev.y.UPGRADE},ctaDataTestId:"redesigned-upgrade-button",onClickCTA:()=>{r((0,tF.K4)({type:aF.n,data:{upsellSource:aU.V.UNIVERSAL_UPGRADE_SECTION}}))}})}var iT=r(992977),iI=r(551916),iE=r(475565),ik=r(13021),iN=r(711503),iC=r(672650),iR=r(723819),iS=r(377897);let iO=(0,ex.cn)(e=>{let t=e(iP);return!!t&&[eH.ZG.FILES_LIMITED,eH.ZG.FILES_LIMITED_LEGACY,eH.ZG.WHITEBOARD_FILES_LIMITED,eH.ZG.WHITEBOARD_FILES_LIMITED_BETA,eH.ZG.SLIDE_FILES_LIMITED,eH.ZG.SLIDE_FILES_LIMITED_BETA,eH.ZG.GLOBAL_FILES_LIMITED_LEGACY,eH.ZG.GLOBAL_FILES_LIMITED].some(e=>t?.restrictions_list?.includes(e))}),iP=(0,iS.cg)(e=>{let t=e.currentTeamId;return t?e.teams[t]:null});function iA(){return(0,c.jsx)(aP.X,{label:"UpgradeSection",children:(0,c.jsx)(iD,{})})}function iD(){let e=iM();return null===e?null:(0,c.jsx)(z.SV,{boundaryKey:"SidebarUpgradeSection",fallback:z.NY.NONE_I_KNOW_WHAT_IM_DOING,sentryTags:{area:H.k.MONETIZATION_UPGRADES},children:(0,c.jsx)(iF,{...e})})}function iF(e){switch(e.type){case ij.g.RESUBSCRIPTION:return(0,c.jsx)(iy,{...e.props});case ij.g.EDU_EXPIRY:return(0,c.jsx)(a0,{daysLeft:e.props.daysLeft});case ij.g.EDU_UPGRADE:return(0,c.jsx)(aX,{type:e.props.type});case ij.g.ORG_UPGRADE:return(0,c.jsx)(ia,{orgUpsellEligibility:e.props.orgUpsellEligibility});case ij.g.PAID_FREE_SPACE:return(0,c.jsx)(il,{team:e.props.team});case ij.g.LIMITED_TEAM_SPACE:return(0,c.jsx)(a3,{team:e.props.team});case ij.g.UNIVERSAL:default:return(0,c.jsx)(iw,{onTeam:e.props.onTeam,hitFileLimit:e.props.hitFileLimit})}}function iM(){let e=function(){let e=(0,aB.Rs)(),t=(0,m.v9)(e=>e.teamBilling.summary),r=(0,e1.lE)(),a=(0,e1.WB)(r).unwrapOr(!1),i={type:ij.g.RESUBSCRIPTION,overrideLocation:ij.J.IN_FOOTER},s=(0,p.BZ)().can_one_click_resubscribe,n=(0,iR.Nt)(e?.id??null).transform(e=>e.tier===eH.Lz.PRO).unwrapOr(!1);return s&&e&&!e.org_id&&a&&n&&t.resubscription&&(t.annual_subscription||t.monthly_subscription)?{...i,props:{loading:!1,data:{cancellationDate:new Date(1e3*t.resubscription.cancellation_date),paymentMethod:t.resubscription.payment_method,team:e,annualSubscription:t.annual_subscription,monthlySubscription:t.monthly_subscription}}}:null}(),t=function(){let e=(0,ea.xJ)(),t=(0,aB.Rs)(),r=(0,eW.Mn)(),a=(0,b.DG)(e0.vEc,{}),i=a.data?.currentUser?.eduPeriodEnd,s=(0,m.v9)(e=>e.userFlags),n=(0,e1.Rt)("useEduUpgradeSectionProps"),o=(0,e1.m)(n).unwrapOr(!1);if(!e||"loaded"!==a.status)return null;let l=(0,iE.di)(i),d=l>0&&l!==1/0&&(0,iE.dE)(e)&&t?.student_team_state===eH.QX.STUDENT_TEAM_CURRENT,c=0===l&&(t?.student_team_state===eH.QX.STUDENT_TEAM_EXPIRED&&(0,iC.cv)(t.id,r)||t?.student_team_state===eH.QX.STUDENT_TEAM_CURRENT);if(d||c)return{type:ij.g.EDU_EXPIRY,props:{daysLeft:l}};if(!s.dismissed_edu_sidebar&&(0,iE.dE)(e)&&!o){let e=(0,iC.n$)(r).length>0;return{type:ij.g.EDU_UPGRADE,props:{type:e?aJ.UPGRADE:aJ.CREATE}}}return null}(),r=function(){let e=(0,ea.xJ)(),t=(0,m.v9)(e=>e.teams),r=(0,aB.Rs)(),a=(0,ex.Dv)(iO),i=(0,ex.Dv)(ik.bi),s=(0,b.DG)(e0.hzW,{id:r?.id??""},{enabled:!!r}),n=(0,eP.ZR)(),o=(0,eO.kP)();return e&&r&&"loaded"===s.status&&s.data.team?.hasPermission&&"loaded"===i.status&&i.data?!r||(0,iE.dE)(e)||(0,iC.e3)(t[r.id])||n||o?null:{type:ij.g.UNIVERSAL,props:{onTeam:Object.keys(t).length>0,hitFileLimit:a}}:null}(),a=function(){let e=(0,m.v9)(e=>e.userFlags),t=function(){let e=(0,eW.Mn)(),t=(0,iT.c)(e=>({orgUsersByOrgId:e.orgUsersByOrgId,user:e.user,userFlags:e.userFlags,teams:e.teams,currentTeamId:e.currentTeamId})),r=(0,b.DG)((0,e0.C13)(t.currentTeamId?{teamId:t.currentTeamId}:null));return t.currentTeamId?r.transform(({team:r})=>(0,ir.Kl)(t,e,r)):iI.IE.loaded((0,ir.Kl)(t,e,null))}(),r=(0,ir.tX)(e);return t.transform(e=>e===ir.ZP.NONE||r?null:{type:ij.g.ORG_UPGRADE,props:{orgUpsellEligibility:e},overrideLocation:ij.J.IN_FOOTER})}(),i=function(){let e=(0,ea.xJ)(),t=(0,m.v9)(e=>e.teams),r=(0,aB.Rs)(),a=(0,ex.Dv)(ik.bi),i=(0,m.v9)(e=>e.userTeamFlags),s=(0,b.DG)(e0.hzW,{id:r?.id??""},{enabled:!!r}),n=(0,q.Bc)();return!e||!r||"loaded"!==a.status||a.data||(0,iE.dE)(e)||(0,iC.e3)(t[r.id])||"loaded"!==s.status||!s.data.team?.hasPermission||!n()||(0,iN.aU)(i,io,r.id,7776e6)?null:{type:ij.g.PAID_FREE_SPACE,props:{team:r},overrideLocation:ij.J.IN_FOOTER}}(),s=function(){let e=(0,ea.xJ)(),t=(0,aB.Rs)(),r=(0,ei.Y)(),a=(0,m.v9)(e=>e.userTeamFlags);return e&&t&&r?(0,iN.aU)(a,a7,t.id,7776e6)?null:{type:ij.g.LIMITED_TEAM_SPACE,props:{team:t},overrideLocation:ij.J.IN_FOOTER}:null}();return null!==e?e:null!==s?s:null!==t?t:null!==r?r:"loaded"===a.status&&a.data?a.data:null!==i?i:null}var iL=r(403706),iB=r(368285),iU=r(444947);let iV=(0,ex.cn)(!1);function iG(){let[e,t]=(0,ex.KO)(iV),r=(0,ex.Dv)(f.c4);if(!r)return null;let a=async()=>{t(!0);let e=await r.prompt();"dismissed"===e.outcome&&t(!1),(0,iU.L9)("add_to_chromebook_clicked",{installed:"accepted"===e.outcome})};return(0,c.jsxs)(iL.h,{...{0:{className:"xh8yej3 x78zum5 x6s0dn4 x1hc1fzr x12ulsxz xaope02 x167g77z x1icplyp"},1:{className:"xh8yej3 x78zum5 x6s0dn4 x12ulsxz xaope02 x167g77z x1icplyp xg01cxk x47corl x177bw73"}}[0|!!e],onClick:a,children:[(0,c.jsx)("span",{...{className:"x2lah0s"},children:(0,c.jsx)(iB.h,{})}),(0,c.jsx)(D.x,{truncate:!0,color:"default",children:(0,c.jsx)("span",{...{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up"},children:(0,A.tx)("file_browser.tool_bar.add_to_chromebook")})})]})}function iz(e){let t=function(){let e=(0,f.tZ)(),t=(0,ex.Dv)(f.c4);return!!w.ZP.chromeos&&!!w.ZP.chrome&&!e&&!!t}();return(0,c.jsxs)("div",{className:P.B.sticky.bottom0.colorBg.zIndex1.if(e.hasTopBorder,P.B.bt1.colorBorder.bSolid).$,children:[e.shouldShowUUBInFooter&&(0,c.jsx)("div",{className:P.B.pb10.pt12.$,children:(0,c.jsx)(iA,{})}),t&&(0,c.jsx)(iG,{})]})}var iW=r(153125),iH=r(828736);function iK(e){return(0,c.jsxs)("div",{className:P.B.flex.flexColumn.colorBg.if(e.hasBottomBorder,P.B.bb1.colorBorder.bSolid).$,children:[(0,c.jsx)(iH.UO,{}),(0,c.jsx)(iW.kS,{})]})}var iY=r(48064);function iZ(e){let t=(0,m.I0)(),r="teamFeed"===(0,eB.A6)().view;return(0,c.jsx)(eM.SidebarRow,{onClick:()=>{t(eL.fv({view:"teamFeed"})),t(eF.D5({clickedResourceType:"teamFeed"}))},isSelected:r,icon:(0,c.jsx)(iY.p,{}),text:(0,A.t)("fig_feed.feed"),wrapInListItem:!0})}function i$({selectedView:e,teamFolderId:t,teamFolderName:r}){let a=(0,m.I0)();return t&&r?(0,c.jsx)(eM.SidebarRow,{isSelected:e&&"folder"===e.view&&e.folderId===t,onClick:()=>{a(S.B4(t)),a(eF.D5({clickedResourceType:"folder"}))},icon:(0,c.jsx)(rM.s,{}),text:r,"data-onboarding-key":t_._b,wrapInListItem:!0}):null}var iq=r(276637);function iQ(){let e=(0,m.I0)(),t="deletedFiles"===(0,m.v9)(e=>e.selectedView).view;return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(eM.SidebarRow,{isSelected:t,onClick:()=>{e(eL.fv({view:"deletedFiles"})),e(eF.D5({clickedResourceType:"deletedFiles"}))},icon:(0,c.jsx)(iq.n,{}),text:(0,A.t)("file_browser.tool_bar.trash"),wrapInListItem:!0})})}let iJ="sidebar--divider--u8375";function iX(e){let t=(0,m.I0)(),r=(0,et.$0)(),a=(0,m.v9)(e=>e.currentTeamId),i=(0,m.v9)(e=>e.userFlags),s=(0,eW.Mn)(),n=(0,m.v9)(e=>e.userStateLoaded),o=(0,eB.A6)(),l=(0,m.v9)(e=>e.dragState),d=eA({project:"drafts"}),[_,f]=u.useState(0),[x,g]=u.useState(!1),[h,v]=u.useState(!1),[b,y]=u.useState(!1),j=()=>{t(eG.v({show_create_new_section_banner:!1}))},T=!!a,I=(0,ei.Y)(),E=(0,eK._H)(s),k=(0,ez.V_)(),N=k&&k.permission===eH.Gu.ADMIN,C=(0,eY.SR)(),R=(0,eY.y4)(),S=(0,J.Gd)(r),O=()=>C?(0,c.jsx)(aO,{}):null,P=()=>n?(0,c.jsx)(iA,{}):null,D=T?e.dataDriftCorrectedTeamResources?.favoritedFiles:e.sidebarUser?.favoritedFiles,F=T?e.dataDriftCorrectedTeamResources?.favoritedPrototypes:e.sidebarUser?.favoritedPrototypes,M=T?e.dataDriftCorrectedTeamResources?.favoritedProjects:e.sidebarUser?.favoritedProjects;M&&e.FBGNavigationUpdatesTreatment!==q.o.CONTROL&&(M=M.filter(t=>t.project?.id!==e.teamFolderId));let L=D?.length===0&&F?.length===0&&M?.length===0,B=e.FBGNavigationUpdatesTreatment===q.o.CONTROL||!L,U=iM(),V={[q.o.CONTROL]:ij.J.BETWEEN_CONTENT,[q.o.VARIANT_A]:ij.J.IN_FOOTER,[q.o.VARIANT_B]:ij.J.AFTER_CONTENT}[e.FBGNavigationUpdatesTreatment],G=U?.overrideLocation??V,z=!!l.data&&(l.type===eZ.D.Folder||l.type===eZ.D.Team||l.type===eZ.D.Favorite),W=!(e.showLoadingState||e.showingFileBrowserLoader);return(0,c.jsx)(eu.h2,{loadingElementId:"filebrowser-loading-sidebar",loaded:W,children:(0,c.jsxs)("div",{...{className:"x78zum5 xdt5ytf xh8yej3"},children:[(0,c.jsx)(iK,{hasBottomBorder:b}),(0,c.jsxs)(e_.l,{className:"sidebar--sidebarScrollContainer--cSGnu",innerClassName:"sidebar--innerScrollContainer--FxojT",scrollingDisabled:!1,onScroll:e=>f(e),children:[(0,c.jsx)(ep.X,{onIntersectionChange:t=>{y(!t.isIntersecting),t.isIntersecting||x||(e.trackScroll(),g(!0))}}),(0,c.jsxs)("div",{className:Y()("sidebar--navContent--vCjqY",{"sidebar--grabbingCursor--ldTu3":z,"sidebar--navWidth240--maH74":(0,p.BZ)().file_browser_sidebar_row_ui}),children:[(0,c.jsx)("div",{...{className:"x78zum5 x1iyjqo2 xdt5ytf"},children:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("ul",{children:[(0,c.jsx)(eU,{}),(0,c.jsx)(tk.d,{selectedView:o,dispatch:t}),R&&(0,c.jsx)(aR,{})]}),(0,c.jsx)("div",{className:iJ}),(0,c.jsx)("div",{...{className:"x17qaar8 xr9ek0c xjpr12u"},children:(0,c.jsx)(av.V,{})}),(0,p.BZ)().xr_debounce_threshold&&E&&k&&k.permission!==eH.Gu.GUEST?(0,c.jsx)(iZ,{}):null,(0,c.jsxs)("ul",{children:[e.draftsProject&&(0,c.jsx)(tE,{folder:e.draftsProject,selectedView:o,dispatch:t,shouldHideCreateFileButton:!d}),T&&(0,c.jsx)(c.Fragment,{children:I?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(af,{selectedView:o}),O(),(0,c.jsx)(iQ,{})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(td,{selectedView:o}),O(),(0,c.jsx)(iQ,{}),(0,c.jsx)(aI,{selectedView:o}),e.FBGNavigationUpdatesTreatment!==q.o.CONTROL&&(0,c.jsx)(i$,{selectedView:o,teamFolderId:e.teamFolderId,teamFolderName:e.teamFolderName})]})})]}),G===ij.J.BETWEEN_CONTENT&&(0,c.jsxs)("div",{className:"sidebar--section---p3pW",children:[!!U&&(0,c.jsx)("div",{className:"x7hzu26 x1ef8nbk xjm9jq1 x176lpz5"}),P()]}),E&&k&&n&&(0,c.jsxs)("ul",{children:[(0,c.jsx)(ah,{hasWorkspaces:e.isOrgWithWorkspaces}),O(),(0,c.jsx)(iQ,{}),!w.ZP.mobile&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(to,{selectedView:o,org:E,orgUser:k}),N&&(0,c.jsx)(eR,{})]})]}),S&&(E&&i.show_create_new_section_banner?(0,c.jsxs)("div",{className:"sidebar--betaAnnouncementContainer--mS9nS",children:[(0,c.jsxs)("div",{className:"sidebar--betaAnnouncementHeader--WMxll",children:[(0,c.jsx)("div",{className:"sidebar--betaAnnouncementHeaderTitle--KhtSl",children:(0,A.tx)("favorited_resources.custom_sections_banner_header")}),(0,c.jsx)(eo.h,{"aria-label":(0,A.t)("common.close"),onClick:j,children:(0,c.jsx)(el.t,{})})]}),(0,c.jsxs)("div",{className:"sidebar--betaAnnouncementBodyContainer--OPxR-",children:[(0,c.jsx)("p",{children:(0,A.tx)("favorited_resources.custom_sections_banner_body")}),(0,c.jsx)("br",{}),(0,c.jsx)("p",{children:(0,c.jsx)(ef.XT,{variant:"secondary",onClick:()=>{t(eV.J6({newCustomSectionIndex:0})),j()},children:(0,A.tx)("favorited_resources.custom_sections_banner_create_new_section_button")})})]})]}):null),(0,c.jsx)("div",{className:iJ}),(0,c.jsx)("section",{"aria-labelledby":"favorites-heading",children:n?(0,c.jsxs)(c.Fragment,{children:[r?(0,c.jsx)(r9,{fileBrowserPreferences:e.sidebarUser?.fileBrowserPreferences,favoritedFiles:D,favoritedPrototypes:F,favoritedProjects:M,favoritedTeams:e.sidebarUser?.favoritedTeams??null,favoritedWorkspaces:e.sidebarUser?.favoritedWorkspaces??null,userSidebarSections:e.sidebarUser?.userSidebarSections?(0,ec.Wg)(e.sidebarUser.userSidebarSections):[],previewYOffset:_}):(0,c.jsx)(c.Fragment,{children:B&&(0,c.jsx)(r4,{fileBrowserPreferences:e.sidebarUser?.fileBrowserPreferences,favoritedFiles:D,favoritedPrototypes:F,favoritedProjects:M,previewYOffset:_})}),T&&(0,c.jsx)(ap,{teamUser:e.sidebarUser?.currentTeamUser??null,dataDriftCorrectedTeamResources:e.dataDriftCorrectedTeamResources,previewYOffset:_})]}):(0,c.jsx)("div",{className:"sidebar--loading--GUael",children:(0,c.jsx)(em.TK,{})})}),G===ij.J.AFTER_CONTENT&&(0,c.jsx)("div",{...{className:"x7wzq59 x1ey2m1c x1yjdb4r x1a8lsjc xz9dl7a"},children:P()})]})}),(0,c.jsx)(ep.X,{onInitialLoad:e=>{v(!e)},onIntersectionChange:e=>{v(!e.isIntersecting)}})]})]}),(0,c.jsx)(iz,{hasTopBorder:G===ij.J.BETWEEN_CONTENT&&(h||b),shouldShowUUBInFooter:G===ij.J.IN_FOOTER})]})})}function i0(e){let t=(0,ea.xJ)(),r=(0,et.$0)(),a=(0,ei.Y)(),i=(0,m.v9)(e=>e.currentTeamId),s=(0,m.I0)(),n=(0,en.E)({currentOrgId:r,currentTeamId:i||null}),o="loaded"===n.status?n.data:null,l="loaded"!==n.status;(0,j.K4)({markName:"Sidebar",isLoaded:!l});let d=(0,ea.dO)(),_=(0,m.v9)(e=>d?e.authedUsers.byId[d]?.plans:null),[{status:p,data:f}]=(0,y.aM)((0,X.RM)({teamId:i||void 0}),{enabled:!a}),x="loaded"===p&&f?.length===1?f[0]:null,g=x?.id,h=x?.name,v=null,b=(0,u.useMemo)(()=>o?{...o.currentUser}:null,[o]),w=(0,es.Lw)(o?.org??null),T=u.useMemo(()=>{if(b&&b.currentTeamUser&&i)return(0,J.UZ)(b,i,_)},[b,i,_]),I=e.showingFileBrowserLoader;if(u.useEffect(()=>{if(i&&b&&b?.currentTeamUser){let e=b.currentTeamUser;!e.fileBrowserPreferences&&b.fileBrowserPreferences&&s(Z.Xf({prefs:b.fileBrowserPreferences,orderedFolderSubscriptions:b.fileBrowserSectionPreferences?.filter(e=>e.teamId===i)[0]?.orderedFolderIds??[],teamUser:e}))}},[i,b,s]),b){if(r&&b.baseOrgUser){let e=b.baseOrgUser;b.fileBrowserPreferences=e.fileBrowserPreferences,b.fileBrowserSectionPreferences=e.fileBrowserSectionPreferences}else i&&b.currentTeamUser&&(b.fileBrowserPreferences=b.currentTeamUser?.fileBrowserPreferences);i?v=b.currentTeamUser?.draftsProject??null:r&&(v=b.baseOrgUser?.draftsProject??null)}return(0,c.jsx)(iX,{FBGNavigationUpdatesTreatment:(0,q.BF)(),dataDriftCorrectedTeamResources:T,draftsProject:v,isOrgWithWorkspaces:w,showLoadingState:l,showingFileBrowserLoader:I,sidebarUser:b,teamFolderId:g,teamFolderName:h,trackScroll:()=>(0,Q.iP)("Sidebar Scrolled",{user:t})})}let i1={FileBrowserSidebar:H.k.WAYFINDING,AdminSettingsSidebar:H.k.SCALE};function i5(e){let t=(0,m.v9)(e=>e.mobileNavShown),r=(0,er.Y)()?"AdminSettingsSidebar":"FileBrowserSidebar";return(0,c.jsx)("nav",{className:Y()("sidebar--navDefault--Wtmsn",{"sidebar--navDefaultWidth240--ZKgHs":(0,p.BZ)().file_browser_sidebar_row_ui,"sidebar--showMobileNav--gK-aF":t,"sidebar--showMobileNavWidth240--BRfSu":t&&(0,p.BZ)().file_browser_sidebar_row_ui}),"aria-label":(0,A.t)("sidebar.label"),children:(0,c.jsx)(z.SV,{sentryTags:{area:i1[r]},boundaryKey:r,fallback:(0,c.jsx)($.D,{}),hasCustomWASMBuild:ee.hU,children:"FileBrowserSidebar"===r?(0,c.jsx)(i0,{...e}):(0,c.jsx)(L.gV,{})})})}var i2=r(126099),i4=r(736950),i9=r(864638),i7=r(655724),i3=r(798870),i6=r(661202),i8=r(648093),se=r(261094),st=r(283136),sr=r(969632),sa=r(100079),si=r(98907),ss=r(895723),sn=r(641857),so=r(862398),sl=r(229519),sd=r(90457),sc=r(506457);let su=(0,ex.cn)(void 0),sm=(0,ex.cn)(!1),s_=(0,sl.lu)("#2c2c2c");function sp(e){let t=(0,ex.Dv)(su);if(!e||"unset"===t)return;let r=(e.colorConfig?.colors??[])[0];return t?(0,so.colorToHex)(t):r}function sf(e){return!!e&&"unset"!==e}var sx=r(950592);function sg(e){return e.rightSideActions?(0,c.jsx)(sh,{headerLabel:e.label,rightSideActions:e.rightSideActions}):e.label}function sh(e){return(0,c.jsxs)("div",{...{className:"x78zum5 x1qughib xh8yej3 x6s0dn4 x40hh3e"},children:[(0,c.jsx)("div",{...{className:"x2lah0s"},children:e.headerLabel}),(0,c.jsx)("div",{...{className:"x78zum5 x167g77z xeuugli"},children:e.rightSideActions})]})}function sv(e){let t=(0,et.$0)(),r=(0,es._P)(t,(0,m.v9)(sx.v)),a=sp("Unassigned"===r.data?null:r.data);return(0,c.jsxs)("div",{...{0:{className:"x78zum5 x1q0g3np x2lah0s x167g77z x6s0dn4 xsdox4t x1tudf5h x1m2p0i2"},2:{className:"x78zum5 x1q0g3np x2lah0s x167g77z x6s0dn4 xsdox4t x1m2p0i2 x5tiur9"},1:{className:"x78zum5 x1q0g3np x2lah0s x167g77z x6s0dn4 xsdox4t x1tudf5h x1m2p0i2 xso031l x1q0q8m5 xertd99"},3:{className:"x78zum5 x1q0g3np x2lah0s x167g77z x6s0dn4 xsdox4t x1m2p0i2 x5tiur9 xso031l x1q0q8m5 xertd99"}}[!!e.showNavigationChevrons<<1|(0|!!(e.pageHeaderContent&&!e.pageHeaderDividerHidden))],style:{backgroundColor:a},"data-testid":"file-browser-desktop-header",children:[e.showNavigationChevrons&&(0,c.jsx)(sr.s,{parentBackgroundColor:a}),e.pageHeaderContent&&(0,c.jsx)("span",{...{className:"xeuugli xh8yej3"},children:(0,c.jsx)(sg,{label:e.pageHeaderContent,rightSideActions:e.pageHeaderActions})})]})}var sb=r(982622);let sy=(0,sa.FM)(sb.Jbu);function sj(e){let t,r;return e.pageHeaderContent?(t=(0,c.jsx)("span",{...{className:"x193iq5w xuxw1ft xb3r6kr xlyipyv x13saxwh xg4jxnz x39l7i4 x1uvdjgy xo1l8bm"},children:e.pageHeaderContent}),r=(0,c.jsx)(ss.R,{tabs:[(0,c.jsx)("h1",{...{className:"x193iq5w xuxw1ft xb3r6kr xlyipyv x13saxwh xg4jxnz x39l7i4 x1uvdjgy xo1l8bm"},children:e.pageHeaderContent},"mobilePageHeaderKey")]})):e.pageHeaderTitle&&(t=(0,c.jsx)("h1",{children:(0,c.jsx)("span",{...{className:"x193iq5w xuxw1ft xb3r6kr xlyipyv x13saxwh xg4jxnz x39l7i4 x1uvdjgy xo1l8bm"},children:e.pageHeaderTitle})}),r=(0,c.jsx)(ss.R,{tabs:[(0,c.jsx)("h1",{...{className:"x193iq5w xuxw1ft xb3r6kr xlyipyv x13saxwh xg4jxnz x39l7i4 x1uvdjgy xo1l8bm"},children:e.pageHeaderTitle},"mobilePageHeaderKey")]})),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(si.z,{query:`(min-width: ${sy}px)`,defaultClass:P.B.sticky.top0.colorBg.zIndexTopBar.$,children:(0,c.jsx)(sv,{pageHeaderContent:t,pageHeaderDividerHidden:e.pageHeaderDividerHidden,pageHeaderActions:e.pageHeaderActions,showNavigationChevrons:e.showNavigationChevrons})}),r]})}function sw(e){let t=u.useRef(null),r=(0,m.v9)(({selectedView:e})=>e),a=(0,sr.m)(),i=(0,se.I)(),s=(0,et.Ng)(),n=i&&s&&!i3.kv.includes(r.view),o=(0,m.oR)();u.useEffect(()=>{let e=o.getState(),t=(0,i9.getPermissionsState)(e),r=(0,i4.rW)(t.user,t.currentUserOrgId,t.currentTeamId);r&&(0,i7.fg)(r.userId,(0,i2.sg)(e.selectedView),r.orgId,void 0,r.teamId)},[o]);let l=(0,er.Y)()||"litmus"===r.view,d=!e.showingFileBrowserLoader&&!l&&(!!x.YO||(0,f.mC)()||e.pageHeaderContent||e.pageHeaderTitle);u.useEffect(()=>{let e=e=>{e.keyCode===U.sr.PERIOD&&document.activeElement?.tagName==="BODY"&&(0,p.BZ)().internal_only_debug_tools&&(0,p.BZ)().figment_debugger&&(0,i8.jW)()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[]);let{scrollPerformanceMonitorRef:_}=function({flowName:e,scrollStopDelay:t=150,context:r}){let a=(0,u.useRef)(null),i=(0,u.useRef)(!1),s=(0,u.useRef)(null),n=(0,u.useRef)(null),o=(0,u.useCallback)(()=>{i.current||(i.current=!0,a.current=G.l.createVital(e,{level:V.in.INFO,description:"Logging scroll performance via useScrollPerformanceMonitor",context:r,trackFps:!0}),a.current.start()),s.current&&clearTimeout(s.current),s.current=window.setTimeout(()=>{i.current=!1,s.current=null,a.current?.stop()},t)},[t,e,r]);return(0,u.useEffect)(()=>{let e=n.current;if(e)return e.addEventListener("scroll",o),()=>{e.removeEventListener("scroll",o),s.current&&clearTimeout(s.current)}},[o]),{scrollPerformanceMonitorRef:n}}({flowName:"file_browser_main_body_scroll_performance",context:{selectedViewView:r.view}}),g=e.pageHeaderContent?{pageHeaderContent:e.pageHeaderContent}:{pageHeaderTitle:e.pageHeaderTitle};return(0,c.jsxs)("div",{className:P.B.flex.flexRow.flexGrow1.$,ref:t,children:[(0,c.jsx)(i5,{showLoadingState:!1,showingFileBrowserLoader:e.showingFileBrowserLoader}),(0,c.jsxs)("div",{className:"file_browser_layout--fileBrowserPageViewContainer--2Xs7w",ref:_,children:[d&&(0,c.jsx)(z.SV,{boundaryKey:"FileBrowserPageHeader",fallback:z.NY.NONE_I_KNOW_WHAT_IM_DOING,hasCustomWASMBuild:ee.hU,children:(0,c.jsx)(sj,{pageHeaderActions:e.pageHeaderActions,showNavigationChevrons:a,pageHeaderDividerHidden:e.pageHeaderDividerHidden,...g})}),(0,c.jsx)(z.SV,{boundaryKey:"FileBrowserLayout-content",fallback:(0,c.jsx)($.D,{}),hasCustomWASMBuild:ee.hU,children:!e.showingFileBrowserLoader&&(n?(0,c.jsx)(st.D,{org:s,isInFileBrowser:!0}):(0,c.jsx)(W.J,{layoutRef:t,children:e.children}))})]}),(0,c.jsx)(i6.o,{entryPoint:i6.R.FILE_BROWSER})]})}var sT=r(749354),sI=r(356813);function sE(e){let t=[];for(let a of e)if(a.team){var r;let e=rc.M.toSinatra(a.team);t.push({...e,pro_team:!1,org_team:!0,member_count:a.memberCount,realtime_token:(r=a.team,`/team-members-${r.id}:livegraph-stub`),experiment_assignments:[],license_group:null,last_upgraded_at:null,student_autoverifying_team_at:null,sanctioned_at:null,subscription_raw:null,license_group_id:null,legal_name:null})}return t}function sk(e,t){let r="loading"===e,a=u.useRef(r);return(r&&!a.current&&(a.current=!0),t)?"loaded"===e:a.current&&"loaded"===e}function sN(e,t){let r=sC(e,t),a=new Set(e.map(e=>e.id)),i=t.filter(e=>!a.has(e.id)).map(e=>e.id);return i.length>0&&r.push({path:[],oldValue:[],newValue:i,severity:"high"}),r.filter(({path:e,oldValue:t,newValue:r})=>{let a=e[1];return 2!==e.length||"string"!=typeof a||(!sS.includes(a)||!!t||!!r)&&a in sI.Sf.shape&&!sR.includes(a)})}let sC=(0,sT.Bv)({strictLists:!1,strictRecords:!0}),sR=["community_profile_handle","community_profile_id","design_default_paid_status","experiment_assignments","figma_provided_libraries_disabled","last_upgraded_at","legal_name","license_group","license_group_id","realtime_token","sanctioned_at","student_autoverifying_team_at","subscription_raw","tax_id_verification_status","vat_gst_id","whiteboard_default_paid_status"],sS=["description","editors","img_url"];var sO=r(797122),sP=r(478297),sA=r(745417),sD=r(843440),sF=r(505668),sM=r(482538),sL=r(248944),sB=r(128517),sU=r(909660),sV=r(415797),sG=r(586570),sz=r(802584),sW=r(344824);function sH(e){let t=(0,et.$0)(),r=(0,m.v9)(e=>e.teams),a=(0,eB.A6)(),i=e.teams,s=(0,m.I0)(),{showing:n,show:o,data:l}=(0,sB.xN)(t_.iu),d=u.useCallback((e,t)=>{o({data:{team:e[0],targetRect:{top:t.clientY,right:t.clientX,bottom:t.clientY,left:t.clientX,width:1,height:1}}})},[o]),_=e=>{s(tF.K4({type:sz.Y,data:{teamId:e.id}}))},p=u.useCallback(e=>{s(tF.K4({type:(0,sD.A)(),data:{team:e}}))},[s]),[f,x]=u.useState([]),h=(0,sA.EE)(f),v=l?.team?.id,b=v?h.teams.unwrapOr({})[v]:void 0,y=u.useCallback((e,i)=>{if((0,Q.H)("file_browser_team_click",e.id,{teams:r,orgTeams:void 0},{selectedView:"recentsAndSharing"===a.view?a.tab||sU.D5.RECENTLY_VIEWED:a.view,viewMode:"grid"}),(0,U.v8)(i)){let r=(0,rn.HB)(e.id,t);g.ZP.redirect(r,"_blank"),i.stopPropagation();return}s(S.Hg({clickedResourceType:"team",resourceIdOrKey:e.id})),s(eL.fv({view:"team",teamId:e.id})),i.stopPropagation(),i.preventDefault()},[t,s,a,r]),j=u.useCallback(e=>{if(1!==e.length)return;let t=e[0];if(!h.teams.data?.[t.id]?.canAdmin)return;s(eL.kp());let r=!!t.org_id,a=e=>{s(tF.K4({type:sG.d,data:{team:t,subscriptionStatus:e}}))};r?a(!0):a9.j.getSubscriptionStatus({teamId:t.id}).then(({data:e})=>{a(e.meta&&e.meta.subscription_will_renew)}).catch(e=>{e.data?.message&&s(a2.l.error(e.data.message))})},[s,h]);return!e.teams||Array.isArray(e.teams)&&!e.teams.length?(0,c.jsx)("div",{className:sW.I,children:e.emptyView}):(0,c.jsxs)("div",{...{className:"xqui205 x78see x1iymm2a xv90nub"},children:[(0,c.jsx)(sF.X,{gridViewProps:{renderCard:({ref:e,item:t,isSelected:r,role:a,onFocus:i,onClick:s,onBlur:n})=>(0,c.jsx)(sM.LB,{ref:e,cardRole:a,isSelected:r,onBlur:n,onClick:s,onFocus:i,onLeave:_,team:t},`TeamGridCard-${t.id}`)},handleContextMenu:d,handleDeleteKey:j,handleOpenItem:y,isDraggable:!1,items:i,multiselectDisabled:!0,updateRenderedItems:x,viewType:sV.H6.GRID}),n&&b&&(0,c.jsx)(sL.k,{team:l.team,onRenameClick:p,selectedTeamPermissions:b})]})}var sK=r(499153),sY=r(631808),sZ=r(141169),s$=r(880215),sq=r(372908),sQ=r(830851);function sJ(e){return(0,c.jsx)(aP.X,{label:"OrgTeamsViewContent",children:(0,c.jsx)(sX,{...e})})}function sX({orgTeamsQuery:e,workspaceId:t,isGuest:r}){let a=(0,m.I0)(),{orgId:i,orgName:s}=(0,iT.c)(e=>({orgId:e.currentUserOrgId,orgName:e.orgById[e.currentUserOrgId].name})),{canCreateTeam:n}=(0,es.v8)(i?{id:i}:null,t),o="loaded"===e.status,l=u.useMemo(()=>{let t=e.data??[],r=t.length<tN.DD;return(0,tN.aV)(t,"name",{useExpensiveNaturalComparison:r}),t},[e]);return o?r?(0,c.jsx)(sH,{teams:l,emptyView:(0,A.t)("team_tile.guest.no_teams.info",{orgName:s})}):(0,c.jsx)("div",{className:P.B.mt24.$,children:(0,c.jsx)(sK.T,{orgTeams:l,orgTeamStatus:e.status,onCreateTeam:n?()=>{let e={workspaceId:t??sq.F};a(tF.K4({type:sQ.d3,data:e}))}:void 0,viewType:sV.H6.GRID,emptyView:t&&!n?(0,A.t)("team_tile.no_teams.empty_workspace"):void 0})}):(0,c.jsx)(sP.r,{isLoading:!0})}function s0(){return(0,m.v9)(e=>{let t=e.orgUsersByOrgId[e.currentUserOrgId]?.[e.user.id];return!!(t&&t.permission===eH.Gu.GUEST)})}let s1=(0,ex.cn)(()=>iI.IE.loaded([]));function s5({workspaceId:e,onlyJoinedTeams:t}){let r=(0,eW.Mn)(),a=(0,ex.Dv)(sZ.go),i=!(0,i9.canMemberOrg)(a??null,r),s=(0,ex.Dv)(i?s1:sO.HK),n=function(){let e=s0();return(0,iT.c)(t=>e?Object.keys((0,s$.E)(t.roles.byTeamId,t.user.id)).filter(e=>t.teams[e]).map(e=>t.teams[e]).filter(e=>!!e&&e.org_id===t.currentUserOrgId):null)}(),o=u.useMemo(()=>s.transform(a=>a.filter(a=>{if(t)return(0,i9.hasViewerRoleAccessOnTeam)(a.id,r);if(null===e){if(a.workspace_id)return!1}else if(e&&a.workspace_id!==e)return!1;return(0,sY.kn)(a,r)})),[s,r,t,e]);return n?iI.IE.loaded(n):o}function s2({children:e}){return(0,c.jsxs)("section",{"aria-label":(0,A.t)("file_browser.teams"),children:[(0,c.jsx)("div",{className:P.B.mx32.textBodyLargeStrong.$,children:(0,c.jsx)("div",{children:(0,A.t)("file_browser.teams")})}),e]})}var s4=r(491420),s9=r(462837);function s7({avatar:e,title:t,rightSideActions:r,rightSideOfTitleAction:a,pageHeaderIcon:i,textColor:s,badge:n}){return(0,c.jsx)("div",{className:Y()(P.B.mx32.mb20.$,"page_header--marginMobile--bn31d"),children:(0,c.jsxs)("div",{className:P.B.flex.mt8.itemsCenter.justifyBetween.$,children:[(0,c.jsxs)("div",{className:P.B.flex.itemsCenter.minH40.minW0.$,children:[e,(0,c.jsx)("div",{className:P.B.wFull.overflowHidden.$,style:s4.sx.if(e&&!i,s4.sx.ml16).$,children:(0,c.jsxs)("span",{className:P.B.flex.itemsCenter.$,children:[i,(0,c.jsx)("h1",{style:{wordBreak:"break-word"},children:(0,c.jsxs)(D.x,{color:s,fontSize:24,truncate:"line-clamp",lineClamp:2,children:[t," "]})}),(0,c.jsx)("div",{className:P.B.ml8.$,children:n}),a&&a.element]})})]}),(0,c.jsx)("div",{className:P.B.flex.ml16.gap8.$,children:r?.map(e=>(0,c.jsx)(s9.J,{action:e},e.key))})]})})}function s3(e){let{belowHeaderItem:t,...r}=e;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(s7,{...r}),t]})}var s6=r(868907),s8=r(771790),ne=r(44477);function nt(e){return(0,c.jsx)(tV.zx,{variant:"secondary",disabled:!0,htmlAttributes:{"data-tooltip-type":ae.fR.TEXT,"data-tooltip":e.tooltipText,"data-tooltip-show-immediately":!0,onPointerEnter:e.onMouseEnter},"aria-describedby":e.tooltipText,children:e.text})}function nr({backgroundColor:e}){let t=(0,ne.N6)(Q.LY),r=(0,m.v9)(e=>e.selectedView.view),a=(0,A.t)("license_group_view.toolbar.new_team_button"),i=()=>{t(Q.A2,{placement:r})};return e?(0,c.jsx)("button",{className:Y()("button_custom--buttonBase--pboNj button--buttonBase--WZECL",(0,sl.Vg)(e)?"button_custom--buttonColorsForDarkBackground--12FP3":"button_custom--buttonColorsForLightBackground--3nYrh","button_custom--buttonHugContents--jm6e0"),"data-tooltip-type":ae.fR.TEXT,"data-tooltip":(0,A.t)("license_group_view.toolbar.create_team_disabled"),"data-tooltip-show-immediately":!0,onMouseEnter:i,disabled:!0,children:(0,c.jsx)(D.x,{fontSize:11,fontWeight:"medium",truncate:!0,children:a})}):(0,c.jsx)(nt,{text:a,tooltipText:(0,A.t)("license_group_view.toolbar.create_team_disabled"),onMouseEnter:i})}var na=((s=na||{}).NEW_FILE="NEW_FILE",s.NEW_RESOURCE="NEW_RESOURCE",s.PROJECT_OVERFLOW_MENU="PROJECT_OVERFLOW_MENU",s.NEW_TEAM="NEW_TEAM",s.NEW_PROJECT="NEW_PROJECT",s.IMPORT="IMPORT",s.INVITE="INVITE",s.SHARE="SHARE",s.FAVORITE="FAVORITE",s.LOG_OUT="LOG_OUT",s.CLAIM="CLAIM",s.NEW_WHITEBOARD_FILE="NEW_WHITEBOARD_FILE",s.VIEW_COMMUNITY_PROFILE="VIEW_COMMUNITY_PROFILE",s.REQUEST_TO_EDIT="REQUEST_TO_EDIT",s.JOIN_TEAM="JOIN_TEAM",s.UPGRADE_TO_TEAM_ADMIN="UPGRADE_TO_TEAM_ADMIN",s.DROPDOWN="DROPDOWN",s.VIEW_MEMBERS="VIEW_MEMBERS",s.TEAM_OVERFLOW_MENU="TEAM_OVERFLOW_MENU",s.VIEW_LIBRARIES="VIEW_LIBRARIES",s.NEW_SITE_FILE="NEW_SITE_FILE",s.NEW_SLIDES_FILE="NEW_SLIDES_FILE",s.NEW_FIGMAKE_FILE="NEW_FIGMAKE_FILE",s.GET_DESKTOP_APP="GET_DESKTOP_APP",s.ADD_TO_CHROMEBOOK="ADD_TO_CHROMEBOOK",s.REQUEST_SENT_DESIGN="REQUEST_SENT_DESIGN",s.REQUEST_SENT_WHITEBOARD="REQUEST_SENT_WHITEBOARD",s.REQUEST_SENT_ALL="REQUEST_SENT_ALL",s.SETTINGS="SETTINGS",s);function ni(e){let t=(0,m.I0)(),r=(0,m.v9)(e=>e.currentUserOrgId),a=(0,eB.A6)();return()=>{r?t(tF.K4({type:sQ.d3,data:{workspaceId:e??sq.F}})):t(S.Nf({previousView:a}))}}function ns({workspace:e,org:t}){let{canCreateTeam:r,cannotCreateTeamReason:a}=(0,es.v8)(t,e?.id??null),i=sp(e),s=ni(e?.id);return a===es.mt.TEAM_CREATION_CONTROL?{kind:s9.G.CUSTOM,key:na.NEW_TEAM,element:(0,c.jsx)(nr,{backgroundColor:i})}:r?{kind:s9.G.CUSTOM,key:na.NEW_TEAM,element:(0,c.jsx)(ef.uu,{"aria-label":(0,A.t)("license_group_view.toolbar.new_team_button_aria_label"),variant:"primary",onClick:s,iconPrefix:(0,c.jsx)(s8.g,{}),children:(0,A.t)("license_group_view.toolbar.new_team_button")})}:null}function nn(){let e=(0,et.Ng)(),t=ns({org:e,workspace:null}),r=!!(0,p.BZ)().fb_paginated_all_teams_shadow_reads,a=s0(),i=s5({workspaceId:null,onlyJoinedTeams:!1}),s=sk(i.status,a),[n]=(0,y.aM)((0,e0.nr$)(r?{orgId:e.id,firstPageSize:50}:null)),o=u.useMemo(()=>n.transform(e=>sE(e.orgUnassignedTeams??[])),[n]);return(0,sT.lT)({enableShadowRead:r,label:sT.NL.OrgPageView.unassignedTeams,oldValue:i.data,oldValueReady:s,newValue:o.data,newValueReady:"loaded"===n.status,contextArgs:{orgId:e.id,numTeams:i.transform(e=>e.length).unwrapOr(null),isGuest:a},comparator:sN}),(0,j.K)("OrgUnassignedTeams"),(0,j.K4)({markName:"MainBodyContent",isLoaded:s,contextArgs:{isGuest:a}}),(0,c.jsx)(s6.S,{header:(0,c.jsx)(s3,{title:(0,A.t)("license_group_view.meta.unassigned_title",{orgName:e.name}),rightSideActions:t?[t]:void 0}),content:(0,c.jsx)("div",{className:P.B.flex.flexColumn.my24.$,children:(0,c.jsx)(s2,{children:(0,c.jsx)(sJ,{orgTeamsQuery:i,isGuest:a,workspaceId:null})})})})}var no=r(470791),nl=r(303501),nd=r(309374),nc=r(583212),nu=r(648226),nm=r(89973),n_=r(467827),np=r(637287);function nf({buttonAriaLabel:e,menuGroups:t,dataOnboardingKey:r}){let{manager:a,getTriggerProps:i}=t2.H9({initialPosition:"bottom"}),s=(0,r8.gx)();return(0,c.jsx)("div",{...{className:"x1iog12x"},children:(0,c.jsxs)(t2.fC,{manager:a,children:[(0,c.jsx)(t4.F,{...i(),"aria-label":e,"data-onboarding-key":r,children:(0,c.jsx)(az.i,{})}),(0,c.jsx)(np.Z,{groups:t,minItemContentWidth:192,trackedContext:at.V4.PAGE_HEADER_DROPDOWN,onTrackedItemClick:e=>{(0,Q.T6)({...s.properties,trackingContext:s.name,...e.trackingProperties})}})]})})}var nx=r(236885),ng=r(64099),nh=r(678201),nv=r(849594),nb=r(972190),ny=r(620756);let nj=rw.t1.Mutation(async e=>{await nb.r.updateDescription(e)});function nw({workspace:e}){let t=(0,m.I0)(),r=(0,rw.wV)(nj);return(0,c.jsx)(ny.q,{title:(0,A.t)("workspace_view.description_modal.title"),subtitle:(0,c.jsx)("div",{className:P.B.mb16.$,children:(0,c.jsx)(D.x,{color:"secondary",children:(0,A.tx)("workspace_view.description_modal.subtitle",{allWorkspacesText:(0,c.jsx)("span",{className:P.B.fontSemiBold.$,children:(0,A.t)("sidebar.browse.all_workspaces")})})})}),initialName:e.description??"",placeholder:(0,A.t)("workspace_view.description.placeholder"),submitText:(0,A.t)("workspace_view.description.save"),onRename:a=>r({workspaceId:e.id,description:a}).then(()=>t(tp.R.enqueue({message:(0,A.t)("workspace_view.description_update_updated")})),()=>{let e=(0,A.t)("workspace_view.description_update_error");t(a2.l.error(e)),console.error(e)})})}let nT=(0,tA.Y3)(function(e){return(0,c.jsx)(aP.X,{label:"UpdateWorkspaceDescriptionModal",children:(0,c.jsx)(nw,{...e})})},"UpdateWorkspaceDescriptionModal");function nI(){let e=(0,m.I0)(),t=(0,ea.dO)();return u.useCallback(r=>{let a=r.workspace.admins.some(e=>e.baseOrgUser?.user.id===t),i=[];a&&i.push({key:"admin",items:[{displayText:(0,A.t)("workspace_view.toolbar.admin_settings"),onClick:()=>{e(eL.fv({view:"workspace",subView:tn.ep.ADMIN,workspaceId:r.workspace.id,selectedTab:tn.Li}))}}]});let s={key:"default",items:[]};return i.push(s),s.items.push({displayText:(0,A.t)("file_browser.copy_link"),onClick:()=>{let t=(0,rQ.i7)(r.workspace.id,r.org.id);e(rd.fB({url:t}))}}),r.workspace.canAdmin&&s.items.push({displayText:(0,A.t)("license_group_view.toolbar.change_icon"),onClick:()=>{e((0,nv.X)({entity:r.workspace,entityType:ng.p.WORKSPACE,shape:"SQUARE"}))}}),i},[e,t])}var nE=r(879370),nk=r(919601),nN=r(975247),nC=r(36486),nR=r(643115);function nS({selectedFillOption:e,onSelectFillOption:t}){let r={solid:(0,A.t)("workspace_view.toolbar.solid"),no_fill:(0,A.t)("workspace_view.toolbar.no_fill")};return(0,c.jsx)(nE.ud,{className:P.B.ml8.colorTextMenuSecondary.colorIconMenuSecondary.$,dropdownButton:function({onClick:t}){return(0,c.jsx)(nC.zx,{className:P.B.ml4.mr4.$,role:"combobox",onClick:t,caret:"down",children:(0,c.jsx)("span",{className:P.B.minW32.mr8.$,children:r[e]})})},dropdownOptionsClassName:P.B.mt4.$,options:["solid","no_fill"].map((e,a)=>(0,c.jsx)(nE.Wx,{className:P.B.colorTextMenuSecondary.$,id:e,onClick:()=>{t(e)},children:r[e]},a)),optionsBelowSelector:!0,noBorder:!0})}let nO=rw.t1.Mutation(async e=>{await nb.r.updateColor(e)});function nP({workspace:e,onClose:t}){let r=(0,m.I0)(),a=(0,rw.wV)(nO),i=[{option:s_},...(0,sc.Mo)("base").filter(e=>!(0,sl.l7)(e,(0,sc.Ol)(sn.I7V.BLACK,"base"))).map(e=>({option:e})),...(0,sc.Mo)("baseLight").map(e=>({option:e}))],s=u.useRef(null),[n,o]=u.useState(!1),l=(0,nk.Fg)(),d=function(e){try{if(e)return(0,sl.lu)(e)}catch(e){console.error(e)}}((e?.colorConfig?.colors??[])[0]),[_,p]=u.useState(d?"solid":"no_fill"),[f,x]=(0,ex.KO)(su);return u.useEffect(()=>(x(d),()=>{x(void 0)}),[]),u.useEffect(()=>{if(!n){let e=e=>{"Escape"===e.key&&t()},r=e=>{s.current&&!s.current.contains(e.target)&&t()};return document.addEventListener("keydown",e),document.addEventListener("pointerdown",r),()=>{document.removeEventListener("keydown",e),document.removeEventListener("pointerdown",r)}}},[n,t]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{role:"button","aria-label":(0,A.t)("common.close"),tabIndex:0,className:P.B.absolute.wFull.hFull.top0.left0.zIndexTertiaryModal.$,onClick:t}),(0,c.jsxs)("div",{className:P.B.absolute.flex.h40.justifyCenter.alignCenter.flexShrink0.bRadius4.colorBgMenu.elevation400.mt8.ml32.zIndexModal.$,ref:s,children:[(0,c.jsx)(nS,{selectedFillOption:_,onSelectFillOption:e=>{if(p(e),"solid"===e){let e="dark"===l?s_:sl.Cj;x(d??e)}else x("unset")}}),sf(f)&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(nC.Z0,{}),(0,c.jsx)(nN.HG,{buttonClassName:P.B.ml2.mr2.$,buttonSize:"xsmall",dropperDisabled:!0,fixedNumColumns:9,hasNonWhiteboardColors:!0,isColorPopoverOpen:n,onColorChange:e=>{x(e.option)},optionSize:"medium",options:i,paletteType:"base",positionX:()=>0,positionY:(e,t)=>(0,nR.Mb)(e,t,4),setIsColorPopoverOpen:o,shouldCustomColorPopoverCloseOnEscape:!0,shouldDisableDataTooltip:!0,value:{option:f}})]}),(0,c.jsx)(nC.Z0,{}),(0,c.jsx)(nC.zx,{className:P.B.ml4.mr2.$,onClick:t,children:(0,c.jsx)("span",{className:P.B.mr1.colorTextToolbarSecondary.$,children:(0,A.t)("workspace_view.color.toolbar.cancel")})}),(0,c.jsx)(nC.zx,{className:P.B.mr8.$,onClick:()=>{a({workspaceId:e.id,colors:sf(f)?[(0,so.colorToHex)(f)]:[],onfulfilled:()=>r(tp.R.enqueue({message:(0,A.t)("workspace_view.toolbar.workspace_color_updated")})),onrejected:()=>{let e=(0,A.t)("workspace_view.toolbar.workspace_color_update_error");r(a2.l.error(e)),console.error(e)}}),t()},children:(0,c.jsx)("span",{className:P.B.colorTextOnbrand.$,children:(0,A.t)("workspace_view.color.toolbar.save")})})]})]})}var nA=r(223441),nD=r(451410),nF=r(210426),nM=r(514177),nL=r(317429),nB=r(226304),nU=r(630662);function nV(e){let t=(0,ea.dO)(),r=e.members.length,a=e.membersToShow||10;return(0,c.jsxs)("div",{children:[!e.removeHeader&&(0,c.jsx)("h2",{className:P.B.font13.fontMedium.mb12.$,children:e.label||(0,A.t)("file_browser.team_overview.member_label")}),e.members.slice(0,a).map(r=>{let a=r.id===t,i=e.showAdminBadge&&e.showAdminBadge(r);return(0,c.jsx)("div",{...{className:"x12sbs06 xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l"},children:(0,c.jsx)(ro.oJ,{size:24,entity:r,showIsMe:a,onClick:e.onMemberClick,badge:i?{color:r7.JV.DEFAULT,text:(0,A.t)("file_browser.badge_label.admin")}:void 0,includeUserEmailAddress:e.shouldIncludeUserEmailAddress})},r.id)}),r>a&&(e.customOverflowRow||(0,c.jsxs)("div",{...{className:"x78zum5 x6s0dn4 x167g77z"},children:[(0,c.jsx)(nU.n,{"aria-hidden":!0,className:"xe5c7bq"}),(0,c.jsx)("div",{...{className:"x98rzlu x1n0bwc9 xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l"},children:(0,A.tx)("file_browser.team_overview.num_others",{numMembers:r-a})})]}))]})}var nG=r(67475);let nz="workspace_members_modal--searchContainer--gWz-A modal--searchContainer--NKISf";var nW=((n=nW||{}).MEMBERS="MEMBERS",n.ADMINS="ADMINS",n);function nH(e){return(0,p.BZ)().fpl_workspace_members_search_input?(0,c.jsx)("div",{className:nz,children:(0,c.jsx)(nA.M,{"aria-label":(0,A.t)("workspace_view.members_modal.search_aria_label"),variant:"borderless",value:e.query,onChange:e.onChange,placeholder:(0,A.t)("workspace_view.members_modal.search_placeholder"),size:"lg","aria-description":(0,A.t)("general.search_will_update")})}):(0,c.jsx)("div",{className:nz,children:(0,c.jsx)(nB.E1,{className:"workspace_members_modal--searchBar--9wa8z",focusOnMount:!0,query:e.query,clearSearch:()=>{e.onChange("")},onChange:e.onChange,hideXIcon:!0,hasTransparentBackground:!0,iconClassName:"workspace_members_modal--searchIcon--zEDBl",placeholder:(0,A.t)("workspace_view.members_modal.search_placeholder")})})}function nK(e){return(0,c.jsx)("div",{className:"workspace_members_modal--emptyContainer--lDjkw",children:(0,c.jsx)("div",{className:"workspace_members_modal--emptyState--t2FxX text--fontPos11--rO47d text--_fontBase--VaHfk",children:e.content})})}let nY=(e,t)=>null===e.baseOrgUser?-1:null===t.baseOrgUser?1:e.baseOrgUser.user.handle.localeCompare(t.baseOrgUser.user.handle),nZ=(0,tA.Y3)(function(e){let t=nD.dd({open:e.open,onClose:e.onClose}),[r,a]=(0,u.useState)(""),[i,s,n]=nF.m.useTabs({MEMBERS:!0,ADMINS:!0});u.useEffect(()=>{a("")},[a,n.activeTab]);let o=e.workspace.members.slice().sort(nY),l=e.workspace.admins.slice().sort(nY),d={};o.forEach(e=>{e.baseOrgUser&&(d[e.baseOrgUser.user.id]=e.permission)});let m=e=>d[e.id]===eH.F9.ADMIN&&"MEMBERS"===n.activeTab;return(0,c.jsx)(nM.fC,{manager:t,width:"lg",height:"fixed",children:(0,c.jsxs)(nL.AU,{children:[(0,c.jsxs)(nL.h4,{children:[(0,c.jsx)(nL.Tv,{children:(0,A.t)("workspace_view.members_modal.title")}),(0,c.jsxs)(nF.m.TabStrip,{manager:n,children:[(0,c.jsx)(nF.m.Tab,{...i.MEMBERS,children:(0,A.t)("workspace_view.members_modal.members")}),(0,c.jsx)(nF.m.Tab,{...i.ADMINS,children:(0,A.t)("workspace_view.members_modal.admins")})]})]}),(0,c.jsxs)(nL.uT,{scrolling:"manual",padding:0,children:[(i.MEMBERS.display?o:l).length>0&&(0,c.jsx)(nH,{query:r,onChange:a}),(0,c.jsx)(e_.l,{className:"workspace_members_modal--outerContainer--Kyahh",innerClassName:"workspace_members_modal--membersContainer--azlNh",children:(0,c.jsxs)("div",{className:"workspace_members_modal--modalContainer--sWWyB",children:[(0,c.jsx)(nF.m.TabPanel,{...s.MEMBERS,children:0===o.length?(0,c.jsx)(nK,{content:(0,A.tx)("workspace_view.members_modal.no_members",{workspaceName:e.workspace.name})}):(0,c.jsx)(n$,{getShouldShowAdminBadge:m,query:r,users:o})}),(0,c.jsx)(nF.m.TabPanel,{...s.ADMINS,children:0===l.length?(0,c.jsx)(nK,{content:(0,A.tx)("workspace_view.members_modal.no_admins",{workspaceName:e.workspace.name})}):(0,c.jsx)(n$,{getShouldShowAdminBadge:m,query:r,users:l})})]})})]})]})})},"WORKSPACE_MEMBERS_MODAL",tA.Et.YES);function n$({getShouldShowAdminBadge:e,query:t,users:r}){let a=(0,m.I0)(),i=u.useCallback((e,t)=>{a(eL.fv({view:"user",userId:t.id,userViewTab:nG.l.INTERNAL_PROFILE})),a(tF.hV())},[a]),s=r.filter(e=>{let r=e.baseOrgUser?.user,a=t.toLocaleLowerCase();return!!r?.email?.toLocaleLowerCase().includes(a)||!!r?.handle.toLocaleLowerCase().includes(a)}).map(e=>{let t=e.baseOrgUser.user;return{id:t.id,handle:t.handle,img_url:t.imgUrl,email:t.email}})||[];return 0===s.length?(0,c.jsx)(nK,{content:(0,A.tx)("workspace_view.members_modal.no_results",{query:t})}):(0,c.jsx)("div",{...{className:"x78zum5 xdt5ytf xnm25rq xyfqnmn x1y1aw1k"},children:(0,c.jsx)(nV,{members:s,showAdminBadge:e,membersToShow:s.length,onMemberClick:i,removeHeader:!0,shouldIncludeUserEmailAddress:!0})})}function nq(e){let{workspace:t,org:r}=e,a=(0,m.I0)(),i=(0,m.v9)(e=>e.currentUserOrgId),s=(0,m.v9)(e=>e.avatarEditorState),n=t.canAdmin,[o,l]=(0,ex.KO)(sm),{canCreateTeam:d}=(0,es.v8)(r,t.id),_=window.innerWidth<=(0,sa.zg)(sb.Jbu),p=t?t.id:sq.F,f=sp(t),x=function(e){if(e&&"unset"!==e)return(0,sl.Vg)(e)?"dark":"light"}(f),g=(t?.members||[]).length,h=(0,nm.M)(),v=ni(t.id),b=u.useCallback(({favoriteId:e,sectionId:r})=>{a(eV.lk({workspace:t,entrypoint:"workspace_page_view",sectionId:r,favoriteId:e}))},[a,t]),y=u.useCallback(({favoriteId:e})=>{a(eV.r_({workspace:t,entrypoint:"workspace_page_view",favoriteId:e}))},[a,t]),j={kind:s9.G.CUSTOM,key:na.VIEW_MEMBERS,element:(0,c.jsx)(ef.uu,{variant:"secondary",onClick:()=>{a(tF.K4({type:nZ,data:{workspace:e.workspace,tab:nW.MEMBERS}}))},iconPrefix:(0,c.jsx)(nc.E,{}),htmlAttributes:{"data-tooltip-type":ae.fR.TEXT,"data-tooltip":(0,A.t)("file_browser.view_members_with_count",{numMembers:g})},"aria-label":(0,A.t)("file_browser.view_members_with_count",{numMembers:g}),children:e.isWorkspaceMembersLoading?(0,c.jsx)(nl.T,{}):(0,c.jsx)(c.Fragment,{children:g.toString()})})},w=u.useMemo(()=>(0,c.jsx)(nx.d,{setFavorite:b,removeFavorite:y,favoriteType:eH.IK.WORKSPACE,resourceId:p,orgId:i,monochrome:!!f,size:"lg"}),[p,b,y,i,f]),T=function(){let e=nI(),t=(0,m.I0)(),[r,a]=(0,ex.KO)(sm);return u.useCallback(r=>{let i=e(r),s=i[i.length-1];return s||(s={key:"workspace-page-header-menu-items",items:[]},i.push(s)),r.workspace.canAdmin&&(s.items.push({displayText:(0,A.t)("workspace_view.toolbar.change_color"),onClick:()=>a(!0)}),s.items.push({displayText:(0,A.t)("workspace_view.description.title"),onClick:()=>{t(tF.K4({type:nT,data:{workspace:r.workspace}}))}})),i},[e,t,a])}(),I=t&&r?T({workspace:t,org:r}):d&&_?[{key:"mobile-workspace-page-header-menu-items",items:[{displayText:(0,A.t)("org_view.new_team"),onClick:v}]}]:void 0,E=[],k=ns({workspace:t,org:r});if(k&&E.push(k),e.showMembersButton&&E.push(j),t&&E.push({kind:s9.G.CUSTOM,key:na.FAVORITE,element:w}),!t)return(0,c.jsx)(s3,{title:(0,A.t)("license_group_view.meta.unassigned_title",{orgName:r.name}),rightSideActions:E});let N=I?{kind:s9.G.CUSTOM,key:na.DROPDOWN,element:(0,c.jsx)(nf,{buttonAriaLabel:(0,A.t)("org_view.page_header_dropdown_label"),menuGroups:I})}:void 0;return(0,c.jsx)("div",{"data-testid":"workspace-page-header",style:{backgroundColor:f},children:(0,c.jsx)(n_.U,{mode:f?x:h.color,children:(0,c.jsx)(s3,{avatar:n?(0,c.jsx)(nh.U6,{avatarEditorState:s,entityType:ng.p.WORKSPACE,entity:t,dispatch:a,size:40}):(0,c.jsx)(ro.zf,{entity:t,size:40}),title:(0,c.jsx)("span",{className:"workspace_page_header--titleColorForBackground--v2D18",children:t.name}),badge:t.orgAccess===eH.Zn.SECRET?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(nd.u,{children:(0,A.t)("workspace_table.secret_workspace_lock_sr_only_text")}),(0,c.jsx)(nu.T,{"data-tooltip-type":ae.fR.TEXT,"data-tooltip":(0,A.t)("workspace_table.secret_workspace_lock_tooltip"),"data-tooltip-subtext":(0,A.t)("workspace_table.secret_workspace_lock_tooltip_subtext"),"data-tooltip-timeout-delay":500,"data-tooltip-max-width":300,"aria-hidden":!0,className:"workspace_page_header--iconColorForBackground--NRYW0"})]}):void 0,rightSideActions:E,rightSideOfTitleAction:N,belowHeaderItem:o?(0,c.jsx)(nP,{workspace:t,onClose:()=>l(!1)}):void 0})})})}var nQ=r(676283);function nJ(e){let t=(0,m.I0)(),r=e.workspace.members,a=u.useMemo(()=>(0,nQ.q)(r),[r]),i={};return a.forEach(e=>{e.baseOrgUser&&(i[e.baseOrgUser.user.id]=e.permission)}),(0,c.jsxs)("div",{className:P.B.my24.mr8.ml24.$,children:[(0,c.jsx)("h2",{className:"workspace_page_meta_content--membersHeader--BUVCW text--fontPos13--5OfL8 text--_fontBase--VaHfk",children:(0,A.t)("workspace_view.sidebar.members")}),(0,c.jsx)(nV,{removeHeader:!0,members:a.map(e=>e.baseOrgUser?.user).filter(e=>!!e),onMemberClick:(e,r)=>{t(eL.fv({view:"user",userId:r.id,userViewTab:nG.l.INTERNAL_PROFILE}))},showAdminBadge:e=>i[e.id]===eH.F9.ADMIN,customOverflowRow:(0,c.jsx)(iL.h,{className:"workspace_page_meta_content--seeAllMembers--aMo4B text--fontPos11--rO47d text--_fontBase--VaHfk",onClick:()=>{t(tF.K4({type:nZ,data:{workspace:e.workspace,tab:nW.MEMBERS}}))},children:(0,A.t)("workspace_view.sidebar.see_all_members")})})]})}var nX=r(723014),n0=r(887682),n1=r(777018),n5=r(398023),n2=r(489360),n4=r(618614),n9=r(578242),n7=r(434857);function n3({file:e,isDisabled:t,orgName:r}){let a=(0,rg.gL)();return(0,c.jsx)(n7.D,{thumbnail:(0,c.jsx)(rh.mB,{file:e,noBorder:!0}),bottomLeftIcon:(0,c.jsx)(rg.XV,{size:16,type:a(e)}),title:(0,c.jsxs)("div",{...{className:"x78zum5 x1q0g3np x1jnr06f x1qughib x6s0dn4"},children:[(0,c.jsx)("span",{...{0:{className:"xuxw1ft xb3r6kr xlyipyv"},1:{className:"xuxw1ft xb3r6kr xlyipyv x1n0bwc9"}}[0|!!t],children:e.name}),t&&r&&(0,c.jsx)("span",{"data-tooltip-type":"text","data-tooltip":(0,A.t)("file_browser.pinning.choose_file_to_pin_modal.file_not_workspace_visible.tooltip",{orgName:r}),"data-tooltip-show-immediately":!0,"data-tooltip-show-above":!0,"data-tooltip-max-width":500,children:(0,c.jsx)(n9.X,{className:"xmauxvm"})})]}),subtitle:e.project?.name})}let n6=(0,tA.Y3)(function({workspaceId:e,open:t,onClose:r}){let a=nD.dd({open:t,onClose:r}),i=(0,m.I0)(),s=(0,e1.ZG)("ChooseFileToPinModal").unwrapOr(null),n=s?.name??null,[o,l]=u.useState(""),[d]=(0,n0.Z)(o,400),[_,p]=u.useState(null);(0,b.DG)(e0.BrP,{fileKey:_??""},{enabled:!!_});let f=function({searchQuery:e,workspaceId:t}){let r=iI.IE.useTransformShallowEqual((0,b.DG)(e0.yYP,{}),e=>{if(!e.currentUser.recentFiles2)return[];let t=[];for(let{file:r}of e.currentUser?.recentFiles2)r&&t.push(r);return t}),a=function({searchQuery:e,workspaceId:t}){let r=(0,et.$0)();(0,O.hu)(!!r,"currentUserOrgId must be defined in useSearchWorkspaceFilesQuery");let a=(0,b.DG)(e0.mvj,{query:e,workspaceId:t,orgId:r,sort:"relevancy",desc:"true"},{enabled:!!e});return iI.IE.useTransformShallowEqual(a,e=>{let t=[];for(let r of e.searchWorkspaceFiles)r.file&&t.push(r.file);return t})}({searchQuery:e,workspaceId:t}),i="disabled"!==a.status?a:r;return(0,n5.iJ)(i,t)}({searchQuery:d,workspaceId:e}),x=iI.IE.useTransformShallowEqual(f,e=>e.map(e=>e.key)),g=(0,n5.ih)(x.unwrapOr([])),h=u.useCallback(()=>{_&&(r(),i(tF.K4({type:(0,n1.j)(),data:{fileKey:_,source:o?"add_file_modal_search":"add_file_modal_suggested"}})))},[i,o,r,_]);u.useEffect(()=>(i(n4.Ft({entryPoint:"file_browser:file_picker_modal"})),i(n4.dR({workspaceFilter:e})),()=>{i(n4.dR({workspaceFilter:null})),i(n4.TM())}),[i,l,e]);let v="loaded"!==g.status||"loaded"!==f.status;return(0,c.jsx)(nM.fC,{manager:a,width:1024,height:"dynamic",children:(0,c.jsxs)(nL.AU,{children:[(0,c.jsx)(nL.h4,{children:(0,c.jsx)(nL.Dx,{children:(0,A.t)("file_browser.pinning.pin_modal.pin_file_to_workspace")})}),(0,c.jsxs)(nL.uT,{padding:0,scrolling:"manual",...{className:"x2xcw19 x78zum5 xdt5ytf"},children:[(0,c.jsx)(nB.E1,{...{className:"x1vvogim x1hr3lfm xso031l x1q0q8m5 xertd99 x1vqgdyp"},hasTransparentBackground:!0,placeholder:(0,A.t)("file_browser.choose_file_modal.search_for_a_file"),focusOnMount:!0,query:o,onChange:l,clearSearch:()=>l(""),withUI3Icon:!0,hideXIcon:!0}),v?(0,c.jsx)(oe,{}):0===f.data.length?(0,c.jsx)(ot,{query:d}):(0,c.jsx)(n8,{isSuggested:!d,files:f.data,orgName:n,setSelectedFileKey:p,shouldDisableTile:e=>{let t=g.data.get(e.key);return!!t&&!t?.canPinFileToWorkspace}})]}),(0,c.jsx)(nL.$_,{children:(0,c.jsxs)(nL.Dj,{children:[(0,c.jsx)(ef.XT,{variant:"secondary",onClick:r,children:(0,A.t)("general.cancel")}),(0,c.jsx)(ef.XT,{variant:"primary",disabled:v||!_,onClick:h,children:(0,A.t)("general.next")})]})})]})})},"ChooseFileToPinModal");function n8({isSuggested:e,files:t,orgName:r,shouldDisableTile:a,setSelectedFileKey:i}){let s=u.useCallback(e=>{let t=e[0];t?i(t.key):i(null)},[i]);return(0,c.jsx)("div",{...{className:"x1rife3k"},children:(0,c.jsxs)("div",{...{className:"x78zum5 xdt5ytf x1pulhmw x1xn8qrt x4l9tsp"},children:[e&&(0,c.jsx)("span",{...{className:"x1n0bwc9"},children:(0,A.t)("file_browser.pinning.suggested")}),(0,c.jsx)(n2.z,{canSelectItem:e=>!a(e),doNotFocusOnLoad:!0,getAriaLabel:e=>e.name,handleContextMenu:_.ZT,isDraggable:!1,items:t,keepSelectionOnFocusLost:!0,multiselectDisabled:!0,onSelection:s,renderTile:e=>(0,c.jsx)(n3,{file:e,orgName:r,isDisabled:a(e)}),renderTileFooter:()=>(0,c.jsx)(c.Fragment,{})})]})})}function oe(){return(0,c.jsx)("div",{...{className:"x78zum5 x6s0dn4 xl56j7k x98rzlu"},children:(0,c.jsx)(nl.T,{})})}function ot({query:e}){let t=e?(0,A.tx)("file_browser.workspace_pinning.no_files_matching_query",{searchQuery:(0,c.jsx)("div",{className:"x1akne3o xuxw1ft xb3r6kr xlyipyv xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh",children:e})}):(0,A.t)("file_browser.workspace_pinning.no_suggested_files");return(0,c.jsx)("div",{className:"x78zum5 x1q0g3np x195vfkc x6s0dn4 xl56j7k x1n0bwc9 x98rzlu x2b8uid",children:t})}var or=r(266935),oa=r(684958),oi=r(805014);let os=u.forwardRef(function({thumbnail:e,title:t,subtitle:r,isSelected:a,onClick:i,cardRole:s,onFocus:n,onBlur:o,draggable:l,isHoverContentVisibleOverride:d},u){let m=(0,c.jsxs)("div",{...{className:"x78zum5 xdt5ytf x1y1aw1k xlyipyv xuxw1ft xb3r6kr"},children:[(0,c.jsx)(oi.D.Title,{children:t}),(0,c.jsx)(oi.D.Subtitle,{children:r})]});return(0,c.jsx)(oi.D.Root,{ref:u,cardRole:s,draggable:l,footer:m,isSelected:!!a,onBlur:o,onClick:i,onFocus:n,isHoverContentVisibleOverride:d,children:(0,c.jsx)("div",{className:"x1n2onr6",children:e})})});var on=r(87394),oo=r(543105),ol=r(984597),od=r(635789),oc=r(269356);let ou={open:!0,openNewTab:!0,showInFolder:!0,copyLink:!0,pinToWorkspace:!0};function om({suggestedFiles:e}){let t=e.slice(0,8),r=(0,eB.A6)(),a=(0,m.I0)(),{showing:i,show:s,data:n}=(0,oo.H)(),o=u.useCallback((e,t)=>{g.ZP.redirect((0,rj.BD)(e)),(0,Q.gc)(e.key,{selectedViewName:r.view,entrypoint:"suggested_files_empty_state"}),t.stopPropagation(),t.preventDefault()},[r.view]),l=u.useCallback((e,t)=>{o(e,t)},[o]),d=u.useCallback((e,t,r)=>{let a=e[0];a&&s({data:{tile:(0,n5.uG)(a),targetRect:{top:t.clientY,right:t.clientX,bottom:t.clientY,left:t.clientX,width:1,height:1},index:r}})},[s]);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{...{className:"x1n0bwc9 xlyipyv xuxw1ft xb3r6kr"},children:(0,A.t)("file_browser.pinning.suggested")}),(0,c.jsx)(sF.X,{items:t,multiselectDisabled:!0,isDraggable:!1,handleOpenItem:l,onSelection:e=>{a(rI.LA()),a(rI.CD({type:rS.m.FILES,keys:e.map(e=>e.key)}))},handleContextMenu:d,gridViewProps:{containerStyle:op.grid,renderTile:e=>(0,c.jsx)("div",{...{className:"x1dmp6jm xkib98w xbyyjgo x12oqio5 xgk9eko xb3r6kr"},children:(0,c.jsx)(rh.mB,{file:e,noBorder:!0,size:rK.s.SMALL})}),tileBorderRadius:8,tileBorderStyle:"dashed",tileFooterPosition:"right",renderTileFooter:(e,{isSelected:t,isHovered:r})=>(0,c.jsx)(o_,{file:e,isHovered:r,isSelected:t})},viewType:sV.H6.GRID}),i&&n?.tile?(0,c.jsx)(ol.b,{tileActions:ou,openTile:e=>o(n.tile.file,e),tile:n.tile,selectedTiles:[n.tile],dropdownVisible:i}):null]})}function o_({file:e,isHovered:t,isSelected:r}){let a=(0,m.I0)(),i=u.useCallback(t=>{a(tF.K4({type:(0,n1.j)(),data:{fileKey:e.key,source:"suggested_files_empty_state"}})),t.stopPropagation(),t.preventDefault()},[a,e]),s=e.project?.name;return(0,c.jsxs)("div",{...{className:"x78zum5 xdt5ytf x195vfkc x1iyjqo2 xl56j7k xb3r6kr xq1n1xh"},children:[(0,c.jsx)("div",{...{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up xlyipyv xuxw1ft xb3r6kr"},children:e.name}),t||r||w.ZP.mobile||w.ZP.tablet?(0,c.jsx)("div",{role:"button",tabIndex:0,...{className:"x1quhyk7 xlyipyv xuxw1ft xb3r6kr x1ypdohk"},onClick:i,children:(0,A.t)("file_browser.pinning.pin_file")}):s?(0,c.jsx)("div",{className:"x1n0bwc9 xlyipyv xuxw1ft xb3r6kr",children:s}):null]})}let op={grid:{kumcoG:"xem2tbl",kOIVth:"xou54vl",khm7nJ:null,k1C7PZ:null,$$css:!0}};function of({workspaceId:e}){let t,r=function(e){let t=iI.IE.useTransform((0,b.DG)(e0.d8h,{}),e=>{if(!e.currentUser.recentFiles2)return[];let t=[];for(let{file:r}of e.currentUser?.recentFiles2)r&&t.push(r);return t});return(0,n5.iJ)(t,e)}(e);return t="loaded"!==r.status?(0,c.jsx)("div",{className:P.B.py1.h20.wFull.$,children:(0,c.jsx)(em.jz,{})}):r.data.length>0?(0,c.jsx)(om,{suggestedFiles:r.data}):(0,c.jsx)("span",{className:P.B.colorTextSecondary.truncate.textBodyLarge.alignCenter.$,children:(0,A.t)("file_browser.pinning.no_pinned_files")}),(0,c.jsx)("div",{className:P.B.bRadius8.colorBgSecondary.px32.py24.flex.flexColumn.gap16.mt8.$,children:t})}var ox=r(254797),og=r(196729),oh=r(50471),ov=r.n(oh),ob=r(238573),oy=r(272678),oj=r(85346),ow=r(44332),oT=r(408305),oI=r(191752),oE=r(524346);function ok({pinnedFile:e}){let t=(0,n5.uG)(e.file),r=(0,oT.i)(e.file.folderId),a=(0,oI.i)(t);return(0,c.jsxs)("div",{className:P.B.bRadius8.borderBox.p16.flex.flexColumn.gap16.colorBg.colorText.b1.bSolid.colorBorder.elevation300.flexGrow1.$,style:s4.sx.add({width:"422px",overflowY:"auto",overflowX:"hidden"}).$,children:[(0,c.jsxs)("div",{className:P.B.flex.flexRow.gap16.$,children:[(0,c.jsx)("div",{className:P.B.flexBasisAuto.$,children:(0,c.jsx)(oE.q,{entity:{id:e.creator.id,img_url:e.creator.imgUrl,name:e.creator?.name??void 0,handle:e.creator?.handle}})}),(0,c.jsxs)("div",{className:P.B.flex.flexColumn.overflowHidden.$,children:[(0,c.jsxs)("div",{className:P.B.flex.flexRow.gap8.textBodyLarge.$,children:[(0,c.jsx)(D.x,{fontWeight:"semi-bold",truncate:!0,children:e.creator.name}),(0,c.jsx)("span",{className:P.B.flexBasisAuto.flexGrow1.flexShrink0.$,children:(0,c.jsx)(D.x,{color:"secondary",children:(0,c.jsx)(ow.Lt,{date:e.createdAt})})})]}),(0,c.jsx)("div",{className:P.B.textBodyLarge.overflowBreakWord.$,dangerouslySetInnerHTML:{__html:(0,oj.Z)((0,od.Ru)(e.description))}})]})]}),(0,c.jsx)("div",{className:P.B.flex.flexColumn.$,children:(0,c.jsxs)("div",{className:P.B.bRadius8.b1.colorBorder.bSolid.wFull.overflowHidden.$,children:[(0,c.jsx)("div",{children:(0,c.jsx)(or.O,{tile:t,noBorder:!0})}),(0,c.jsx)("div",{className:P.B.flex.flexRow.gap8.itemsCenter.bt1.bSolid.colorBorder.p16.$,children:(0,c.jsxs)("div",{...{className:"x78zum5 x1q0g3np x1v2ro7d x6s0dn4"},children:[(0,c.jsx)(rg.XV,{size:16,type:a}),(0,c.jsxs)("div",{className:P.B.flex.flexColumn.gap2.flexGrow1.justifyCenter.overflowHidden.cursorDefault.$,children:[(0,c.jsx)("div",{...{className:"xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh"},children:e.file.name}),"loaded"===r.status&&r.data?(0,c.jsx)("div",{...{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up"},children:r.data}):null]})]})})]})})]})}let oN={width:0,height:0};function oC({pinnedFile:e,targetRef:t,shouldHide:r}){let a=(0,oy.e)(t),[i,s]=(0,oy.X)(),[n,o]=u.useState(oN),[l,d]=u.useState(!1),m=u.useCallback(()=>{if(!t.current)return;let e=(0,ob.qx)(t.current.getBoundingClientRect()),r=window.innerWidth,a=window.innerHeight,i=a-e.top-8,s=i>100;if(r-e.right>438&&s)return void o({transform:`translate(${e.right+8}px, ${e.top}px)`,maxHeight:i});if(e.left>438&&s)return void o({transform:`translate(${e.left-430}px, ${e.top}px)`,maxHeight:i});let n=430-(r-e.left),l=a-e.bottom-16;if(l>100)return void o({transform:`translate(${(0,og.uZ)(e.left-n,0,e.left)}px, ${e.bottom+8}px)`,maxHeight:l});let d=e.top-16;o({top:"auto",bottom:"100vh",transform:`translate(${(0,og.uZ)(e.left-n,0,e.left)}px, ${e.top-8}px)`,maxHeight:d})},[t,o]),_=!r&&(a||s),p=(0,v.D9)(_);if(u.useEffect(()=>{if(!p&&_)m();else if(p&&!_){d(!0);let e=setTimeout(()=>{d(!1)},(0,sa.L_)("150ms"));return()=>{clearTimeout(e)}}},[_,p,m]),u.useEffect(()=>{let e=ov()(m),t=()=>{_&&e()};return document.addEventListener("scroll",t,!0),()=>{document.removeEventListener("scroll",t,!0)}},[_,m]),!t.current)return null;let f=(0,c.jsx)("div",{className:"pinned_files_hover--hoverCardOverflowWrapper--k-ktq",children:(0,c.jsx)("div",{className:Y()("pinned_files_hover--hoverCard--4kp46",_&&"pinned_files_hover--makeVisible--R5-Sh"),style:n,ref:i,role:"tooltip",onContextMenu:e=>{e.preventDefault(),e.stopPropagation()},children:(_||l)&&(0,c.jsx)(ok,{pinnedFile:e})})});return ox.createPortal(f,document.body)}let oR={open:!0,openNewTab:!0,showInFolder:!0,copyLink:!0,share:!0,duplicateToDrafts:!0,pinToWorkspace:!0,publishOrgTemplate:!0,favoriteFile:!0,unfavoriteFile:!0},oS=[];function oO({workspace:e}){let t=(0,m.I0)(),r=(0,eB.A6)(),a=(0,ea.dO)(),{showing:i,show:s,data:n}=(0,oo.H)(),o=(0,on.j)(),l=u.useCallback((t,a,i,s)=>{o(t,i),(0,Q.hM)(Q.hn,a.file,{entrypoint:s,selectedView:r.view,resourceType:"workspace",resourceId:e.id,pinDescription:(0,od.nV)(a.description)})},[o,r.view,e.id]),d=u.useCallback((e,t)=>{l((0,n5.uG)(e.file),e,t,"pinned files")},[l]),_=e.pinnedFiles??oS,p=u.useCallback(r=>{let i=r[0];i&&(e.canAdmin||i.creator?.id===a)&&t(tF.K4({type:(0,oa.V)(),data:{pinnedFileId:i.id}}))},[e.canAdmin,a,t]),f=u.useMemo(()=>_.filter(({file:e})=>!!e).map(e=>(0,n5.uG)(e.file)),[_]),x=(0,rN.H3)(f),g=u.useMemo(()=>_.sort((e,t)=>e.createdAt>t.createdAt?1:-1),[_]);return(0,c.jsxs)(c.Fragment,{children:[_.length>0?(0,c.jsx)(sF.X,{doNotFocusOnLoad:!0,getAriaLabel:e=>e.file.name,gridViewProps:{containerStyle:oF.grid,renderCard:({ref:e,item:t,isSelected:r,role:a,onFocus:s,onClick:n,onBlur:o})=>(0,c.jsx)(oD,{pinnedFile:t,isDropdownOpen:i,ref:e,isSelected:r,cardRole:a,onFocus:s,onClick:n,onBlur:o,draggable:!0}),renderTileDragImage:e=>(0,c.jsx)(rh.mB,{file:e.file,noBorder:!0})},handleContextMenu:(e,r,a)=>{t(rI.LA());let i=e.map(e=>e.file).filter(e=>null!==e);t(rI.CD({type:rS.m.FILES,keys:i.map(e=>e.key)}));let n=i[0];n&&s({data:{tile:(0,n5.uG)(n),targetRect:{top:r.clientY,right:r.clientX,bottom:r.clientY,left:r.clientX,width:1,height:1},index:a}})},handleDeleteKey:p,handleDragDataTransfer:(e,t)=>{t.setFigFilesData(e.map(e=>oc.v.toSinatra(e.file)))},handleOpenItem:d,isDraggable:!0,items:g,viewType:sV.H6.GRID}):(0,c.jsx)(of,{workspaceId:e.id}),(()=>{let e=n?.tile??null,t=n?.index??0;return(0,c.jsx)(ol.b,{tile:e,selectedTiles:x,tileActions:oR,openTile:r=>{e&&l(e,_[t],r,"pinned files: context menu")},dropdownVisible:i})})()]})}function oP({pinnedFile:e}){return(0,c.jsx)("span",{...{className:"xrbesu5 x12cwyba x1l993ej x1ejgcx7 x1aos5ly xlyipyv xuxw1ft xb3r6kr"},children:e.file.name})}function oA({pinnedFile:e}){return(0,c.jsx)(D.x,{truncate:!0,showTooltipWhenTruncated:!0,color:"secondary",children:(0,A.t)("tile.file_tile.pinned_by_user",{name:e.creator?.name??""})})}let oD=u.forwardRef(function({pinnedFile:e,isSelected:t,isDropdownOpen:r,cardRole:a,onClick:i,onFocus:s,onBlur:n,draggable:o},l){let d=(0,n5.uG)(e.file),m=u.useRef(null);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(oC,{pinnedFile:e,targetRef:m,shouldHide:r}),(0,c.jsx)("div",{ref:m,children:(0,c.jsx)(os,{ref:l,cardRole:a,draggable:o,isSelected:t,onBlur:n,onClick:i,onFocus:s,subtitle:(0,c.jsx)(oA,{pinnedFile:e}),thumbnail:(0,c.jsx)(or.O,{tile:d,noBorder:!0,size:rK.s.SMALL}),title:(0,c.jsx)(oP,{pinnedFile:e})})})]})}),oF={grid:{kLKAdn:"xyamay9",kumcoG:"x1g5i94c",kfSwDN:"x87ps6o",$$css:!0}},oM=(0,ex.xu)(e=>(0,ex.Kt)(`file_browser.workspace.pinned_section_open.${e}`,!0,nX.z.boolean()));function oL({workspace:e,isAssignedWorkspace:t}){let[r,a]=(0,ex.KO)(oM(e.id)),i=u.useCallback(()=>a(e=>!e),[a]),s=(0,m.I0)(),n=e.pinnedFiles?.length??0,o=t||e.canAdmin,l=n>=n5.o9,d=o||n>0,_=u.useCallback(()=>{s(tF.K4({type:n6,data:{workspaceId:e.id}}))},[s,e.id]);return(0,c.jsx)(c.Fragment,{children:d&&(0,c.jsxs)(tC.fC,{isOpen:r,toggle:i,children:[(0,c.jsxs)(tC.h4,{children:[(0,c.jsx)(tC.__,{size:"lg",children:(0,A.t)("file_browser.pinning.pinned_files")}),(0,c.jsx)(tC.Qn,{children:o&&(0,c.jsx)(tV.zx,{variant:"link",onClick:_,disabled:l,htmlAttributes:{"data-tooltip":l?(0,A.t)("file_browser.pinning.max_files.add_button_tooltip",{maxPins:n5.o9}):void 0,"data-tooltip-type":ae.fR.TEXT,"data-tooltip-show-above":!0},children:(0,A.t)("file_browser.pinning.add_file")})})]}),(0,c.jsx)(tC.VY,{children:(0,c.jsx)(oO,{workspace:e})})]})})}function oB(e){return(0,c.jsx)(aP.X,{label:"WorkspacePage",children:(0,c.jsx)(oU,{...e})})}function oU({workspaceId:e}){let t=(0,et.Ng)(),r=(0,b.DG)(e0.mw3,{orgId:t.id,workspaceId:e}),a=(0,b.DG)(e0.atB,{workspaceId:e}).transform(e=>e.workspace?.members??null),i=function(e){let t=!!(0,p.BZ)().fb_paginated_workspace_teams_shadow_reads,[r]=(0,y.aM)((0,e0.DcA)(t?{workspaceId:e,firstPageSize:50}:null)),a=u.useMemo(()=>r.transform(e=>sE(e.workspace?.activeTeams??[])),[r]),i=s5({workspaceId:e,onlyJoinedTeams:!1}),s=sk(i.status,!1);return(0,sT.lT)({enableShadowRead:t,label:sT.NL.WorkspacePageView.teams,oldValue:i.data,oldValueReady:s,newValue:a.data,newValueReady:"loaded"===r.status,contextArgs:{workspaceId:e,numTeams:i.transform(e=>e.length).unwrapOr(null)},comparator:sN}),i}(e);if("loading"===r.status)return(0,c.jsx)(em.jz,{});if("loaded"!==r.status)return(0,c.jsx)(no.M,{resourceType:i3.Hy.WORKSPACE});let s=r.data.workspace;if(!s||!s.canView)return(0,c.jsx)(no.M,{resourceType:i3.Hy.WORKSPACE});let n=(0,es.zC)(r.data.currentUser)===s.id;return(0,c.jsx)(oV,{org:t,workspace:s,workspaceMembersQuery:a,workspaceOrgTeamsQuery:i,isAssignedWorkspace:n})}function oV({org:e,workspace:t,workspaceMembersQuery:r,workspaceOrgTeamsQuery:a,isAssignedWorkspace:i}){(0,rE.x6)(t.name);let s={...t,members:r.data??[]},n=r.transform(e=>!!e&&e.length>0),o=t.admins.length>0,l=n.transform(e=>e||o).unwrapOr(!0);return(0,j.K)("Workspace"),(0,j.K4)({markName:"MainBodyContent",isLoaded:"loaded"===a.status,contextArgs:{numTeams:a.transform(e=>e.length).unwrapOr(null)}}),(0,c.jsx)(s6.S,{header:(0,c.jsx)(nq,{workspace:s,org:e,isWorkspaceMembersLoading:"loading"===r.status,showMembersButton:l}),content:(0,c.jsxs)("div",{className:P.B.flex.flexColumn.gap24.my24.$,children:[(0,c.jsx)("section",{"aria-label":(0,A.t)("file_browser.pinning.pinned_files"),...{className:"xl8oe17 xbdeg4j"},children:(0,c.jsx)(oL,{workspace:t,isAssignedWorkspace:i})}),(0,c.jsx)(s2,{children:(0,c.jsx)(sJ,{orgTeamsQuery:a,workspaceId:t.id,isGuest:!1})})]}),metaContent:n.unwrapOr(!1)?(0,c.jsx)(nJ,{workspace:s}):void 0})}var oG=r(928748),oz=r(990281),oW=r(798649),oH=r(519642),oK=r(235704),oY=r(286730),oZ=r(892520),o$=r(333847),oq=r(127830),oQ=r(579228),oJ=r(589398),oX=r(916497),o0=r(717468),o1=r(914418),o5=r(270685),o2=r(929448),o4=r(484299),o9=r(355196),o7=r(704353),o3=r(58199);let o6=new Set([o7.Rj.uiKits,o7.Rj.wireframes,o7.Rj.designTemplates,o7.Rj.mobileApps,o7.Rj.portfolios,o7.Rj.resumes,o7.Rj.visualAssets,o7.Rj.illustrations,o7.Rj.icons,o7.Rj.shapesColors]),o8=new Set([o7.Rj.brainstorming,o7.Rj.diagramming,o7.Rj.funGames,o7.Rj.teamMeetings,o7.Rj.whiteboarding,o7.Rj.strategicPlanning]),le=new Set([o7.Rj.editingEffects,o7.Rj.fileOrganization,o7.Rj.development,o7.Rj.whiteboarding,o7.Rj.designTools,o7.Rj.importExport,o7.Rj.accessibility,o7.Rj.prototypingAnimation]),lt=new Set([o7.Rj.presentations]),lr=new Set([o7.Rj.desktopAppsWebsites]),la="designResources",li="pluginsAndWidgets",ls="whiteboarding",ln="presentations",lo="websites";function ll(e){let t=(0,aN.$2)(),r=(0,aN.Pi)();return(0,u.useMemo)(()=>Object.fromEntries(e.map(({key:e,category:a,resource_type:i,editor_type:s,tag:n})=>[e,new o$.Le({...t,categorySlug:a,tagSlug:n},{resource_type:i??o9.x.BrowseResourceTypes.FILES,editor_type:s??void 0,...r})])),[e,t,r])}var ld=((o=ld||{}).marketing="marketing",o.product="product",o.pitchDeck="pitch-deck",o.sales="sales",o.landingPages="landing-pages",o.portfolio="portfolio",o.ecommerce="ecommerce",o.blog="blog",o.wedding="wedding",o.photography="photography",o);function lc(e,t,r){let a=t?({marketing:(0,A.t)("community.resource_hub.categories.marketing_presentations"),product:(0,A.t)("community.resource_hub.categories.product_presentations"),"pitch-deck":(0,A.t)("community.resource_hub.categories.pitch_decks"),sales:(0,A.t)("community.resource_hub.categories.sales_presentations"),"landing-pages":(0,A.t)("community.resource_hub.categories.landing_pages"),portfolio:(0,A.t)("community.resource_hub.categories.portfolio"),ecommerce:(0,A.t)("community.resource_hub.categories.ecommerce"),blog:(0,A.t)("community.resource_hub.categories.blog"),wedding:(0,A.t)("community.resource_hub.categories.wedding"),photography:(0,A.t)("community.resource_hub.categories.photography")})[t]:void 0;if(a)return a;let i=(0,o3.ZG)(e),s=r?function(e,t){let r={[o7.Rj.whiteboarding]:{[o9.x.BrowseResourceTypes.WIDGETS]:(0,A.t)("categories.widgets")},[o7.Rj.designTools]:{[o9.x.BrowseResourceTypes.PLUGINS]:(0,A.t)("community.view_bar.plugins")}};return r[e]?.[t]}(i,r):void 0;if(s)return s;let n={[o7.Rj.mobileApps]:(0,A.t)("community.resource_hub.categories.mobile_app_templates"),[o7.Rj.desktopAppsWebsites]:(0,A.t)("community.resource_hub.categories.websites"),[o7.Rj.make]:(0,A.t)("community.view_bar.figmake")}[i];return n||(0,o3.$z)(e)}var lu=r(574059);let lm={bannerHeaderText:{kMv6JI:"xor4psk",kGuDYH:"x1ncjjhx",k63SB2:"xaoa4km",kLWn49:"x2i041",kb6lSQ:"x14terfx",ks0D6T:"xw5ewwj",k9WMMc:"x2b8uid",$$css:!0},bannerContainer:{k1xSpc:"x78zum5",kXwgrk:"xdt5ytf",kGNEyG:"x6s0dn4",kjj79g:"xl56j7k",koQZXg:"x1qmclg5",km5ZXQ:"x6zwu1g",keTefX:null,k71WvV:null,kKwaWg:"x18klckb x9y3dz2",$$css:!0},contentContainer:{k1xSpc:"x78zum5",kXwgrk:"x1q0g3np",kGNEyG:"x6s0dn4",kjj79g:"xl56j7k",kVAEAm:"x1n2onr6",kZKoxP:"x1iu8u7t",kLKAdn:"x1y1aw1k",kGO01o:"xwib8y2",kzqmXN:"xh8yej3",ks0D6T:"xrlsmeg",k9g6sI:"x12h1iku",$$css:!0},iconContainer:{kzqmXN:"xrostsh",kZKoxP:"x5yr21d",kGNEyG:"x6s0dn4",k1xSpc:"x78zum5 x1mr30q6",$$css:!0},pluginIcon:{kVAEAm:"x10l6tqk",kzqmXN:"x1691je0",kZKoxP:"x90ne7k",kaIpWk:"x19y5rnk",krdFHd:null,kfmiAY:null,kVL7Gh:null,kT0f0o:null,kIxVMA:null,ksF3WI:null,kqGeR4:null,kYm2EN:null,kGVxlE:"xcnv1gw",$$css:!0},iconSetIcon:{kVAEAm:"x10l6tqk",kzqmXN:"x100vrsf",kZKoxP:"x1vqgdyp",kDwRjp:"xbh8q5q",kjVXCG:"x1ayoduh",kDd8S0:"x1g350g8",$$css:!0},libraryIcon:{kzqmXN:"x100vrsf",kZKoxP:"x1vqgdyp",kVAEAm:"x10l6tqk",kDd8S0:"x1g350g8",$$css:!0},categoryLink:{k1xSpc:"x1rg5ohu",kkrTdU:"x1ypdohk",$$css:!0},categoryLinkActive:{kMwMTN:"x1quhyk7",$$css:!0},fillAccent:{"--color-icon":"x1aue78i","--community-hero-illustrations-fill-opacity":"x1nru0vl",$$css:!0},typeIcon:{"--community-hero-illustrations-fill-opacity":"x1nru0vl",$$css:!0}};var l_=r(904400),lp=r(550518),lf=r(215408),lx=r(308126),lg=r(250538),lh=r(933623),lv=r(121712),lb=r(525129),ly=r(764559),lj=r(234045),lw=r(708506),lT=r(745598),lI=r(138856),lE=r(969944);let lk=(0,lu.o1)("4c694b59552bdaf728d6bbad5c5603c08e768dde"),lN=(0,lu.o1)("65c3bfafc5758245135ea68c46bf8649e08fc682"),lC=(0,lu.o1)("0d28516cbda0bfcf87b214c919c6ed52f3358efb"),lR=(0,lu.o1)("34cf09b757fec1181abee8d8ece8a06ee0383408"),lS=(0,lu.o1)("ebe89d33f7040c60d83a01887800a522babf7de7"),lO=(0,lu.o1)("2a50b4b29af5a21bde6c7b4ef8cdfd97a2b16a39"),lP={topLeft:{src:lk,variants:{hidden:{pointerEvents:"none",opacity:0,scale:.5,x:127,y:-40,rotate:15},hover:{opacity:1,scale:1,x:110,y:-70,rotate:15}},transition:{delay:0,type:"spring",bounce:.4,duration:.25}},middleLeft:{src:lN,variants:{hidden:{pointerEvents:"none",opacity:0,scale:.5,x:67.6,y:0,rotate:-22},hover:{opacity:1,scale:1,x:40,y:-5,rotate:-22}},transition:{delay:.075,type:"spring",bounce:.4,duration:.25}},bottomLeft:{src:lC,variants:{hidden:{pointerEvents:"none",opacity:0,scale:.5,x:133,y:40,rotate:-18},hover:{opacity:1,scale:1,x:110,y:38,rotate:-18}},transition:{delay:.05,type:"spring",bounce:.4,duration:.25}}},lA={topRight:{src:lR,variants:{hidden:{pointerEvents:"none",opacity:0,scale:.5,x:-12.6,y:-40,rotate:15},hover:{opacity:1,scale:1,x:15,y:-70,rotate:15}},transition:{delay:0,type:"spring",bounce:.4,duration:.25}},middleRight:{src:lS,variants:{hidden:{pointerEvents:"none",opacity:0,scale:.5,x:37.4,y:0,rotate:1},hover:{opacity:1,scale:1,x:55,y:-15,rotate:1}},transition:{delay:.075,type:"spring",bounce:.4,duration:.25}},bottomRight:{src:lO,variants:{hidden:{pointerEvents:"none",opacity:0,scale:.5,x:-17.6,y:45,rotate:-6},hover:{opacity:1,scale:1,x:0,y:35,rotate:-6}},transition:{delay:.05,type:"spring",bounce:.4,duration:.25}}},lD={left:{profileIcon:{svg:lw.Z,variants:{hidden:{pointerEvents:"none",opacity:0,scale:.5,x:100,y:-35,rotate:-10},hover:{opacity:1,scale:1,x:80,y:-55,rotate:-10}},transition:{delay:0,type:"spring",bounce:.4,duration:.25}},asterikIcon:{svg:l_.Z,variants:{hidden:{pointerEvents:"none",opacity:0,scale:.5,x:40,y:-15,rotate:-15},hover:{opacity:1,scale:1,x:20,y:-35,rotate:-15}},transition:{delay:.075,type:"spring",bounce:.4,duration:.25}},homeIcon:{svg:lb.Z,variants:{hidden:{pointerEvents:"none",opacity:0,scale:.5,x:40,y:40,rotate:-15},hover:{opacity:1,scale:1,x:20,y:20,rotate:-15}},transition:{delay:.025,type:"spring",bounce:.4,duration:.25}},mentionIcon:{svg:lj.Z,variants:{hidden:{pointerEvents:"none",opacity:0,scale:.5,x:115,y:40,rotate:10},hover:{opacity:1,scale:1,x:95,y:20,rotate:10}},transition:{delay:.05,type:"spring",bounce:.4,duration:.25}}},right:{emojiIcon:{svg:lv.Z,variants:{hidden:{pointerEvents:"none",opacity:0,scale:.5,x:25,y:-40,rotate:15},hover:{opacity:1,scale:1,x:30,y:-55,rotate:15}},transition:{delay:0,type:"spring",bounce:.4,duration:.25}},chatIcon:{svg:lf.Z,variants:{hidden:{pointerEvents:"none",opacity:0,scale:.5,x:90,y:-25,rotate:5},hover:{opacity:1,scale:1,x:95,y:-45,rotate:5}},transition:{delay:.075,type:"spring",bounce:.4,duration:.25}},settingsIcon:{svg:lT.Z,variants:{hidden:{pointerEvents:"none",opacity:0,scale:.5,x:30,y:35,rotate:15},hover:{opacity:1,scale:1,x:35,y:15,rotate:15}},transition:{delay:.05,type:"spring",bounce:.4,duration:.25}},bookmarkIcon:{svg:lp.Z,variants:{hidden:{pointerEvents:"none",opacity:0,scale:.5,x:95,y:45,rotate:5},hover:{opacity:1,scale:1,x:100,y:25,rotate:5}},transition:{delay:.025,type:"spring",bounce:.4,duration:.25}}}},lF={colorSwatches:{component:function(){return(0,c.jsx)(r6.n,{svg:lx.Z,...ed.NQ(lm.fillAccent),useOriginalSrcFills_DEPRECATED:!0})},variants:{hidden:{pointerEvents:"none",opacity:0,scale:.5,x:110,y:40,rotate:0},hover:{opacity:1,scale:1,x:70,y:15,rotate:0}},transition:{delay:.05,type:"spring",bounce:.4,duration:.25}},colorsIcon:{component:function(){return(0,c.jsx)(r6.n,{svg:lg.Z,...ed.NQ(lm.fillAccent),useOriginalSrcFills_DEPRECATED:!0})},variants:{hidden:{pointerEvents:"none",opacity:0,scale:.5,x:110,y:-35,rotate:5},hover:{opacity:1,scale:1,x:90,y:-55,rotate:5}},transition:{delay:0,type:"spring",bounce:.4,duration:.25}},variableIcon:{component:function(){return(0,c.jsx)(r6.n,{svg:lE.Z,...ed.NQ(lm.fillAccent),useOriginalSrcFills_DEPRECATED:!0})},variants:{hidden:{pointerEvents:"none",opacity:0,scale:.5,x:40,y:5,rotate:-5},hover:{opacity:1,scale:1,x:10,y:-20,rotate:-5}},transition:{delay:.075,type:"spring",bounce:.4,duration:.25}}},lM={libraryIcon:{component:function(){return(0,c.jsx)(r6.n,{svg:ly.Z,...ed.NQ(lm.fillAccent),useOriginalSrcFills_DEPRECATED:!0})},variants:{hidden:{pointerEvents:"none",opacity:0,scale:.5,x:5,y:50,rotate:-5},hover:{opacity:1,scale:1,x:10,y:30,rotate:-5}},transition:{delay:.075,type:"spring",bounce:.4,duration:.25}},typeIcon:{component:function(){return(0,c.jsx)(r6.n,{svg:lI.Z,...ed.NQ(lm.typeIcon),useOriginalSrcFills_DEPRECATED:!0})},variants:{hidden:{pointerEvents:"none",opacity:0,scale:.5,x:0,y:-50,rotate:0},hover:{opacity:1,scale:1,x:5,y:-65,rotate:0}},transition:{delay:0,type:"spring",bounce:.4,duration:.25}},componentIllustrations:{component:function(){return(0,c.jsx)(r6.n,{svg:lh.Z,...ed.NQ(lm.fillAccent),useOriginalSrcFills_DEPRECATED:!0})},variants:{hidden:{pointerEvents:"none",opacity:0,scale:.5,x:45,y:10,rotate:0},hover:{opacity:1,scale:1,x:50,y:-20,rotate:0}},transition:{delay:.05,type:"spring",bounce:.4,duration:.25}}},lL=(e,t)=>{a=setTimeout(()=>{e(e=>(e+1)%6),lB(e)},t??500)},lB=e=>{a=setTimeout(()=>{e(e=>(e+1)%6),lL(e)},3e3)};function lU({configs:e,isActive:t,styleKey:r="pluginIcon"}){return(0,c.jsx)(c.Fragment,{children:Object.entries(e).map(([e,a])=>(0,c.jsxs)(o2.E.div,{variants:a.variants,transition:a.transition,initial:"hidden",animate:t?"hover":"hidden",children:[a.src&&(0,c.jsx)(o4.oG,{...ed.NQ(lm[r]),src:a.src,alt:""}),a.component&&(0,c.jsx)("div",{...ed.NQ(lm[r]),children:(0,c.jsx)(a.component,{})}),a.svg&&(0,c.jsx)("div",{...ed.NQ(lm[r]),children:(0,c.jsx)(r6.n,{svg:a.svg})})]},e))})}function lV({href:e,text:t,isActive:r,onMouseOver:a,onMouseLeave:i}){return(0,c.jsx)(o2.E.span,{variants:{hidden:{opacity:.5},hover:{opacity:1}},initial:"hidden",animate:r?"hover":"hidden",children:(0,c.jsx)("span",{...ed.NQ(lm.categoryLink,r&&lm.categoryLinkActive),onMouseOver:a,onMouseLeave:i,children:(0,c.jsx)(tV.zx.Link,{onClick:()=>{g.ZP.push(e)},children:t})})})}function lG(){let e=ll([{key:"pluginsRoute",category:o7.Rj.designTools,resource_type:o9.x.BrowseResourceTypes.PLUGINS},{key:"librariesRoute",category:o7.Rj.libraries,resource_type:o9.x.BrowseResourceTypes.FILES},{key:"iconSetsRoute",category:o7.Rj.icons,resource_type:o9.x.BrowseResourceTypes.FILES}]),[t,r]=(0,u.useState)(2*Math.floor(3*Math.random())),[i,s]=(0,u.useState)(null);(0,u.useEffect)(()=>(lL(r),()=>{clearTimeout(a)}),[]),(0,u.useEffect)(()=>{null!==i?(clearTimeout(a),a=void 0,r(e=>e%2==1?(e+1)%6:e)):a||lL(r,3e3)},[i]);let n=t%2==0?null:Math.ceil(t/2),o=i??n,l=(0,A.tx)("community.homepage.header",{librariesLink:(0,c.jsx)(lV,{href:e.librariesRoute?.href||"#",text:(0,A.t)("community.homepage.header_libraries"),isActive:1===o,onMouseOver:()=>s(1),onMouseLeave:()=>s(null)}),pluginsLink:(0,c.jsx)(lV,{href:e.pluginsRoute?.href||"#",text:(0,A.t)("community.homepage.header_plugins"),isActive:2===o,onMouseOver:()=>s(2),onMouseLeave:()=>s(null)}),iconSetsLink:(0,c.jsx)(lV,{href:e.iconSetsRoute?.href||"#",text:(0,A.t)("community.homepage.header_icon_sets"),isActive:3===o,onMouseOver:()=>s(3),onMouseLeave:()=>s(null)})});return(0,c.jsx)("div",{...ed.NQ(lm.bannerContainer),children:(0,c.jsxs)("div",{...ed.NQ(lm.contentContainer),children:[(0,c.jsxs)("div",{...ed.NQ(lm.iconContainer),children:[(0,c.jsx)(lU,{configs:lD.left,isActive:3===o,styleKey:"iconSetIcon"}),(0,c.jsx)(lU,{configs:lP,isActive:2===o,styleKey:"pluginIcon"}),(0,c.jsx)(lU,{configs:lF,isActive:1===o,styleKey:"libraryIcon"})]}),(0,c.jsx)("div",{...ed.NQ(lm.bannerHeaderText),children:l}),(0,c.jsxs)("div",{...ed.NQ(lm.iconContainer),children:[(0,c.jsx)(lU,{configs:lD.right,isActive:3===o,styleKey:"iconSetIcon"}),(0,c.jsx)(lU,{configs:lA,isActive:2===o,styleKey:"pluginIcon"}),(0,c.jsx)(lU,{configs:lM,isActive:1===o,styleKey:"libraryIcon"})]})]})})}function lz({tab:e}){let t,r,a=(0,o5.CN)(),i=(0,e1.I6)(),s=i?.data?.name??"";return e===aC.cP.COMMUNITY?(t=(0,A.t)("community.resource_hub.discover_community_resources"),r=(0,A.t)("community.resource_hub.browse_community_resources")):(t=s?(0,A.t)("community.resource_hub.browse_resources_created_by_your_team",{orgOrTeamName:s}):(0,A.t)("community.resource_hub.browse_resources"),r=(0,A.t)("community.resource_hub.browse_resources_internal_subheader")),a&&e===aC.cP.COMMUNITY?(0,c.jsx)(lG,{}):(0,c.jsxs)("div",{children:[(0,c.jsx)("h1",{className:"xor4psk x1ncjjhx xaoa4km x2i041 x14terfx x1qbkcu5",children:t}),(0,c.jsx)("div",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x1y1aw1k x1n0bwc9",children:r})]})}var lW=r(630682),lH=r(461198),lK=r(547683),lY=r(284728),lZ=r(584526);let l$="category_menu_button--buttonText--PgsAp";function lq({defaultText:e,iconPrefix:t,categorySlug:r,tagSlug:a,resourceType:i,getTriggerProps:s,isSelected:n}){let o=r?lc(r,a,i):void 0;return(0,c.jsx)(iL.h,{"aria-pressed":n,className:Y()(lZ.LI,lZ.zu,n&&lZ.hv),...s(),children:(0,c.jsxs)("span",{className:lZ.sP,children:[t,(0,c.jsx)("span",{className:l$,children:o||e}),(0,c.jsx)(lY.K,{})]})})}var lQ=r(897386);function lJ({parentDropdown:e,defaultText:t,iconPrefix:r,menuItemsByGroup:a}){let{getTriggerProps:i,manager:s}=t2.H9(),n=(0,ak.GF)(o$.Le),o=n?.categorySlug,l=n?.tagSlug,d=(0,ak.uF)(o$.Le),u=d?.resource_type,m=o&&function(e,t){if(!e)return null;let r=(0,o3.ZG)(e);return e===o7.Rj.whiteboarding?t===o9.x.BrowseResourceTypes.WIDGETS?li:ls:o8.has(r)?ls:le.has(r)?li:o6.has(r)?la:lt.has(r)?ln:lr.has(r)?lo:null}(o,u)===e;return(0,c.jsxs)(t2.fC,{manager:s,children:[(0,c.jsx)(lq,{defaultText:t,iconPrefix:r,categorySlug:m?o:void 0,tagSlug:l,resourceType:u,getTriggerProps:i,isSelected:s.isOpen}),(0,c.jsx)(t2.W2,{children:a.map((e,t)=>(0,c.jsx)(t2.ZA,{children:e.map((e,t)=>(0,c.jsx)(t2.ck,{onClick:()=>{(0,lQ.US)(e?.href??""),g.ZP.push(e?.href??"")},children:(0,c.jsx)("div",{style:{minWidth:132},children:e.text})},t))},t))})]})}function lX(){let e=ll([{key:"uikitRoute",category:o7.Rj.uiKits},{key:"wireframesRoute",category:o7.Rj.wireframes},{key:"socialMediaTemplatesRoute",category:o7.Rj.socialMediaTemplates,editor_type:lK.R.Editors.COOPER},{key:"cardTemplatesRoute",category:o7.Rj.cardTemplates,editor_type:lK.R.Editors.COOPER},{key:"designTemplatesRoute",category:o7.Rj.designTemplates},{key:"mobileAppRoute",category:o7.Rj.mobileApps},{key:"portfolioRoute",category:o7.Rj.portfolios},{key:"resumeRoute",category:o7.Rj.resumes},{key:"visualAssetsRoute",category:o7.Rj.visualAssets},{key:"illustrationsRoute",category:o7.Rj.illustrations},{key:"iconsRoute",category:o7.Rj.icons},{key:"shapesColorsRoute",category:o7.Rj.shapesColors}]),t=[[{href:e.uikitRoute?.href,text:(0,A.t)("categories.ui_kits")},{href:e.wireframesRoute?.href,text:(0,A.t)("categories.wireframes")}],[{href:e.socialMediaTemplatesRoute?.href,text:(0,A.t)("categories.social_media_templates")},{href:e.cardTemplatesRoute?.href,text:(0,A.t)("categories.cards_and_invites")}],[{href:e.mobileAppRoute?.href,text:(0,A.t)("community.resource_hub.categories.mobile_app_templates")},{href:e.resumeRoute?.href,text:(0,A.t)("categories.resume_templates")},{href:e.portfolioRoute?.href,text:(0,A.t)("categories.portfolio_templates")},{href:e.designTemplatesRoute?.href,text:(0,A.t)("community.resource_hub.see_more")}],[{href:e.iconsRoute?.href,text:(0,A.t)("categories.icons")},{href:e.illustrationsRoute?.href,text:(0,A.t)("categories.illustrations")},{href:e.shapesColorsRoute?.href,text:(0,A.t)("categories.shapes_colors")},{href:e.visualAssetsRoute?.href,text:(0,A.t)("community.resource_hub.see_more")}]].filter(e=>e.length>0);return(0,c.jsx)(lJ,{parentDropdown:la,menuItemsByGroup:t,defaultText:(0,A.t)("community.homepage.figma_section.header"),iconPrefix:(0,c.jsx)(lH.r,{})})}var l0=r(915049);function l1(){let e=ll([{key:"editingEffectsRoute",category:o7.Rj.editingEffects,resource_type:o9.x.BrowseResourceTypes.PLUGINS},{key:"fileOrganizationRoute",category:o7.Rj.fileOrganization,resource_type:o9.x.BrowseResourceTypes.PLUGINS},{key:"developmentRoute",category:o7.Rj.development,resource_type:o9.x.BrowseResourceTypes.PLUGINS},{key:"widgetsRoute",category:o7.Rj.whiteboarding,resource_type:o9.x.BrowseResourceTypes.WIDGETS},{key:"pluginsRoute",category:o7.Rj.designTools,resource_type:o9.x.BrowseResourceTypes.PLUGINS},{key:"importExportRoute",category:o7.Rj.importExport,resource_type:o9.x.BrowseResourceTypes.PLUGINS},{key:"accessibilityRoute",category:o7.Rj.accessibility,resource_type:o9.x.BrowseResourceTypes.PLUGINS},{key:"prototypingAnimationRoute",category:o7.Rj.prototypingAnimation,resource_type:o9.x.BrowseResourceTypes.PLUGINS}]),t=[[{href:e.fileOrganizationRoute?.href,text:(0,A.t)("categories.file_organization")},{href:e.developmentRoute?.href,text:(0,A.t)("categories.navbar.development")},{href:e.editingEffectsRoute?.href,text:(0,A.t)("categories.editing_effects")},{href:e.importExportRoute?.href,text:(0,A.t)("categories.import_export")},{href:e.accessibilityRoute?.href,text:(0,A.t)("categories.accessibility_tools")},{href:e.prototypingAnimationRoute?.href,text:(0,A.t)("categories.prototyping_animation")}],[{href:e.widgetsRoute?.href,text:(0,A.t)("community.resource_hub.categories.see_all_widgets")},{href:e.pluginsRoute?.href,text:(0,A.t)("community.resource_hub.categories.see_all_plugins")}]];return(0,c.jsx)(lJ,{parentDropdown:li,defaultText:(0,A.t)("community.resource_hub.categories.plugins_and_widgets"),iconPrefix:(0,c.jsx)(l0.J,{}),menuItemsByGroup:t})}var l5=r(123888);function l2(){let e=ll([{key:"marketingRoute",category:o7.Rj.presentations,tag:ld.marketing,editor_type:lK.R.Editors.SLIDES},{key:"productRoute",category:o7.Rj.presentations,tag:ld.product,editor_type:lK.R.Editors.SLIDES},{key:"pitchDecksRoute",category:o7.Rj.presentations,tag:ld.pitchDeck,editor_type:lK.R.Editors.SLIDES},{key:"salesRoute",category:o7.Rj.presentations,tag:ld.sales,editor_type:lK.R.Editors.SLIDES},{key:"presentationsRoute",category:o7.Rj.presentations,editor_type:lK.R.Editors.SLIDES}]),t=[[{href:e.marketingRoute?.href,text:(0,A.t)("community.resource_hub.categories.marketing_presentations")},{href:e.productRoute?.href,text:(0,A.t)("community.resource_hub.categories.product_presentations")},{href:e.pitchDecksRoute?.href,text:(0,A.t)("community.resource_hub.categories.pitch_decks")},{href:e.salesRoute?.href,text:(0,A.t)("community.resource_hub.categories.sales_presentations")}],[{href:e.presentationsRoute?.href,text:(0,A.t)("community.resource_hub.see_more")}]];return(0,c.jsx)(lJ,{parentDropdown:ln,menuItemsByGroup:t,defaultText:(0,A.t)("categories.presentations"),iconPrefix:(0,c.jsx)(l5.a,{})})}var l4=r(503398);function l9(){let e=ll([{key:"websitesRoute",category:o7.Rj.desktopAppsWebsites,editor_type:lK.R.Editors.SITES},{key:"landingPagesRoute",category:o7.Rj.desktopAppsWebsites,tag:ld.landingPages,editor_type:lK.R.Editors.SITES},{key:"portfolioRoute",category:o7.Rj.desktopAppsWebsites,tag:ld.portfolio,editor_type:lK.R.Editors.SITES},{key:"ecommerceRoute",category:o7.Rj.desktopAppsWebsites,tag:ld.ecommerce,editor_type:lK.R.Editors.SITES},{key:"blogRoute",category:o7.Rj.desktopAppsWebsites,tag:ld.blog,editor_type:lK.R.Editors.SITES},{key:"weddingRoute",category:o7.Rj.desktopAppsWebsites,tag:ld.wedding,editor_type:lK.R.Editors.SITES},{key:"photographyRoute",category:o7.Rj.desktopAppsWebsites,tag:ld.photography,editor_type:lK.R.Editors.SITES}]),t=[[{href:e.landingPagesRoute?.href,text:(0,A.t)("community.resource_hub.categories.landing_pages")},{href:e.portfolioRoute?.href,text:(0,A.t)("community.resource_hub.categories.portfolio")},{href:e.ecommerceRoute?.href,text:(0,A.t)("community.resource_hub.categories.ecommerce")},{href:e.blogRoute?.href,text:(0,A.t)("community.resource_hub.categories.blog")},{href:e.weddingRoute?.href,text:(0,A.t)("community.resource_hub.categories.wedding")},{href:e.photographyRoute?.href,text:(0,A.t)("community.resource_hub.categories.photography")}],[{href:e.websitesRoute?.href,text:(0,A.t)("community.resource_hub.see_more")}]];return(0,c.jsx)(lJ,{parentDropdown:lo,menuItemsByGroup:t,defaultText:(0,A.t)("community.resource_hub.categories.websites"),iconPrefix:(0,c.jsx)(l4.b,{})})}var l7=r(899631);function l3(){let e=ll([{key:"brainstormingRoute",category:o7.Rj.brainstorming},{key:"diagrammingRoute",category:o7.Rj.diagramming},{key:"funGamesRoute",category:o7.Rj.funGames},{key:"teamMeetingsRoute",category:o7.Rj.teamMeetings},{key:"whiteboardingRoute",category:o7.Rj.whiteboarding},{key:"strategicPlanningRoute",category:o7.Rj.strategicPlanning}]),t=[[{href:e.diagrammingRoute?.href,text:(0,A.t)("categories.diagramming")},{href:e.brainstormingRoute?.href,text:(0,A.t)("categories.brainstorming")},{href:e.funGamesRoute?.href,text:(0,A.t)("categories.fun_games")},{href:e.teamMeetingsRoute?.href,text:(0,A.t)("categories.team_meetings")},{href:e.strategicPlanningRoute?.href,text:(0,A.t)("categories.strategic_planning")}],[{href:e.whiteboardingRoute?.href,text:(0,A.t)("community.resource_hub.see_more")}]];return(0,c.jsx)(lJ,{parentDropdown:ls,menuItemsByGroup:t,defaultText:(0,A.t)("categories.whiteboarding"),iconPrefix:(0,c.jsx)(l7.H,{})})}var l6=r(454513);function l8(){let e=(0,A.t)("community.view_bar.figmake"),t=ll([{key:"categoryRoute",category:o7.Rj.make}]).categoryRoute;return t?(0,c.jsx)(iL.h,{"aria-label":e,className:Y()(lZ.LI,lZ.zu,lZ.J1),onClick:()=>{g.ZP.push(t.href)},children:(0,c.jsxs)("span",{className:lZ.sP,children:[(0,c.jsx)(l6.V,{}),(0,c.jsx)("span",{className:l$,children:e})]})}):null}var de=r(838354);function dt(){let e=(0,A.t)("community.profiles.saved"),t=(0,aN.$2)(),r=(0,aN.Pi)()??void 0;return(0,c.jsx)(iL.h,{"aria-label":e,className:Y()(lZ.LI,lZ.zu,lZ.J1),onClick:()=>{let e=new oX.M(t,r);g.ZP.push(e.href),(0,lQ.W1)()},children:(0,c.jsxs)("span",{className:lZ.sP,children:[(0,c.jsx)(de.S,{}),(0,c.jsx)("span",{className:l$,children:e})]})})}function dr(){let e=(0,o5.BT)();return(0,c.jsx)(lW.d,{mode:"match",children:(0,c.jsxs)("div",{...{className:"x78zum5 x1q0g3np x167g77z x1a02dak"},children:[(0,c.jsx)(dt,{}),(0,c.jsx)(lX,{}),e&&(0,c.jsx)(l8,{}),(0,c.jsx)(l1,{}),(0,c.jsx)(l2,{}),(0,c.jsx)(l3,{}),(0,c.jsx)(l9,{})]})})}var da=r(331433),di=r(787351),ds=r(845004),dn=r(108057);function dl({resourceCount:e,resourceType:t,category:r,editorType:a,savedByUserId:i,caller:s,includeContent:n,boostCategoryShelf:o,enabled:l=!0}){let d=(0,u.useRef)(null);(0,u.useEffect)(()=>{e>0&&null===d.current&&(d.current=Math.ceil(e/aC.h2)*aC.h2)},[e]);let c=(0,di.Qj)(),[{data:m,status:_,hasNextPage:p},{fetchNextPage:f}]=(0,y.aM)(ds.b.CommunityResourcesPaginatedQuery({resourceType:t,category:r,editorType:a,savedByUserId:i,caller:s,pageSize:d.current??0,includeContent:n,boostCategoryShelf:o,locale:c}),{enabled:null!==d.current&&l}),x="loading"===_;return(0,u.useEffect)(()=>{!x&&p&&e>(m?.length??0)&&f()},[x,p,e,m,f]),{resources:m,loading:x,hasNextPage:p}}function dd({resourceCount:e,resourceType:t,includeContent:r,enabled:a=!0}){let[{data:i,status:s,hasNextPage:n},{fetchNextPage:o}]=(0,y.aM)(dn.V.PaginatedCommunityResourceSavesQuery({pageSize:e,resourceType:t,includeContent:r}),{enabled:a}),l="loading"===s;return(0,u.useEffect)(()=>{!l&&n&&e>(i?.length??0)&&o()},[l,n,e,i,o]),{resources:i,loading:l,hasNextPage:n}}var dc=r(603786),du=r(929204),dm=r(201452),d_=r(360677),dp=r(190743),df=r(929547);function dx({imageSources:e,isHovered:t}){return(0,c.jsx)("div",{...{className:"x10l6tqk x1y0lptx xxbcxho x78zum5 x1q0g3np x1v2ro7d x1g75g36"},children:e.map((e,r)=>(0,c.jsx)(o4.oG,{...{0:{className:"x1u3p76b x1i5byms x1iyjqo2 xacr46v x1mxnbhz"},1:{className:"x1u3p76b x1i5byms x1iyjqo2 xacr46v x1mxnbhz xqc4caa"}}[0|!!t],src:(0,lu.o1)(e),alt:""},r))})}function dg({imageSources:e,isHovered:t}){return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(o4.oG,{...{0:{className:"xamxeob x1u3p76b x1el4u5y x10l6tqk x1nrll8i xkz1y4k x874rk5 x1mxnbhz"},1:{className:"xamxeob x1u3p76b x1el4u5y x10l6tqk x1nrll8i x874rk5 x1mxnbhz xcvh5f3"}}[0|!!t],src:(0,lu.o1)(e[0]),alt:""}),(0,c.jsx)(o4.oG,{...{0:{className:"xamxeob x1u3p76b x1el4u5y x10l6tqk x1nrll8i xpdgo6v x1y0lptx x1mxnbhz"},1:{className:"xamxeob x1u3p76b x1el4u5y x10l6tqk x1nrll8i x1y0lptx x1mxnbhz xgz6438"}}[0|!!t],src:(0,lu.o1)(e[1]),alt:""})]})}function dh({imageSource:e,isHovered:t}){return(0,c.jsx)("div",{...{className:"x10l6tqk x1d9swqr x5yr21d"},children:(0,c.jsx)(o4.oG,{...{0:{className:"x1el4u5y x1n2onr6 xlxyqfn x1y0lptx"},1:{className:"x1el4u5y x1n2onr6 xlxyqfn x1y0lptx xeybphm"}}[0|!!t],src:(0,lu.o1)(e),alt:""})})}function dv({imageSource:e,containerStyle:t,isHovered:r}){let a="sheetStyle"===t?db.hoveredSheetImage:db.hoveredWidgetImage;return(0,c.jsx)("div",{...ed.NQ(db[t]),children:(0,c.jsx)(o4.oG,{...ed.NQ(db.image,r&&a),src:(0,lu.o1)(e),alt:""})})}let db={sheetStyle:{kzqmXN:"xamxeob",kGVxlE:"x1u3p76b",kbCHJM:"x1nrll8i",kLqNvP:null,kt4wiu:null,k3aq6I:"xv9q2wl",kVAEAm:"x10l6tqk",$$css:!0},hoveredSheetImage:{k3aq6I:"xfx47b9",$$css:!0},widgetCardStyle:{kZKoxP:"x5yr21d",k87sOh:"x8l1umf",kCIrl2:"x3m8u43",kLqNvP:null,kt4wiu:null,kSiTet:"x1us6l5c",kVAEAm:"x10l6tqk",$$css:!0},hoveredWidgetImage:{k3aq6I:"x1bao77f",$$css:!0},image:{kmkexE:"x1el4u5y",kzIqYQ:null,kIr0Dl:null,kIyJzY:null,k1ekBW:null,kAMwcw:null,kzqmXN:"xh8yej3",kZKoxP:"x5yr21d",$$css:!0}};function dy({imageSources:e,isHovered:t}){return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(o4.oG,{...{className:"x1el4u5y x10l6tqk x1nrll8i xuuh30 x1y0lptx x19y5rnk xqjhr6n x1u3p76b"},src:(0,lu.o1)(e[0]),alt:""}),(0,c.jsx)(o4.oG,{...{0:{className:"x1el4u5y x10l6tqk x1nrll8i xuuh30 x19y5rnk x8uc0wx x1g84rlc x1wu5q8a"},1:{className:"x1el4u5y x10l6tqk x1nrll8i x19y5rnk x8uc0wx x1g84rlc x1wu5q8a xbtikzi"}}[0|!!t],src:(0,lu.o1)(e[1]),alt:""}),(0,c.jsx)(o4.oG,{...{0:{className:"xamxeob x1el4u5y x10l6tqk x1nrll8i xuuh30 x19y5rnk x1otreau"},1:{className:"xamxeob x1el4u5y x10l6tqk x1nrll8i x19y5rnk x1otreau x16ui88a"}}[0|!!t],src:(0,lu.o1)(e[2]),alt:""})]})}function dj({header:e,route:t,content:r,showSeeMore:a}){let i=t&&a?(0,c.jsxs)(ef.CN,{"aria-label":(0,A.t)("community.resource_hub.see_more"),onClick:()=>{(0,lQ.xy)(t.pathname),g.ZP.push(t.href)},...{className:"x78zum5 x8rdmch x6s0dn4 x19y5rnk x1d4akdp"},children:[(0,c.jsx)("h3",{className:"xuzfeq1 x8yk33q x1e00guj x1o2sk6j x22v61l","data-testid":"section-header",children:e}),(0,c.jsx)(eX.M,{})]}):(0,c.jsx)("h3",{className:"xuzfeq1 x8yk33q x1e00guj x1o2sk6j x22v61l","data-testid":"section-header",children:e});return(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{className:"x78zum5 x6s0dn4 x1y1aw1k xwib8y2 x1jnr06f",children:i}),r]})}let dw={brainstorming:{category:o7.Rj.brainstorming,size:"large",art:e=>(0,c.jsx)(dx,{imageSources:["f01ed35801ea5830119fbe503b42f18f8b8fa6bb","d96670e9dd7d8f500b1d82f97d4d08ca5762f014","25a7262271550cf605425ae1f9dbb3186df9e938","75319ef48f81cc1e0f733b2a9ee834ae20ad7383","1d6892175c739459b51f88450efd4fd63647a2d6","0e81b3f80cb2491aac0675bd33fbbbb79db59ddd"],isHovered:e}),backgroundColor:df.O9.bgFigjamTertiary,brand:"seascape"},cardTemplates:{category:o7.Rj.cardTemplates,editorType:lK.R.Editors.COOPER,size:"small",art:e=>(0,c.jsx)(dv,{imageSource:"2c4bc9301e89bc080dbadbdb33df70febe9bf82f",containerStyle:"sheetStyle",isHovered:e}),backgroundColor:df.O9.bgBrandTertiary,brand:"cooper"},classroomActivities:{category:o7.Rj.classroomActivities,size:"small",art:e=>(0,c.jsx)(dg,{imageSources:["ad9ed6524f8541f00d3968f21e59fcc627be04a6","9633b9c063fd07075008ee206a4ea712c2931994"],isHovered:e}),backgroundColor:df.O9.bgFigjamTertiary,brand:"seascape"},dataTemplates:{category:o7.Rj.dataTemplates,size:"small",art:e=>(0,c.jsx)(dg,{imageSources:["85c247027dd036bb720dbaac9ecf63318e138266","55da4072453228deaa707a61fac742fd6b8a1022"],isHovered:e}),backgroundColor:df.O9.bgFigjamTertiary,brand:"seascape"},designTutorials:{category:o7.Rj.designTutorials,size:"large",art:e=>(0,c.jsx)(dx,{imageSources:["f341d1cb6464b9ff5d2eb63c89eb380249fc7c78","985e74dda7ed515202f6b7a55ffc2e1562c9ff94","d48320278ece5f694fe686c2c971bcb9c5381f88","1864952e1f5b8fbc94fe85f548d41b77458dcc87","deb79a32eabbdaed5b86904ec9c4adda486345fb","3e63b05276c55b2d9e95c49e90969cc51023344b"],isHovered:e}),backgroundColor:df.O9.bgSecondary},development:{category:o7.Rj.development,resourceType:o9.x.BrowseResourceTypes.PLUGINS,size:"small",art:e=>(0,c.jsx)(dh,{isHovered:e,imageSource:"6ce1bcbe88b8f4f202e4307f0de131f8fb6cf61e"}),backgroundColor:df.O9.bgBrandTertiary,brand:"design"},diagramming:{category:o7.Rj.diagramming,size:"large",art:e=>(0,c.jsx)(dx,{imageSources:["378c5389dc551daa4f2a3daa5f4e4748fa811eb9","f5fa32f34d57e6b4b01f67f10c13fa4ced6fa20f","82cc8e76b689ad016a0e4871ad99f68fe7c67864","b1f9c2bb18232dd55c41e0528227a2a82ecdd151","37903eb6b345c31cc1ad0967dc6ff8a541a16b90","9f70f6b78199251bb1213c6f3e5e00df8fc0572b"],isHovered:e}),backgroundColor:df.O9.bgFigjamTertiary,brand:"seascape"},editingEffects:{category:o7.Rj.editingEffects,resourceType:o9.x.BrowseResourceTypes.PLUGINS,size:"small",art:e=>(0,c.jsx)(dh,{imageSource:"6ce1bcbe88b8f4f202e4307f0de131f8fb6cf61e",isHovered:e}),backgroundColor:df.O9.bgBrandTertiary,brand:"design"},fileOrganization:{category:o7.Rj.fileOrganization,resourceType:o9.x.BrowseResourceTypes.PLUGINS,size:"small",art:e=>(0,c.jsx)(dh,{imageSource:"2f1dc06209ebe620cb42e03cdb85da7ef9d9efa0",isHovered:e}),backgroundColor:df.O9.bgBrandTertiary,brand:"design"},presentationsLarge:{category:o7.Rj.presentations,size:"large",art:e=>(0,c.jsx)(dx,{imageSources:["0b6a114955ffe1c7a56e993323f212990422a525","0b8f4c7881cf0404fb105a1a680d74564205bc8c","b9d5d2df7dfd58ee29a44ecd72c83dbb6f6588c0","1eb484ec6df2d5d6874b92bae0b221fcbbebc79c","ed0ab6a51ef9b7275a9c123994db37df3188fee7","b616eae234aeefb2ad7c62d5f0bd84c843c3d86d"],isHovered:e}),backgroundColor:df.O9.bgBrandTertiary,brand:"piper"},presentationsSmall:{category:o7.Rj.presentations,size:"small",art:e=>(0,c.jsx)(dy,{imageSources:["8b73180892c70a676c567732411c422e46f1fcae","4963a5a549df301b0ba8dbdc788c2c3424c4217e","e66ce4f446be08f56a330a9b39c5e9c72e6d3338"],isHovered:e}),backgroundColor:df.O9.bgBrandTertiary,brand:"piper"},teamMeetingsLarge:{category:o7.Rj.teamMeetings,size:"large",art:e=>(0,c.jsx)(dx,{imageSources:["b7e05a6d6b76b8b377e5c4f0eb006dfe99e5875d","61830de70c1cec8ae28737c1f9c36ff5a7b07d18","742fbce6b78404d48f62e39a6be510dce4cae699","6405c322fda966de6578a55cb0c861d2fb774b84","d22c05d35fc088e4d089e814f42379b395b86e26","89d7df8b21116cbf283086a5056f305de01f91a4"],isHovered:e}),backgroundColor:df.O9.bgFigjamTertiary,brand:"seascape"},teamMeetingsSmall:{category:o7.Rj.teamMeetings,size:"small",art:e=>(0,c.jsx)(dg,{imageSources:["742fbce6b78404d48f62e39a6be510dce4cae699","b7e05a6d6b76b8b377e5c4f0eb006dfe99e5875d"],isHovered:e}),backgroundColor:df.O9.bgFigjamTertiary,brand:"seascape"},resumes:{category:o7.Rj.resumes,size:"small",art:e=>(0,c.jsx)(dv,{imageSource:"ba7504eb5c18069ca8c0455768fcf46c6bc4ee52",containerStyle:"sheetStyle",isHovered:e}),backgroundColor:df.O9.bgBrandTertiary,brand:"design"},strategicPlanning:{category:o7.Rj.strategicPlanning,size:"small",art:e=>(0,c.jsx)(dg,{imageSources:["3b212f16a905705728bf1dc973fa25001844b4bc","28c8e9a68927b0f9f55a41efd6df2251b8823eea"],isHovered:e}),backgroundColor:df.O9.bgFigjamTertiary,brand:"seascape"},uiKits:{category:o7.Rj.uiKits,size:"small",art:e=>(0,c.jsx)(dg,{imageSources:["52e2511dc978b4b6aad9ad3799dd2fb75139cb2a","fc614bae349b646e1ea8ffe00e5b6e723ec9f13f"],isHovered:e}),backgroundColor:df.O9.bgBrandTertiary,brand:"design"},visualAssets:{category:o7.Rj.visualAssets,size:"large",art:e=>(0,c.jsx)(dh,{imageSource:"a9b2bb97699222fc52104170706120e06c6f971a",isHovered:e}),backgroundColor:df.O9.bgBrandTertiary,brand:"design"},widgets:{category:o7.Rj.whiteboarding,resourceType:o9.x.BrowseResourceTypes.WIDGETS,size:"large",art:e=>(0,c.jsx)(dv,{imageSource:"c14d817322fb0a630ceb76de93d5669b91e6bce1",containerStyle:"widgetCardStyle",isHovered:e}),backgroundColor:df.O9.bgFigjamTertiary,brand:"seascape"},wireframes:{category:o7.Rj.wireframes,size:"large",art:e=>(0,c.jsx)(dx,{imageSources:["4c787218f1399d78e7035575c6041d05b7c51abf","4a119c09ddc4e5a598728b3121b81e7df52f30f0","d380df1c57eb9d1c6d963673d2c718d515b69e9e","c04936ee5bd33d718c78e37fd42e4f8dbe058f35","c8e4c4f9dd45d76797e4c8f1a7515fbbb0f49a61","448ad0f1bc089057cf63f983b7fe865ae1395a56"],isHovered:e}),backgroundColor:df.O9.bgBrandTertiary,brand:"design"},workshopTemplates:{category:o7.Rj.workshopTemplates,size:"small",art:e=>(0,c.jsx)(dg,{imageSources:["c6bfc0d07a504cbb9daa39452cb5d1afa29f4e36","6899629efb49a4e0cb289017a2a6c8380e494fae"],isHovered:e}),backgroundColor:df.O9.bgFigjamTertiary,brand:"seascape"}};function dT({size:e,title:t,description:r,art:a,backgroundColor:i,brand:s,route:n,userJobTitle:o}){let[l,d]=(0,u.useState)(!1);return(0,c.jsx)(n_.U,{brand:s,children:(0,u.createElement)(iL.h,{"aria-label":t,...{0:{className:"x1n2onr6 x1lliihq x1hd2rbs x1mxnbhz x5yr21d xb3r6kr x1yc453h xmkeg23 x1y0btm7 x1co876m x3sae66 xhnlq4v x1iyjqo2"},2:{className:"x1n2onr6 x1lliihq x1hd2rbs x1mxnbhz x5yr21d xb3r6kr x1yc453h xmkeg23 x1y0btm7 x1co876m x3yx74t xhnlq4v x1iyjqo2"},1:{className:"x1n2onr6 x1lliihq x1hd2rbs x1mxnbhz x5yr21d xb3r6kr x1yc453h xmkeg23 x1y0btm7 x1co876m x3sae66 x4pfjvb xgyuaek"},3:{className:"x1n2onr6 x1lliihq x1hd2rbs x1mxnbhz x5yr21d xb3r6kr x1yc453h xmkeg23 x1y0btm7 x1co876m x3yx74t x4pfjvb xgyuaek"}}["large"===e|0|!!s<<1],onClick:()=>{n&&((0,lQ.g_)(o,n.href),g.ZP.push(n.href))},htmlAttributes:{onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1)},style:{backgroundColor:i},key:t},(0,c.jsxs)("div",{...{className:"x78zum5 xdt5ytf x10l6tqk x13vifvy x1nejdyq x1p5oq8j x8e5d8q x18d9i69 xd3ty66"},children:[(0,c.jsx)("div",{className:"x1l3kr2 x1mnx3iv xk50ysn xeefxrb xdjnq2g",children:t}),(0,c.jsx)("div",{className:"x1n0bwc9",children:r})]}),a(l))})}function dI(){let e=(0,dp.f)(),t=function(e){let t={designer:["visualAssets","presentationsSmall","editingEffects"],developer:["diagramming","development","teamMeetingsSmall"],"product-manager":["widgets","presentationsSmall","teamMeetingsSmall"],marketer:["brainstorming","cardTemplates","resumes"],researcher:["diagramming","teamMeetingsSmall","strategicPlanning"],education:["classroomActivities","designTutorials","workshopTemplates"],"ux-writer":["uiKits","teamMeetingsLarge","fileOrganization"],data:["dataTemplates","presentationsLarge","strategicPlanning"],other:["wireframes","presentationsSmall","uiKits"],unknown:["wireframes","presentationsSmall","uiKits"]};return(t[e]||t.unknown).map(e=>dw[e]).filter(e=>void 0!==e)}(e),r=ll(t.map(e=>({key:e.category,category:e.category,resource_type:e.resourceType||void 0,editor_type:e.editorType||void 0}))),a=t.map(t=>({...function(e){switch(e){case o7.Rj.brainstorming:return{title:(0,A.t)("categories.brainstorming"),description:(0,A.t)("community.resource_hub.category_description.brainstorming")};case o7.Rj.cardTemplates:return{title:(0,A.t)("community.resource_hub.featured_categories.invites_templates"),description:(0,A.t)("community.resource_hub.category_description.card_templates")};case o7.Rj.classroomActivities:return{title:(0,A.t)("community.resource_hub.featured_categories.classroom_activities"),description:(0,A.t)("community.resource_hub.category_description.classroom_activities")};case o7.Rj.dataTemplates:return{title:(0,A.t)("community.footer.data_templates"),description:(0,A.t)("community.resource_hub.category_description.data_templates")};case o7.Rj.designTutorials:return{title:(0,A.t)("community.resource_hub.featured_categories.design_tutorials"),description:(0,A.t)("community.resource_hub.category_description.design_tutorials")};case o7.Rj.development:return{title:(0,A.t)("community.resource_hub.featured_categories.plugins_for_development"),description:(0,A.t)("community.resource_hub.category_description.development")};case o7.Rj.diagramming:return{title:(0,A.t)("categories.diagramming"),description:(0,A.t)("community.resource_hub.category_description.diagramming")};case o7.Rj.editingEffects:return{title:(0,A.t)("community.resource_hub.featured_categories.plugins_for_editing_and_effects"),description:(0,A.t)("community.resource_hub.category_description.editing_effects")};case o7.Rj.fileOrganization:return{title:(0,A.t)("community.resource_hub.featured_categories.plugins_for_file_organization"),description:(0,A.t)("community.resource_hub.category_description.file_organization")};case o7.Rj.presentations:return{title:(0,A.t)("categories.presentations"),description:(0,A.t)("community.resource_hub.category_description.presentations")};case o7.Rj.resumes:return{title:(0,A.t)("categories.resume_templates"),description:(0,A.t)("community.resource_hub.category_description.resumes")};case o7.Rj.strategicPlanning:return{title:(0,A.t)("categories.strategic_planning"),description:(0,A.t)("community.resource_hub.category_description.strategic_planning")};case o7.Rj.teamMeetings:return{title:(0,A.t)("community.resource_hub.featured_categories.team_meetings"),description:(0,A.t)("community.resource_hub.category_description.team_meetings")};case o7.Rj.uiKits:return{title:(0,A.t)("categories.ui_kits"),description:(0,A.t)("community.resource_hub.category_description.ui_kits")};case o7.Rj.visualAssets:return{title:(0,A.t)("community.resource_hub.featured_categories.assets"),description:(0,A.t)("community.resource_hub.category_description.visual_assets")};case o7.Rj.whiteboarding:return{title:(0,A.t)("categories.widgets"),description:(0,A.t)("community.resource_hub.category_description.widgets")};case o7.Rj.wireframes:return{title:(0,A.t)("categories.wireframes"),description:(0,A.t)("community.resource_hub.category_description.wireframes")};case o7.Rj.workshopTemplates:return{title:(0,A.t)("community.resource_hub.featured_categories.workshop_templates"),description:(0,A.t)("community.resource_hub.category_description.workshop_templates")};default:(0,O.vE)(e)}}(t.category),size:t.size,art:t.art,backgroundColor:t.backgroundColor,brand:t.brand,route:r[t.category],userJobTitle:e})),i=(0,u.useRef)(null),[s,n]=(0,u.useState)(0);(0,u.useEffect)(()=>{let e=new ResizeObserver(e=>{n(e[0]?.contentRect.width??0)});return i.current&&(n(i.current.clientWidth),e.observe(i.current)),()=>{e.disconnect()}},[i]);let o=(0,u.useMemo)(()=>{let e=[],t=0;return a.forEach(r=>{let a="large"===r.size?420:210;t+a<=s&&(e.push(r),t+=a)}),e},[s,a]);return(0,c.jsx)(dj,{header:(0,A.t)("community.resource_hub.featured_categories"),content:(0,c.jsx)("div",{...{className:"x78zum5 x1q0g3np x1665zp3 xc6p2dh"},ref:i,children:o.map(e=>(0,c.jsx)(dT,{...e},e.title))}),showSeeMore:!1})}var dE=r(449201);let dk=(0,aP.A)(function({sizingInfo:e}){let t=(function(e){let t={brainstorming:{key:"brainstorming",header:(0,A.t)("categories.brainstorming"),categoryForQuery:o7.Rj.brainstorming,categorySlug:o7.Rj.brainstorming,resourceType:[dm._g.FIGJAM_TEMPLATE]},cooperTemplate:{key:"cooperTemplate",header:(0,A.t)("categories.social_media_templates"),categoryForQuery:o7.Rj.socialMediaTemplates,categorySlug:o7.Rj.socialMediaTemplates,resourceType:[dm._g.COOPER_TEMPLATE_FILE],resourceEditorType:d_.su.COOPER,apiEditorType:lK.R.Editors.COOPER},dataTemplate:{key:"dataTemplate",header:(0,A.t)("community.footer.data_templates"),categoryForQuery:o7.Rj.dataTemplates,categorySlug:o7.Rj.dataTemplates,resourceType:[dm._g.DESIGN_TEMPLATE]},designTemplate:{key:"designTemplate",header:(0,A.t)("categories.design_templates"),categorySlug:o7.Rj.designTemplates,resourceType:[dm._g.DESIGN_TEMPLATE]},designTools:{key:"designTools",header:(0,A.t)("community.view_bar.plugins"),categorySlug:o7.Rj.designTools,resourceType:[dm._g.PLUGIN],isPlugin:!0},diagramming:{key:"diagramming",header:(0,A.t)("categories.diagramming"),categoryForQuery:o7.Rj.diagramming,categorySlug:o7.Rj.diagramming,resourceType:[dm._g.FIGJAM_TEMPLATE]},education:{key:"education",header:(0,A.t)("categories.education"),categoryForQuery:o7.Rj.education,categorySlug:o7.Rj.education,resourceType:[dm._g.DESIGN_TEMPLATE]},figJamTemplate:{key:"figJamTemplate",header:(0,A.t)("community.resource_hub.figjam_templates"),categorySlug:o7.Rj.whiteboarding,resourceType:[dm._g.FIGJAM_TEMPLATE],resourceEditorType:d_.su.WHITEBOARD,apiEditorType:lK.R.Editors.FIGJAM},funAndGames:{key:"funAndGames",header:(0,A.t)("categories.fun_games"),categoryForQuery:o7.Rj.funGames,categorySlug:o7.Rj.funGames,resourceType:[dm._g.WIDGET],apiResourceType:o9.x.BrowseResourceTypes.WIDGETS},makeTemplate:{key:"makeTemplate",header:(0,A.t)("community.resource_hub.make_shelf_header"),categoryForQuery:o7.Rj.make,categorySlug:o7.Rj.make,resourceType:[dm._g.FIGMAKE_TEMPLATE]},presentationTemplate:{key:"presentationTemplate",header:(0,A.t)("community.footer.presentations"),categoryForQuery:o7.Rj.presentations,categorySlug:o7.Rj.presentations,resourceType:[dm._g.SLIDE_TEMPLATE],resourceEditorType:d_.su.SLIDES,apiEditorType:lK.R.Editors.SLIDES},siteTemplate:{key:"siteTemplate",header:(0,A.t)("categories.website_templates"),categoryForQuery:o7.Rj.websiteTemplates,categorySlug:o7.Rj.websiteTemplates,resourceType:[dm._g.SITE_TEMPLATE],resourceEditorType:d_.su.SITES,apiEditorType:lK.R.Editors.SITES},strategicPlanning:{key:"strategicPlanning",header:(0,A.t)("categories.strategic_planning"),categoryForQuery:o7.Rj.strategicPlanning,categorySlug:o7.Rj.strategicPlanning,resourceType:[dm._g.FIGJAM_TEMPLATE]},uiKits:{key:"uiKits",header:(0,A.t)("categories.ui_kits"),categoryForQuery:o7.Rj.uiKits,categorySlug:o7.Rj.uiKits,resourceType:[dm._g.DESIGN_TEMPLATE,dm._g.UI_KIT]},websiteTemplate:{key:"websiteTemplate",header:(0,A.t)("categories.website_templates"),categoryForQuery:o7.Rj.websiteTemplates,categorySlug:o7.Rj.websiteTemplates,resourceType:[dm._g.DESIGN_TEMPLATE],resourceEditorType:d_.su.DESIGN},whiteboarding:{key:"whiteboarding",header:(0,A.t)("categories.whiteboarding"),categoryForQuery:o7.Rj.whiteboarding,categorySlug:o7.Rj.whiteboarding,resourceType:[dm._g.FIGJAM_TEMPLATE]},wireframes:{key:"wireframes",header:(0,A.t)("categories.wireframes"),categoryForQuery:o7.Rj.wireframes,categorySlug:o7.Rj.wireframes,resourceType:[dm._g.DESIGN_TEMPLATE]}},r={designer:["siteTemplate","uiKits","figJamTemplate","designTools","cooperTemplate"],developer:["siteTemplate","wireframes","whiteboarding","uiKits","cooperTemplate"],"product-manager":["brainstorming","strategicPlanning","dataTemplate","uiKits","siteTemplate"],marketer:["cooperTemplate","presentationTemplate","strategicPlanning","uiKits","whiteboarding"],researcher:["brainstorming","presentationTemplate","dataTemplate","uiKits","cooperTemplate"],education:["education","presentationTemplate","funAndGames","uiKits","siteTemplate"],"ux-writer":["brainstorming","presentationTemplate","wireframes","cooperTemplate","siteTemplate"],data:["diagramming","brainstorming","uiKits","siteTemplate","cooperTemplate"],other:["brainstorming","cooperTemplate","designTools","uiKits","siteTemplate"],unknown:["brainstorming","cooperTemplate","designTools","uiKits","siteTemplate"]},a=r[e]||r.unknown||[];return(0,o5.BT)()&&a.unshift("makeTemplate"),a.map(e=>t[e]).filter(e=>void 0!==e)})((0,dp.f)()).map(e=>({key:e.key,header:e.header,categoryForQuery:e.categoryForQuery,categorySlug:e.categorySlug,resourceType:e.resourceType,resourceEditorType:e.resourceEditorType,apiResourceType:e.apiResourceType,apiEditorType:e.apiEditorType,isPlugin:e.isPlugin}));return(0,c.jsx)("div",{...{className:"x78zum5 xdt5ytf xh8yej3 x5yr21d x1665zp3"},children:t.map((t,r)=>(0,c.jsxs)("div",{children:[2===r&&(0,c.jsx)("div",{...{className:"x1hq5gj4"},children:(0,c.jsx)(dI,{})}),t.isPlugin?(0,c.jsx)(dC,{header:t.header,categorySlug:t.categorySlug},t.key):(0,c.jsx)(dN,{header:t.header,categoryForQuery:t.categoryForQuery,categorySlug:t.categorySlug,resourceType:t.resourceType,resourceEditorType:t.resourceEditorType,apiResourceType:t.apiResourceType,apiEditorType:t.apiEditorType,sizingInfo:e},t.key)]},r))})},"CommunityCategorySections");function dN({header:e,categoryForQuery:t,categorySlug:r,resourceType:a,resourceEditorType:i,apiResourceType:s,apiEditorType:n,sizingInfo:o}){let{resources:l,loading:d}=dl({resourceCount:o.numberOfTiles,resourceType:a,editorType:i,category:t,caller:du.f.RESOURCE_HUB,includeContent:!1,boostCategoryShelf:r===o7.Rj.uiKits}),m=ll([{key:"categoryRoute",category:r,resource_type:s,editor_type:n}]),{trackResourceImpression:_}=(0,dc.xY)(),p=(0,u.useCallback)((e,t)=>{t&&_(e)},[_]);return d||l&&0!==l.length?(0,c.jsx)(dj,{header:e,route:m.categoryRoute,content:(0,c.jsx)(dE.S,{resources:(l&&l.slice(0,o.numberOfTiles))??[],loadingTileCount:o.numberOfTiles,isLoading:d,resourceImpressionTracking:p}),showSeeMore:!0}):null}function dC({header:e,categorySlug:t}){let{resources:r,loading:a}=dl({resourceCount:aC.E7,resourceType:[dm._g.PLUGIN],category:t,caller:du.f.RESOURCE_HUB,includeContent:!0}),{trackResourceImpression:i}=(0,dc.xY)(),s=(0,u.useCallback)((e,t)=>{t&&i(e)},[i]),n=ll([{key:"pluginsRoute",category:t,resource_type:o9.x.BrowseResourceTypes.PLUGINS}]);return a||r&&0!==r.length?(0,c.jsx)(dj,{header:e,route:n.pluginsRoute,content:(0,c.jsx)(da.x,{plugins:(r??[]).map(e=>e.content?.plugin).filter(e=>void 0!==e),onIntersectionChange:s,isOrgTeamBrowsing:!1,isLoading:a,loadingRowCount:aC.E7}),showSeeMore:!0}):null}function dR({currentOrgId:e}){return(0,c.jsx)(r8.Ui,{name:at.V4.RESOURCE_HUB_COMMUNITY_TAB_DISABLED_PAGE,properties:{orgId:e},children:(0,c.jsxs)("div",{...{className:"x78zum5 xdt5ytf x6s0dn4 xh8yej3 x16g6g8t xgqmno8 x1sjmt1f xl56j7k"},children:[(0,c.jsx)("div",{...{className:"x78zum5 xdt5ytf x6s0dn4 x155cy4d x1yf7rl7 x38tqe7 xj3b58b"},children:(0,c.jsx)(o4.oG,{...{className:"x193iq5w xl1xv1r"},src:(0,lu.o1)("8b7c6fb3e353c1972267681e37a56765b96f5b3c"),alt:(0,A.t)("community.resource_hub.your_admins_have_restricted_access"),loading:"lazy"})}),(0,c.jsx)("div",{...{className:"x78zum5 xdt5ytf x1665zp3 xycev2y xo3t2mw x6s0dn4 x1nhvcw1"},children:(0,c.jsxs)("div",{...{className:"x78zum5 xdt5ytf x6s0dn4 x167g77z xkh2ocl xh8yej3 x2lah0s"},children:[(0,c.jsx)("div",{...{className:"x1akne3o xor4psk x1ncjjhx xaoa4km x2i041 x14terfx x2b8uid"},children:(0,A.t)("community.resource_hub.your_admins_have_restricted_access")}),(0,c.jsx)("div",{...{className:"x1n0bwc9 xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x2b8uid"},children:(0,A.tx)("community.resource_hub.looking_for_inspiration_you_can",{link:(0,c.jsx)(id.r,{href:"/community",newTab:!0,children:(0,A.t)("community.resource_hub.community_link")})})})]})}),(0,c.jsx)("div",{className:"x78zum5 xdt5ytf xjwf9q1 x98rzlu"})]})})}var dS=r(735740);function dO({currentOrgId:e,isCommunityTabDisabledForOrg:t}){let r=(0,dS.V)();return t?(0,c.jsx)("div",{...{className:"xijc0j3"},children:(0,c.jsx)(dR,{currentOrgId:e})}):(0,c.jsx)(r8.Ui,{name:at.V4.RESOURCE_HUB_COMMUNITY_RESOURCES_HOME_PAGE,children:(0,c.jsxs)("div",{...{className:"x78zum5 xdt5ytf xh8yej3 x5yr21d x1665zp3"},ref:r.sizeRef,children:[(0,c.jsx)(lz,{tab:aC.cP.COMMUNITY}),(0,c.jsx)(dr,{}),(0,c.jsx)(dk,{sizingInfo:r})]})})}var dP=r(852258),dA=r(808858);function dD(e,t){let r={orgId:e??void 0,teamId:t??void 0,isInternal:!0},{trackResourceImpression:a,flushAndResetResourceImpressions:i}=(0,dc.xY)({extraProperties:r}),{trackResourceImpression:s,flushAndResetResourceImpressions:n}=(0,dc.TI)({extraProperties:r}),{trackResourceImpression:o,flushAndResetResourceImpressions:l}=(0,dc.um)({extraProperties:r});return{onIntersectionChange:(0,u.useCallback)((e,t)=>{t&&((0,dP.ne)(e)?s(e):(0,dP.T$)(e)?a(e):(0,dA.bH)(e)&&o(e))},[a,s,o]),flushAndResetImpressions:(0,u.useCallback)(()=>{i(),n(),l()},[i,n,l])}}var dF=r(753139),dM=r(747540),dL=r(122610),dB=r(694340),dU=r(498498),dV=r(733265),dG=r(717231);let dz=new Set([eH.gg.COOPER,eH.gg.SLIDES,eH.gg.WHITEBOARD]),dW=new Set([eH.gg.COOPER,eH.gg.SLIDES]);function dH({newFileFrom:e,contextClicked:t,forceOpenNewTab:r}){let a=(0,m.v9)(e=>e.user?.drafts_folder_id),{data:i,status:s}=(0,dL.RY)(a),n=(0,dB.N)(i),o=(0,e1.ZG)("useTemplatesOmnicreateMenuItemsProps"),l=n.filter(({editorType:e})=>{switch(o.data?.tier){case eH.Lz.STUDENT:case eH.Lz.PRO:return dW.has(e);case eH.Lz.ORG:case eH.Lz.ENTERPRISE:return dz.has(e);case eH.Lz.STARTER:default:return!0}}),[d,c]=(0,ex.KO)(dG.FD),u=c({showOrgTemplateView:!0}),_=(0,dV.V)({isDraftsFolder:!0,newFileFrom:e,forceOpenNewTab:r}),p="loading"===s||"loading"===o.status;return{newFiles:l.map(({editorType:e,canCreate:r})=>(0,dU.r)({editorType:e,isDisabled:!r,isLoading:p,onClick:_({editorType:e,contextClicked:t,newFileDataLocalStorageKey:u})})),import:null}}var dK=r(966188);function dY({planTier:e}){let t,{color:r}=(0,nm.M)();t=e===eH.Lz.ORG||e===eH.Lz.ENTERPRISE?"dark"===r?(0,lu.o1)("156640b467fc94700549db25a70310582e3ef24b"):(0,lu.o1)("923655d3d7ad0e0261946e6b8175911e0daceff3"):"dark"===r?(0,lu.o1)("199fc5fd43ab7b8cdb2208db7a7a1c8b4f039119"):(0,lu.o1)("363ceafa11ccd8ba7b2d9fe2b9aba1f8f8477596");let a=dH({newFileFrom:oW.L7.RESOURCE_HUB_FEW_TEMPLATES_UPSELL,contextClicked:at.V4.RESOURCE_HUB_FEW_TEMPLATES_UPSELL,forceOpenNewTab:!0});return(0,c.jsx)(r8.Ui,{name:at.V4.RESOURCE_HUB_FEW_TEMPLATES_UPSELL,children:(0,c.jsxs)("div",{...{className:"x78zum5 x1q0g3np xh8yej3 xeq9io7 xgqmno8 xmkeg23 xbsl7fq x1co876m"},children:[(0,c.jsx)("div",{...{className:"x3nfvp2 x13a6bvl xgqmno8 xb3r6kr"},children:(0,c.jsx)(o4.oG,{...{className:"xnq0rdo x15elv7b x1sy10c2 x1d6c7ev xl1xv1r"},src:t,alt:(0,A.t)("community.resource_hub.get_more_done"),loading:"lazy"})}),(0,c.jsx)("div",{className:"x1iyjqo2 x1264ykn xmcgfsh"}),(0,c.jsxs)("div",{...{className:"x78zum5 xdt5ytf x1665zp3 x1d3hk7y x1cy8zhl x1dcn8h2 x1sai7j1 xuzjt68 x1uhho1l x1n2onr6"},children:[(0,c.jsxs)("div",{...{className:"x78zum5 xdt5ytf xl56j7k x1cy8zhl x167g77z xkh2ocl xh8yej3 x2lah0s"},children:[(0,c.jsx)("div",{...{className:"x1akne3o xor4psk x1ncjjhx xaoa4km x2i041 x14terfx"},children:(0,A.t)("community.resource_hub.get_more_done")}),(0,c.jsx)("div",{...{className:"x1n0bwc9 xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up"},children:(0,A.t)("community.resource_hub.create_custom_templates_to_add")})]}),(0,c.jsx)(dK.q,{menuItems:a})]})]})})}function dZ({planTier:e,isTemplatesPublishingDisabledForOrg:t}){let r,a=(0,aN.$2)(),i=(0,aN.Pi)(),{color:s}=(0,nm.M)();r=e===eH.Lz.ORG||e===eH.Lz.ENTERPRISE?t?(0,lu.o1)("ceafb20933e03362e3d3f6c8191e892c8321d3db"):"dark"===s?(0,lu.o1)("156640b467fc94700549db25a70310582e3ef24b"):(0,lu.o1)("923655d3d7ad0e0261946e6b8175911e0daceff3"):"dark"===s?(0,lu.o1)("199fc5fd43ab7b8cdb2208db7a7a1c8b4f039119"):(0,lu.o1)("363ceafa11ccd8ba7b2d9fe2b9aba1f8f8477596");let n=dH({newFileFrom:oW.L7.RESOURCE_HUB_NO_RESOURCES_UPSELL,contextClicked:at.V4.RESOURCE_HUB_NO_RESOURCES_UPSELL,forceOpenNewTab:!0}),o=new aN.pX({...a,tab:aC.cP.COMMUNITY},i),l=t?(0,A.t)("community.resource_hub.template_publishing_has_been_disabled"):(0,A.t)("community.resource_hub.streamline_your_work_with_custom");return(0,c.jsx)(r8.Ui,{name:at.V4.RESOURCE_HUB_NO_RESOURCES_UPSELL,children:(0,c.jsxs)("div",{...{className:"x78zum5 xdt5ytf x6s0dn4 xh8yej3 x16g6g8t xgqmno8 x1sjmt1f xl56j7k"},children:[(0,c.jsx)("div",{...{className:"x78zum5 xdt5ytf x6s0dn4 xvue9z xwbyk0q x2lah0s xk1l47c"},children:(0,c.jsx)(o4.oG,{className:"x193iq5w xl1xv1r xetamn0",src:r,alt:l,loading:"lazy"})}),(0,c.jsxs)("div",{...{className:"x78zum5 xdt5ytf x1665zp3 xz84dc7 xo3t2mw x6s0dn4"},children:[(0,c.jsxs)("div",{...{className:"x78zum5 xdt5ytf x6s0dn4 x167g77z xkh2ocl xh8yej3 x2lah0s"},children:[(0,c.jsx)("div",{className:"x1akne3o xor4psk x1ncjjhx xaoa4km x2i041 x14terfx x2b8uid",children:l}),(0,c.jsx)("div",{...{className:"x1n0bwc9 xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x2b8uid"},children:(0,A.t)("community.resource_hub.create_templates_to_keep_up")})]}),(0,c.jsxs)("div",{...{className:"x78zum5 xdt5ytf x6s0dn4 xou54vl xkh2ocl xh8yej3 x2lah0s"},children:[!t&&(0,c.jsx)(dK.q,{menuItems:n}),(0,c.jsx)(r8.tW,{...{className:"x1quhyk7 xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x2b8uid x1ypdohk"},to:o.to,trackingEventName:lQ._A.RESOURCE_HUB_BROWSE_COMMUNITY_CLICKED,trackingProperties:{route:o.pathname},children:(0,A.t)("community.resource_hub.browse_resources_from_community")})]})]})]})})}var d$=r(404756);function dq({teamId:e}){let t=(0,m.I0)(),r=(0,aN.$2)(),a=(0,aN.Pi)(),{color:i}=(0,nm.M)(),s=new aN.pX({...r,tab:aC.cP.COMMUNITY},a);return(0,c.jsx)(r8.Ui,{name:at.V4.RESOURCE_HUB_UPGRADE_UPSELL,properties:{planTier:eH.Lz.STARTER,teamId:e},children:(0,c.jsxs)("div",{...{className:"x78zum5 xdt5ytf x6s0dn4 xh8yej3 x16g6g8t xgqmno8 x1sjmt1f xl56j7k"},children:[(0,c.jsx)("div",{...{className:"x78zum5 xdt5ytf x6s0dn4 xvue9z xwbyk0q x2lah0s xk1l47c"},children:(0,c.jsx)(o4.oG,{...{className:"x193iq5w xl1xv1r xetamn0"},src:"dark"===i?(0,lu.o1)("199fc5fd43ab7b8cdb2208db7a7a1c8b4f039119"):(0,lu.o1)("363ceafa11ccd8ba7b2d9fe2b9aba1f8f8477596"),alt:(0,A.t)("community.resource_hub.custom_templates_for_your_team"),loading:"lazy"})}),(0,c.jsxs)("div",{...{className:"x78zum5 xdt5ytf x1665zp3 xz84dc7 xo3t2mw x6s0dn4"},children:[(0,c.jsxs)("div",{...{className:"x78zum5 xdt5ytf x6s0dn4 x167g77z xkh2ocl xh8yej3 x2lah0s"},children:[(0,c.jsx)("div",{...{className:"x1akne3o xor4psk x1ncjjhx xaoa4km x2i041 x14terfx x2b8uid"},children:(0,A.t)("community.resource_hub.custom_templates_for_your_team")}),(0,c.jsx)("div",{...{className:"x1n0bwc9 xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x2b8uid"},children:(0,A.t)("community.resource_hub.upgrade_to_the_professional_plan")})]}),(0,c.jsxs)("div",{...{className:"x78zum5 xdt5ytf x6s0dn4 xou54vl xkh2ocl xh8yej3 x2lah0s"},children:[(0,c.jsx)(ef.XT,{onClick:()=>{t(d$.F2({teamId:e,entryPoint:iv.x1.RESOURCE_HUB,openInNewTab:!1}))},children:(0,A.t)("community.resource_hub.upgrade_to_professional")}),(0,c.jsx)(r8.tW,{...{className:"x1quhyk7 xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x2b8uid x1ypdohk"},to:s.to,trackingEventName:lQ._A.RESOURCE_HUB_BROWSE_COMMUNITY_CLICKED,children:(0,A.t)("community.resource_hub.browse_resources_from_community")})]})]})]})})}var dQ=r(433557),dJ=r(530706);function dX({resourceTypeSlugs:e}){return(0,c.jsx)("div",{...{className:"x78zum5 x167g77z x1a02dak"},children:e.map(e=>(0,u.createElement)("div",{className:"x167g77z x4vwp2a",key:e},(0,c.jsx)(d0,{resourceTypeSlug:e})))})}function d0({resourceTypeSlug:e}){let t=(0,aN.$2)(),r=(0,aN.Pi)(),a=(0,eY.rn)(e),i=function(e){switch(e){case oq.g.PLUGINS:return(0,c.jsx)(l0.J,{});case oq.g.FIGJAM_TEMPLATES:return(0,c.jsx)(l7.H,{});case oq.g.WIDGETS:return(0,c.jsx)(dQ.z,{});case oq.g.SLIDE_TEMPLATES:return(0,c.jsx)(l5.a,{});case oq.g.LIBRARIES:break;case oq.g.COOPER_TEMPLATES:return(0,c.jsx)(dJ.j,{});case oq.g.FIGMAKE_TEMPLATES:return(0,c.jsx)(l6.V,{});case oq.g.RECENTLY_ADDED_TEMPLATES:break;default:(0,O.jT)(e,null)}return null}(e);return(0,c.jsx)(iL.h,{"aria-label":a,className:Y()(lZ.LI,lZ.zu,lZ.J1),onClick:()=>{let a=new oq.G({...t,resourceTypeSlug:e},r);(0,lQ.vN)(e),g.ZP.push(a.href)},children:(0,c.jsxs)("span",{className:lZ.sP,children:[i,(0,c.jsx)("span",{className:l$,children:a})]})})}function d1({planTier:e,isTemplatesPublishingDisabledForOrg:t,currentOrgId:r,currentTeamId:a}){let i,s=(0,dS.V)(),{onIntersectionChange:n}=dD(r??void 0,a??void 0),o=(0,dM.zx)(e,a??null,!!t),l=(0,dM.Rn)(e,r??null,!!t),{[eH.gg.COOPER]:{templates:d,isLoading:u,hasMoreTemplates:m},[eH.gg.WHITEBOARD]:{templates:_,isLoading:f,hasMoreTemplates:x},[eH.gg.SLIDES]:{templates:g,isLoading:h,hasMoreTemplates:v},[eH.gg.FIGMAKE]:{templates:b,isLoading:y,hasMoreTemplates:j}}=r?l:o,{resources:w,loading:T,hasNextPage:I}=(0,dM.XY)({limit:aC.fr,caller:du.f.RESOURCE_HUB,orgId:r,includeContent:!0}),{resources:E,loading:k,hasNextPage:N}=(0,dM.Wp)({resourceType:dm._g.WIDGET,orgId:r,teamId:a,planTier:e,sortBy:dF.A.Browse.ALL_TIME,isTemplatesPublishingDisabledForOrg:!!t});if(u||f||h||y||T||k)return(0,c.jsx)("div",{...{className:"x78zum5 xl56j7k x6s0dn4 xg87l8a"},ref:s.sizeRef,children:(0,c.jsx)(nl.T,{})});let C=(0,p.BZ)().cooper,R=(0,p.BZ)().make_template_discovery||(0,p.BZ)().make_template_discovery_plan_key,S=(w??[]).map(e=>e.content?.plugin).filter(e=>void 0!==e),O=[];if([...R?[{resources:b,slug:oq.g.FIGMAKE_TEMPLATES}]:[],...C?[{resources:d,slug:oq.g.COOPER_TEMPLATES}]:[],{resources:_,slug:oq.g.FIGJAM_TEMPLATES},{resources:g,slug:oq.g.SLIDE_TEMPLATES},{resources:S,slug:oq.g.PLUGINS},{resources:E,slug:oq.g.WIDGETS}].forEach(({resources:e,slug:t})=>{e&&e.length>0&&O.push(t)}),e===eH.Lz.STARTER&&a)return(0,c.jsx)("div",{...{className:"x78zum5 xdt5ytf x1665zp3 xijc0j3"},ref:s.sizeRef,children:(0,c.jsx)(dq,{teamId:a})});let P=0===S.length&&0===E.length,A=d.length+_.length+g.length+b.length;if(t&&P||0===A&&P)return(0,c.jsx)("div",{...{className:"x78zum5 xdt5ytf x1665zp3 xijc0j3"},ref:s.sizeRef,children:(0,c.jsx)(dZ,{planTier:e,isTemplatesPublishingDisabledForOrg:t})});if(!t)if(0===A)i=(0,c.jsx)("div",{...{className:"x78zum5 xdt5ytf xw7yly9"},children:(0,c.jsx)(dY,{planTier:e})});else if(A<4){let t=[...b,...d,..._,...g];i=(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(d5,{resourceImpressionTracking:n,numberOfTiles:s.numberOfTiles,resources:t??[]}),(0,c.jsx)("div",{...{className:"x78zum5 xdt5ytf xw7yly9"},children:(0,c.jsx)(dY,{planTier:e})})]})}else i=(0,c.jsxs)(c.Fragment,{children:[R&&(0,c.jsx)(d7,{resourceImpressionTracking:n,numberOfTiles:s.numberOfTiles,resources:b,hasNextPage:j}),C&&(0,c.jsx)(d2,{resourceImpressionTracking:n,numberOfTiles:s.numberOfTiles,resources:d,hasNextPage:m}),(0,c.jsx)(d9,{resourceImpressionTracking:n,numberOfTiles:s.numberOfTiles,resources:_,hasNextPage:x}),(0,c.jsx)(d4,{resourceImpressionTracking:n,numberOfTiles:s.numberOfTiles,resources:g,hasNextPage:v}),1===O.length&&(0,c.jsx)("div",{...{className:"x78zum5 xdt5ytf xw7yly9"},children:(0,c.jsx)(dY,{planTier:e})})]});return(0,c.jsx)("div",{...{className:"x78zum5 xdt5ytf x1665zp3"},ref:s.sizeRef,children:(0,c.jsxs)(r8.Ui,{name:at.V4.RESOURCE_HUB_INTERNAL_RESOURCES_HOME_PAGE,children:[(0,c.jsx)(lz,{tab:aC.cP.INTERNAL}),O.length>1&&(0,c.jsx)("div",{...{className:"x78zum5 x1qughib x6s0dn4 x1a02dak xou54vl"},children:(0,c.jsx)(dX,{resourceTypeSlugs:O})}),i,(0,c.jsx)(d3,{resourceImpressionTracking:n,resources:S??[],hasNextPage:I}),(0,c.jsx)(d6,{resourceImpressionTracking:n,numberOfTiles:s.numberOfTiles,resources:E??[],hasNextPage:N})]})})}function d5({resourceImpressionTracking:e,numberOfTiles:t,resources:r}){return(0,c.jsx)(d8,{resourceTypeSlug:oq.g.RECENTLY_ADDED_TEMPLATES,resourceImpressionTracking:e,numberOfTiles:t,resources:r,hasNextPage:!1})}function d2({resourceImpressionTracking:e,numberOfTiles:t,resources:r,hasNextPage:a}){return(0,c.jsx)(d8,{resourceTypeSlug:oq.g.COOPER_TEMPLATES,resourceImpressionTracking:e,numberOfTiles:t,resources:r,hasNextPage:a})}function d4({resourceImpressionTracking:e,numberOfTiles:t,resources:r,hasNextPage:a}){return(0,c.jsx)(d8,{resourceTypeSlug:oq.g.SLIDE_TEMPLATES,resourceImpressionTracking:e,numberOfTiles:t,resources:r,hasNextPage:a})}function d9({resourceImpressionTracking:e,numberOfTiles:t,resources:r,hasNextPage:a}){return(0,c.jsx)(d8,{resourceTypeSlug:oq.g.FIGJAM_TEMPLATES,resourceImpressionTracking:e,numberOfTiles:t,resources:r,hasNextPage:a})}function d7({resourceImpressionTracking:e,numberOfTiles:t,resources:r,hasNextPage:a}){return(0,c.jsx)(d8,{resourceTypeSlug:oq.g.FIGMAKE_TEMPLATES,resourceImpressionTracking:e,numberOfTiles:t,resources:r,hasNextPage:a})}function d3({resourceImpressionTracking:e,resources:t,hasNextPage:r}){let a=(0,aN.$2)(),i=(0,aN.Pi)();return t&&0!==t.length?(0,c.jsx)(dj,{header:(0,eY.rn)(oq.g.PLUGINS),route:new oq.G({...a,resourceTypeSlug:oq.g.PLUGINS},i),content:(0,c.jsx)(da.x,{plugins:t,onIntersectionChange:e,isOrgTeamBrowsing:!1,isLoading:!1,loadingRowCount:aC.fr,layoutV1:"twoColumn"}),showSeeMore:!!r}):null}function d6({resourceImpressionTracking:e,numberOfTiles:t,resources:r,hasNextPage:a}){return(0,c.jsx)(d8,{resourceTypeSlug:oq.g.WIDGETS,resourceImpressionTracking:e,numberOfTiles:t,resources:r,hasNextPage:a})}function d8({resourceTypeSlug:e,resources:t,hasNextPage:r,resourceImpressionTracking:a,numberOfTiles:i}){let s=(0,aN.$2)(),n=(0,aN.Pi)();if(0===t.length)return null;let o=!!r||t.length>i;return(0,c.jsx)(dj,{header:(0,eY.rn)(e),route:new oq.G({...s,resourceTypeSlug:e},n),content:(0,c.jsx)(dE.S,{resources:t.slice(0,i),resourceImpressionTracking:a}),showSeeMore:o})}let ce="resource_hub--pageContainer--g-erK",ct=(0,aP.A)(function({planTier:e,isTemplatesPublishingDisabledForOrg:t,currentOrgId:r,currentTeamId:a,isCommunityTabDisabledForOrg:i}){let s,{tab:n}=(0,ak.WK)(aN.pX);switch(n){case aC.cP.INTERNAL:s=(0,c.jsx)(d1,{planTier:e,currentOrgId:r??void 0,currentTeamId:a??void 0,isTemplatesPublishingDisabledForOrg:t});break;case aC.cP.COMMUNITY:s=(0,c.jsx)(dO,{currentOrgId:r??void 0,isCommunityTabDisabledForOrg:i});break;default:(0,O.vE)(n)}return(0,c.jsx)("div",{className:ce,children:s})},"HomePage");var cr=r(807312),ca=r(524438),ci=r(424735);function cs(){let{requestLoadMoreForTeam:e,status:t,...r}=(0,ci._)(),{onIntersectionChange:a}=dD(void 0,void 0),i=(0,u.useRef)(null),s=(0,dS.V)();return(0,ca.M)({containerRef:s.sizeRef,targetRef:i,onIntersectionChange:()=>e}),(0,c.jsxs)("div",{ref:s.sizeRef,children:[(0,c.jsx)(dE.S,{resources:(r.templates||r.resources)??[],resourceImpressionTracking:a,isLoading:"loading"===t,loadingTileCount:3*s.numberOfTiles}),(0,c.jsx)("div",{ref:i})]})}var cn=r(758226);function co({sizingInfo:e}){return(0,c.jsx)(c.Fragment,{children:Array.from({length:3},(t,r)=>(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{className:"xxk0z11 xrmyp2 x1jp4ehj xrxpjvj x1v8gsql x19y5rnk"}),(0,c.jsx)(dE.S,{resources:[],resourceImpressionTracking:_.ZT,isLoading:!0,loadingTileCount:e.numberOfTiles})]},`by-team-skeleton-${r}`))})}function cl({teamId:e,teamOrOrgName:t,resourcesOrTemplates:r,route:a,showSeeMore:i,lastTeamId:s,targetRef:n,onIntersectionChange:o}){return(0,c.jsx)("div",{ref:e===s?n:null,children:(0,c.jsx)(dj,{header:(0,A.t)("community.resource_hub.internal_tab",{orgOrTeamName:t??""}),route:a,content:(0,c.jsx)(dE.S,{resources:r,resourceImpressionTracking:o}),showSeeMore:i})},e??"org-section")}function cd({teamTemplates:e,sizingInfo:t,internalResourcesRoute:r,lastTeamId:a,targetRef:i,onIntersectionChange:s}){return(0,c.jsx)(c.Fragment,{children:e.map(e=>{let n=e.templates.slice(0,t.numberOfTiles).map(e=>e.template);return(0,c.jsx)(cl,{lastTeamId:a,onIntersectionChange:s,resourcesOrTemplates:n,route:r.copyWith({forTeamId:e.teamId},void 0),showSeeMore:e.templates.length>t.numberOfTiles,targetRef:i,teamId:e.teamId,teamOrOrgName:e.teamName??""},e.teamId)})})}function cc({teamResourceGroups:e,sizingInfo:t,internalResourcesRoute:r,lastTeamId:a,targetRef:i,onIntersectionChange:s,orgId:n}){return(0,c.jsx)(c.Fragment,{children:e.map(e=>(0,c.jsx)(cl,{lastTeamId:a,onIntersectionChange:s,resourcesOrTemplates:e.resources.slice(0,t.numberOfTiles),route:r.copyWith(e.team_id?{forOrg:!1,forTeamId:e.team_id}:{forOrg:!0,forTeamId:void 0},void 0),showSeeMore:e.resources.length>t.numberOfTiles,targetRef:i,teamId:e.team_id??null,teamOrOrgName:e.team_or_org_name},e.team_id??n))})}function cu({resourceType:e,planTier:t,orgId:r,internalResourcesRoute:a}){let i,s=(0,dS.V)(),{onIntersectionChange:n}=dD(r??void 0,void 0),{isLoading:o,requestLoadMore:l,lastTeamId:d,noResults:m,..._}=function({orgId:e,resourceType:t,planTier:r}){let a=(0,p.BZ)().cmty_templates_by_team_on_resources,i=(0,dP.UU)(t),[{data:s,status:n,hasNextPage:o,isFetchingNextPage:l},{fetchNextPage:d}]=(0,rw.aM)(ds.b.getResourcesByTeamPaginatedQuery({orgId:e,resourceType:[t],numResourcesPerTeam:aC.dw+1,includeContent:!0}),{enabled:a}),{teamTemplates:c,isLoading:u,requestLoadMoreForOrg:m}=(0,cn.Bw)({orgId:e,areWorkspacesEnabled:r===eH.Lz.ENTERPRISE,numTemplatesPerTeam:aC.dw+1,editorType:i,filterByIds:null,enabled:!!i&&!a});return a?{isLoading:"loading"===n,teamResourceGroups:s??[],requestLoadMore:()=>o&&!l&&d(),lastTeamId:s?.[s.length-1]?.team_id??null,noResults:s?.length===0}:{isLoading:u,teamTemplates:c,requestLoadMore:m,lastTeamId:c?.[c.length-1]?.teamId??null,noResults:c?.length===0}}({orgId:r,resourceType:e,planTier:t}),f=(0,u.useRef)(null);return(0,ca.M)({containerRef:s.sizeRef,targetRef:f,targetKey:d,onIntersectionChange:l}),i=o?(0,c.jsx)(co,{sizingInfo:s}):m?(0,c.jsx)(dZ,{planTier:t}):"teamResourceGroups"in _?(0,c.jsx)(cc,{teamResourceGroups:_.teamResourceGroups,sizingInfo:s,internalResourcesRoute:a,lastTeamId:d,targetRef:f,orgId:r,onIntersectionChange:n}):(0,c.jsx)(cd,{teamTemplates:_.teamTemplates,sizingInfo:s,internalResourcesRoute:a,lastTeamId:d,targetRef:f,onIntersectionChange:n}),(0,c.jsx)(e_.l,{scrollContainerRef:s.sizeRef,children:(0,c.jsx)("div",{className:"x78zum5 xdt5ytf xou54vl x1120s5i",children:i})})}function cm({planTier:e,currentOrgId:t,currentTeamId:r,fallbackRedirectRoute:a}){let i,s=(0,p.BZ)().cooper,n=(0,ak.Er)(oq.G),{resourceTypeSlug:o,forTeamId:l,forOrg:d}=n.params,{onIntersectionChange:m,flushAndResetImpressions:_}=dD(t??void 0,r??void 0);if(u.useEffect(()=>{_()},[o,_]),!o)return g.ZP.redirect(a.href),null;let f=(0,eY.yl)(o).filter(e=>s||e!==dm._g.COOPER_TEMPLATE_FILE);return 0===f.length?null:(f[0]&&(0,eY.R7)(e,f[0])&&(i=f[0]===dm._g.PLUGIN?(0,c.jsx)(cp,{orgId:t??void 0,resourceImpressionTracking:m,planTier:e}):f[0]===dm._g.WIDGET||o===oq.g.RECENTLY_ADDED_TEMPLATES?(0,c.jsx)(c_,{resourceTypes:f,orgId:t??void 0,teamId:r??void 0,resourceImpressionTracking:m,planTier:e}):r||d||l?(0,c.jsx)(cs,{}):(0,c.jsx)(cu,{resourceType:f[0],planTier:e,orgId:t??"",internalResourcesRoute:n})),(0,c.jsx)(r8.Ui,{name:at.V4.RESOURCE_HUB_INTERNAL_RESOURCES_PAGE,children:(0,c.jsx)("div",{className:ce,children:i})}))}function c_({resourceTypes:e,orgId:t,teamId:r,resourceImpressionTracking:a,planTier:i}){let s=(0,dS.V)(),{resources:n,loading:o,hasNextPage:l,fetchNextPage:d,isFetchingNextPage:u}=(0,dM.Qu)({resourceTypes:e,limit:aC.dw,caller:du.f.RESOURCE_HUB,orgId:t,teamId:r,includeContent:!0,sortBy:e.some(e=>[dm._g.SLIDE_TEMPLATE,dm._g.COOPER_TEMPLATE_FILE,dm._g.FIGJAM_TEMPLATE].includes(e))?dF.A.Browse.PUBLISHED_AT:dF.A.Browse.ALL_TIME});if(!o&&(!n||0===n.length))return(0,c.jsx)(dZ,{planTier:i});let m=s.numberOfTiles;return(0,c.jsxs)("div",{ref:s.sizeRef,children:[(0,c.jsx)(dE.S,{resources:n??[],isLoading:o,loadingTileCount:m*aC.c9,resourceImpressionTracking:a}),(0,c.jsx)(cr.u,{useInfiniteScroll:!0,fetchNextPage:d,isFetchingNextPage:u,hasNextPage:!!l,containerRef:s.sizeRef})]})}function cp({orgId:e,resourceImpressionTracking:t,planTier:r}){let{resources:a,loading:i,hasNextPage:s,isFetchingNextPage:n,fetchNextPage:o}=(0,dM.XY)({limit:10,caller:du.f.RESOURCE_HUB,orgId:e,includeContent:!0}),l=(0,u.useRef)(null);return i||a&&0!==a.length?(0,c.jsxs)("div",{ref:l,children:[(0,c.jsx)(da.x,{plugins:(a??[]).map(e=>e.content?.plugin).filter(e=>void 0!==e),onIntersectionChange:t,isOrgTeamBrowsing:!1,isLoading:i}),(0,c.jsx)(cr.u,{useInfiniteScroll:!0,fetchNextPage:o,isFetchingNextPage:n,hasNextPage:!!s,containerRef:l})]}):(0,c.jsx)(dZ,{planTier:r})}var cf=r(716651),cx=r(238140),cg=r(680058),ch=r(47249),cv=r(826998),cb=r(501800),cy=r(870269),cj=r(456e3),cw=r(962626);function cT({text:e,isSelected:t,onClick:r}){return(0,c.jsx)(iL.h,{"aria-label":e,"aria-pressed":t,className:Y()(lZ.LI,lZ.zu,"category_link_pill--tagPill--zApNJ",t&&lZ.hv),onClick:r,children:(0,c.jsx)("span",{className:Y()(lZ.sP,"category_link_pill--tagPillContent--OW4eI"),children:e})})}function cI({links:e}){let t=(0,ak.Er)(o$.Le),{tagSlug:r}=(0,ak.WK)(o$.Le),a=u.useRef(null),[i,s]=u.useState(!1),[n,o]=u.useState(!1),l=(0,cw.i)(),[d,m]=u.useState(0),[_,p]=u.useState(0);return u.useLayoutEffect(()=>{if(!a.current)return;let t=Array.from(a.current.children).filter(e=>!e.className.includes("expansionButton"));if(n)t.every(e=>0===e.offsetTop)&&o(!1),a.current.scrollWidth>a.current.clientWidth&&(o(!1),m(-1));else if(a.current.scrollWidth>a.current.clientWidth){let e=a.current.clientWidth-83,r=Array.from(t).findIndex(t=>t.offsetLeft+t.offsetWidth>e)-1;if(m(r),r<0)return void s(!1);p(t[r].offsetLeft+t[r].offsetWidth+8),s(!0)}else m(e.length-1),s(!1)},[n,i,l,e]),(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("div",{...{0:{className:"x78zum5 x167g77z x193iq5w x6ikm8r xozqiw3"},1:{className:"x78zum5 x167g77z x193iq5w x6ikm8r x1a02dak"}}[0|!!n],ref:a,children:[e.map(({to:e,translatedTitle:a,categorySlug:i,tagSlug:s},o)=>{let l=!!(s&&r&&s===r),m=n||o<=d;return(0,u.createElement)("div",{...{0:{className:"xkz0k9k"},1:{className:"xkz0k9k xlshs6z"}}[0|!m],key:e},(0,c.jsx)(cT,{text:a,categoryTagSlug:s,onClick:()=>{if(l){let e=t.copyWith({categorySlug:i,tagSlug:void 0}).href;(0,lQ.Lj)(t.href,e),g.ZP.push(e)}else(0,lQ.Lj)(t.href,e),g.ZP.push(e)},isSelected:l}))}),(i||n)&&(0,c.jsx)(iL.h,{className:"expansion-button",...{className:"xuxw1ft x1n0bwc9 x1qgsegg xaatb59 xru40mv x1sxf85j x12ulsxz xdqyycr x1g40iwv xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x133fa97"},style:i?{left:`${_}px`,position:"absolute"}:{},onClick:()=>{s(!i),o(!n)},children:i?(0,A.t)("community.shelves.show_more"):(0,A.t)("community.detail_view.show_less")})]})})}function cE({category:e,showTags:t=!1}){let r=(0,ak.Er)(o$.Le),a=(0,cj.I)(e.url_slug,o7.Rj);if(!a)return null;let i=(0,cy.v)(e,a,t,r);return(0,c.jsx)("div",{...{className:"x78zum5 x167g77z xozqiw3"},children:(0,c.jsx)(cI,{links:i})})}var ck=r(37579);function cN(){let e=(0,dS.V)(),t=(0,ak.Er)(o$.Le);(0,o$.cp)(t);let r=t.params,{categorySlug:a,tagSlug:i}=r,[s,n]=u.useState(null),o=t.search,l=(0,di.Qj)(),[{data:d,status:m}]=(0,y.aM)((0,cb.x_)({categorySlug:a,tagSlug:i,locale:l})),_="loading"===m;u.useEffect(()=>{d&&!_&&n(d)},[d,_]);let p=(0,cx.p)(r,o,aC.dw),{filterState:f,handleFilterUpdate:x}=(0,cg.S)(cv.fo.CATEGORY,{...p.filterState}),h=(0,o5.Uw)(),v=u.useCallback(e=>{let r=x(e);g.ZP.replace(t.copyWith({categorySlug:a,tagSlug:i},{resource_type:r.resourceType,editor_type:r.editorType,price:r.price,...h&&{sort_by:r.sortBy}}).href)},[x,t,a,i,h]),b=h?{onUpdate:v}:{};return(0,c.jsx)(r8.Ui,{name:at.V4.RESOURCE_HUB_CATEGORY,properties:{category:a,tag:i},children:(0,c.jsx)("div",{...{className:"x78zum5 xdt5ytf xou54vl x1gan7if"},ref:e.sizeRef,children:s?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{...{className:"x78zum5 x1qughib x1cy8zhl xozqiw3 xou54vl"},children:[(0,c.jsx)("div",{...{className:"x78zum5 xdt5ytf x1n2onr6 x12lumcd xeuugli"},children:(0,c.jsx)(cE,{category:s,showTags:!!s.tags.length})}),(0,c.jsx)("div",{...{className:"x78zum5 x13a6bvl x3psx0u xuxw1ft"},children:(0,c.jsx)(ck.W,{context:cv.fo.CATEGORY,filterState:f,allowedEditorTypes:s.editor_types,showEditorFilter:!0,showResourceTypeFilter:a!==o7.Rj.make,showPriceFilter:a!==o7.Rj.make,allowMixedResourceType:!1,showSortDropdown:!0,...b})})]}),(0,c.jsx)("div",{...{className:"xw7yly9"},children:(0,c.jsx)(cf.a,{category:s,categoryPageData:p,numTilesPerRow:e.numberOfTiles})})]}):(0,c.jsx)("div",{...{className:"x7z7khe"},children:(0,c.jsx)(ch.$j,{})})})})}var cC=r(173893);function cR({orgOrTeamName:e}){let{tab:t}=(0,ak.WK)(aN.pX);return(0,ak.L0)(aN.pX,!0)?null:(0,c.jsx)(iW.Nb,{leftSide:(0,c.jsx)(cS,{selectedTab:t||aC.cP.INTERNAL,orgOrTeamName:e}),rightSide:[]})}function cS({selectedTab:e,orgOrTeamName:t}){let r=!!(0,cC.PB)(),a=(0,ak.J1)(o$.Le),i=(0,ak.J1)(oq.G),s=(0,ak.J1)(oX.M),{teamOrOrgName:n}=(0,ci._)(),o="";return r||a||i||s?(r?o=e===aC.cP.INTERNAL?t?(0,A.t)("community.search.search_results_from_org_or_team",{orgOrTeamName:t}):(0,A.t)("community.search.search_results"):(0,A.t)("community.search.search_results_from_community"):i?(o=(0,eY.rn)(i.params.resourceTypeSlug),(i.params.forTeamId||i.params.forOrg)&&(o=n?(0,A.t)("community.resource_hub.internal_tab",{orgOrTeamName:n}):"")):a?o=lc(a.params.categorySlug,void 0,a.search.resource_type)||"":s&&(o=(0,A.t)("community.saves.saved_by_me")),(0,c.jsx)("h1",{className:"xor4psk x1ncjjhx xaoa4km x2i041 x14terfx",children:o})):null}var cO=r(956673),cP=r(311445),cA=r(390277),cD=r(669200),cF=r(716239),cM=r(200101),cL=r(535779);let cB=(0,aP.A)(function(){let e=(0,m.I0)(),t=(0,ak.WK)(oJ.MQ),r=t.apiResourceType,a=t.resourceId,[i]=(0,y.aM)((0,cM.q)({apiResourceType:r,id:a})),s=i.data,n=s?(0,dP.Qo)(s):void 0;u.useEffect(()=>{n&&(0,cL.M)(e,n)},[e,n]);let o=(0,cO.DM)(),l=(0,cF._$)(),d=(0,cF.PJ)(),_=(0,lQ.cs)(r,a,l,d);if(!s||!n)return(0,c.jsx)(c.Fragment,{});let p=(0,dP.hT)(s);return(0,c.jsx)(r8.Ui,{name:at.V4.RESOURCE_HUB_COMMUNITY_RESOURCE_DETAIL_PAGE,properties:_,children:(0,c.jsxs)("div",{children:[p?(0,c.jsx)(cA.P,{resource:s}):(0,c.jsx)(cD.P,{resource:s}),(0,c.jsx)(cP.KF,{resource:s,rdpImpressionId:o})]})})},"ResourceHubResourcePage");var cU=r(66615),cV=r(212121);function cG(){let e,{color:t}=(0,nm.M)();return e="dark"===t?(0,lu.o1)("7ab53d43da451ec79f8b986fd66e173285e8f890"):(0,lu.o1)("09318ceb86318f7b9246ee48a8634ef0d126c06f"),(0,c.jsxs)("div",{...{className:"x78zum5 xdt5ytf x6s0dn4 xh8yej3 x16g6g8t xgqmno8 x1sjmt1f xl56j7k"},children:[(0,c.jsx)("div",{...{className:"x78zum5 xdt5ytf x6s0dn4 xvue9z xl0j6f1 x1wft13i x2lah0s"},children:(0,c.jsx)(o4.oG,{...{className:"x193iq5w xl1xv1r"},src:e,alt:(0,A.t)("community.saves.no_saves_title"),loading:"lazy"})}),(0,c.jsx)("div",{...{className:"x78zum5 xdt5ytf x1665zp3 xz84dc7 xl2nq6h x14ilqb xo3t2mw x1bzacg x1egpy1l x6s0dn4"},children:(0,c.jsxs)("div",{...{className:"x78zum5 xdt5ytf x6s0dn4 x167g77z xkh2ocl xh8yej3 x2lah0s"},children:[(0,c.jsx)("div",{...{className:"x1akne3o xor4psk x1ncjjhx xaoa4km x2i041 x14terfx x2b8uid"},children:(0,A.t)("community.saves.no_saves_heading")}),(0,c.jsx)("div",{...{className:"x1n0bwc9 xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x2b8uid"},children:(0,A.t)("community.saves.no_saves_subheading")})]})})]})}function cz(){let e=(0,ea.dO)()??void 0,t=(0,ak.Er)(oX.M),r=(0,dS.V)(),{resourceType:a}=t.params,i=a?(0,c.jsx)(cH,{resourceType:a,currentUserId:e,sizingInfo:r}):(0,c.jsx)(cW,{currentUserId:e,sizingInfo:r});return(0,c.jsx)("div",{className:ce,ref:r.sizeRef,children:(0,c.jsx)(r8.Ui,{name:at.V4.RESOURCE_HUB_SAVES_PAGE,children:i})})}function cW({currentUserId:e,sizingInfo:t}){let{trackResourceImpression:r}=(0,dc.xY)({extraProperties:{tab:"saves"}}),a=u.useCallback((e,t)=>{t&&r(e)},[r]),i=u.useCallback((e,t)=>{t&&r(e)},[r]),{resources:s,loading:n,hasNextPage:o}=dd({resourceType:(0,cV.Ay)(o9.k.FILES),resourceCount:2*aC.dw,includeContent:!1,enabled:!!e}),{resources:l,loading:d,hasNextPage:m}=dd({resourceType:(0,cV.Ay)(o9.k.PLUGINS),resourceCount:aC.dw,includeContent:!0,enabled:!!e}),{resources:_,loading:p,hasNextPage:f}=dd({resourceType:(0,cV.Ay)(o9.k.WIDGETS),resourceCount:2*aC.dw,includeContent:!1,enabled:!!e});return s?.length===0&&l?.length===0&&_?.length===0?(0,c.jsx)("div",{className:ce,children:(0,c.jsx)(cG,{})}):(0,c.jsxs)("div",{...{className:"x78zum5 xdt5ytf xnfooyd"},children:[(0,c.jsx)(cK,{resources:s??[],resourceType:o9.k.FILES,header:(0,A.t)("community.saves.all_files"),numTilesPerRow:t.numberOfTiles,hasNextPage:!!o,loading:n,resourceImpressionTracking:i}),(0,c.jsx)(cY,{resources:(l??[]).map(e=>e.content?.plugin).filter(e=>void 0!==e),hasNextPage:!!m,loading:d,resourceImpressionTracking:a}),(0,c.jsx)(cK,{resources:_??[],resourceType:o9.k.WIDGETS,header:(0,A.t)("community.view_bar.widgets"),numTilesPerRow:t.numberOfTiles,hasNextPage:!!f,loading:p,resourceImpressionTracking:i})]})}function cH({resourceType:e,currentUserId:t,sizingInfo:r}){let a=u.useRef(null),{trackResourceImpression:i}=(0,dc.xY)({extraProperties:{tab:"saves",resourceType:e}}),[{data:s,status:n,hasNextPage:o,isFetchingNextPage:l},{fetchNextPage:d}]=(0,y.aM)(dn.V.PaginatedCommunityResourceSavesQuery({pageSize:aC.dw,resourceType:(0,cV.Ay)(e),includeContent:e===o9.k.PLUGINS}),{enabled:!!t});return(0,c.jsxs)("div",{ref:a,children:[(0,c.jsx)(cU.O,{resourcesLoading:"loading"===n,totalResources:s??[],numTilesPerRow:r.numberOfTiles,hasNextPage:!!o,trackResourceImpression:i,filterState:{...(0,cv.M$)(),resourceType:e},customLoadingView:(0,c.jsx)("div",{...{className:"x78zum5 xl56j7k x6s0dn4 x4ygwfs"},children:(0,c.jsx)(em.TK,{})}),emptyResourceStateQuery:e}),o&&(0,c.jsx)(cr.u,{useInfiniteScroll:!0,fetchNextPage:d,isFetchingNextPage:l,hasNextPage:o,containerRef:a})]})}function cK({resources:e,resourceType:t,header:r,numTilesPerRow:a,hasNextPage:i,loading:s,resourceImpressionTracking:n}){let o=(0,aN.$2)(),l=(0,aN.Pi)();if(!s&&0===e.length)return null;let d=i&&e.length===2*a||e.length>2*a;return(0,c.jsx)(dj,{header:r,content:(0,c.jsx)(dE.S,{resources:e.slice(0,2*a),loadingTileCount:2*a,isLoading:s,resourceImpressionTracking:n}),route:new oX.M({...o,resourceType:t},l),showSeeMore:d})}function cY({resources:e,hasNextPage:t,loading:r,resourceImpressionTracking:a}){let i=(0,aN.$2)(),s=(0,aN.Pi)();if(!r&&0===e.length)return null;let n=t&&e.length===aC.fr||e.length>aC.fr;return(0,c.jsx)(dj,{header:(0,A.t)("community.view_bar.plugins"),content:(0,c.jsx)(da.x,{plugins:e.slice(0,aC.fr),onIntersectionChange:a,isOrgTeamBrowsing:!1,isLoading:r,loadingRowCount:aC.fr,layoutV1:"twoColumn"}),route:new oX.M({...i,resourceType:o9.k.PLUGINS},s),showSeeMore:n})}var cZ=r(971565),c$=r(380272),cq=r(899368),cQ=r(507977),cJ=r(102261),cX=r(241795);function c0({selectedTab:e,resultsByType:t,filtersControlState:r,onUpdate:a}){let i=(0,cC.aw)(),s=i instanceof o0.Xi?aC.cP.COMMUNITY:aC.cP.INTERNAL,n=(0,aN.Pi)(),o=(0,cX.t)(t),[l,d,u]=nF.m.useManagedTabs({[o9.k.FILES]:!0,[o9.k.PLUGINS]:!0,[o9.k.WIDGETS]:!0},e,t=>{let r=i.copyWith({},{...n,resource_type:t}).href;g.ZP.push(r),(0,iU.L9)("resource_type_filter_changed",{resource_type:t,from:e})}),m=Object.keys(o9.k).map(e=>{let{count:t=0,hasMore:r}=o[o9.k[e]];return(0,c.jsxs)(nF.m.Tab,{...l[o9.k[e]],children:[(0,c.jsx)("span",{children:function(e,t){switch(e){case o9.k.FILES:if(t===aC.cP.COMMUNITY)return(0,A.t)("community.view_bar.files_and_templates_tab");return(0,A.t)("community.view_bar.templates_tab");case o9.k.PLUGINS:return(0,A.t)("community.view_bar.plugins");case o9.k.WIDGETS:return(0,A.t)("community.view_bar.widgets");default:(0,O.vE)(e)}}(o9.k[e],s)}),(0,c.jsx)("span",{children:` (${t??0}${r?"+":""})`})]},e)});return(0,c.jsx)("div",{children:(0,c.jsx)(iW.Nb,{leftSide:(0,c.jsx)(nF.m.TabStrip,{manager:u,children:m}),rightSide:[(0,c.jsx)(ck.W,{context:cv.fo.SEARCH,filterState:r,onUpdate:a,showEditorFilter:!0,showResourceTypeFilter:!1,showPriceFilter:s!==aC.cP.INTERNAL,showSortDropdown:s!==aC.cP.INTERNAL},"filters")]})})}var c1=r(115908),c5=r(875533);function c2({onSearchInCommunity:e}){return(0,c.jsx)("div",{...{className:"x19y5rnk xb3r6kr"},children:(0,c.jsxs)(c1.oV,{variant:"brand",icon:(0,c.jsx)(aE.H,{}),children:[(0,c.jsx)(c5.v,{title:(0,A.t)("community.search.search_in_community_banner.title"),children:(0,A.t)("community.search.search_in_community_banner.description")}),(0,c.jsx)(cZ.r,{href:"#",onClick:e,children:(0,A.t)("community.search.search_in_community_banner.cta")})]})})}function c4({currentOrgId:e,currentTeamId:t}){let r=!!(e||t),a=(0,cC.aw)();(0,cQ.NK)(a,r);let i={query:a.search.query??"",editor_type:a.search.editor_type??lK.R.Editors.ALL,price:a.search.price??cq.L.Price.ALL,resource_type:a.search.resource_type??o9.k.FILES,...(0,o5.Uw)()&&a instanceof o0.Xi&&{sort_by:a.search.sort_by??dF.A.Search.RELEVANCY}},s=i.resource_type,{trackResourceImpression:n,flushAndResetResourceImpressions:o}=(0,dc.xY)({extraProperties:{resourceType:i.resource_type}}),{filterState:l,handleFilterUpdate:d}=(0,cg.S)(cv.fo.SEARCH,{resourceType:i.resource_type,editorType:i.editor_type??lK.R.Editors.ALL,price:i.price,sortBy:i.sort_by??dF.A.Search.RELEVANCY}),m=(0,o5.Uw)(),_=(0,u.useCallback)(e=>{let t=d(e);g.ZP.replace(a.copyWith({},{query:i.query,editor_type:t.editorType,price:t.price,...m&&{sort_by:t.sortBy}}).href)},[d,a,i.query,m]);u.useEffect(()=>{o()},[i.resource_type,i.query,i.editor_type,i.price,i.sort_by,o]);let{resultsByType:p,loadedStatusByType:f}=(0,c$.xT)((0,u.useMemo)(()=>({query:i.query,editor_type:i.editor_type,price:i.price,sort_by:i.sort_by??dF.A.Search.RELEVANCY,org_id:e,team_id:t}),[i.query,i.editor_type,i.price,i.sort_by,e,t]),s),x=(0,dS.V)(),h=(0,e1.I6)(),v=(0,eY.gF)(h),b=(0,cF._$)(),y=(0,cF.PJ)(),j=p[s].resources.length,w=u.useCallback(()=>{(0,lQ.KQ)(b,y,j);let e=new o0.Xi(a.params,i).href;g.ZP.push(e)},[a.params,i,j,b,y]),T=r&&!v&&f[s]&&j<=10,I=T&&j>0,E=T&&!I;return(0,c.jsx)(r8.Ui,{name:at.V4.RESOURCE_HUB_SEARCH,children:(0,c.jsxs)("div",{className:ce,ref:x.sizeRef,children:[(0,c.jsx)(c0,{selectedTab:s,resultsByType:p,filtersControlState:l,onUpdate:_}),(0,c.jsx)(cJ.u,{searchParams:i,trackResourceImpression:n,resultsByType:p,isLoadingThisView:!f[s],emptyStateActions:E?(0,c.jsx)(cZ.r,{href:"#",onClick:w,children:(0,A.t)("community.search.search_in_community_instead_cta")}):void 0,numTilesPerRow:x.numberOfTiles}),I&&(0,c.jsx)("div",{...{className:"xpgiz1h x1buy44e"},children:(0,c.jsx)(c2,{onSearchInCommunity:w})})]})})}let c9=(0,aP.A)(function(){let e=(0,m.I0)(),t=(0,aN.$2)(),r=(0,aN.Pi)(),a=(0,e1.ZG)("ResourceHubApp"),i=(0,eY.gF)(a),s=a.data?.type===eH.k9.ORG?a.data?.key.parentId:void 0,n=a.data?.type===eH.k9.TEAM?a.data?.key.parentId:void 0,o=(0,eY.SR)(),l=(0,eY.y4)(),d=a.data?.type!==eH.k9.ORG||(0,ec.Wg)(a.data.customTemplatesAllowed),_=(0,u.useMemo)(()=>{let e=aC.cP.INTERNAL;return"loaded"===a.status&&a.data?.tier===eH.Lz.STARTER&&(e=aC.cP.COMMUNITY),new aN.pX({...t,tab:e},r)},[t,r,a]),p="loading"===a.status||!t;return((0,u.useEffect)(()=>{p||o||l||e(eL.fv({view:"recentsAndSharing"}))},[p,o,l,e]),p)?null:(0,c.jsx)(r8.Ui,{name:at.V4.RESOURCE_HUB,children:(0,c.jsx)(oZ.FU.Provider,{value:oZ.g3.RESOURCE_HUB,children:(0,c.jsx)(oY.AW,{path:aN.oM,children:(0,c.jsxs)("div",{...{className:"xv90nub x78see"},children:[(0,c.jsx)(cR,{orgOrTeamName:a.data?.name}),(0,c.jsxs)(oY.rs,{children:[(0,c.jsx)(oY.AW,{path:oQ.Nv.path,children:i?(0,c.jsx)(oY.l_,{to:_.to}):(0,c.jsx)(o1.f,{fallbackRedirectRoute:_})}),(0,c.jsx)(oY.AW,{path:oJ.MQ.path,children:i?(0,c.jsx)(oY.l_,{to:_.to}):(0,c.jsx)(cB,{})}),(0,c.jsx)(oY.AW,{path:o0.Xi.path,children:i?(0,c.jsx)(oY.l_,{to:_.to}):(0,c.jsx)(c4,{})}),(0,c.jsx)(oY.AW,{path:o0.tl.path,children:s||n?(0,c.jsx)(c4,{currentOrgId:s,currentTeamId:n}):(0,c.jsx)(oY.l_,{to:_.to})}),(0,c.jsx)(oY.AW,{path:oq.G.path,children:(0,c.jsx)(cm,{planTier:a.data?.tier??null,currentOrgId:s,currentTeamId:n,fallbackRedirectRoute:_})}),(0,c.jsx)(oY.AW,{path:oX.M.path,children:i?(0,c.jsx)(oY.l_,{to:_.to}):(0,c.jsx)(cz,{})}),(0,c.jsx)(oY.AW,{path:o$.Le.path,children:i?(0,c.jsx)(oY.l_,{to:_.to}):(0,c.jsx)(cN,{})}),(0,c.jsx)(oY.AW,{path:aN.pX.path,children:(0,c.jsx)(ct,{planTier:a.data?.tier??null,currentOrgId:s,currentTeamId:n,isCommunityTabDisabledForOrg:i,isTemplatesPublishingDisabledForOrg:!d})}),(0,c.jsx)(oY.l_,{to:_.to})]})]})})})})},"ResourceHubApp"),c7=(0,aP.A)(function(){let e=(0,aN.$2)(),t=(0,aN.Pi)();return e?(0,c.jsx)(c3,{sharedRouteParams:e,sharedSearchParams:t}):null},"ResourceHubBreadcrumbs");function c3({sharedRouteParams:e,sharedSearchParams:t}){let[r,a]=u.useState(null),[i,s]=u.useState(null),[n,o]=u.useState(null),{teamOrOrgName:l}=(0,ci._)(),d=[],m=(0,ak.GF)(aN.pX)?.tab||aC.cP.INTERNAL,_=m===aC.cP.COMMUNITY?(0,A.t)("community.community"):(0,A.t)("sidebar.resources");d=[{text:_,to:new aN.pX({...e,tab:m},t).href,trackingProperties:{name:lQ._A.RESOURCE_HUB_HOME_BREADCRUMB_CLICKED,text:_}}];let p=(0,ak.J1)(o$.Le),f=!!p,x=(0,ak.J1)(oJ.MQ),h=!!x,v=f||h;u.useEffect(()=>{v||(a(null),o(null),s(null))},[v]);let b=x?.params.apiResourceType,j=x?.params.resourceId,[w]=(0,y.aM)((0,cM.q)({apiResourceType:b,id:j}),{enabled:h&&!!b&&!!j}),T=p?.params.categorySlug||w.data?.category_slug||"",I=p?.params.tagSlug||"",E=(0,di.Qj)(),[{data:k,status:N}]=(0,y.aM)((0,cb.x_)({categorySlug:T,tagSlug:I,locale:E}),{enabled:v});u.useEffect(()=>{if("loaded"===N){o(k?.selected_tag||null);let{parent_category:e}=k||{parent_category:null};s(e||null),a(k)}},[k,N]),v&&r&&(d=[...d,...function({currentCategory:e,currentParentCategory:t,currentTag:r,sharedRouteParams:a,sharedSearchParams:i,categoryRoute:s}){if(!e)return[];let n=(0,cj.I)(t?.url_slug,o7.Rj),o=(0,cj.I)(e.url_slug,o7.Rj);return[t&&n&&{text:lc(n,void 0,s?.search.resource_type)||(0,A.mz)(t.i18n_meta?.title,t.title),to:s?s.copyWith({categorySlug:n,tagSlug:void 0}).href:new o$.Le({...a,categorySlug:n},{...i}).href,trackingProperties:{name:lQ._A.RESOURCE_HUB_CATEGORY_BREADCRUMB_CLICKED,text:lc(n,void 0,s?.search.resource_type)||(0,A.mz)(t.i18n_meta?.title,t.title),category_slug:n}},e&&o&&{text:lc(o,void 0,s?.search.resource_type)||(0,A.mz)(e.i18n_meta?.title,e.title),to:s?s.copyWith({categorySlug:o,tagSlug:void 0}).href:new o$.Le({...a,categorySlug:o},{...i}).href,trackingProperties:{name:lQ._A.RESOURCE_HUB_CATEGORY_BREADCRUMB_CLICKED,text:lc(o,void 0,s?.search.resource_type)||(0,A.mz)(e.i18n_meta?.title,e.title),category_slug:o}},r&&{text:(0,A.mz)(r.i18n_meta?.text,r.text)}].filter(Boolean)}({currentCategory:r,currentParentCategory:i,currentTag:n,sharedRouteParams:e,sharedSearchParams:t,categoryRoute:f?p:void 0})]);let C=w.data;if(h&&C&&(r||!C.category_slug)){let e={text:(0,cV.Yj)(C)||""};d=[...d,e]}let R=(0,ak.J1)(oX.M);if(R){let t={text:(0,A.t)("community.profiles.saved"),to:new oX.M({...e,resourceType:void 0}).href};d=[...d,t];let r=R?.params.resourceType,a=r?(0,eY.H1)(r):void 0;a&&(d=[...d,{text:a}])}if((0,cC.PB)()){let e={text:(0,A.t)("community.resource_hub.search_breadcrumb")};d=[...d,e]}let S=(0,ak.J1)(oq.G);if(S){let e=S.params.resourceTypeSlug,t={text:(0,eY.rn)(e)};d=[...d,t],(S?.params.forTeamId||S?.params.forOrg)&&(t.to=S.copyWith({forTeamId:void 0,forOrg:!1}).href,t.trackingProperties={name:lQ._A.RESOURCE_HUB_INTERNAL_RESOURCE_TYPE_BREADCRUMB_CLICKED,text:(0,eY.rn)(e)},l&&(d=[...d,{text:l}]))}if((0,ak.L0)(oQ.Nv)){let e={text:(0,A.t)("community.profiles.community_profile")};d=[...d,e]}return 1===d.length&&d[0]?.text?(0,c.jsx)("h1",{children:d[0].text}):(0,c.jsx)(oG.FD,{children:d.map((e,t)=>(0,c.jsx)(oG.gN,{text:e.text,onClick:()=>{e.to&&g.ZP.push(e.to),e.trackingProperties&&(0,lQ.WS)(e.trackingProperties)},hasTrailingDivider:t<d.length-1,disabled:t===d.length-1},`resource_hub_breadcrumb_${t}`))})}var c6=r(473550),c8=r(720241),ue=r(512039),ut=r(467848),ur=r(78248);let ua=(0,aP.A)(function(){let{onSubmit:e,currentTab:t}=function(){let e=function(){let e=(0,e1.ZG)("useDefaultResourceHubTab"),t=e.data?.type===eH.k9.TEAM?e.data?.key.parentId:null,r=e.data?.type===eH.k9.ORG?e.data?.key.parentId:null,a="loaded"===e.status&&e.data?.tier===eH.Lz.STARTER,i=e.data?.type!==eH.k9.ORG||(0,ec.Wg)(e.data.customTemplatesAllowed),s=(0,dM.zx)(e.data?.tier??null,t,!i,1),n=(0,dM.Rn)(e.data?.tier??null,r,!i,1),{[eH.gg.COOPER]:{templates:o,isLoading:l},[eH.gg.WHITEBOARD]:{templates:d,isLoading:c},[eH.gg.SLIDES]:{templates:u,isLoading:m}}=r?n:s,_=[...o,...d,...u],p="loaded"===e.status&&(e.data?.tier===eH.Lz.PRO||e.data?.tier===eH.Lz.STUDENT)&&!(l||c||m)&&0===_.length;return a||p?aC.cP.COMMUNITY:aC.cP.INTERNAL}(),t=(0,ak.GF)(aN.pX)?.tab||e,r=t===aC.cP.INTERNAL?o0.tl:o0.Xi,a=(0,cC.k1)(),i=!!a,s=(0,aN.$2)(),n=(0,aN.Pi)();return{onSubmit:e=>{let o;if(o=a?a.copyWith({},{query:e}).href:new r(s,{...n,query:e}).href,e.length)g.ZP.push(o);else if(i){let e=new aN.pX({...s,tab:t},n).href;g.ZP.push(e)}},currentTab:t}}();return(0,c.jsx)(ui,{onSubmit:e,currentTab:t})},"ResourceHubSearchBar");function ui({onSubmit:e,currentTab:t}){let r,a=(0,cC.k1)(),i=!!a,s=a?.search.query,n=(0,m.I0)(),[o,l]=u.useState(""),d=(0,ut.Z)(e,400);r=t===aC.cP.COMMUNITY?(0,A.t)("community.search.search_community"):(0,A.t)("community.search.search_internal_placeholder");let _=(0,c.jsx)(c8._,{className:"xexx8yu xmzs88n x18d9i69 xcpk43y"});u.useEffect(()=>{i&&s&&l(s),i||n(ur.TM())},[i]);let p=u.useCallback(()=>{l("")},[]);return u.useEffect(()=>{i||p()},[p,i]),(0,c.jsxs)(c6.I.Root,{size:"lg",onFocus:()=>{i||n(ur.Ft({entryPoint:"resource_hub"}))},children:[_,(0,c.jsx)(c6.I,{value:o,onChange:e=>{l(e),e&&d(e)},"aria-label":(0,A.t)("community.search.search_templates_and_tools"),placeholder:r}),o.length>0&&(0,c.jsx)(iL.h,{...{className:"xt0e3qv xy13l1i"},"aria-label":(0,A.t)("common.clearSearch"),onClick:()=>{l("")},children:(0,c.jsx)(ue.J,{})})]})}function us(){let e=(0,c.jsx)(c7,{});return(0,c.jsxs)("div",{...{className:"x78zum5 x6s0dn4 x1qughib xaobbuh xozqiw3"},children:[e,(0,c.jsx)(oZ.FU.Provider,{value:oZ.g3.RESOURCE_HUB,children:(0,c.jsx)("div",{...{className:"xnmoo23 x1thqx0m"},children:(0,c.jsx)(ua,{})})})]})}var un=r(697931),uo=r(955542),ul=r(103311),ud=r(253591),uc=r(209213),uu=r(892398),um=r(681768);let u_=new class{markFeedVisited(e){return um.ZP.post(`/api/feed_visited/${e.currentOrgId}`)}};var up=r(536234),uf=r(472922),ux=r(495999),ug=r(57829),uh=r(576643),uv=r(997210);let ub=new class{markFeedViewed(e){um.ZP.post(`/api/feed_posts/${e.publicUuid}/mark_viewed`)}vote(e){um.ZP.post(`/api/feed_posts/${e.publicUuid}/vote`,{vote_option:e.voteOption})}};var uy=r(797907),uj=r(608657),uw=r(314704),uT=r(658489),uI=r(876872),uE=r(308587),uk=r(815306),uN=r(480040);let uC="feed_tile--commentPillText--yUFG-",uR="feed_tile--feedPostHoverContainerSelectable--uGqX2";var uS=r(651810);function uO(e){let t=(0,m.I0)(),r=u.useRef(null),[a,i]=(0,oy.X)(),[s,n]=(0,oy.X)(),{requestToOpenPostByFeedIdx:o}=e,l=u.useCallback((r,a)=>{r?.stopPropagation();let i=e.itemIdx+1;(0,iU.L9)("Team Feed Tile Clicked",{postUuid:e.post.publicUuid,feedRank:i}),t((0,tF.K4)({type:up.K,data:{postUuid:e.post.publicUuid,initialPreloadedPost:e.post,feedIdx:e.feedIdx,requestToOpenPostByFeedIdx:o,autofocusCommentInput:a?.autofocusCommentInput,selectedContentIdx:a?.selectedContentIdx,onSetSelectedContentIdx:a?.onSetSelectedContentIdx}}))},[e.itemIdx,e.post,t,e.feedIdx,o]),{refSetter:d}=function(e){let t=u.useRef(null),r=u.useRef(e);r.current=e;let a=u.useMemo(()=>new ResizeObserver(()=>{r.current(t.current)}),[]);return u.useEffect(()=>()=>{a.disconnect()},[a]),{refSetter:u.useCallback(e=>{null!==t.current&&a.unobserve(t.current),t.current=e,null!==t.current&&a.observe(t.current)},[a])}}(e.virtualRowItem.measureRef),_={position:"absolute",top:e.virtualRowItem.start,left:0,right:0},p=e.feedListRef.current?.getBoundingClientRect().left??0,f=Math.max(0,(r.current?.getBoundingClientRect().left??0)-p),x=(0,c.jsxs)("div",{className:"feed_tile--caughtUpContainer--HrQfG",children:[(0,c.jsx)("div",{className:"feed_tile--caughtUpTitle---Gouw",children:(0,A.t)("fig_feed.youre_all_caught_up")}),(0,c.jsx)("div",{className:"feed_tile--caughtUpSubtitle--MPg05",children:(0,A.t)("fig_feed.come_back_later_for_more_posts")})]});return(0,c.jsxs)("div",{className:"feed_tile--postContainer--x7zhQ",ref:e=>{d(e),e&&(r.current=e,a(e))},style:_,children:[(0,c.jsx)("div",{className:"feed_tile--hoverExtension--N68Ap",ref:s}),(0,c.jsxs)("div",{className:"feed_tile--tileContainer--O0fIl",children:[(0,c.jsx)(uP,{feedPost:e.post,feedIdx:e.feedIdx,onTileMouseDown:l,horizontalMargin:f,isHovered:i||n}),e.mostRecentUnviewed&&x]})]})}function uP(e){let t=parseInt(e.feedPost.numComments,10),r=(0,uh.Qi)(e.feedPost.descriptionMeta),a=[...new Map(e.feedPost.comments.map(e=>[e.user.id,e.user])).values()],i=(0,c.jsx)("div",{className:"feed_tile--commentPill--dqNyy feed_reactions_section--reactionPill--kdlOl reactions--reaction--PIAY- text--fontPos11--rO47d text--_fontBase--VaHfk",onMouseDown:t=>e.onTileMouseDown(t,{autofocusCommentInput:!0}),role:"button",tabIndex:0,children:t>0?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(ux.t,{users:a,totalNum:a.length,numAvatarsToDisplay:4}),(0,c.jsx)("div",{className:uC,children:(0,A.tx)("fig_feed.num_comments",{numComments:t})})]}):(0,c.jsx)("div",{className:uC,children:(0,A.tx)("fig_feed.add_comment")})}),[s,n]=u.useState(!1),o=u.useRef(null);u.useEffect(()=>{let e=o.current;e&&n(e.scrollHeight>e.offsetHeight)},[]);let l=u.useMemo(()=>(r.length>0&&(r[0].t=r[0].t?.trimStart(),r[r.length-1].t=r[r.length-1].t?.trimEnd()),r),[r]),d=(0,uv.f)(),m=u.useCallback((e=[],t)=>e?e.map((e,r)=>{let a=(e.user_annotated?e.user_annotated.handle:e.t)||"",i=(0,oj.A)(a),s=null,n=e.link&&(0,uy.nM)(e.link);if(e.user_annotated&&i)s=(0,c.jsx)("span",{onMouseDown:e=>e.stopPropagation(),role:"link",tabIndex:0,children:(0,c.jsx)(uy.DL,{href:`/files${d}/user/${e.user_id}`,userId:e.user_annotated.id,handle:i,imgUrl:e.user_annotated.img_url})});else if(n&&i&&(0,uw.Dm)(n))s=(0,c.jsx)("span",{onMouseDown:e=>e.stopPropagation(),role:"link",tabIndex:0,children:(0,c.jsx)(uy.nW,{text:i,hyperlink:n})});else{let e=(0,uf.mB)(i?.replace(/\n\s*\n/g,"\n").split("\n").join(" ")||"");s=(0,c.jsx)("span",{children:e})}return(0,c.jsxs)(u.Fragment,{children:[s,e.children?.length&&e.styles?.length&&e.children.map((a,i)=>(0,c.jsxs)(u.Fragment,{children:[" ",e.styles.includes("ol")?`${i+1}. `:"\u2022 ",m(a.children,`${t}-${r}-${i}`)," "]},`${t}-${r}-${i}`))]},`${t}-${r}`)}):[(0,c.jsx)(c.Fragment,{})],[d]),_=u.useMemo(()=>m(l,e.feedPost.id),[l,m,e.feedPost.id]),{onTileMouseDown:p}=e,f=u.useMemo(()=>(0,c.jsxs)("div",{className:"feed_tile--postDescriptionContainer--Gawj-",onMouseDown:p,role:"button",tabIndex:0,children:[(0,c.jsx)("div",{className:"feed_tile--postTitle--qzhjX",children:e.feedPost.title}),(0,c.jsxs)("div",{className:"feed_tile--postDescription--N5lY4","data-testid":"feed-post-description",ref:o,children:[(0,c.jsx)("div",{className:Y()("feed_tile--postDescriptionMessage--IgSUt comment_message--commentMessage--UoyEA","feed_tile--collapsed--kylN3",s&&"feed_tile--hasShowMore---u4OF"),children:_}),s&&(0,c.jsxs)("div",{onMouseDown:e=>{e.stopPropagation(),p()},className:"feed_tile--viewMore--IRTtI",role:"button",tabIndex:0,children:[(0,c.jsx)("div",{className:"feed_tile--viewMoreEllipsis--nG44V",children:"..."}),(0,c.jsx)("div",{className:"feed_tile--viewMoreText--zTkIw",children:(0,A.t)("fig_feed.see_more")})]})]})]}),[s,o,e.feedPost,p,_]),x=(0,uT._y)(e.feedPost.publicUuid,uT.Iq.TILE),g=(0,sB.LB)(),h=e.isHovered||g?.type===(0,uN.KE)(uN.$9.USER,e.feedPost.publicUuid,uT.iz.TILE);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"feed_tile--topRowUGC--lTq8w",children:[(0,c.jsx)("div",{className:"feed_tile--avatarFloat--eYQCG",children:(0,c.jsx)(uE.m,{user:e.feedPost.creator,size:ra.DZ.LARGE,noHandle:!0})}),(0,c.jsx)(uE.X,{user:e.feedPost.creator,date:e.feedPost.createdAt,onTileMouseDown:e.onTileMouseDown,noAvatar:!0}),(0,c.jsxs)("div",{className:P.B.flex.flexRow.$,children:[(0,c.jsx)(uN.Le,{hideTarget:!h,feedPost:e.feedPost,source:uT.iz.TILE}),h&&(0,c.jsx)(uj.hU,{"data-tooltip-type":ae.fR.TEXT,"data-tooltip":(0,A.t)("fig_feed.copy_link_to_post"),onClick:x,children:(0,c.jsx)(ug.JO,{icon:"hyperlink-32"})})]})]}),f,(0,c.jsx)(uA,{feedPost:e.feedPost,feedIdx:e.feedIdx,backgroundColor:e.feedPost.backgroundColor,onTileMouseDown:e.onTileMouseDown,horizontalMargin:e.horizontalMargin}),(0,c.jsx)("div",{className:"feed_tile--bottomRow--3toLi",children:(0,c.jsx)(uk.BO,{type:uk.rY.FULL,source:uk.e5.TILE_POST,postUuid:e.feedPost.publicUuid,postId:e.feedPost.id,feedReactions:e.feedPost.reactions,prependToList:[i]})})]})}function uA(e){let t=u.useRef(null),r=e.feedPost.content.map(e=>JSON.parse(e)),[a,i]=u.useState(!1),[s,n]=u.useState(!1),[o,l]=u.useState(0);u.useEffect(()=>{0!==o&&ub.markFeedViewed({publicUuid:e.feedPost.publicUuid})},[o,e.feedPost.publicUuid]);let d=(0,uk.VT)({type:"post",id:e.feedPost.publicUuid},uk.e5.TILE_CONTENT),m=r.length>1,_=Y()(m?"feed_tile--feedPostHoverContainerWithThumbnails--KBMUL feed_tile--feedPostHoverContainer--JmxYf":"feed_tile--feedPostHoverContainer--JmxYf",!(a||s||d)&&"feed_tile--hidden--Zb11Q"),p={selectedContentIdx:o,onSetSelectedContentIdx:l},{fileData:f,fileIcon:x,fileLoaded:g,openFile:h}=(0,uT.nz)(e.feedPost.publicUuid,r,e.feedPost.fileKey);return(0,c.jsxs)("div",{ref:e=>{e&&(t.current=e)},className:Y()("feed_tile--fullHeightContentSection--fkHLk feed_tile--contentSection--BLRUq",m&&"feed_tile--fullHeightContentSection_WithThumbnails--sokhS"),children:[(0,c.jsx)(uI.$,{contentItems:r,feedPostIdx:e.feedIdx,feedPostUuid:e.feedPost.publicUuid,onContentHover:e=>i(e),onSelectedTileMouseDown:t=>e.onTileMouseDown(t,p),pageBackgroundColor:e.backgroundColor||void 0,selectedContentIdx:o,setSelectedContentIdx:l,source:uT.iz.TILE,staticContent:!0}),g&&(0,c.jsxs)("button",{className:Y()(_,uR,"feed_tile--hoverTopLeft--gSMLg"),onClick:h,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[(0,c.jsx)(rg.XV,{type:x,size:16}),(0,c.jsx)("div",{children:f.name})]}),(0,c.jsx)("button",{className:Y()(_,uR,"feed_tile--hoverTopRight--FzwSB"),onMouseDown:t=>e.onTileMouseDown(t,p),onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:(0,c.jsx)(r6.n,{svg:uS.Z})})]})}function uD(e){let t=(0,m.I0)(),r=u.useRef(null),a=(0,ea.xJ)(),i=(0,m.v9)(e=>e.teamFeedRefreshNonce),[s,n]=u.useState(null),o=(0,eB.A6)(),l="teamFeed"===o.view,d="user"===o.view;u.useEffect(()=>{l&&(u_.markFeedVisited({currentOrgId:e.currentOrgId}).then(e=>{n(e.data.meta?new Date(e.data.meta):null)}),t(eG.v({has_visited_feed:!0})))},[e.currentOrgId,i,t,l]);let _=(0,b.DG)(e0.rBI,{orgId:e.currentOrgId,firstPageSize:50,feedFilter:JSON.stringify({creator_id:e.selectedUser?.id??null}),refreshNonce:i}),p=(0,v.D9)(i);p&&p!==i&&r.current&&(r.current.scrollTop=0),u.useEffect(()=>{"errors"===_.status&&t(tp.R.enqueue({message:(0,A.t)("general.an_error_occurred"),error:!0}))},[t,_.status]);let f=u.useMemo(()=>"loaded"===_.status?{..._,data:_.data.feedPosts.filter(e=>!!e.feedPost)}:_,[_]),x="loaded"===f.status&&"loaded"===_.status,g=u.useCallback(()=>512,[]),h=f.data?f.data.length:0,y=(0,uu.o)({size:h,parentRef:r,estimateSize:g,overscan:15,paddingStart:0}),j=u.useRef(0);u.useEffect(()=>{j.current=f.data?.length??0},[x,f.data?.length]),u.useEffect(()=>{x&&(0,iU.L9)("Team Feed Posts Rendered",{numPosts:j.current,view:o.view,selectedUserId:e.selectedUser?.id},{forwardToDatadog:!0})},[e.selectedUser,j,x,o.view]);let[w,T]=u.useState(!1),I=_.data?.feedPosts?.loadNext,E=u.useCallback((e,t)=>{e>0&&!w&&((0,iU.L9)("Team Feed User Scrolled Down"),T(!0));let r=h/50,a=e+t.trackHeight,i=t.scrollHeight;1-(i-a)/(i/r)>=.5&&I?.(50)},[w,I,h]),k=u.useMemo(()=>{let e={};return f.data&&f.data.forEach((t,r)=>{e[t.publicUuid]=r}),e},[f]),[N,C]=u.useState(void 0),R=u.useCallback(e=>{C(e)},[]);u.useEffect(()=>{if(void 0===N||(C(void 0),N<0)||(N>=.5*h&&I?.(50),N>=h))return;let e=f.data[N];t(tF.cU({type:up.K.type,data:{postUuid:e.publicUuid,initialPreloadedPost:e.feedPost,feedIdx:N,requestToOpenPostByFeedIdx:R}}))},[N,t,f,R,I,h]);let S=u.useMemo(()=>{if(!s||!f.data)return null;let e=0,t=f.data.length-1,r=-1,i=0;for(;e<=t;){let a=Math.floor((e+t)/2);if(new Date(f.data[a].createdAt)>s?(r=a,e=a+1):t=a-1,(i+=1)>50)break}for(;r>=0&&a&&f.data[r].feedPost?.creator.id===a.id;)r-=1;return r},[s,f.data,a]),O=x&&f.data&&0===f.data.length&&e.selectedUser;return(0,c.jsx)(e_.l,{scrollContainerRef:r,className:"feed_list_view--scrollContainer--0zZ-I main_feed_view--scrollContainer--nNpG8",innerClassName:Y()("feed_list_view--scrollContainerInner--v2Tc3",d&&"feed_list_view--scrollContainerInnerProfile--tF-7M"),onScroll:E,children:(0,c.jsx)("div",{className:"feed_list_view--feedListContainer--2ihe9",children:O?(0,c.jsxs)("div",{className:"feed_list_view--noPostsFound--RJG-I",children:[(0,c.jsx)("div",{className:P.B.fontMedium.$,children:(0,A.tx)("fig_feed.no_posts_found_title")}),(0,c.jsx)("div",{className:P.B.colorTextSecondary.$,children:(0,A.tx)("fig_feed.no_posts_found_description")})]}):(0,c.jsx)("div",{style:{margin:"0 8px",height:`${y.totalSize}px`,position:"relative"},children:y.virtualItems.map(e=>{let t=e.index;if(!f.data||!f.data[t].feedPost)return null;let a=f.data[t].feedPost;return(0,c.jsx)(uO,{post:a,virtualRowItem:e,feedListRef:r,itemIdx:t,feedIdx:k[a.publicUuid],requestToOpenPostByFeedIdx:R,mostRecentUnviewed:l&&k[a.publicUuid]===S},e.key)})})})})}function uF(e){let t=(0,m.I0)(),r=(0,m.v9)(e=>e.teamFeedRefreshNonce);return u.useEffect(()=>{t(uc.sO({orgId:e.currentOrgId,bellActive:!1}))},[t,r,e.currentOrgId]),(0,c.jsx)(uD,{...e})}let uM="new_post_indicator--icon--eeq4R";var uL=r(469362),uB=r(384787);function uU(e){return(0,c.jsxs)("div",{className:"new_post_indicator--notification--KRfCK text--_negText--7Cnf0 _overlayBase--_overlayBase--VoHJ7",children:[(0,c.jsxs)("div",{className:"new_post_indicator--leftSide--lJksh",onClick:e.onRefresh,role:"button",tabIndex:0,children:[(0,c.jsx)(r6.n,{svg:uL.Z,className:uM}),(0,A.tx)("fig_feed.new_posts")]}),(0,c.jsx)("div",{className:"new_post_indicator--dismiss--1SeQ4",onClick:e.onDismiss,role:"button",tabIndex:0,children:(0,c.jsx)(r6.n,{svg:uB.Z,className:uM})})]})}function uV(e){let t=(0,m.I0)();u.useEffect(()=>((0,iU.L9)("Team Feed Posts List View Visited"),t(uc.sO({orgId:e.currentOrgId,bellActive:!1})),()=>{(0,iU.L9)("Team Feed List View Closed")}),[t,e.currentOrgId]);let r=u.useCallback(()=>t(uc.cV()),[t]),a=u.useCallback(()=>{r()},[r]),i=(0,m.v9)(t=>t.teamFeedBellStates[e.currentOrgId]),[s,n]=u.useState(!1),o=(0,v.D9)(i);return u.useEffect(()=>{i&&!1===o?n(!0):o&&!1===i&&n(!1)},[i,o,t]),u.useEffect(()=>{e.initialPostUuidToShow&&t((0,tF.K4)({type:up.K,data:{postUuid:e.initialPostUuidToShow}}))},[t,e.initialPostUuidToShow]),(0,c.jsxs)(c.Fragment,{children:[s&&(0,c.jsx)(uU,{onRefresh:a,onDismiss:()=>n(!1)}),(0,c.jsx)(uF,{currentOrgId:e.currentOrgId}),(0,c.jsx)(ud.ap,{})]})}function uG(e){let t=(0,m.v9)(e=>e.currentUserOrgId),r=u.useRef(new ul.B7);return(u.useEffect(()=>{r.current.start()},[]),t)?(0,c.jsx)(uV,{currentOrgId:t,initialPostUuidToShow:e.postUuid,creatorId:e.creatorId,feedViewTimer:r.current}):null}var uz=r(825945);function uW(e){let t=e.tabs?(0,c.jsx)(nF.m.TabStrip,{manager:e.tabManager,children:e.tabs.map(e=>(0,u.createElement)(nF.m.Tab,{...e.tabProps,key:e.tabName},e.tabName))}):(0,c.jsx)(c.Fragment,{});return(0,c.jsx)(iW.Nb,{leftSide:t,rightSide:e.viewbarActions||[]})}var uH=r(497597);let uK=e=>({tileSortFilterConfig:e.deletedFiles,sortKeys:[sV.BO.TRASHED_AT]}),uY=e=>({tileSortFilterConfig:e.trashedFolders,sortKeys:[sV.BO.TRASHED_AT,sV.BO.NAME]});function uZ({currView:e}){let t=(0,m.I0)(),r=(0,m.v9)(e=>e.tileSortFilterStateByView),a=((e,t,r)=>{let a=(0,uz.ws)(uK)(t);return[(0,c.jsx)(iW.rS,{dispatch:e,options:a,selectedView:r},0),(0,c.jsx)(iW.kP,{config:a.tileSortFilterConfig},1),(0,c.jsx)(iW.VP,{dispatch:e,options:a,selectedView:r},2),(0,c.jsx)(iW.vs,{initialViewMode:a.tileSortFilterConfig.viewMode,onViewModeChange:t=>{(0,iU.L9)("file view toggle",{viewType:t===sV.H6.GRID?"grid":"list"}),e(eF.lh({selectedView:r,config:{...a.tileSortFilterConfig,viewMode:t}}))}},3)]})(t,r,e),i=((e,t,r)=>{let a=(0,uz.ws)(uY)(t);return[(0,c.jsx)(iW.xT,{dispatch:e,options:a,selectedView:r},6),(0,c.jsx)(iW.VP,{dispatch:e,options:a,selectedView:r},4),(0,c.jsx)(iW.vs,{initialViewMode:a.tileSortFilterConfig.viewMode,onViewModeChange:t=>{(0,iU.L9)("folder view toggle",{viewType:t===sV.H6.GRID?"grid":"list"}),e(eF.lh({selectedView:r,config:{...a.tileSortFilterConfig,viewMode:t}})),e(eF.zu({viewId:uH._,viewMode:t}))}},5)]})(t,r,e),[s,n,o]=nF.m.useManagedTabs({deletedFiles:!0,trashedFolders:!0},e.view,u.useCallback(e=>{t(eL.fv({view:e}))},[t]));return(0,c.jsx)(uW,{tabManager:o,tabs:[{tabName:(0,A.t)("file_browser.tool_bar.trashed_files"),view:{view:"deletedFiles"},ariaLabel:(0,A.t)("file_browser.tool_bar.trashed_files.aria_label"),tabProps:s.deletedFiles},{tabName:(0,A.t)("file_browser.tool_bar.trashed_projects"),view:{view:"trashedFolders"},ariaLabel:(0,A.t)("file_browser.tool_bar.trashed_projects.aria_label"),tabProps:s.trashedFolders}],viewbarActions:"deletedFiles"===e.view?a:i})}var u$=r(22153);let uq=(e,t)=>{let r=rN.PI.getName(e)||"",a=rN.PI.getName(t)||"";return tN.Tk.compare(r,a)},uQ=(e,t)=>{let r=(rN.PI.getName(e)||"").toLowerCase(),a=(rN.PI.getName(t)||"").toLowerCase();return r===a?0:r<a?-1:1},uJ=(e,t)=>{if(e.type!==rN.YU.FILE||t.type!==rN.YU.FILE)return 0;let r=e.file,a=t.file;return r.createdAt<a.createdAt?1:-1},uX=(e,t)=>e.type!==rN.YU.PROTOTYPE||t.type!==rN.YU.PROTOTYPE?0:e.prototype.file_key<t.prototype.file_key?-1:1,u0=(e,t)=>{let r=rN.PI.getAccessedAt(e),a=rN.PI.getAccessedAt(t);return r&&a?r>a?1:-1:a?-1:1*!!r},u1=(e,t)=>rN.PI.getCreatedAt(e)>rN.PI.getCreatedAt(t)?1:-1,u5=(e,t)=>{let r=rN.PI.getTouchedAt(e),a=rN.PI.getTouchedAt(t);return null===r||null===a?0:r>a?1:-1},u2=(e,t)=>e.type!==rN.YU.FILE&&e.type!==rN.YU.REPO||t.type!==rN.YU.FILE&&t.type!==rN.YU.REPO?0:(e.type===rN.YU.FILE?e.file.trashedAt:e.repo.trashed_at)>(t.type===rN.YU.FILE?t.file.trashedAt:t.repo.trashed_at)?1:-1;function u4({tilesResult:e,tileSortFilterConfig:t,isDataPartial:r,isDraftsFolder:a}){let i=(0,eB.A6)(),s="recentsAndSharing"===i.view&&i.tab===sU.D5.SHARED_FILES;return u.useMemo(()=>e.transform(e=>{let n,o,l,d=e.filter(e=>{var r;return r=t.filters.sharedBy,(!r||r===`${rN.PI.getSharedBy(e)}`)&&((e,t)=>{let r="design";switch(t.type===rN.YU.FILE||t.type===rN.YU.PINNED_FILE?r=t.file.editorType:t.type===rN.YU.OFFLINE_FILE&&(r=t.file.editorType),e){case sV.$Q.ANY:return!0;case sV.$Q.DESIGN:if(t.type===rN.YU.FILE||t.type===rN.YU.REPO||t.type===rN.YU.PINNED_FILE||t.type===rN.YU.OFFLINE_FILE)return"design"===r;return!1;case sV.$Q.FIGJAM:if(t.type===rN.YU.FILE||t.type===rN.YU.PINNED_FILE||t.type===rN.YU.OFFLINE_FILE)return"whiteboard"===r;return!1;case sV.$Q.PROTOTYPE:return t.type===rN.YU.PROTOTYPE;case sV.$Q.SLIDES:if(t.type===rN.YU.FILE||t.type===rN.YU.PINNED_FILE||t.type===rN.YU.OFFLINE_FILE)return"slides"===r;return!1;case sV.$Q.SITES:if(t.type===rN.YU.FILE||t.type===rN.YU.PINNED_FILE||t.type===rN.YU.OFFLINE_FILE)return"sites"===r;return!1;case sV.$Q.COOPER:if(t.type===rN.YU.FILE||t.type===rN.YU.PINNED_FILE||t.type===rN.YU.OFFLINE_FILE)return"cooper"===r;return!1;case sV.$Q.MAKE:if(t.type===rN.YU.FILE||t.type===rN.YU.PINNED_FILE||t.type===rN.YU.OFFLINE_FILE)return"figmake"===r;return!1;default:(0,O.vE)(e)}})(t.filters.fileType,e)&&(!!s||((e,t)=>{if(!e||!e.planId)return!0;let r=e.planId;switch(t.type){case rN.YU.FILE:return("org"===e.planType?t.file.parentOrgId:t.file.teamId)===r;case rN.YU.REPO:return("org"===e.planType?t.repo.parent_org_id:t.repo.team_id)===r;case rN.YU.PROTOTYPE:return("org"===e.planType?t.prototype.parent_org?.id:t.prototype.parent_team?.id)===r;case rN.YU.OFFLINE_FILE:return"org"===e.planType&&t.file.orgId===r;default:return!1}})(t.filters.plan,e))});if(n=s?d.filter(e=>e.type===rN.YU.FILE||e.type===rN.YU.PROTOTYPE||e.type===rN.YU.REPO):d.filter(e=>e.type===rN.YU.FILE||e.type===rN.YU.REPO||e.type===rN.YU.OFFLINE_FILE),"recentsAndSharing"===i.view&&i.tab===sU.D5.SHARED_FILES)return d;let c=t.sort.dir===sV.qP.DESC;switch(t.sort.key){case sV.BO.ACCESSED_AT:o=u$.s.byComparators(u0),l=d;break;case sV.BO.CREATED_AT:o=u$.s.byComparators(u1),l=d;break;case sV.BO.TOUCHED_AT:o=u$.s.byComparators(u5),l=n;break;case sV.BO.NAME:if(a){o=u$.s.byComparators(uq,u$.s.byProperty("type")),l=d;break}let u=d.length<tN.DD;o=u$.s.byComparators(u?uq:uQ,u$.s.byProperty("type"),uJ,uX),l=d;break;case sV.BO.TRASHED_AT:o=u$.s.byComparators(u2),l=n;break;case sV.BO.SHARED_AT:return d;default:return console.error("Unknown sort key",t.sort.key),[]}if(o=c?u$.s.reverse(o):o,l.sort(o),r)for(;l[l.length-1]?.type===rN.YU.OFFLINE_FILE;)l.pop();return l}),[e,s,r,a,i,t])}var u9=r(523387),u7=r(685059),u3=r(479810),u6=r(965035),u8=r(107876),me=r(759299),mt=r(996373),mr=r(347507),ma=r(934018),mi=r(216218),ms=r(473884),mn=r(387638),mo=r(998324),ml=r(198681),md=r(428785),mc=r(196807);function mu({dropdownData:e,isFolder:t,isDropdownOpen:r,tileActions:a,selectedTiles:i,openTile:s}){let n=e?.tile??null,o=e?.index;return(0,c.jsx)(r8.Ui,{name:t?at.V4.PROJECT_TILES_VIEW_DROPDOWN:at.V4.TILES_VIEW_DROP_DOWN,enabled:r,properties:{tileType:n?.type,tileFileId:n?.type===rN.YU.FILE?n?.file.key:void 0},children:(0,c.jsx)(ol.b,{tileActions:a,tile:n,selectedTiles:i,openTile:e=>{n&&s(n,e,o)},dropdownVisible:r})})}var mm=r(864197);function m_({currentProgress:e,totalAllowed:t}){return(0,c.jsxs)(mm.j,{spacing:"auto",children:[(0,c.jsxs)("div",{className:P.B.relative.wFull.$,...{className:"x1b68738 x1n2onr6"},children:[(0,c.jsx)("div",{className:P.B.absolute.wFull.$,children:(0,c.jsx)(mm.j,{cornerRadius:5,height:6,backgroundColor:"secondary"})}),(0,c.jsx)("div",{className:P.B.absolute.wFull.flex.itemsCenter.$,children:(0,c.jsx)(mm.j,{cornerRadius:5,height:6,width:`${Math.min(e/t*100,100)}%`,backgroundColor:e>=t?"warning":"brand"})})]}),(0,c.jsx)("div",{...{className:"x1i0uq9b x1ok221b xp5pvr8 x4z9k3i xk50ysn x1d3mw78 x122x9cr"},children:(0,A.t)("file_browser.starter_limit_global.files_used",{numFilesUsed:e,totalFiles:t})})]})}function mp({text:e,tooltipText:t,currentProgress:r,totalProgress:a}){return(0,c.jsxs)(mm.j,{direction:"vertical",height:"hug-contents",spacing:"7px",children:[(0,c.jsxs)(mm.j,{horizontalAlignItems:"space-between",children:[(0,c.jsxs)(mm.j,{spacing:4,children:[(0,c.jsx)(D.x,{fontSize:13,fontWeight:"medium",children:e}),(0,c.jsx)("div",{"data-tooltip-type":ae.fR.TEXT,"data-tooltip":t,"data-tooltip-show-above":!0,"data-tooltip-show-immediately":!0,"data-tooltip-tip-align-left":!0,"data-tooltip-text-left":!0,children:(0,c.jsx)(ug.JO,{icon:"info-16",fill:"secondary"})})]}),(0,c.jsxs)(D.x,{fontSize:13,fontWeight:"medium",children:[r,"/",a]})]}),(0,c.jsxs)("div",{className:P.B.relative.wFull.$,children:[(0,c.jsx)("div",{className:P.B.absolute.wFull.$,children:(0,c.jsx)(mm.j,{cornerRadius:5,height:5,backgroundColor:"disabled"})}),(0,c.jsx)("div",{className:P.B.absolute.wFull.$,children:(0,c.jsx)(mm.j,{cornerRadius:5,height:5,width:`${Math.min(r/a*100,100)}%`,backgroundColor:r>=a?"warning":"brand"})})]})]})}let mf=(0,r8.z7)(tV.zx);function mx(e){return(0,c.jsx)(aP.X,{label:"StarterLimitOverview",children:(0,c.jsx)(mg,{...e})})}function mg({canEditTeam:e,isDraftsFolder:t}){let r=(0,m.I0)(),a=(0,aB.Rs)(),i=(0,eB.A6)(),s=(0,p.BZ)().sites_design_starter_combined_file_limit;return t||!a||(0,iC.e3)(a)||"folder"!==i.view||s?null:(0,c.jsx)(mh,{folderId:i.folderId,showPlanComparisonModal:()=>{r((0,tF.K4)({type:aF.n,data:{upsellSource:aU.V.STARTER_LIMIT_OVERVIEW,teamId:a.id}}))},canEditTeam:e})}function mh({folderId:e,showPlanComparisonModal:t,canEditTeam:r}){let a=(0,q.bq)(),i=(0,b.DG)((0,e0.sYg)({projectId:e})),s=is.t.useTrackingContext({trigger:aU.V.STARTER_LIMIT_OVERVIEW});if("loaded"!==i.status)return null;let n=i.data.project?.team?.projectsCount.status==="loaded"?i.data.project?.team?.projectsCount.data??1:1,o=i.data.project?.team?.teamFileCounts?.designFileCount??0,l=i.data.project?.team?.teamFileCounts?.whiteboardFileCount??0,d=i.data.project?.team?.teamFileCounts?.slideFileCount,u=d?parseInt(d,10):0,m=(0,ec.Wg)(i.data.project?.team?.teamFileCounts?.totalFileCount)??0,_=a?m>=iC.Hf:o>=iC.Hf||l>=iC.Hf;return(0,c.jsx)(r8.Ui,{name:"Starter Limit Overview",properties:s,children:(0,c.jsx)("div",{className:Y()(P.B.cursorDefault.mr32.maxW300.colorBg.$,"starter_limit_overview--responsiveHide--9jRfR"),style:s4.sx.sticky.add({alignSelf:"flex-start",top:"128px",maxWidth:a?"280px":"300px"}).$,children:(0,c.jsxs)(mm.j,{direction:"vertical",padding:a?16:32,spacing:a?"auto":24,cornerRadius:a?13:8,strokeWidth:1,strokeColor:"default",height:"hug-contents",children:[(0,c.jsx)("div",{...{0:{},1:{className:"xrbesu5 x12cwyba x1l993ej x1ejgcx7 x1aos5ly"}}[0|!!a],children:a?(0,A.tx)("file_browser.starter_limit_global.your_plan_files"):(0,c.jsx)(D.x,{fontSize:16,fontWeight:"semi-bold",children:(0,A.tx)("file_browser.starter_limit.your_starter_team_overview")})}),(0,c.jsx)(mv,{numProjects:n,numFigmaFilesUsed:o,numFigjamFilesUsed:l,numSlidesFilesUsed:u,totalFilesUsed:m,isStarterGlobalFileLimitOn:a}),r?(0,c.jsxs)(mm.j,{direction:"vertical",spacing:"12px",children:[a?(0,c.jsx)("div",{...{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up xmzs88n x1xmf6yo"},children:(0,A.tx)("file_browser.starter_limit_global.description")}):(0,c.jsx)(D.x,{fontSize:13,children:(0,A.tx)(_?"file_browser.starter_limit.running_out_of_files":"file_browser.starter_limit.enough_for_you_to_get_started")}),(0,c.jsx)(mf,{onClick:t,trackingProperties:{trackingDescriptor:ev.y.VIEW_PLANS,numFiles:m},children:(0,A.tx)("upgrade.view_plans")})]}):(0,c.jsx)(D.x,{fontSize:13,children:(0,A.tx)("file_browser.starter_limit.trying_things_out")})]})})})}function mv({numProjects:e,numFigmaFilesUsed:t,numFigjamFilesUsed:r,numSlidesFilesUsed:a,totalFilesUsed:i,isStarterGlobalFileLimitOn:s}){return(0,c.jsxs)(mm.j,{direction:"vertical",spacing:24,width:s?"100%":234,children:[s&&(0,c.jsx)(m_,{currentProgress:i,totalAllowed:iC.Hf}),!s&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(mp,{text:(0,A.t)("file_browser.starter_limit.projects"),tooltipText:(0,A.t)("file_browser.starter_limit.projects.tooltip"),currentProgress:e,totalProgress:iC.kl}),(0,c.jsx)(mp,{text:(0,A.t)("file_browser.starter_limit.design_files"),tooltipText:(0,A.t)("file_browser.starter_limit.design_files.tooltip"),currentProgress:t,totalProgress:iC.Hf}),(0,c.jsx)(mp,{text:(0,A.t)("file_browser.starter_limit.figjam_boards"),tooltipText:(0,A.t)("file_browser.starter_limit.figjam_boards.tooltip"),currentProgress:r,totalProgress:iC.Hf}),(0,c.jsx)(mp,{text:(0,A.t)("file_browser.starter_limit.slides"),tooltipText:(0,A.t)("file_browser.starter_limit.slides.tooltip"),currentProgress:a,totalProgress:iC.Hf})]})]})}var mb=r(103319),my=r(362971);let mj="open_invoice_reminder_card--icon--jgeOf";function mw(e){let t=(0,m.I0)(),r=e.team.restrictions_list?.includes(eH.ZG.LOCKED),a=e.canAdminTeam?r?(0,A.t)("billing.open_invoice_reminder.title"):(0,A.t)("billing.open_invoice_reminder.grace_period_title"):(0,A.t)("billing.open_invoice_reminder.title_viewer"),i=e.canAdminTeam?r?(0,A.t)("billing.open_invoice_reminder.locked_admin_description"):(0,A.t)("billing.open_invoice_reminder.grace_period_admin_description"):(0,A.t)("billing.open_invoice_reminder.locked_viewer_description"),s=e.canAdminTeam?(0,A.t)("billing.open_invoice_reminder.cta"):null,n={"data-tooltip-type":ae.fR.TEXT,"data-tooltip":(0,A.t)("billing.open_invoice_reminder.button_tooltip"),"data-tooltip-show-immediately":!0};return(0,c.jsxs)(mm.j,{direction:"vertical",padding:20*!e.noPaddingOrBorder,spacing:24,width:288,cornerRadius:e.noPaddingOrBorder?void 0:8,strokeWidth:e.noPaddingOrBorder?void 0:1,strokeColor:"default",height:"hug-contents",children:[(0,c.jsx)("div",{className:P.B.flex.justifyBetween.wFull.$,children:(0,c.jsx)("div",{className:P.B.flex.itemsCenter.justifyCenter.w32.h32.bRadius5.colorBgWarning.$,children:r?(0,c.jsx)(mb.m,{className:mj}):(0,c.jsx)(my.A,{className:mj})})}),(0,c.jsx)("div",{className:P.B.font14.fontSemiBold.lh24.$,children:a}),(0,c.jsx)("div",{className:P.B.font13.lh24.$,children:i}),!!s&&(0,c.jsx)("div",{className:P.B.flex.justifyEnd.wFull.$,children:(0,c.jsx)(tV.ps,{onClick:()=>t(eL.fv({view:"teamAdminConsole",teamId:e.team.id,teamAdminConsoleViewTab:e2.mb.BILLING})),variant:"primary",htmlAttributes:n,children:s})})]})}function mT(e){return e.team.restrictions_list?.includes(eH.ZG.LOCKED)||e.canAdminTeam?(0,c.jsx)(r8.Ui,{name:"Open Invoice Reminder Card",properties:{teamId:e.team.id},children:(0,c.jsx)(mw,{...e})}):null}var mI=r(141204);function mE({team:e,canEditTeam:t,canAdminTeam:r,isDraftsFolder:a,shouldShowLockedRedesign:i,shouldShowLockedProTeamRevampDesign:s}){return e&&i?(0,c.jsx)("div",{...{className:"x1hx13ah"},children:(0,c.jsx)(mI.Q,{teamId:e.id,canEditTeam:t})}):e&&s?(0,c.jsx)("div",{...{className:"x1hx13ah"},children:(0,c.jsx)(mT,{team:e,canAdminTeam:r})}):(0,c.jsx)(mx,{canEditTeam:t,isDraftsFolder:a})}var mk=r(254290);let mN="tiles_view--container--a-UV-",mC="tiles_view--emptyState--n6KR- text--fontPos11--rO47d text--_fontBase--VaHfk";function mR({tile:e,index:t,dispatch:r,selectedView:a,currentPlanFilter:i,currentSharedByFilter:s,isListView:n}){e.type===rN.YU.FILE&&(r(S.ku({fileKey:e.file.key,entrypoint:"file tile",currentPlanFilter:i,currentSharedByFilter:s,viewMode:void 0!==n?n?"list":"grid":void 0})),(0,mo.gC)(a)&&r(S.jv({index:t})),x.YO&&(0,iU.L9)("Open File Click",{fileKey:e.file.key,fileRepoId:e.file.fileRepoId,uiSelectedView:JSON.stringify(a)}))}function mS({currentPlanFilter:e,currentSharedByFilter:t,emptyStateContent:r,emptyStateText:a,isDraftsFolder:i=!1,isFolder:s,isEligbileForProTeamLockedRevampUI:n,newFileTile:o,overFilteredText:l,shouldLogVisibleTileCount:d=!1,sortFilterOptions:_,tileActions:f,tiles:h,sortedFilteredTiles:v}){let y=(0,eB.A6)(),j="folder"===y.view?y.folderId:null,T=rw.t1.Folder.useValue(j).data,{showing:I,show:E,data:k}=(0,oo.H)(),N=(0,eW.Mn)(),C=(0,aB.Rs)(),R=T?.team_id||C?.id,S=(0,b.DG)((0,e0.C13)((0,ms.br)(ms.mU.GROUP_7)&&R?{teamId:R}:null)),D=u.useMemo(()=>S.transform(({team:e})=>!!e?.canEdit),[S]),F=(0,sT.F7)({label:sT.NL.TilesView.canEditTeam,oldValue:iI.IE.useMemoizedLoaded((0,i9.canEditTeam)(T?.team_id||C?.id||"",N)),newValue:D,enableShadowRead:!1,enableFullRead:(0,ms.XP)(ms.mU.GROUP_7),contextArgs:{folderTeamId:T?.team_id,teamFromFileBrowserId:C?.id}}).unwrapOr(!1),M=u.useMemo(()=>S.transform(({team:e})=>!!e?.canAdmin).unwrapOr(!1),[S]),L=(0,on.j)();u.useEffect(()=>{let e="page_selected_view",t=u3.xb.get(e);if(t&&t.isRunning&&!t.isUnreliable){let t=u3.xb.tryStop(e);t&&(0,iU.L9)("File Browser Tab Switch Page Load Time",{elapsedMs:t,selectedView:y.view},{forwardToDatadog:!0,batchRequest:!0})}},[y.view,j]);let B=(0,iT.c)(e=>e.selectedBranchKeyByRepoId),U=u.useMemo(()=>(0,i9.isOrgUserExternallyRestrictedFromState)(N),[N]),V=(0,m.I0)(),G=(0,eP.ZR)(C?.id),z=!!C&&G,W=!!C&&!!n,H=_.tileSortFilterConfig.viewMode??sV.H6.GRID,K=H===sV.H6.LIST,Y=(0,ex.Dv)(rN.yC),Z=u.useCallback((r,a,i)=>{mR({tile:r,index:i,dispatch:V,selectedView:y,currentPlanFilter:e,currentSharedByFilter:t,isListView:K}),(0,p.BZ)().kill_tile_view_open_generic_tile?L(r,a):function({tile:e,e:t,dispatch:r,selectedView:a,permissionsState:i,selectedBranchKeyByRepoId:s,renamingItem:n}){if(rN.PI.isRenaming(e,n)||e.type===rN.YU.FILE&&e.file.trashedAt||e.type===rN.YU.REPO&&e.repo.trashed_at){t.preventDefault(),t.stopPropagation();return}let o=w.ZP.mac?t.metaKey:t.ctrlKey,l=null;o&&t.shiftKey?l=x.ih.FOCAL_TAB:o?l=x.ih.BACKGROUND_TAB:t.shiftKey&&(l=x.ih.NEW_WINDOW);let d=i.user;if(x.YO){let a;switch(l=l??x.ih.FOCAL_TAB,t.preventDefault(),t.stopPropagation(),e.type){case rN.YU.FILE:a=!!(e.file.isTeamTemplate&&(0,ez._J)(i)),x.YO.openFile({fileKey:e.file.key,title:e.file.name||"Untitled",fileEditorType:e.file.editorType,target:l,isBranch:(0,mi.vp)(e.file),isLibrary:!!e.file.lastPublishedAt,isTeamTemplate:a,userId:d?.id});break;case rN.YU.PINNED_FILE:a=!!(e.file.isTeamTemplate&&(0,ez._J)(i)),x.YO.openFile({fileKey:e.file.key,title:e.file.name||"Untitled",fileEditorType:e.file.editorType,isTeamTemplate:a,target:l,userId:d?.id});break;case rN.YU.PROTOTYPE:x.YO.openPrototype(e.prototype.file_key,e.prototype.page_id,e.prototype.fig_file.name||"",l,d?.id);break;case rN.YU.REPO:let n=(0,mi.T)(e.repo,e.branches,s);x.YO.openFile({fileKey:n.key,title:n.name,fileEditorType:n.editor_type,target:l,isBranch:(0,mi.kO)(n),isLibrary:!!n.last_published_at,userId:d?.id});break;case rN.YU.OFFLINE_FILE:r(mt.mp({file:e.file,openNewFileIn:oW.JD.NEW_TAB,source:ml.j.OFFLINE_FILE_TILE}));break;default:(0,O.vE)(e)}return}if(null!=l){if(r(eL.kp()),e.type===rN.YU.OFFLINE_FILE){r(mt.mp({file:e.file,openNewFileIn:oW.JD.NEW_TAB,source:ml.j.OFFLINE_FILE_TILE})),t.preventDefault(),t.stopPropagation();return}if(t instanceof KeyboardEvent){let r=rN.PI.getUrl(e,s);g.ZP.redirect(r,"_blank"),t.preventDefault(),t.stopPropagation()}return}t.preventDefault(),t.stopPropagation();let c=i.currentUserOrgId,u=i.currentTeamId,m="recentsAndSharing"===a.view||"folder"===a.view?a:void 0;r(mr.cy({planId:c||u,planType:c?oH.k.ORG:oH.k.TEAM}));let _={user:d,teamId:u,orgId:c,selectedView:a};switch(e.type){case rN.YU.FILE:(0,ob.km)(c,e.file.parentOrgId,u,e.file.teamId)?(0,ob.wD)({file:{key:e.file.key,editorType:e.file.editorType||void 0}},_):r(eL.fv({view:"fullscreen",fileKey:e.file.key,editorType:mn.bd.getIsExtension()?md.TU.DevHandoff:e.file.editorType?(0,md.l0)(e.file.editorType):md.TU.Design,prevSelectedView:m}));break;case rN.YU.PINNED_FILE:(0,ob.km)(c,e.file.parentOrgId,u,e.file.teamId)?(0,ob.wD)({file:{key:e.file.key,editorType:e.file.editorType}},_):r(eL.fv({view:"fullscreen",fileKey:e.file.key,editorType:e.file.editorType?(0,md.l0)(e.file.editorType):md.TU.Design,prevSelectedView:m}));break;case rN.YU.PROTOTYPE:let p=e.prototype.fig_file;(0,ob.km)(c,p.parent_org_id,u,p.team_id)?(0,ob.wD)({base:"proto",file:{key:p.key,editorType:p.editor_type||void 0},nodeId:e.prototype.page_id},_):r(eL.fv({view:"prototype",file:p,nodeId:e.prototype.page_id,prevSelectedView:m}));break;case rN.YU.REPO:{let t=(0,mi.T)(e.repo,e.branches,s);if(!t)throw Error(`Branch not found for repo ${e.repo.id}`);let a=t.key;(0,ob.km)(c,t.parent_org_id,u,t.team_id)?(0,ob.wD)({file:{key:a}},_):r(eL.fv({view:"fullscreen",fileKey:a,editorType:md.TU.Design,prevSelectedView:m}));break}case rN.YU.OFFLINE_FILE:r(mt.mp({file:e.file,openNewFileIn:oW.JD.SAME_TAB,source:ml.j.OFFLINE_FILE_TILE}));break;default:(0,O.vE)(e)}}({tile:r,e:a,dispatch:V,selectedView:y,permissionsState:N,selectedBranchKeyByRepoId:B,renamingItem:Y})},[K,e,t,V,N,L,B,y,Y]),$=u.useCallback((r,a,i)=>{mR({tile:r,index:i,dispatch:V,selectedView:y,currentPlanFilter:e,currentSharedByFilter:t,isListView:K})},[K,e,t,y,V]),q=u.useCallback((e,t,r)=>{let a=rN.PI.getId(e);u8.G.start(a),E({data:{tile:e,targetRect:{top:t.clientY,right:t.clientX,bottom:t.clientY,left:t.clientX,width:1,height:1},index:r}})},[E]),Q=(0,rN.H3)(v),[J,X]=u.useState([]),{visibleTiles:ee,setVisibleTiles:et}=function({shouldLogVisibleTileCount:e,viewMode:t,sortedFilteredTilesLength:r}){let[a,i]=u.useState(null),s=(0,eB.A6)().view,n=u.useRef(!1);return u.useEffect(()=>{let i=n.current;e&&!i&&a&&(iU.RQ.trackDefinedEvent("file_browser.visible_tiles_count",{totalCount:r,visibleCount:a.length,viewMode:(0,mc.nC)(t),selectedView:s,viewportWidth:window.innerWidth,viewportHeight:window.innerHeight,isMobileDevice:w.ZP.mobile}),n.current=!0)},[a,e,t,r,s]),{visibleTiles:a,setVisibleTiles:i}}({shouldLogVisibleTileCount:d,viewMode:H,sortedFilteredTilesLength:v.length});(0,u6.LB)(ee??[]);let er=(0,eB.A6)(),ea=(0,m.I0)(),ei=(0,u7.vE)(()=>{if("deletedFiles"===er.view)return[];let e=[];return J.forEach(t=>{switch(t.type){case rN.YU.FILE:e.push({fileKey:t.file.key});break;case rN.YU.REPO:let r=(0,rN.u9)(t);e.push({fileKey:r.key})}}),e},[er.view,J]),es=(0,b.YW)(e0.Sjm,ei);if(u.useEffect(()=>{for(let{result:e,args:t}of es)if("loaded"===e.status&&e.data){let r=(0,ma.oK)(e.data);ea(rv.Wb({fileKey:t.fileKey,users:r}))}},[es,ea]),0===v.length){let e=(()=>{if(h.length>0&&""!==l){let e=l??(0,A.t)("file_browser.tiles_view.default_overfiltered_text");return(0,c.jsx)("div",{className:mC,"data-test-id":"over-filtered-state-text",children:e})}let e="";return(a?e=a:(w.ZP.mobile||w.ZP.tablet)&&(e=(0,A.t)("file_browser.folder.this_project_is_empty")),e)?(0,c.jsx)("div",{className:mC,"data-test-id":"empty-state-text",children:e}):null})();if(e)return(0,c.jsx)("div",{className:mN,children:(0,c.jsxs)("div",{className:P.B.flex.$,children:[e,!!C&&(0,c.jsx)(mE,{shouldShowLockedRedesign:z,shouldShowLockedProTeamRevampDesign:W,team:C,canEditTeam:F,canAdminTeam:M,isDraftsFolder:i})]})});if(r)return(0,c.jsx)("div",{className:mN,children:r})}let en=mN+(K?` ${mk.nM} `:` ${mk.Zl} `),eo=h.length>0,el=!!C?.restrictions_list?.includes(eH.ZG.LOCKED),ed=z||el&&W;return(0,c.jsxs)("div",{className:mN,children:[(0,c.jsxs)("div",{className:en,children:[(0,c.jsxs)("div",{className:P.B.flex.$,children:[eo&&(0,c.jsx)(me.E,{sortConfig:_.tileSortFilterConfig.sort,handleOpenTile:$,items:v,sortBy:e=>{let t=_.tileSortFilterConfig,r=t.sort.dir===sV.qP.DESC?sV.qP.ASC:sV.qP.DESC;V(eF.lh({selectedView:y,config:{...t,sort:{key:e,dir:e===t.sort.key?r:t.sort.dir}},tab:"recentsAndSharing"===y.view?y.tab||sU.D5.RECENTLY_VIEWED:void 0}))},viewType:K?sV.H6.LIST:sV.H6.GRID,updateRenderedItems:X,updateVisibleItems:et,handleOpenDropdown:q,checksForViewOnlyLabels:ed?{teamId:C.id,isLockedTeam:!0}:void 0}),eo&&(0,c.jsx)(mE,{shouldShowLockedRedesign:z,shouldShowLockedProTeamRevampDesign:W,team:C,canEditTeam:F,canAdminTeam:M,isDraftsFolder:i})]}),!(w.ZP.mobile||w.ZP.tablet)&&o&&!U&&!eo&&(0,c.jsxs)("div",{className:P.B.flex.$,children:[(0,c.jsx)("div",{className:"tiles_view--importPrompt--vE31l",children:(0,c.jsxs)("div",{className:mC,children:[(0,c.jsx)("div",{className:"tiles_view--emptyTitle--yIxCD",children:s?(0,A.t)("file_browser.folder.this_project_doesn_t_have_any_files"):(0,A.t)("file_browser.folder.no_files_yet")}),(0,A.tx)("file_browser.folder.create_a_new_file_to_start_from_scratch_with_pptx")]})}),(0,c.jsx)(mE,{shouldShowLockedRedesign:z,shouldShowLockedProTeamRevampDesign:W,team:C,canEditTeam:F,canAdminTeam:M,isDraftsFolder:i})]})]}),(0,c.jsx)(mu,{dropdownData:k,isFolder:s,isDropdownOpen:I,tileActions:f,selectedTiles:Q,openTile:Z})]})}var mO=r(995113),mP=r(444505);function mA(){let e=(0,ei.Y)(),t=(0,m.v9)(e=>e.currentTeamId),r=(0,m.v9)(e=>e.tileSortFilterStateByView),a={restore:!0,restoreToOtherFolders:!0,deleteForever:!0,duplicateToDrafts:!e},i=(0,eO.vI)(t),s=(0,uz.ws)(e=>({tileSortFilterConfig:e,sortKeys:[sV.BO.TRASHED_AT,sV.BO.NAME,sV.BO.CREATED_AT,sV.BO.TOUCHED_AT]}))(r.deletedFiles),{creatorFilter:n,fileTypeFilter:o}=function(e){let t="your_files";switch(e.tileSortFilterConfig.filters.creator){case sV.FN.SELF:t="your_files";break;case sV.FN.OTHER:t="other_files";break;case sV.FN.ANY:t="all";break;default:(0,O.vE)(e.tileSortFilterConfig.filters.creator)}let r="";switch(e.tileSortFilterConfig.filters.fileType){case sV.$Q.DESIGN:r="design";break;case sV.$Q.FIGJAM:r="whiteboard";break;case sV.$Q.PROTOTYPE:r="prototype";break;case sV.$Q.SLIDES:r="slides";break;case sV.$Q.SITES:r="sites";break;case sV.$Q.COOPER:r="cooper";break;case sV.$Q.MAKE:r="figmake";break;case sV.$Q.ANY:r="";break;default:(0,O.vE)(e.tileSortFilterConfig.filters.fileType)}return{creatorFilter:t,fileTypeFilter:r}}(s),l=(0,e1.yK)({reportErrorsToTeam:H.k.WAYFINDING}),{subscription:d,fetchNextPage:_,isFetchingNextPage:p}=function(e){let t=(0,b.DG)(e0.ryp,{...e,firstPageSize:55}),r=(0,u.useCallback)(()=>{t.data?.trashedResources?.loadNext(55)},[t,55]),a="loaded"===t.status&&t.data.trashedResources.isLoadingNextPage,i=(0,u.useMemo)(()=>t.transform(e=>{let t=e.trashedResources;return t?t.reduce((e,t)=>{if(t.file&&t.file.trashedAt){var r;e.push((r=t.file,{type:rN.YU.FILE,file:{...r,signedPreviewThumbnailUrls:null},sharedWithYouFields:null}))}else if(t.repo&&t.repo.trashedAt){let r=function(e){if(!e.sourceFile)return null;let t=mP.R.toSinatra(e);return{type:rN.YU.REPO,repo:t,branches:[oc.v.toSinatra(e.sourceFile)],selectedBranchKey:e.sourceFile.key}}(t.repo);r&&e.push(r)}return e},[]):[]}),[t]),s=(0,m.I0)();return(0,u.useEffect)(()=>{if(i.data){let e=i.data?.filter(e=>e.type===rN.YU.FILE).map(e=>oc.v.toSinatra(e.file))||[],t=i.data?.filter(e=>e.type===rN.YU.REPO).map(e=>e.repo)||[];s(rv.qV({files:e})),s(mO.qV({repos:t}))}},[i.data,s]),{subscription:i,fetchNextPage:r,isFetchingNextPage:a}}({cursor:null,creatorFilter:n,fileTypeFilter:o,sortType:s.tileSortFilterConfig.sort.key===sV.BO.TRASHED_AT?"trashed_at":"name",sortDirection:s.tileSortFilterConfig.sort.dir===sV.qP.ASC?"asc":"desc",planId:l?.key.parentId??null,planType:l?.key.type??null,queryParams:null}),f=u4({tilesResult:d,tileSortFilterConfig:s.tileSortFilterConfig}),x=u.useCallback(()=>{p||_()},[p,_]),g=s.tileSortFilterConfig.filters,h=s.tileSortFilterConfig.sort;return(0,c.jsx)(eu._k,{loadingElementId:"loading-content-pane",result:iI.IE.all([d,f]),loadingElementClassName:P.B.pr32.$,children:([e,t])=>(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(u9.o,{onShouldFetchNextPage:x,isFetchingNextPage:p,children:(0,c.jsx)(mS,{tiles:e,sortedFilteredTiles:t,newFileTile:!1,tileActions:a,sortFilterOptions:s,emptyStateText:(0,A.t)("file_browser.tool_bar.trashed_empty_state"),isEligbileForProTeamLockedRevampUI:i})},`${n}-${g.fileType}-${h.key}-${h.dir}`),(0,c.jsx)(ud.ap,{})]})})}var mD=r(589937),mF=r(955009),mM=r(843589),mL=r(164526),mB=r(541189);function mU({canEditTeam:e}){var t;let r=(0,m.I0)(),a=(0,aB.Rs)(),i=(0,eB.fh)(),s=(0,T.it)("exp_fbg_project_limit_upsell"),n=is.t.useTrackingContext({trigger:aU.V.FOLDER_UPSELL_CARD});if(t=(0,e1.Mz)("FolderUpsellCard").unwrapOr(null),!t||!e||t.tier!==eH.Lz.STARTER||"recentsAndSharing"===i||"trashedFolders"===i||!s.getConfig().getValue("show_upsell",!1))return null;let o=(0,c.jsx)(ar.Z6,{className:P.B.noWrap.cursorDefault.$,onClick:e=>{e.stopPropagation(),e.preventDefault(),r((0,tF.K4)({type:aF.n,data:{upsellSource:aU.V.FOLDER_UPSELL_CARD,teamId:a?.id}}))},trackingProperties:{trackingDescriptor:ev.y.PROFESSIONAL_PLAN,...n},trusted:!0,canFocus:!0,children:(0,A.tx)("team_view.folder_upsell.professional_plan")});return(0,c.jsx)(r8.Ui,{name:"Folder Upsell Card",properties:n,children:(0,c.jsxs)(r8.XT,{className:Y()(P.B.flex.flexColumn.alignLeft.p24.$,"folder_upsell--card--VO1se"),onClick:()=>{r((0,tF.K4)({type:mB.yd,data:{team:a,resource:mL.Q3.FOLDER,action:rn.XH.CREATE_FOLDER,currentPlan:mM.V.Plan.STARTER,upsellPlan:mM.V.Plan.PRO,editorType:null,upsellSource:aU.V.FOLDER_UPSELL_CARD}}))},trackingProperties:{trackingDescriptor:ev.y.FOLDER_UPSELL_CARD},dataTestId:"folder_upsell_button",children:[(0,c.jsxs)("div",{className:P.B.relative.wFull.$,children:[(0,c.jsx)(mF.v,{FileThumbnailComponent:mV}),(0,c.jsx)("div",{style:s4.sx.absolute.topHalf.leftHalf.add({transform:"translate(-50%, -50%)"}).$,children:(0,c.jsx)("div",{className:"folder_upsell--listCardItemContainer--Q8Vm9",children:(0,c.jsx)(s8.g,{})})})]}),(0,c.jsxs)(mm.j,{direction:"vertical",padding:{top:16},spacing:0,height:"hug-contents",children:[(0,c.jsx)(D.x,{fontSize:13,fontWeight:"medium",children:(0,A.tx)("team_view.folder_upsell.upgrade_to_create_more_projects")}),(0,c.jsx)(D.x,{fontSize:11,color:"secondary",children:(0,A.tx)("team_view.folder_upsell.get_unlimited_everything",{professionalPlanLink:o})})]})]})})}function mV(){return(0,c.jsx)("div",{className:P.B.wFull.hFull.colorBg.$})}function mG({canEditTeam:e}){let t=(0,m.I0)(),r=(0,aB.Rs)(),a=(0,eB.fh)(),i=is.t.useTrackingContext({trigger:aU.V.FOLDER_UPSELL_CARD}),s=(0,T.it)("exp_fbg_project_limit_upsell");if(!r||!e||(0,iC.e3)(r)||"recentsAndSharing"===a||"trashedFolders"===a||!s.getConfig().getValue("show_upsell",!1))return null;let n=(0,c.jsx)(ar.Z6,{className:P.B.noWrap.cursorDefault.$,onClick:e=>{e.stopPropagation(),t((0,tF.K4)({type:aF.n,data:{upsellSource:aU.V.FOLDER_UPSELL_CARD,teamId:r?.id}}))},trackingProperties:{trackingDescriptor:ev.y.PROFESSIONAL_PLAN,...i},trusted:!0,children:(0,A.tx)("team_view.folder_upsell.professional_plan")});return(0,c.jsx)(r8.Ui,{name:"Folder Upsell List",properties:i,children:(0,c.jsx)("div",{className:P.B.flex.mt16.bRadius8.b1.colorBorder.$,style:s4.sx.add({borderStyle:"dashed"}).$,children:(0,c.jsxs)(r8.XT,{className:Y()(P.B.flex.alignLeft.gap12.py24.px16.bRadius8.wFull.pl36.$,"folder_upsell--list--kWLfA"),onClick:()=>{t((0,tF.K4)({type:mB.yd,data:{team:r,resource:mL.Q3.FOLDER,action:rn.XH.CREATE_FOLDER,currentPlan:mM.V.Plan.STARTER,upsellPlan:mM.V.Plan.PRO,editorType:null,upsellSource:aU.V.FOLDER_UPSELL_CARD}}))},trackingProperties:{trackingDescriptor:ev.y.FOLDER_UPSELL_CARD},dataTestId:"folder_upsell_button",children:[(0,c.jsxs)("div",{className:Y()(P.B.relative.flexShrink0.h40.w64.py4.px8.colorBgSecondary.bRadius4.$,"folder_upsell--listCard--ZQbAO"),children:[(0,c.jsx)("div",{style:s4.sx.absolute.topHalf.leftHalf.add({transform:"translate(-50%, -50%)"}).$,children:(0,c.jsx)(mm.j,{cornerRadius:12,backgroundColor:"brand",height:24,width:24,horizontalAlignItems:"center",verticalAlignItems:"center",children:(0,c.jsx)(s8.g,{})})}),(0,c.jsxs)(mm.j,{direction:"vertical",spacing:4,children:[(0,c.jsxs)(mm.j,{direction:"horizontal",spacing:4,children:[(0,c.jsx)(mm.j,{cornerRadius:2,backgroundColor:"default"}),(0,c.jsx)(mm.j,{cornerRadius:2,backgroundColor:"default"})]}),(0,c.jsxs)(mm.j,{direction:"horizontal",spacing:4,children:[(0,c.jsx)(mm.j,{cornerRadius:2,backgroundColor:"default"}),(0,c.jsx)(mm.j,{cornerRadius:2,backgroundColor:"default"})]})]})]}),(0,c.jsxs)(mm.j,{direction:"vertical",spacing:0,children:[(0,c.jsx)(D.x,{fontSize:13,children:(0,A.tx)("team_view.folder_upsell.upgrade_to_create_more_projects")}),(0,c.jsx)(D.x,{fontSize:11,color:"secondary",children:(0,A.tx)("team_view.folder_upsell.get_unlimited_everything",{professionalPlanLink:n})})]})]})})})}var mz=r(358009),mW=r(390893),mH=r(93845),mK=r(767811);let mY="folder_list_view--emptyState--H6elq tiles_view--emptyState--n6KR- text--fontPos11--rO47d text--_fontBase--VaHfk text--fontPos11--rO47d text--_fontBase--VaHfk";function mZ(e){let t=(0,m.v9)(e=>e.dropdownShown),r=(0,m.v9)(e=>e.currentUserOrgId),a=(0,m.v9)(e=>e.user),{folderList:i}=e,s=(0,eP.ZR)(e.teamId),n=!!e.teamId&&!!e.isEligbileForProTeamLockedRevampUI,o=(0,eO.kP)(),l=e.teamId?{teamId:e.teamId,isLockedTeam:!!s||o}:void 0,d=(0,mz.O)(t);return 0===i.length?(0,c.jsx)(c.Fragment,{children:e.onCreateNewFolder&&!(0,eS.E_)(a,r)?(0,c.jsx)("div",{className:mY,children:e.canEditTeamContents?(0,c.jsxs)("div",{...{className:"x78zum5 xdt5ytf x6s0dn4 xl56j7k xou54vl"},children:[(0,c.jsx)("div",{...{className:"xk50ysn"},children:(0,A.tx)("team_view.folder_empty_view.no_projects_yet")}),(0,A.tx)("team_view.folder_empty_view.projects_help_you_organize"),(0,c.jsx)(tV.zx,{variant:"secondary",onClick:e.onCreateNewFolder,iconPrefix:(0,c.jsx)(t6.Z,{}),children:(0,A.tx)("team_view.folder_empty_view.new_project")})]}):(0,A.tx)("team_view.folder_empty_view.this_team_does_not_have_any_projects_yet")}):null!=e.emptyStateText?(0,c.jsxs)("div",{...{className:"x78zum5 x1rzw5jd"},children:[(0,c.jsx)("div",{className:mY,children:e.emptyStateText}),s&&(0,c.jsx)(mI.Q,{teamId:e.teamId,canEditTeam:!!e.canEditTeamContents}),e.team&&n&&(0,c.jsx)(mT,{team:e.team,canAdminTeam:!!e.canAdminTeam})]}):(0,A.tx)("team_view.folder_empty_view.no_projects")}):(0,c.jsxs)(c.Fragment,{children:[(()=>{let t=i.length>=2?1:1===i.length?0:void 0;return(0,c.jsxs)("div",{...{className:"x78zum5 x1q0g3np"},children:[(0,c.jsxs)("div",{...{className:"xh8yej3"},children:[(0,c.jsx)(mW.x,{checksForViewOnlyLabels:l,currentPlanFilter:e.currentPlanFilter,dataOnboardingKey:"project-card",dataOnboardingKeyIndex:t,folderList:i,isSharerInfoIncluded:e.isSharerInfoIncluded,onChangeSortOptions:e.onChangeSortOptions,trailingGridElements:s||o?(0,c.jsx)(c.Fragment,{}):(0,c.jsx)(mU,{canEditTeam:e.canEditTeamContents}),viewType:e.viewMode}),!s&&!o&&e.viewMode===sV.H6.LIST&&(0,c.jsx)(mG,{canEditTeam:e.canEditTeamContents})]}),(0,c.jsxs)("div",{className:"folder_list_view--infoCard--pq9hj",children:[s&&(0,c.jsx)(mI.Q,{teamId:e.teamId,canEditTeam:!!e.canEditTeamContents}),e.team&&n&&(0,c.jsx)(mT,{team:e.team,canAdminTeam:!!e.canAdminTeam})]})]})})(),d&&(0,c.jsx)(mH.T,{folder:d})]})}let m$={name:u$.s.byProperty("name",u$.s.LEXICOGRAPHICALLY),lastModified:u$.s.byProperty("folderLastUpdated"),team:u$.s.byProperty("folderTeamName",u$.s.LEXICOGRAPHICALLY),sharedAt:u$.s.byProperty("folderSharedAt"),createdAt:u$.s.byProperty("created_at"),trashedAt:u$.s.byProperty("trashed_at")};function mq(e){let{folderList:t,...r}=e,a=(0,m.I0)(),i="trashedFolders"===e.selectedView.view,s="team"===e.selectedView.view,n="recentsAndSharing"===e.selectedView.view,o=(0,m.v9)(e=>e.tileSortFilterStateByView),l=u.useMemo(()=>{if(s){let e=o.team;return{viewMode:void 0!==e.viewMode?e.viewMode:sV.H6.GRID,sortKey:function(e){switch(e){case sV.BO.NAME:return"name";case sV.BO.TOUCHED_AT:return"lastModified";case sV.BO.CREATED_AT:return"createdAt";case sV.BO.TRASHED_AT:return"trashedAt";case sV.BO.ACCESSED_AT:case sV.BO.SHARED_AT:return"lastModified";case sV.BO.SEARCH_RELEVANCE:case sV.BO.PROJECT_NAME:return"name";default:(0,O.vE)(e)}}(e.sort.key),sortDesc:e.sort.dir===sV.qP.DESC}}if(i){let e=o.trashedFolders;return{viewMode:void 0!==e.viewMode?e.viewMode:sV.H6.GRID,sortKey:(0,mc.G6)(e.sort.key)??"trashedAt",sortDesc:e.sort.dir===sV.qP.DESC}}if(!n)return{viewMode:sV.H6.GRID,sortKey:"lastModified",sortDesc:!0};{let e=o.recentsAndSharing;return{viewMode:void 0!==e.sharedProjects.viewMode?e.sharedProjects.viewMode:sV.H6.GRID,sortKey:(0,mc.G6)(e.sharedProjects.sort.key)??"lastModified",sortDesc:e.sharedProjects.sort.dir===sV.qP.DESC}}},[s,i,n,o.team,o.trashedFolders,o.recentsAndSharing]),d=u.useMemo(()=>{if(n)return e.folderList;let t=m$[l.sortKey];if(!t)return e.folderList;let r=l.sortDesc?u$.s.reverse(t):t,a=e.folderList.map(e=>({...e,...(0,mK.$)(e)}));return a.sort(r),a},[n,l.sortKey,l.sortDesc,e.folderList]);return(0,c.jsxs)("div",{children:[i&&o.trashedFolders.filters.role===sV.ng.CAN_BE_VIEWED&&(0,c.jsx)("div",{...{className:"x1yztbdb x1tudf5h x1m2p0i2"},children:(0,c.jsx)(mD.f,{dataTestId:"may-not-restore-or-permanently-delete-banner",color:mD.Z.INFORMATION,text:(0,c.jsxs)("p",{...{className:"xk50ysn"},children:[(0,c.jsx)("span",{...{className:"x1s688f"},children:(0,A.tx)("file_browser.folder_list_view.may_not_restore_or_permanently_delete_banner")}),"\xa0",(0,A.tx)("file_browser.folder_list_view.may_not_restore_or_permanently_delete_banner_content")]})})}),(0,c.jsx)(mZ,{folderList:d,chunkSize:e.chunkSize,viewMode:l.viewMode,onChangeSortOptions:t=>{if(s){let r=t.sortKey===rU.nZ.NAME?sV.BO.NAME:sV.BO.TOUCHED_AT,i=t.sortDesc?sV.qP.DESC:sV.qP.ASC;a(eF.lh({selectedView:e.selectedView,config:{...o.team,sort:{key:r,dir:i}}}))}else a(eF.vU({viewId:e.viewId,sortMode:{sortKey:t.sortKey,sortDesc:t.sortDesc}}))},...r})]})}function mQ(){let e=(0,m.v9)(e=>e.currentUserOrgId),t=(0,aB.Rs)(),r=(0,b.DG)(e0.hzW,{id:t?t.id:""},{enabled:!!t?.id}),a=(0,b.DG)(e0.ecG,{id:t?t.id:""},{enabled:!!t?.id}),i=(0,m.v9)(e=>e.tileSortFilterStateByView),s=(0,eB.A6)(),n=(0,eO.vI)(t?.id),o=i.trashedFolders,[l]=(0,y.aM)((0,S.mQ)({orgId:e,teamId:t?.id??null,roleFilter:o.filters.role})),d="loaded"===r.status&&!!r.data.team&&r.data.team.hasPermission,u="loaded"===a.status&&!!a.data.team&&a.data.team.hasPermission;return(0,c.jsx)(eu._k,{loadingElementId:"loading-content-pane",delay:250,result:l,loadingElementClassName:P.B.pr32.$,children:e=>(0,c.jsx)("div",{style:s4.sx.mt1.$,children:(0,c.jsx)(mq,{canAdminTeam:u,canEditTeamContents:d,chunkSize:e?.folders?.length||0,emptyStateText:(0,A.t)("file_browser.trash_project.trashed_empty_state"),folderList:e?.folders||[],isEligbileForProTeamLockedRevampUI:n,isSharerInfoIncluded:!1,selectedView:s,team:t,teamId:t?.id,viewId:uH._})})})}var mJ=((l=mJ||{}).FILES="files",l.FOLDERS="folders",l);function mX(e){let t=(0,eB.A6)();if("deletedFiles"!==t.view&&"trashedFolders"!==t.view)return(0,c.jsx)(c.Fragment,{});let r=(0,c.jsx)(uZ,{currView:t}),a="folders"===e.selectedTab?(0,c.jsx)(mQ,{}):(0,c.jsx)(mA,{});return(0,c.jsx)(s6.S,{viewBarSticky:!0,viewbar:r,content:a})}var m0=r(743138);let m1=[eE.vj8,eE.moh,eE.lUj,eE.wA_,eE.PUy,eE.muD,eE.LWr,eE.GLY,eE.A6z,eE.h0X,eE.a05,eE.yCG,eE.d0v,eE.ayP,eE.rO9,eE.UUz,eE.GO2,eE.qBE,eE.i3t,eE.Wkx,eE.t5B,eE.gI9,eE.NhN,eE.VQ7,eE.syC,eE.fLk,eE.rJS,eE.hxL,eE.SeD,eE.$VT,eE.Egv,eE.iUf,eE._ln,eE.eUL,eE.kiI,eE.LBe,eE.Yjm,eE.lOi,eE.fDC,eE.s9F,eE.pXK,eE.rzS,eE.RTW].map(e=>e.id);function m5({children:e}){return(0,c.jsx)(m0.F,{name:"FileBrowser",order:m1,children:e})}var m2=r(632959);function m4({folderId:e,enabled:t=!0,shouldCompareWithUnpaginated:r,source:a}){let i=(0,m.v9)(t=>t.tileSortFilterStateByView.folders.byId[e]??t.tileSortFilterStateByView.folders.default),s=(0,u.useMemo)(()=>({fileType:m9(i.filters.fileType),sortOrder:i.sort.dir===sV.qP.ASC?"asc":"desc",sortColumn:m7(i.sort.key)}),[i.filters.fileType,i.sort.dir,i.sort.key]);return(0,y.aM)((0,X.LN)({folderId:e,shouldCompareWithUnpaginated:r,source:a,...s}),{enabled:t})}let m9=e=>{switch(e){case sV.$Q.DESIGN:return"design";case sV.$Q.FIGJAM:return"whiteboard";case sV.$Q.PROTOTYPE:return"prototype";case sV.$Q.SITES:return"sites";case sV.$Q.SLIDES:return"slides";case sV.$Q.COOPER:return"cooper";case sV.$Q.MAKE:return"figmake";case sV.$Q.ANY:return"";default:(0,O.vE)(e)}},m7=e=>{switch(e){case sV.BO.NAME:return"name";case sV.BO.CREATED_AT:return"created_at";case sV.BO.TOUCHED_AT:return"touched_at";default:return(0,m2.Jz)(H.k.WAYFINDING,Error(`Attempting to sort by an unsupported sort key: ${e}`)),"created_at"}};var m3=r(221081),m6=r(832525),m8=r(696817),_e=r(620516),_t=r(532713),_r=r(719628),_a=r(750077),_i=r(2065),_s=r(282566);function _n(e){let t=(0,m.I0)(),r=(0,m.v9)(e=>e.teams)[e.teamId].subscription,a=e.paymentRequiresAction;return(0,u.useEffect)(()=>{_s.n.getHostedInvoicesPage({teamId:e.teamId}).then(({data:e})=>{(0,ob.Ne)(e.meta.hosted_invoice_url,"_blank","noopener")})},[e.teamId]),(0,u.useEffect)(()=>{a||r===eH.Qe.INCOMPLETE||t(tF.h0({type:_o.type}))},[r,t,a]),(0,c.jsx)(an.P6,{title:(0,A.t)("payments.pending_subscription_modal_header"),hideCancel:!0,confirmText:(0,A.t)("payments.got_it"),trackedConfirmationProperties:{trackingDescriptor:ev.y.CONFIRM_VERIFY_PAYMENT,trackingContextName:"Confirm Verify Payment"},children:(0,A.tx)("payments.pending_subscription_modal_description")})}let _o=(0,tA.Y3)(function(e){return(0,c.jsx)(aP.X,{label:"PendingSubscriptionChangeModal",children:(0,c.jsx)(_n,{...e})})},"PENDING_SUBSCRIPTION_CHANGE_MODAL");var _l=r(548442);let _d="banners--warn--UON0z",_c="banners--primaryCtaButton--J2wsb",_u="banners--content--j7Ykq",_m="banners--titleSmall--Q0nxs",__="banners--bold--PGLPE",_p="banners--message--4soyx",_f="banners--messageSmall--ElLtH",_x="banners--secondaryCtaButton--yDtus",_g="banners--ctaButtonGroup--BBDhU",_h="banners--closeButton--x7UOM",_v="banners--teamBannerWithBackground--v5Zkp banners--banner--fu3pc",_b="banners--teamUpgradeNotice--8qlk3",_y="banners--softWarningBanner--cXjhK",_j="banners--softWarningBannerBlue--wm57n";var _w=r(891753),_T=r(209357),_I=r(337876),_E=r(489618);function _k(e,t,r){let a=u.useMemo(()=>({canAdmin:(0,i9.canAdminOrg)(e.currentUserOrgId,e),canMember:(0,i9.canMemberOrg)(e.currentUserOrgId,e)}),[e]),i=(0,e1.lE)(),s=(0,e1.N1)(i),n=(0,e1.Fg)(i),o=u.useMemo(()=>iI.IE.transformAll([s,n],(e,t)=>({canAdmin:e,canMember:t})),[s,n]),l=(0,sT.F7)({oldValue:iI.IE.useMemoizedLoaded(a),newValue:o,label:r,enableShadowRead:!1,enableFullRead:(0,ms.XP)(ms.mU.GROUP_7),contextArgs:{callsite:"useOrgBannerContentQuery"}});return u.useMemo(()=>l.transform(({canAdmin:r,canMember:a})=>(function(e,t,r,a){let i;if(!e.currentUserOrgId||!(0,iC.xT)(e.currentUserOrgId,e))return null;let s=e.orgById[e.currentUserOrgId];if(!s)return null;let n=s.past_due_at&&(0,eg.Z)(s.past_due_at).add(2,"weeks")>(0,eg.Z)(new Date);if(!r&&n)return null;let o=e.orgUsersByOrgId[e.currentUserOrgId]??{},l=(0,ej.Ll)(o).map(e=>(0,c.jsxs)("span",{className:__,children:[e.user.handle," (",e.user.email,")"]},e.id));return i=r?s.billing===_t.zW.CHARGE_IMMEDIATELY?(0,A.tx)("payments.org_past_due_on_payment",{invoice:(0,c.jsx)("a",{onClick:()=>{t?.(eL.fv({view:"orgAdminSettings",orgAdminSettingsViewTab:e5.rN.BILLING}))},children:(0,A.tx)("payments.outstanding_invoice")}),orgName:s.name}):(0,A.tx)("payments.org_past_due_on_payment_invoiced",{email:(0,c.jsx)("b",{className:__,children:(0,lu.sJ)()}),orgName:s.name}):(0,A.tx)("payments.please_reach_out_to_org_admins",{orgName:s.name,admins:a&&(0,c.jsxs)("span",{children:[" ",(0,c.jsx)(m6.x,{formatType:"disjunction",children:l})]}),numAdmins:l.length}),{severity:_l.h.WARN,title:(0,A.t)("payments.payment_not_received"),message:i,cta:null,onClickCta:null}})(e,t,r,a)),[t,l,e])}function _N(e){return e?.status==="open"&&!!e.payment_intent&&[rn.JO.REQUIRES_ACTION,rn.JO.REQUIRES_SOURCE_ACTION].includes(e.payment_intent.status)}function _C(e,t,r,a,i,s){let n=u.useMemo(()=>({canOwn:!!r&&(0,i9.canOwnTeam)(r,a),canAdmin:!!r&&(0,i9.canAdminTeam)(r,a),canEdit:!!r&&(0,i9.canEditTeam)(r,a),hasEditRoleOnTeam:!!r&&(0,i9.hasMinRole)((0,i9.getRolesForUserAndTeam)(r,a),_a.V5.EDITOR)}),[r,a]),o=(0,sT.F7)({oldValue:iI.IE.useMemoizedLoaded(n),newValue:function(e){let t=(0,b.DG)((0,e0.C13)((0,ms.br)(ms.mU.GROUP_7)&&e?{teamId:e}:null));return u.useMemo(()=>"disabled"===t.status?iI.IE.loaded({canOwn:!1,canAdmin:!1,canEdit:!1,hasEditRoleOnTeam:!1}):t.transform(({team:e})=>({canOwn:e?.isOwner??!1,canAdmin:e?.canAdmin??!1,canEdit:e?.canEdit??!1,hasEditRoleOnTeam:e?.canEdit??!1})),[t])}(r),label:s,enableShadowRead:!1,enableFullRead:(0,ms.XP)(ms.mU.GROUP_7),contextArgs:{callsite:"useBannerContentQuery",resourceType:e,resourceId:t?.id,teamId:r}}),l=_k(a,i,s);return u.useMemo(()=>iI.IE.transformAll([l,o],(s,n)=>s||function(e,t,r,a,i,s){let n=r?a.teams[r]:null;if(r&&!n||"file"===e)return null;let o=a.currentTeamId,l=n&&n.subscription===eH.Qe.GRACE_PERIOD,d=a.billingSummary,u=n?.subscription===eH.Qe.INCOMPLETE,m=!!n?.org_id,_=!!n?.subscription,f=l&&!m&&_&&(_N(d?.last_monthly_invoice)||_N(d?.last_annual_invoice)),x=n&&(u||f),h=n&&n.subscription===eH.Qe.NO_MONTHLY_SUB_EDITOR_COUNT_EXCEEDED,v=s.canOwn,b=s.canAdmin,y=s.canEdit,j=n&&(0,iC.cv)(n.id,a),T="folder"===e?t:null,I=0,E={showReminder:!1,showAccessRestricted:!1},k="folder"===e&&!T,N=(0,lu.ZP)().is_limited_team_plan&&k;if(a.user){let t=s.hasEditRoleOnTeam,i=["folder","team"].includes(e)&&t,n=(0,iE.dE)(a.user),l=a.userEduGracePeriods;k?o&&(0,iE.rv)(a.user.id,a.roles.byTeamId,a.teams[o])&&(E=(0,iE.M5)(l,n),I=(0,iE.eM)(l)):r&&i&&(E=(0,iE.XW)(l,n,r,!!a.teams[r].student_team),I=(0,iE.Km)(l,r))}let C=n&&!(0,iC.gX)(n)&&!n.student_team&&T&&!(0,ry.Gd)(T),R=C&&T.is_invite_only,S=C&&T.is_view_only,O=T&&(0,ry.iF)(T),P=!O&&!n&&T&&(0,iC.yH)(T,a),D=()=>i?.(d$.F2({teamId:n.id,selectedView:a.selectedView})),F=()=>g.ZP.redirect("/education/apply",w.ZP.isIpadNative?void 0:"_blank"),M=()=>i?.(d$.F2({teamId:n.id,openInNewTab:!1,selectedView:{view:"team",teamId:n.id}})),L=()=>i?.((0,tF.K4)({type:aF.n,data:{upsellSource:aU.V.BANNER}})),B=(0,iC.M4)(n),U=n&&n.subscription_raw!==eH.Qe.OK&&(0,iC.iH)(n)&&b&&_e.pl.getProTrialStatus(n)!==_r.Y.IN_TRIAL&&B,V=["team","folder"].includes(e)&&y&&(0,aB.Pw)(n),G=y&&function(e,t){let r=e&&t[e.id]?.dismissed_legacy_team_upgrade_notice_banner;return(0,aB.w9)(e)&&!r}(n,a.userTeamFlags),z=(0,eS.E_)(a.user,a.currentUserOrgId),W=_e.pl.canSeeExpiredProTrialBanner(a.userTeamFlags,n,a),H=n&&a.userTeamFlags[n.id]?.[_e.St],K=a.user?(0,iE.di)(a.eduPeriodEnd):1/0,Y=K>0&&K!==1/0,Z=0===K,$=n&&n.student_team_state===eH.QX.STUDENT_TEAM_CURRENT,q=n&&n.student_team_state===eH.QX.STUDENT_TEAM_EXPIRED&&j,Q=Y&&v&&$,J=Z&&(v||y)&&(q||$),X=Y&&y&&$,ee=Z&&!y&&$,et=Q||J||X||ee,er=(0,aL.Bw)(a.eduPeriodEnd,a.offboardingDate),ea=()=>{r&&i?.(tF.K4({type:aV.Lk,data:{teamId:r}}))};if(h)return{severity:_l.h.WARN,title:(0,A.t)("payments.locked"),message:b?(0,c.jsx)("span",{children:(0,A.tx)("payments.no_monthly_sub_over_editor_limit_admin.seat_rename",{contactSupport:(0,c.jsx)("a",{href:`mailto:${(0,lu.sJ)()}`,children:(0,A.tx)("payments.contact_support")})})}):(0,c.jsx)("span",{children:(0,A.tx)("payments.no_monthly_sub_over_editor_limit.seat_rename")}),cta:b?(0,A.t)("payments.manage_plan"):null,onClickCta:b?()=>{i?.(eL.fv({view:"teamAdminConsole",teamId:r,teamAdminConsoleViewTab:e2.mb.SETTINGS}))}:null};if(W&&(j||y&&!H)){let e,t,a,s;return j?(e=y?(0,A.tx)("payments.pro_trial_expiry.locked_description_on_team",{teamName:n.name,lowerUsageLink:(0,c.jsx)(r8.XT,{onClick:e=>{e.preventDefault(),i?.(tF.K4({type:_i.X,data:{teamId:r}}))},children:(0,A.tx)("payments.pro_trial_expiry.lower_usage")})}):(0,A.tx)("payments.pro_trial_expiry.locked_description_for_viewer_on_team",{teamName:n.name}),t=y?(0,A.tx)("payments.pro_trial_upgrade_cta.upgrade"):null,a=`${_y} `,s="Pro Trial Expiry Banner Locked"):(e=n?(0,A.tx)("payments.pro_trial.trial_ended_banner_message",{teamName:n.name}):(0,A.tx)("payments.pro_trial.trial_ended_banner_message.no_name"),t=(0,A.tx)("payments.pro_trial.trial_ended_banner_upgrade_cta"),a=`${_y} ${_j}`,s="Pro Trial Expiry Banner Unlocked"),{severity:_l.h.WARN_SOFT,title:(0,A.t)("payments.pro_trial.trial_ended_banner_title"),message:e,cta:t,onClickCta:y?M:void 0,svg:_T.Z,bannerClassName:a,trackingContextName:s,dismissible:!j,onClose:j?void 0:()=>{r&&i?.(a4.v_({all_team_flags:[{team_id:r,flags:{[_e.St]:!0}}]}))}}}if(N)return{severity:_l.h.WARN_SOFT,title:(0,A.tx)("file_browser.limited_space_banner.heading"),message:(0,A.tx)("file_browser.limited_space_banner.description"),cta:null,hideIcon:!0,bannerClassName:"banners--limitedSpaceBanner--AtOSJ"};if(er&&et)if(Q||X)return{severity:_l.h.WARN_SOFT,title:(0,A.tx)("edu.sidebar_section.all_education_accounts_must_reverify",{offboardingDate:a.offboardingDate,linkLearnMore:null}),message:(0,A.tx)("edu.banner.to_keep_using_pro_features",{linkVerify:(0,c.jsx)(ar.Z6,{href:"/education/apply",target:"_blank",trusted:!0,children:(0,A.tx)("edu.banner.verify_your_education_status")})}),cta:(0,A.tx)("edu.banner.learn_more"),onClickCta:ea,svg:_w.Z,bannerClassName:`${_y} ${_j}`,trackingContextName:"Edu Offboarding Banner Expiring Soon New Reverification"};else return{severity:_l.h.WARN_SOFT,title:(0,A.tx)("edu.banner.your_education_status_has_expired"),message:(0,A.tx)("edu.banner.to_keep_using_pro_features_no_link"),cta:(0,A.tx)("edu.banner.learn_more"),onClickCta:ea,svg:_w.Z,bannerClassName:_y,trackingContextName:"Edu Offboarding Banner Expired New Reverification"};if(et){if(Q||X)return{severity:_l.h.WARN_SOFT,title:(0,A.tx)("edu.banner.your_education_status_is_expiring_soon"),message:(0,A.tx)("edu.banner.to_keep_collaborating_upgrade_team",{teamName:n.name,verify:(0,c.jsx)(ar.Z6,{href:"/education/apply",target:"_blank",trusted:!0,children:(0,A.tx)("edu.banner.verify_your_education_status")})}),cta:(0,A.tx)("edu.banner.learn_more"),onClickCta:ea,svg:_w.Z,bannerClassName:`${_y} ${_j}`,trackingContextName:"Edu Offboarding Banner"};else if(J)return{severity:_l.h.WARN_SOFT,title:(0,A.tx)("edu.banner.your_education_status_has_expired"),message:(0,A.tx)("edu.banner.team_is_now_view_only_for_all_members",{teamName:n.name}),cta:(0,A.tx)("edu.banner.learn_more"),onClickCta:ea,svg:_w.Z,bannerClassName:_y,trackingContextName:"Edu Offboarding Banner"};else if(ee)return{severity:_l.h.WARN_SOFT,title:(0,A.tx)("edu.banner.your_education_status_has_expired"),message:(0,A.tx)("edu.banner.you_can_no_longer_edit_files",{teamName:n.name}),cta:(0,A.tx)("edu.banner.learn_more"),onClickCta:ea,svg:_w.Z,bannerClassName:_y,trackingContextName:"Edu Offboarding Banner"}}else if(q)return{severity:_l.h.WARN_SOFT,title:(0,A.tx)("edu.banner.team_s_education_status_has_expired",{teamName:n.name}),message:(0,A.tx)("edu.banner.move_or_duplicate_files_to_another_location_to_save_your_work"),cta:null,svg:_w.Z,bannerClassName:_y,trackingContextName:"Edu Offboarding Banner"};else if(z){let e=a.user.external_restricted_org_id,t=(0,A.t)("external_collaboration_restricted.banner.restriction_description.no_org");if(e&&a.orgById[e]){let r=a.orgById[e];t=(0,A.t)("external_collaboration_restricted.banner.restriction_description",{organizationName:r.name})}return{severity:_l.h.WARN,title:(0,A.t)("external_collaboration_restricted.banner.title"),message:t,cta:null,ctaTrackingProperties:void 0,onClickCta:null}}else if(a.user&&["team","folder"].includes(e)&&E.showAccessRestricted){let e,t=(0,A.t)("banner.edu_grace_period.your_education_plan_has_expired");return n?(0,iE.oL)(a.user.id,a.roles.byTeamId,n)?e=(0,A.t)("banner.edu_grace_period.team_is_now_view_only_for_all_members",{teamName:n.name}):(0,iE.xq)(a.user.id,a.roles.byTeamId,n)?e=(0,A.t)("banner.edu_grace_period.you_can_no_longer_edit_files_in_team",{teamName:n.name}):(t=(0,A.t)("banner.edu_grace_period.your_education_plan_has_expired.is_member",{teamName:n.name}),e=(0,A.t)("banner.edu_grace_period.move_or_duplicate_files_to_another_location_to_save_your_work")):e=(0,A.t)("banner.edu_grace_period.education_team_members_need_to_verify_their_education_status"),{severity:_l.h.ANNOUNCEMENT,title:t,message:e,learnMoreUrl:"/education/",cta:(0,A.t)("banner.edu_grace_period.verify_status_button"),onClickCta:F,svg:_w.Z,bannerClassName:_b}}else if(["team","folder"].includes(e)&&E.showReminder)return{severity:_l.h.ANNOUNCEMENT,title:(0,A.t)("banner.edu_grace_period.only_edu_grace_period_days_left",{daysLeft:I}),message:(0,A.t)("banner.edu_grace_period.to_keep_collaborating_on_figma_s_education_plan_please_verify_your_status_soon"),cta:(0,A.t)("banner.edu_grace_period.verify_status_button"),onClickCta:F,svg:_E.Z};else if(R||S)return{severity:_l.h.WARN,title:(0,A.t)("payments.folder_locked"),message:(0,A.t)("payments.folder_locked_description",{projectType:"Invite"==(R?"Invite":"View")?(0,A.t)("payments.invite_only_projects"):(0,A.t)("payments.view_only_projects"),teamName:n.name}),learnMoreUrl:"/pricing",cta:y?(0,A.t)("payments.upgrade_now"):(0,A.t)("payments.contact_admin_for_details"),ctaTrackingProperties:y?{trackingDescriptor:ev.y.UPGRADE_NOW,upsellSource:aU.V.BANNER}:void 0,onClickCta:y?D:null};else if(P&&"folder"===e)return(0,sT.jo)({label:sT.NL.getBannerContent.personalProjectDeprecated,oldValue:P&&"folder"===e,newValue:!1,maxReports:3}),{severity:_l.h.WARN,title:(0,A.t)("payments.locked"),message:(0,A.t)("payments.projects_deprecated"),learnMoreUrl:"/pricing-faq#what-changes-for-me",cta:null,onClickCta:null};else if(O&&"folder"===e)return{severity:_l.h.WARN,title:(0,A.t)("payments.abandoned_project"),message:(0,A.t)("payments.abandoned_project_description"),cta:null,onClickCta:null};else if(G){let e=(0,A.t)("payments.file_limit_unified",{figmaFiles:iC.Hf,figjamFiles:iC.Hf});V?G||(e=(0,A.t)("payments.file_limit_figjam",{figjamFiles:iC.Hf})):e=(0,A.t)("payments.file_limit_figma",{figmaFiles:iC.Hf});let t=()=>(0,c.jsx)("button",{type:"button",onClick:L,className:"banners--bannerInlineTextButton--omxXr",children:(0,A.tx)("payments.check_out_our_paid_plans")}),r=null;return r=n?(0,p.BZ)().sites_design_starter_combined_file_limit?(0,c.jsx)("span",{children:(0,A.tx)("payments.team_over_starter_team_limit_with_button.legacy_team_without_mentioning_file_limit",{checkoutOurPlans:t(),teamName:n.name})}):(0,c.jsx)("span",{children:(0,A.tx)("payments.team_over_starter_team_limit_with_button.legacy_team",{fileLimitString:e,checkoutOurPlans:t(),teamName:n.name})}):(0,p.BZ)().sites_design_starter_combined_file_limit?(0,c.jsx)("span",{children:(0,A.tx)("payments.team_over_starter_team_limit_with_button.no_legacy_team_present.without_mentioning_file_limit",{checkoutOurPlans:t()})}):(0,c.jsx)("span",{children:(0,A.tx)("payments.team_over_starter_team_limit_with_button.no_legacy_team_present",{fileLimitString:e,checkoutOurPlans:t()})}),{severity:_l.h.ANNOUNCEMENT,title:(0,A.t)("payments.team_over_starter_team_limit_title"),message:r,cta:(0,A.t)("payments.upgrade_now"),ctaTrackingProperties:{trackingDescriptor:ev.y.UPGRADE_NOW,upsellSource:aU.V.BANNER},onClickCta:D,svg:_I.Z,bannerClassName:_b,trackingContextName:"Unified Legacy / Beta File Limit Banner"}}else if(U){let e=(0,eg.Z)(n.grace_period_end).toDate(),t=(0,A.tx)("payments.pro_plan_ends_relative_time_string",{relative_time_string:(0,c.jsx)(ow.Lt,{date:e})});return B||(t=(0,A.tx)("payments.pro_plan_ends_on_date",{end_date:new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(e)})),{severity:_l.h.ANNOUNCEMENT,title:t,message:(0,A.t)("payments.pro_plan_ends_for_team_description",{teamName:n.name}),cta:(0,A.t)("payments.pro_plan_ends_button"),onClickCta:M,svg:B?_I.Z:_T.Z,trackingContextName:"Promo Code Expiration Banner",bannerClassName:B?_b:void 0}}else if(x){let e=u?(0,A.t)("payments.complete_team_payment_description",{teamName:n.name}):(0,A.t)("payments.complete_team_renewal_payment_description");return{severity:_l.h.WARN,title:(0,A.t)("payments.complete_payment"),message:e,cta:(0,c.jsx)(m8.J,{trackingProperties:{trackingDescriptor:ev.y.VERIFY_PAYMENT,trackingContextName:"Verify Payment Banner"},onClick:()=>i?.(tF.K4({type:_o,data:{teamId:r,paymentRequiresAction:!!f}})),children:(0,A.tx)("payments.complete_payment_cta")}),onClickCta:null}}return null}(e,t,r,a,i,n)),[l,o,e,t,r,a,i])}function _R(e){let t=(0,eW.Mn)(),r=(0,m.v9)(e=>e.userEduGracePeriods),a=(0,m.v9)(e=>e.userFlags),i=(0,m.v9)(e=>e.userTeamFlags),s=(0,m.v9)(e=>e.selectedView),n=(0,m.v9)(e=>e.isFreeUser),o=(0,m.v9)(e=>e.userAnalyticsData),l=(0,m.v9)(e=>e.fileKeysByFolderId),d=u.useMemo(()=>({...t,checks:e.checks,fileKeysByFolderId:l,isFreeUser:n,selectedView:s,userAnalyticsData:o,userEduGracePeriods:r,userFlags:a,userTeamFlags:i}),[t,e.checks,l,n,s,o,r,a,i]);return _C(e.resourceType||eH._g.FOLDER,e.resource||null,e.teamId||null,d,null,e.shadowReadLabel).transform(e=>!!e)}function _S(e,t){let r={...e};return"string"==typeof t.title&&(r.title=t.title),"string"==typeof t.message&&(r.message=t.message),r}var _O=r(57742);let _P=(0,c.jsxs)("svg",{width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",children:[(0,c.jsx)("path",{d:"M0 24C0 10.7452 10.7452 0 24 0V0C37.2548 0 48 10.7452 48 24V24C48 37.2548 37.2548 48 24 48V48C10.7452 48 0 37.2548 0 24V24Z",fill:"var(--color-bg-inverse, black)"}),(0,c.jsx)("mask",{id:"mask0_4:25",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"48",height:"48",children:(0,c.jsx)("path",{d:"M0 24C0 10.7452 10.7452 0 24 0V0C37.2548 0 48 10.7452 48 24V24C48 37.2548 37.2548 48 24 48V48C10.7452 48 0 37.2548 0 24V24Z",fill:"var(--color-bg-inverse, black)"})}),(0,c.jsx)("g",{mask:"url(#mask0_4:25)"}),(0,c.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20 20H17.5C16.1193 20 15 21.1193 15 22.5C15 23.8807 16.1193 25 17.5 25H20L20 20ZM21 19.9963L21 25H21.6738C23.3383 25 24.9874 25.3196 26.5314 25.9416L28 26.5333V17.7761L27.3548 18.1614C25.4287 19.3116 23.2393 19.9428 21 19.9963ZM17.5 19H20.6897C22.8561 19 24.9821 18.4135 26.8421 17.3028L28.2437 16.4658C28.5769 16.2668 29 16.507 29 16.8951V27.2737C29 27.628 28.6418 27.8699 28.3132 27.7375L26.1577 26.8692C24.7325 26.2951 23.2103 26 21.6738 26H21.3286L22.5613 29.698C22.7771 30.3455 22.2951 31.0142 21.6126 31.0142H20.4415C19.5807 31.0142 18.8164 30.4634 18.5442 29.6467L17.3333 26.0142L17.3272 25.9958C15.4745 25.9057 14 24.375 14 22.5C14 20.567 15.567 19 17.5 19ZM18.3874 26.0142L19.4928 29.3304C19.6289 29.7388 20.0111 30.0142 20.4415 30.0142H21.6126L20.2792 26.0142H18.3874Z",fill:"var(--color-icon-oninverse, white)"}),(0,c.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M32.5 22C32.5 21.1716 31.8284 20.5 31 20.5V19.5C32.3807 19.5 33.5 20.6193 33.5 22C33.5 23.3807 32.3807 24.5 31 24.5V23.5C31.8284 23.5 32.5 22.8284 32.5 22Z",fill:"var(--color-icon-oninverse, white)"})]});function _A(e){let{title:t,message:r,cta:a,ctaTrackingProperties:i,learnMoreUrl:s,onClickCta:n,severity:o,secondaryCTA:l,secondaryOnClickCta:d,svg:u,trackingContextName:m="Banner",contentStyles:_,reverseCtas:p,dismissible:f,onClose:x}=e;return o===_l.h.ANNOUNCEMENT?(0,c.jsx)(r8.Ui,{name:m,properties:{severity:o,...e.tracking},children:(0,c.jsxs)("div",{className:_u,children:[u&&(0,c.jsx)(r6.n,{svg:u,useOriginalSrcFills_DEPRECATED:!0}),(0,c.jsxs)("div",{className:_p,children:[(0,c.jsx)("div",{className:_m,children:t}),(0,c.jsx)("div",{className:_f,children:r})]}),(0,c.jsxs)(ar.hE,{reversed:p,className:_g,children:[n&&(0,c.jsx)(ar.RS,{className:_c,onClick:n,trackingProperties:i,children:a}),d&&(0,c.jsx)(ar.pJ,{className:_x,onClick:d,children:l}),f&&x&&(0,c.jsx)(aW.PZ,{className:_h,onClick:x})]})]})}):o===_l.h.EVENT?(0,c.jsx)(r8.Ui,{name:m,properties:{severity:o,...e.tracking},children:(0,c.jsxs)("div",{className:`${_u} ${_}`,children:[(0,c.jsx)("div",{className:"banners--eventMegaphoneIcon--WvSre",children:_P}),(0,c.jsxs)("div",{className:_p,children:[(0,c.jsx)("p",{className:_m,children:t}),(0,c.jsx)("p",{className:_f,children:r})]}),(0,c.jsxs)(ar.hE,{className:_g,children:[n&&(0,c.jsx)(ar.RS,{className:_c,onClick:n,trackingProperties:i,children:a}),d&&(0,c.jsx)(ar.pJ,{className:_x,onClick:d,children:l}),f&&x&&(0,c.jsx)(aW.PZ,{className:_h,onClick:x})]})]})}):(0,c.jsx)(r8.Ui,{name:m,properties:{severity:o,...e.tracking},children:(0,c.jsxs)("div",{className:`${_u} ${_}`,children:[!e.hideIcon&&(0,c.jsx)(r6.n,{svg:_O.Z,className:"banners--warningIcon--A670b",svgWidth:o===_l.h.WARN_SOFT?"16px":void 0,svgHeight:o===_l.h.WARN_SOFT?"16px":void 0}),(0,c.jsxs)("div",{className:_p,children:[(0,c.jsx)("span",{className:"banners--title--ylcZM",children:t}),r,s&&(0,c.jsxs)("span",{children:["\xa0",(0,c.jsx)("a",{target:"_blank",rel:"noopener",href:s,children:(0,A.tx)("payments.learn_more")})]})]}),(0,c.jsxs)(ar.hE,{reversed:p,className:_g,children:[n&&(0,c.jsx)(ar.RS,{className:_c,onClick:n,trackingProperties:i,children:a}),!n&&(0,c.jsx)("div",{className:"banners--ctaMessage--WfkGk",children:a}),f&&x&&(0,c.jsx)(aW.PZ,{className:_h,onClick:x})]})]})})}function _D(e){return(0,c.jsx)(aP.X,{label:"FolderBanner",children:(0,c.jsx)(_F,{...e})})}function _F(e){let t,r=(0,m.I0)(),a=(0,m.v9)(e=>e.folders),i=(0,m.v9)(e=>e.teams),s=(0,m.v9)(e=>e.userFlags),n=(0,m.v9)(e=>e.userTeamFlags),o=(0,m.v9)(e=>e.selectedView),l=(0,m.v9)(e=>e.fileKeysByFolderId),d=(0,m.v9)(e=>e.isFreeUser),_=(0,m.v9)(e=>e.userAnalyticsData),p=(0,m.v9)(e=>(0,i9.getPermissionsState)(e)),f=(0,b.DG)(e0.vEc,{}),x=(0,aL.UR)(),g=e.folderId?a[e.folderId]:null,h=g?g.team_id:null,v=h?i[h]:null,y=!!v?.org_id,j=!!v?.subscription,w=(0,b.DG)((0,e0.b6y)(h?{teamId:h}:null)),T=u.useMemo(()=>w.transform(({team:e})=>!!e?.canAdmin),[w]).unwrapOr(!1);(0,u.useEffect)(()=>{h&&!y&&j&&T&&r(ip.H2({teamId:h}))},[r,h,y,j,T]);let I=(0,m.v9)(e=>e.teamBilling?.summary),E=_C(eH._g.FOLDER,g??null,h,{eduPeriodEnd:f.data?.currentUser?.eduPeriodEnd,offboardingDate:x,billingSummary:I,userFlags:s,userTeamFlags:n,selectedView:o,fileKeysByFolderId:l,isFreeUser:d,userAnalyticsData:_,...p},r,sT.NL.FolderBannerInner.bannerContent).unwrapOr(null);if(!E)return(0,c.jsx)("div",{});t=g?_S({resourceType:eH._g.TEAM,teamId:h,folderId:g.id},E):_S({resourceType:"recents"},E);let k=E.severity===_l.h.WARN?_d:"",N=E.bannerClassName||"",C=`${_v} ${k} ${N}`;return(0,c.jsx)("div",{className:C,children:(0,c.jsx)(_A,{...E,tracking:t})})}function _M(){let e,t=(0,m.I0)(),r=(0,m.v9)(e=>e.currentUserOrgId),a=(0,m.v9)(e=>e.currentTeamId),i=(()=>{let e=(0,m.v9)(e=>e.currentUserOrgId),t=(0,m.v9)(e=>e.currentTeamId),r=(0,b.DG)((0,e0.Jen)({currentOrgId:e,currentTeamId:t}));return"loaded"===r.status?r.data:null})();r?e=i?.currentUser.baseOrgUser?.draftsProject:a&&(e=i?.currentUser.currentTeamUser?.draftsProject);let s=(0,m.v9)(e=>e.tileSortFilterStateByView),n=(0,eB.A6)();if(!i||!e)return(0,c.jsx)(uW,{viewbarActions:[]});let o="deletedFiles"===n.view?(0,uz.ws)(uK)(s):(0,uz.ws)(ry.zT)(e.id,s),l=[(0,c.jsx)(iW.kP,{config:o.tileSortFilterConfig},0),(0,c.jsx)(iW.VP,{dispatch:t,options:o,selectedView:n},1),(0,c.jsx)(iW.vs,{initialViewMode:o.tileSortFilterConfig.viewMode,onViewModeChange:e=>{(0,iU.L9)("file view toggle",{viewType:e===sV.H6.GRID?"grid":"list"}),t(eF.lh({selectedView:n,config:{...o.tileSortFilterConfig,viewMode:e}}))}},2)];return(0,c.jsx)(uW,{viewbarActions:l})}let _L={open:!0,openNewTab:!0,restoreFromVersion:!0,share:!0,copyLink:!0,rename:!0,duplicate:!0,delete:!0,createBranch:!0,moveFile:!0},_B=(0,uz.ws)(ry.zT);function _U(e){let{sortFilterOptions:t,selectedBranchKeyByRepoId:r}=(0,iT.c)(t=>({sortFilterOptions:_B(e.folderId,t.tileSortFilterStateByView),selectedBranchKeyByRepoId:t.selectedBranchKeyByRepoId})),a=(0,m3.SZ)(),i=(0,m.v9)(({currentUserOrgId:e})=>e),s=(0,T.it)("exp_aa_test_org_drafts");i&&s.getConfig();let n=()=>{},[o,l]=m4({folderId:e.folderId,source:"drafts",shouldCompareWithUnpaginated:!!(0,p.BZ)().fb_paginated_files_diff_unpaginated_fetch}),d=o.data?.folder,_=(0,eO.vI)(d?.team_id),f=_R({resourceType:eH._g.FOLDER,resource:d,teamId:d?.team_id||null,shadowReadLabel:sT.NL.DraftsPageView.hasBanner}).unwrapOr(!1);n=u.useCallback(()=>{!o.isFetchingNextPage&&o.hasNextPage&&l.fetchNextPage()},[o.isFetchingNextPage,o.hasNextPage,l]);let x=u.useMemo(()=>o.transform(e=>{let t=(e.files||[]).map(e=>(0,rN.dX)(e)),s=e.filesByRepoId||{};return[...t,...(e.repos||[]).map(e=>({type:rN.YU.REPO,repo:e,branches:s[e.id],selectedBranchKey:r[e.id]||""})),...Object.values(a).filter(e=>e.orgId===i).map(rN.jp)]}),[i,o,a,r]),g=u4({tilesResult:x,tileSortFilterConfig:t.tileSortFilterConfig,isDataPartial:!!o.hasNextPage,isDraftsFolder:!0}),h="loaded"===x.status,v=(0,c.jsx)(eu._k,{loadingElementId:"loading-content-pane",result:iI.IE.all([x,g]),loadingElementClassName:P.B.pr32.$,children:([e,r])=>(0,c.jsxs)(u9.o,{onShouldFetchNextPage:n,isFetchingNextPage:o.isFetchingNextPage,children:[(0,c.jsx)(mS,{newFileTile:!0,tiles:e,sortedFilteredTiles:r,tileActions:_L,sortFilterOptions:t,emptyStateText:"",isDraftsFolder:!0,isEligbileForProTeamLockedRevampUI:_}),(0,c.jsx)(ud.ap,{})]},`${t.tileSortFilterConfig.filters.fileType}`)});return(0,j.K)("Drafts"),(0,j.K4)({markName:"MainBodyContent",isLoaded:h,contextArgs:{numFiles:o.transform(e=>e.files.length).unwrapOr(null)}}),(0,r8.bC)((0,c.jsx)(s6.S,{viewBarSticky:!0,banner:f?(0,c.jsx)(_D,{folderId:e.folderId}):void 0,content:v,viewbar:(0,c.jsx)(_M,{})}),at.V4.FILE_BROWSER,{view:"drafts"})}var _V=r(146804),_G=r(313680),_z=r(891782),_W=r(634671),_H=r(617054),_K=r(784969),_Y=r(881445),_Z=r(18810);let _$=(0,tA.Y3)(function(e){let t,r,a=(0,m.I0)(),[i,s]=u.useState(""),n=(0,m.v9)(e=>e.deletedReposById),o=(0,m.v9)(e=>e.fileByKey),{reposToDelete:l,draftsToDelete:d,deleteAllDraftsAsync:_,isDeleteAll:f,isPermanentDeletion:x}=e,g=d.map(e=>e.name).concat(l.map(e=>e.name)),h=g.length>1;t=x?h?(0,A.t)("file_browser.draft_delete_modal.header_multiple_files_delete",{fileCount:g.length}):(0,A.t)("file_browser.draft_delete_modal.header_single_file_delete",{fileName:g[0]}):h?(0,A.t)("file_browser.draft_delete_modal.header_multiple_files_trash",{fileCount:g.length}):(0,A.t)("file_browser.draft_delete_modal.header_single_file_trash");let v=()=>{_?_Z.W.deleteAllPersonalDrafts().then(()=>a(tp.R.enqueue({message:(0,A.t)("file_browser.draft_delete_modal.async_delete_drafts_scheduled")}))).catch(()=>a(tp.R.enqueue({message:(0,A.t)("file_browser.draft_delete_modal.async_delete_drafts_scheduled_error")}))):(()=>{let{draftsToDelete:t,reposToDelete:r}=e;if(t.length+r.length>100)a(a2.l.error((0,A.t)("file_browser.draft_delete_modal.unable_to_delete",{maxSize:100})));else{e.setSynchronousFileTransferInProgress(t.length>0);if(t.length>0)if(x){let r=t.reduce((e,t)=>(e[t.key]=!0,e),{});a(_K.U({fileKeys:r,userInitiated:!0,onSuccessCallback:e.onDeleteSuccess}))}else{let r=t.reduce((e,t)=>(e[t.key]=oc.v.toSinatra(t),e),{});a(_K.c1({fileKeys:r,userInitiated:!0,onSuccessCallback:e.onDeleteSuccess,hideVisualBell:!0}))}let i={};r.forEach(e=>{let t=n[e.id];if(t)i[e.id]=t;else{let t=e.default_file_key&&o[e.default_file_key];t&&(i[e.id]={repo:e,main_file:t})}}),r.length>0&&(x?a((0,_Y.EW)({repoIds:Object.keys(i),userInitiated:!0})):a((0,_Y.MX)({reposById:i,userInitiated:!0})))}})(),e.onClose()},b=u.useMemo(()=>i.trim().toLowerCase()!==(0,A.t)("file_browser.draft_delete_modal.button_delete").toLocaleLowerCase(),[i]);r=x?h?(0,A.t)("file_browser.draft_delete_modal.permanently_delete_multiple_drafts",{fileCount:g.length}):(0,A.t)("file_browser.draft_delete_modal.permanently_delete_one_draft"):h?(0,A.t)("file_browser.draft_delete_modal.you_are_about_to_delete_multiple_drafts",{fileCount:g.length}):(0,A.t)("file_browser.draft_delete_modal.you_are_about_to_delete_single_draft",{fileName:g[0]});let y=x?(0,c.jsx)(ar.VG,{onClick:v,disabled:b,trackingProperties:{isDeletingDraftFromDTM:!0,isPermanentDeletion:x},dataTestId:"draft-delete-confirmation-button",children:(0,c.jsx)("span",{"data-tooltip":(0,A.t)("file_browser.draft_delete_modal.draft_deletion_tooltip",{deletionString:(0,A.t)("file_browser.draft_delete_modal.button_delete")}),"data-tooltip-type":b?ae.fR.TEXT:null,"data-tooltip-max-width":180,"data-tooltip-show-above":!0,children:(0,p.BZ)().ps_trashed_drafts_enabled?(0,A.t)("file_browser.draft_delete_modal.button_permanently_delete_files",{numFiles:g.length}):(0,A.t)("file_browser.draft_delete_modal.button_delete")})}):(0,c.jsx)(r3.RS,{onClick:v,"data-testid":"draft-delete-confirmation-button",trackingProperties:{isDeletingDraftFromDTM:!0,isPermanentDeletion:x},children:(0,A.tx)("file_browser.draft_delete_modal.button_delete_files",{numFiles:g.length})});return(0,c.jsx)(r8.Ui,{name:"draftDeleteModal",properties:{itemCount:g.length,isDeleteAsync:!!_,isDeleteAll:!!f},children:(0,c.jsx)(an.xm,{title:t,minWidth:480,maxWidth:480,onClose:e.onClose,truncateTitleText:!0,fixedCenter:!0,children:(0,c.jsxs)("div",{className:"draft_delete_modal--modalContent--eYaCr",children:[(0,c.jsxs)("p",{children:[r," ",!x&&(0,c.jsxs)("p",{children:[(0,c.jsx)("br",{}),(0,A.tx)("file_browser.draft_delete_modal.you_can_access_drafts_from_deleted_drafts_section",{fileCount:g.length})]})]}),(0,c.jsx)("p",{className:"draft_delete_modal--confirmationTextSpacing--p69gR",children:x&&(0,A.tx)("file_browser.draft_delete_modal.permanently_delete_multiple_drafts_confirmation",{deletionString:(0,A.t)("file_browser.draft_delete_modal.button_delete")})}),(0,c.jsxs)("form",{onSubmit:v,children:[x&&(0,c.jsx)("div",{children:(0,c.jsx)(_H.H,{autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",className:"draft_delete_modal--deleteDraftsInput--AvKAg",dataTestId:"draft-delete-confirmation-input",onChange:e=>{s(e.currentTarget.value)},onKeyDown:e=>{"Enter"===e.key&&e.preventDefault()},spellCheck:!1,type:"text",value:i})}),(0,c.jsxs)("div",{className:"draft_delete_modal--footer--PuQsw",children:[(0,c.jsx)(ar.PL,{onClick:e.onClose,children:(0,A.tx)("modal.cancel")}),y]})]})]})})})},"DraftDeleteModal");var _q=r(757485),_Q=r(893828),_J=r(223875),_X=r(894546);function _0(){return(0,c.jsx)(_X.z,{onClick:()=>g.ZP.unsafeRedirect("https://help.figma.com/hc/articles/18409526530967","_blank"),children:(0,A.tx)("file_browser.drafts_to_move.viewbar_learn_more_link")})}function _1(){let e;return e=(0,p.BZ)().dtm_staging_only_annoucement_flag?(0,A.tx)("file_browser.drafts_to_move.heads_up_these_drafts_will_be_moved_starting_sep_15_staging_only"):(0,p.BZ)().dtm_production_figmate_only_announcement_flag?(0,A.tx)("file_browser.drafts_to_move.heads_up_these_drafts_will_be_moved_starting_sep_17_production_figmate_only"):(0,A.tx)("file_browser.drafts_to_move.heads_up_these_drafts_will_be_moved_starting_october_9"),(0,c.jsxs)(c1.mQ,{variant:"warn",children:[(0,c.jsx)(c5.v,{title:e,children:(0,A.tx)("file_browser.drafts_to_move.we_ll_put_them_in_the_drafts_section_of_a_relevant_plan")}),(0,c.jsx)(_0,{})]})}function _5(){return(0,c.jsxs)(c1.mQ,{variant:"warn",children:[(0,c.jsx)(c5.v,{title:(0,A.tx)("file_browser.drafts_to_move.these_drafts_are_moving_soon"),children:(0,A.tx)("file_browser.drafts_to_move.we_ll_put_them_in_the_drafts_section_of_a_relevant_plan")}),(0,c.jsx)(_0,{})]})}var _2=r(862387);let _4="drafts_to_move_page_view--fileCellDateSpan--1YUpT",_9="drafts_to_move_page_view--dateColumn--k5MlA drafts_to_move_page_view--column--HGiVt table--column--68Hj-",_7="drafts_to_move_page_view--emptyContentContainer--P2TJO",_3="drafts_to_move_page_view--emptyContentHeader--dOe7Y",_6=(0,sa.FM)(sb.mlF),_8=(0,lu.o1)("c9f2d8cbce5754a2b6e3e3e81adf5fe313429577"),pe=(0,lu.o1)("6212099329ba7714b869112a09f8dfffce71edf5");var pt=((d=pt||{}).DRAFT_FILES="draft-files",d.DELETED_DRAFT_FILES="deleted-draft-files",d);function pr(e){let t=Object.keys(pt).map(t=>(0,c.jsx)(_W.y,{tab:pt[t],onClick:()=>(t=>{let r=pt[t].replace(/-/g,"_");(0,Q.T6)({text:r,name:"Drafts to move tab switch"},"cta_clicked"),e.setSelectedTab(pt[t])})(t),isSelected:e.selectedTab===pt[t],tabName:(e=>{switch(e){case"draft-files":return(0,A.t)("file_browser.drafts_to_move.drafts");case"deleted-draft-files":return(0,A.t)("file_browser.drafts_to_move.deleted_drafts");default:(0,O.vE)(e)}})(pt[t])},t));return(0,c.jsx)(iW.Nb,{leftSide:(0,c.jsx)(_W.v,{tabs:t}),rightSide:[]})}function pa(e){let t=(0,m.I0)(),r=(0,m.v9)(e=>e.selectedView),a=(0,on.j)(),{item:i}=e,s=rN.PI.getFileOrMainBranchKey(i)??"",n=e=>s=>{s.detail>1&&!rN.PI.getTrashedAt(i)&&(mR({tile:e,index:0,dispatch:t,selectedView:r}),a(e,s),s.stopPropagation())},o=(0,oI.i)(i);return(0,c.jsxs)("div",{className:P.B.inlineFlex.minW0.$,children:[(0,c.jsxs)("button",{className:"drafts_to_move_page_view--draftThumbnail--OBtSf",onClick:n(i),"data-testid":`fileTile-${s}`,children:[(0,c.jsx)(or.O,{tile:i,noBorder:!0}),(0,c.jsx)("div",{className:"drafts_to_move_page_view--topLeftControls---LaNx",children:(0,c.jsx)(rg.XV,{size:16,type:o})})]}),(0,c.jsxs)("div",{className:P.B.ml14.minW0.flex.flexColumn.itemSelfCenter.$,children:[(0,c.jsx)("button",{className:"drafts_to_move_page_view--fileName--DE-45",onClick:n(i),children:rN.PI.getName(i)}),e.shouldDisplayFileDates&&(0,c.jsxs)("div",{className:"drafts_to_move_page_view--fileCellDatesSection--k6J52",children:[(0,c.jsx)("span",{className:_4,children:(0,A.tx)("file_browser.drafts_to_move.file_created_at_label",{timeDifference:(0,c.jsx)(ow.Lt,{date:rN.PI.getCreatedAt(i)})})}),(0,c.jsx)("span",{className:_4,children:(0,A.tx)("file_browser.drafts_to_move.file_last_modified_at_label",{timeDifference:(0,c.jsx)(ow.Lt,{date:rN.PI.getTouchedAt(i)??""})})})]})]})]})}function pi({currentFileTransferState:e}){let t="dark"===(0,nk.Fg)();return(0,c.jsx)("div",{className:_7,children:(()=>{switch(e){case"ASYNC_FILE_MIGRATION":case"ASYNC_FILE_DELETION ":return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(em.TK,{size:"large"}),(0,c.jsx)("p",{className:"drafts_to_move_page_view--transferContentHeader--ZUNfs",children:(0,A.tx)("file_browser.drafts_to_move.file_transfer_header",{transferType:"ASYNC_FILE_MIGRATION"===e?(0,A.tx)("file_browser.drafts_to_move.file_transfer_migration_type"):(0,A.tx)("file_browser.drafts_to_move.file_transfer_deletion_type")})}),(0,c.jsx)("p",{children:(0,A.tx)("file_browser.drafts_to_move.file_transfer_description")})]});case"TRANSFER_COMPLETED":return(0,c.jsx)("div",{className:"drafts_to_move_page_view--slideIn--PL-TU",children:(0,c.jsxs)("div",{className:"drafts_to_move_page_view--animatedContentContainer--NMSTQ",children:[(0,c.jsx)(_Q.k6,{src:t?_8:pe,containerClassName:"drafts_to_move_page_view--allDoneGif--MtWnA",height:100,width:100}),(0,c.jsx)("p",{className:_3,children:(0,A.tx)("file_browser.drafts_to_move.empty_header")}),(0,c.jsx)("p",{children:(0,A.tx)("file_browser.drafts_to_move.empty_body_text")})]})});default:return(0,c.jsx)(em.TK,{size:"large"})}})()})}function ps(){return(0,c.jsx)(aP.X,{label:"DraftsToMovePageView",children:(0,c.jsx)(pn,{})})}function pn(){let e=(0,m.I0)(),t=(0,m.v9)(e=>e.user?.personal_drafts_folder_id),r=(0,m.v9)(e=>e.fileKeysByFolderId),a=(0,m.v9)(e=>e.fileKeysByRepoId),i=(0,m.v9)(e=>e.repoIdsByFolderId),s=(0,m.v9)(e=>e.repos),n=(0,m.v9)(e=>e.fileByKey),o=(0,m.v9)(e=>e.selectedView),l=(0,m.v9)(e=>e.selectedBranchKeyByRepoId),d=(0,m.v9)(e=>e.userFlags),_=d.personal_draft_migration_scheduled,f=d.personal_draft_migration_completed,x=d.personal_draft_deletion_scheduled,g=d.personal_draft_deletion_completed,h=(0,m.v9)(e=>e.loadedFolders),v=(0,m.v9)(e=>e.deletedFilesByKey),y=(0,m.v9)(e=>e.deletedReposById),{windowInnerWidth:j}=(0,cw.i)(),w=(0,b.DG)((0,e0.$Dh)({})),I=(0,b.DG)((0,e0.Bad)({projectId:t??""}),{enabled:!!t}),E=(0,on.j)(),[k,N]=u.useState("draft-files"),[C,R]=u.useState(!1),[O,D]=u.useState("NONE"),[F,M]=u.useState(!1),[L,B]=u.useState(!1);u.useEffect(()=>{_&&(0,aa.iF)(_.updatedAt,f?.updatedAt)?D("ASYNC_FILE_MIGRATION"):x&&(0,aa.iF)(x.updatedAt,g?.updatedAt)?D("ASYNC_FILE_DELETION "):F?D("SYNCHRONOUS_DELETION_OR_MIGRATION"):D("NONE")},[_,f,x,g,F]),u.useEffect(()=>{e(S.f$({orgId:null}))},[e]);let U="loaded"===w.status,V=u.useMemo(()=>{if(!U)return[];let e=[];return w.data?.currentUser?.draftsFolderId&&e.push(w.data.currentUser.draftsFolderId),e},[U,w]),G=u.useMemo(()=>I.data?.project?.status!==_V.OptionalStatus.Loaded?new Set:new Set((I.data?.project.data?.undeletedFilesHighLimit??[]).map(e=>e.key)),[I]),z=u.useMemo(()=>{if(I.data?.project?.status!==_V.OptionalStatus.Loaded)return new Set;let e=new Set;return(I.data?.project.data?.undeletedFilesHighLimit??[]).forEach(t=>{t.fileRepoId&&e.add(t.fileRepoId)}),e},[I]),W=u.useCallback(e=>G.has(e),[G]),H=u.useCallback(e=>z.has(e),[z]);u.useEffect(()=>V.forEach(t=>U&&e((0,X.G3)({folderId:t,loadedFolders:h}))),[h,V,e,U]);let{getConfig:K}=(0,T.it)("ps_async_draft_move_limit",void 0,!0),Z=K().get("async_limit",100),$=U&&V.every(e=>e&&"loaded"===h[e]),q=u.useMemo(()=>Object.keys(v).map(e=>v[e]).filter(e=>!e.file_repo_id&&e.folder_id===t&&W(e.key)),[v,t,W]),Q=u.useMemo(()=>Object.keys(y).map(e=>y[e]).filter(e=>e&&e.main_file&&e.main_file.folder_id===t&&e.repo&&H(e.repo.id)),[y,t,H]),J=u.useMemo(()=>V.flatMap(e=>i[e]).map(e=>s[e]).filter(e=>!!e&&H(e.id)),[V,s,i,H]),ee=u.useMemo(()=>V.flatMap(e=>r[e]).map(e=>n[e]).filter(e=>!!e&&W(e.key)),[V,n,r,W]);u.useEffect(()=>{let e=ee.length+J.length,t=q.length+Q.length;$&&!L&&(0===e&&t>0&&N("deleted-draft-files"),B(!0))},[$,L,ee.length,J.length,Q.length,q.length]);let et=u.useMemo(()=>ee.concat(q).map(e=>(0,rN.dX)(e)),[ee,q]),er="deleted-draft-files"===k?q:ee,ea=u.useMemo(()=>er.map(e=>(0,rN.dX)(e)),[er]),ei=u.useMemo(()=>J.map(e=>{let t=a[e.id].map(e=>n[e]).filter(e=>!!e);return{type:rN.YU.REPO,repo:e,branches:t,selectedBranchKey:l[e.id]}}),[J,l,n,a]),es=u.useMemo(()=>Q.map(e=>({type:rN.YU.REPO,repo:e.repo,branches:[e.main_file],selectedBranchKey:e.main_file?.key})),[Q]),en="deleted-draft-files"===k?es:ei,eo=es.concat(ei),el=ea.concat(en),ed=et.length>0||eo.length>0,ec=el.length>0,[em,e_]=u.useState([]),ep=()=>{e(tF.hV()),R(!1)},ef=(t,r)=>{e(tp.R.enqueue({message:(0,A.t)("visual_bell.files_moved_to_folder",{fileCount:r,folderName:t})})),M(!1),e_([])},ex=()=>{M(!1),e_([])},eg=e=>{let t=[],r=[];return e.forEach(e=>{e.type===rN.YU.FILE&&t.push(e.file),e.type===rN.YU.REPO&&r.push(e.repo)}),{draftsToMove:t,reposToMove:r}},eh=()=>{let{draftsToMove:t,reposToMove:r}=eg(em);R(!0),e(tF.K4({type:_q.d,data:{draftsToMove:t,reposToMove:r,moveAllDraftsAsync:em.length>Z,onMoveSuccess:ef,onClose:ep,setSynchronousFileTransferInProgress:M}}))},ev=function(e,t,r,a){let i=a>=1200,s=[{name:(0,A.t)("file_browser.drafts_to_move.table_header_name"),className:"drafts_to_move_page_view--nameColumn--jTWH4 drafts_to_move_page_view--column--HGiVt table--column--68Hj-",getSortValue:e=>rN.PI.getName(e),cellComponent:e=>(0,c.jsx)(pa,{item:e,shouldDisplayFileDates:!i})}];return i&&s.push({name:(0,A.t)("file_browser.drafts_to_move.table_header_last_modified"),className:_9,getSortValue:e=>rN.PI.getTouchedAt(e)??"",cellComponent:e=>{let t=rN.PI.getTouchedAt(e);return t?(0,c.jsx)(ow.Lt,{date:t}):""}},{name:(0,A.t)("file_browser.drafts_to_move.table_header_created"),className:_9,getSortValue:e=>rN.PI.getCreatedAt(e),cellComponent:e=>(0,c.jsx)(ow.Lt,{date:rN.PI.getCreatedAt(e)})}),s.push({name:"",className:"drafts_to_move_page_view--moveButtonColumn--J3Kgj drafts_to_move_page_view--column--HGiVt table--column--68Hj-",cellComponent:a=>0===r?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(ar.pJ,{className:Y()("drafts_to_move_page_view--openDraftButton--0qOKN",P.B.if(!!rN.PI.getTrashedAt(a),P.B.invisible).$),onClick:e=>t(e,a),children:(0,A.tx)("file_browser.drafts_to_move.open_draft_button")}),(0,c.jsx)(ar.pJ,{className:"drafts_to_move_page_view--moveDraftButton--nM-Vr",onClick:t=>e(t,a),children:(0,A.tx)("file_browser.drafts_to_move.move_draft_button")})]}):(0,c.jsx)(c.Fragment,{})}),s}((t,r)=>{let{draftsToMove:a,reposToMove:i}=eg([r]);e(tF.K4({type:_q.d,data:{draftsToMove:a,reposToMove:i,onMoveSuccess:ef,onClose:ep,setSynchronousFileTransferInProgress:M}})),t.stopPropagation()},(t,r)=>{mR({tile:r,index:0,dispatch:e,selectedView:o}),E(r,t),t.stopPropagation()},em.length,j),[eb,ey,ej]=(0,_z.g)({columnName:(0,A.t)("file_browser.drafts_to_move.table_header_last_modified"),isReversed:!0},el,ev),ew=(0,c.jsxs)("div",{className:_7,children:[(0,c.jsx)("span",{className:_3,children:(0,A.tx)("file_browser.drafts_to_move.empty_header")}),(0,c.jsx)("span",{children:(0,A.tx)("file_browser.drafts_to_move.empty_content_description",{tab:(0,c.jsx)("button",{className:"drafts_to_move_page_view--emptyContentTab--j9wSq",onClick:()=>N("draft-files"===k?"deleted-draft-files":"draft-files"),children:"draft-files"===k?(0,A.t)("file_browser.drafts_to_move.deleted_drafts"):(0,A.t)("file_browser.drafts_to_move.drafts")})})})]});if("NONE"!==O)return(0,c.jsx)(pi,{currentFileTransferState:O});let eT=em.length<=0||em.length>Z,eI="deleted-draft-files"===k||!(0,p.BZ)().ps_trashed_drafts_enabled,eE=(0,c.jsx)(eu.h2,{loadingElementClassName:"drafts_to_move_page_view--loadingPage--vzoBY",loadingElementId:"loading-content-pane",loaded:$,children:ec?(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("div",{className:"drafts_to_move_page_view--tableWrapper--HeRaT",children:(0,c.jsx)(_J.Ch,{actionBar:t=>(0,c.jsxs)("div",{className:"drafts_to_move_page_view--actionBarButtons--QlO4M",children:[!eT&&(0,c.jsx)(ar.Ok,{className:"drafts_to_move_page_view--deleteDraftsButton--4URnG",onClick:()=>(t=>{let{draftsToMove:r,reposToMove:a}=eg(em);R(!0),e(tF.K4({type:_$,data:{isPermanentDeletion:t,draftsToDelete:r,reposToDelete:a,deleteAllDraftsAsync:em.length>Z,setSynchronousFileTransferInProgress:M,onDeleteSuccess:ex,onClose:ep}}))})(eI),children:eI?(0,A.tx)("file_browser.drafts_to_move.bulk_delete_drafts_button"):(0,A.tx)("file_browser.drafts_to_move.bulk_trash_drafts_button")}),(0,c.jsx)(ar.RS,{className:"drafts_to_move_page_view--moveDraftsButton--1DfZS",disabled:eT,onClick:eh,children:(0,A.tx)("file_browser.drafts_to_move.bulk_move_drafts_button",{numSelected:em.length})})]}),actionBarClassName:Y()("drafts_to_move_page_view--actionBar--atmRy",{"drafts_to_move_page_view--actionBarHidden--j3Zuj":C}),columns:ev,emptyContent:"",getItemKey:e=>rN.PI.getFileOrMainBranchKey(e)??"",isLoading:!_2.kR,itemTypeContext:{itemType:"draftToMove",getSelectedCountString:e=>(0,A.t)("file_browser.drafts_to_move.selected_count_files",{numSelected:e})},items:ej,minContentWidth:728,onSelectedItemsChange:e_,onSetSortState:ey,rowHeightOverride:_6,scrollContainerInnerClassName:"drafts_to_move_page_view--scrollContainer--XGoeV",selectAllDisabled:ej.length>Z,shouldRoundBordersForSelectedRows:!0,sortState:eb,styleOverrideClassNames:{row:"drafts_to_move_page_view--row--e9exS",header:"drafts_to_move_page_view--header--imeFs",unselectedCheckbox:"drafts_to_move_page_view--visibleCheckbox--Y6JFn",batchActionClearButton:"drafts_to_move_page_view--batchActionClearButton--Ckyxp"}})})}):ed?ew:(0,c.jsx)(pi,{currentFileTransferState:"TRANSFER_COMPLETED"})}),ek=$&&((0,p.BZ)().dtm_deprecation_pre_migration_onboarding||(0,p.BZ)().dtm_production_figmate_only_announcement_flag||(0,p.BZ)().dtm_staging_only_annoucement_flag)&&!(0,p.BZ)().dtm_deprecation_migration_onboarding;return(0,r8.bC)((0,c.jsx)(s6.S,{content:eE,viewbar:ed&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"drafts_to_move_page_view--dtmContainer--1gqdU",children:$?(0,p.BZ)().dtm_deprecation_migration_onboarding?(0,c.jsx)(_5,{}):ek?(0,c.jsx)(_1,{}):null:null}),(0,c.jsx)("div",{className:"drafts_to_move_page_view--viewbar--bcds2",children:(0,c.jsxs)("div",{className:"drafts_to_move_page_view--viewbarWarning--R1PSh",children:[(0,c.jsx)(_G.M,{className:"drafts_to_move_page_view--yellowIcon--p4-eB"}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h1",{className:"drafts_to_move_page_view--viewbarHeading--W6eex",children:(0,A.tx)("file_browser.drafts_to_move.viewbar_heading")}),(0,c.jsxs)("ul",{className:"drafts_to_move_page_view--viewbarDescription--iVQJL",children:[(0,c.jsx)("li",{children:(0,A.tx)("file_browser.drafts_to_move.move_drafts_below")}),(0,c.jsx)("li",{children:(0,A.tx)("file_browser.drafts_to_move.drafts_for_personal_work")}),(0,c.jsx)("li",{children:(0,A.tx)("file_browser.drafts_to_move.access_to_drafts")})]}),(0,c.jsxs)("div",{className:"drafts_to_move_page_view--viewbarActions--nXhuk",children:[(0,c.jsx)(ar.RS,{className:"drafts_to_move_page_view--moveAllDraftsButton--R-Gnw",onClick:()=>{R(!0),e(tF.K4({type:_q.d,data:{reposToMove:eo.map(e=>e.repo),draftsToMove:et.map(e=>e.file),onMoveSuccess:ef,isMoveAll:!0,moveAllDraftsAsync:et.length>Z,onClose:ep,setSynchronousFileTransferInProgress:M}}))},children:(0,A.tx)("file_browser.drafts_to_move.move_all_drafts_button")}),(0,c.jsx)(ar.fE,{className:"drafts_to_move_page_view--learnMoreButton--ENvbe drafts_to_move_page_view--moveAllDraftsButton--R-Gnw",href:"https://www.figma.com/blog/updates-to-how-drafts-work/",target:"_blank",children:(0,A.tx)("file_browser.drafts_to_move.viewbar_learn_more_link")})]})]})]})}),(0,c.jsx)("div",{className:"drafts_to_move_page_view--tabViewBarContainer--2u-Hc",children:(0,c.jsx)(pr,{selectedTab:k,setSelectedTab:N})})]})}),at.V4.FILE_BROWSER,{view:"draftsToMove",selectedTab:k})}function po({org:e,currentResourceId:t,hasTrailingDivider:r}){let a=(0,m.I0)();return(0,c.jsx)(oG.gN,{text:e.name,onClick:r=>{a(eL.fv({view:"org",orgId:e.id,orgViewTab:tG.i.HOME})),(0,Q.T6)({clickedResourceType:"org",clickedResourceId:e.id,currentResource:t,orgId:e.id})},hasTrailingDivider:r})}var pl=r(742420);function pd({planEntity:e}){return(0,c.jsxs)(mm.j,{spacing:4,children:[(0,c.jsx)(pl.E,{entityId:e.id,entityName:e.name,imgUrl:e.imgUrl??void 0}),(0,c.jsx)(D.x,{fontSize:13,color:"secondary",children:e.name})]})}function pc({team:e,currentResourceId:t,orgId:r,hasTrailingDivider:a}){let i=(0,m.I0)();return(0,c.jsx)(oG.gN,{text:e.name,onClick:a=>{i(eL.fv({view:"team",teamId:e.id})),(0,Q.T6)({clickedResourceType:"workspace",clickedResourceId:e.id,currentResource:t,orgId:r})},hasTrailingDivider:a})}var pu=r(449943);function pm({workspace:e,currentResourceId:t,orgId:r,hasTrailingDivider:a}){let i=(0,pu.D)(),s=e.id===sq.F,n=!e.canRead;return(0,c.jsx)(oG.gN,{text:s?(0,A.t)("breadcrumbs.unassigned_license_group"):n?(0,A.t)("breadcrumbs.private_workspace_ellipses"):e.name,onClick:a=>{i(e.id,a),(0,Q.T6)({clickedResourceType:"workspace",clickedResourceId:e.id,currentResource:t,orgId:r})},hasTrailingDivider:a,disabled:s||n})}function p_({folderId:e}){let t,r=(0,b.DG)(e0.wYh,{projectId:e}),a=r.data?.project||null,i=(0,et.$0)(),s=(0,e1.Mz)("FolderPageBreadcrumbs").unwrapOr(null),n=s?.key.type===eH.k9.ORG;if(!a?.team)return null;t=n||a.team.org?i!==a.team.org?.id:!a.team.canRead;let o={...a.team,name:a.teamLimitedInfo?.name||"",imgUrl:a.teamLimitedInfo?.imgUrl??null};if(t)return(0,c.jsx)(pd,{planEntity:a.team.org??o});let l=(0,es.Lw)(a.team.org);return(0,c.jsxs)(oG.FD,{children:[a.team.org&&(0,c.jsx)(po,{org:a.team.org,currentResourceId:a.id,hasTrailingDivider:!0}),(a.team.workspace||l)&&a.team.org&&(0,c.jsx)(pm,{workspace:a.team.workspace??{id:sq.F},currentResourceId:a.id,orgId:a.team.org.id,hasTrailingDivider:!0}),(0,c.jsx)(pc,{team:{id:a.team.id,name:a.teamLimitedInfo?.name||""},currentResourceId:a.id,orgId:a.team.org?.id,hasTrailingDivider:!1})]})}var pp=r(483636),pf=r(65181);let px="seen_folder_settings_disconnected_project_share_copy_onboarding",pg="FOLDER_SETTINGS_DISCONNECTED_PROJECT_SHARE_COPY_ONBOARDING_KEY",ph=(0,ey.n_)(px);function pv({folderId:e}){let t=(0,ex.Dv)(ph),[r]=(0,y.aM)((0,e0.je2)({projectId:e})),a=u.useMemo(()=>r.transform(e=>{let t=e.project;if(!t)return!1;let r=t.mostRecentResourceConnection,a=!!r&&!!r.disconnectedAt,i=!!r&&!r.assetTransferRequestId,s=t.canTransferCopy;return a&&i&&s}),[r]),{show:i,isShowing:s,complete:n}=(0,eb.I)({overlay:eE.pXK,priority:ew.b.DEFAULT_MODAL},[t,a]);return(0,h.O)(()=>{i({canShow:(e,t)=>!e&&t})}),(0,c.jsx)(eT.ZZ,{arrowPosition:eI.xI.TOP,clickOutsideToHide:!0,description:(0,c.jsx)(pb,{result:r}),emphasized:!0,isShowing:s,onClose:n,primaryCta:{label:(0,A.tx)("general.got_it"),ctaTrackingDescriptor:ev.y.GOT_IT,type:"button",onClick:n},shouldCenterArrow:eI.Ht.FALLBACK,targetKey:pg,title:(0,A.tx)("resource_connection.onboarding.share_a_project_copy_onboarding_title"),trackingContextName:"seen folder settings disconnected project share copy onboarding overlay",userFlagOnShow:px})}function pb({result:e}){let t=e.data?.project?.mostRecentResourceConnection;if(!t)return null;let r=e=>(0,c.jsx)("span",{className:"folder_settings_disconnected_project_share_copy_onboarding_overlay--planName--6ABM4",children:e});return(0,c.jsx)("div",{className:"folder_settings_disconnected_project_share_copy_onboarding_overlay--descriptionText--hwA1i",children:(0,A.tx)("resource_connection.onboarding.share_a_project_copy_onboarding_description",{hostPlanName:r(t.hostPlanName),connectedPlanName:r(t.connectedPlanName)})})}var py=r(979076);function pj(e){return(0,c.jsx)(aP.X,{label:"TeamUpgradeBanner",children:(0,c.jsx)(pw,{...e})})}function pw(e){let{selectedView:t,userFlags:r,userTeamFlags:a,userEduVerified:i,isFreeUser:s,userAnalyticsData:n,...o}=(0,iT.c)(e=>({selectedView:e.selectedView,userFlags:e.userFlags,userTeamFlags:e.userTeamFlags,userEduVerified:!!e.user?.student_validated_at,isFreeUser:e.isFreeUser,userAnalyticsData:e.userAnalyticsData,...(0,i9.getPermissionsState)(e)})),l=(0,m.I0)(),d=(0,b.DG)(e0.vEc,{}),_=(0,aL.UR)(),{teamId:p,selectedTab:f}=e,x=o.teams[p]??null,g=!!x?.org_id,h=!!x?.subscription,v=(0,b.DG)((0,e0.ZEo)(p?{teamId:p}:null)),y=u.useMemo(()=>v.transform(({team:e})=>!!e?.canAdmin),[v]).unwrapOr(!1),j=(0,m.v9)(e=>e.loadingState),w=ip.H2.loadingKeyForPayload({teamId:p}),T=(0,py.hg)(j,w),I=(0,py.B4)(j,w);(0,u.useEffect)(()=>{!T&&!I&&p&&!g&&h&&y&&l(ip.H2({teamId:p}))},[l,p,g,h,y,T,I]);let E=(0,m.v9)(e=>e.teamBilling?.summary),k=_C(eH._g.TEAM,x,p,{selectedView:t,userFlags:r,userTeamFlags:a,selectedTab:f,isFreeUser:s,userAnalyticsData:n,eduPeriodEnd:d.data?.currentUser?.eduPeriodEnd,offboardingDate:_,billingSummary:E,...o},l,sT.NL.TeamUpgradeBanner.bannerContent).unwrapOr(null);if(!k)return(0,c.jsx)("div",{});let N=_S({resourceType:eH._g.TEAM,teamId:p},k),C=k.severity===_l.h.WARN?_d:"",R=k.bannerClassName||"",S=`${_v} ${C} ${R}`;return(0,c.jsx)("div",{className:S,children:(0,c.jsx)(_A,{...k,tracking:N})})}var pT=r(947090);function pI({folderId:e,pinnedFiles:t,tileActions:r}){let a=(0,m.I0)(),i=(0,eB.A6)(),s=(0,ea.dO)(),{showing:n,show:o,data:l}=(0,oo.H)(),d=(0,on.j)(),_=u.useCallback((t,r,a)=>{d(t,r);let s=t.type===rN.YU.PINNED_FILE?t.file:null;(0,Q.hM)(Q.hn,s,{entrypoint:a,selectedView:i.view,resourceType:"folder",resourceId:e,pinDescription:"file open from pinned files for file named "+s?.name})},[d,i.view,e]),p=u.useCallback((e,t)=>{_(pC(e.file),t,"pinned files")},[_]),f=u.useCallback((e,t,r)=>{a(rI.LA()),a(rI.CD({type:rS.m.PINNED_FILES,keys:e.map(e=>e.file.key)})),o({data:{tile:pC(e[0].file),targetRect:{top:t.clientY,right:t.clientX,bottom:t.clientY,left:t.clientX,width:1,height:1},index:r}})},[a,o]),x=u.useCallback(t=>{if(1!==t.length)return;let r=t[0];r?.pinnedByUser?.id===s&&a(pT.cb({folderId:e,fileKey:r.file.key}))},[s,a,e]),g=u.useMemo(()=>t.filter(({file:e})=>!!e).map(e=>pC(e.file)),[t]),h=(0,rN.H3)(g),v=u.useMemo(()=>t.sort((e,t)=>e.file.createdAt>t.file.createdAt?1:-1),[t]);return(0,c.jsxs)("div",{className:P.B.px32.pb8.m0.$,children:[t.length>0?(0,c.jsx)(sF.X,{handleContextMenu:f,items:v,doNotFocusOnLoad:!0,getAriaLabel:e=>e.file.name,viewType:sV.H6.GRID,handleOpenItem:p,handleDeleteKey:x,gridViewProps:{containerStyle:pR.grid,renderCard:({ref:e,item:t,isSelected:r,role:a,onFocus:i,onClick:s,onBlur:n})=>(0,c.jsx)(pE,{pinnedFile:t,ref:e,isSelected:r,cardRole:a,onFocus:i,onClick:s,onBlur:n}),renderTileDragImage:e=>(0,c.jsx)(rh.mB,{file:e.file,noBorder:!0})}}):(0,c.jsx)("div",{}),(()=>{let e=l?.tile??null;return(0,c.jsx)(ol.b,{tile:e,selectedTiles:h,tileActions:r,openTile:t=>{e&&_(e,t,"pinned files: context menu")},dropdownVisible:n})})()]})}let pE=u.forwardRef(function({pinnedFile:e,isSelected:t,cardRole:r,onClick:a,onFocus:i,onBlur:s,draggable:n},o){let l=pC(e.file);return(0,c.jsx)(os,{ref:o,cardRole:r,draggable:n,isSelected:t,onBlur:s,onClick:a,onFocus:i,subtitle:(0,c.jsx)(pN,{pinnedFile:e}),thumbnail:(0,c.jsx)(or.O,{tile:l,noBorder:!0,size:rK.s.SMALL}),title:(0,c.jsx)(pk,{pinnedFile:e})})});function pk({pinnedFile:e}){return(0,c.jsx)("span",{className:P.B.ellipsis.textBodyLargeStrong.truncate.$,children:e.file.name})}function pN({pinnedFile:e}){return(0,c.jsx)(D.x,{truncate:!0,showTooltipWhenTruncated:!0,color:"secondary",children:(0,A.t)("tile.file_tile.pinned_by_user",{name:e.pinnedByUser?.name??""})})}function pC(e){return{type:rN.YU.PINNED_FILE,file:e}}let pR={grid:{kumcoG:"x1g5i94c",kfSwDN:"x87ps6o",$$css:!0}};var pS=r(783490),pO=r(573497),pP=r(570332),pA=r(677223),pD=r(158680),pF=r(876217),pM=r(810334);let pL=new Set(["PM","ENG","DES","MKT","UR"]),pB=(0,pM.t)(e=>{var t=e?.profile?.job_title??"OTH";if(!t)return"OTH";let r={"software-development":"ENG","user-research":"UR",design:"DES",marketing:"MKT","product-management":"PM",other:"OTH"};if(t in r)return r[t];let a={"project-manager":"PM",designer:"DES",developer:"ENG",marketer:"MKT","product-manager":"PM",consultant:"OTH",sales:"MKT","ux-researcher":"UR",student:"OTH",educator:"OTH"};return t in a?a[t]:t.endsWith("-developer")?"ENG":t.endsWith("-designer")?"DES":t.includes("Eng")||t.includes("Dev")?"ENG":t.includes("Des")?"DES":t.includes("Lead")||t.includes("Man")?"PM":"OTH"});var pU=r(605636),pV=r(785316),pG=r(341339),pz=r(696779);let pW=[eH.gg.WHITEBOARD,eH.gg.SLIDES],pH=(0,ex.cn)(!1);function pK(e){let t=(0,m.I0)(),r=pB((0,ea.xJ)()),a=pO.R.loadingKeyForPayload({shelfType:dA.sq.FILE_BROWSER_RECOMMENDED_TEMPLATES}),i=(0,py.nR)(a),s=(0,py.Dm)(a),n=pL.has(r)?r:dA.$M.ALL,o=(0,ex.b9)(pH);u.useEffect(()=>(o(!0),()=>o(!1)),[o]),u.useEffect(()=>{if(!i&&!s)return t(pO.aJ({shelfType:dA.sq.FILE_BROWSER_TEMPLATES_BAR,filterLabel:n}))},[i,s,t,r,n]);let l=(0,m.v9)(e=>e.communityHub.shelves[dA.sq.FILE_BROWSER_TEMPLATES_BAR]||[]),d=u.useMemo(()=>{let e=new Map;return l.forEach(t=>{e.set(t.id,t.shelf_content.map(e=>e))}),e},[l]),_=u.useCallback(e=>{switch(e){case"All":return(0,A.t)("file_browser.templates_shelf.for_you");case"Brainstorm":return(0,A.t)("file_browser.templates_shelf.brainstorm");case"Reviews":return(0,A.t)("file_browser.templates_shelf.reviews");case"Meetings":return(0,A.t)("file_browser.templates_shelf.meetings");case"Planning":return(0,A.t)("file_browser.templates_shelf.planning");case"Diagram":return(0,A.t)("file_browser.templates_shelf.diagram");default:return null}},[]),p=u.useMemo(()=>{let e=[];return l.forEach(t=>{t.shelf_content.length>0&&e.push({tabKey:t.id,tabTitle:t.title,modifiedTabTitle:_(t.title)})}),e},[l,_]);return 0===p.length?null:(0,c.jsx)(r8.Ui,{name:"topbar_templates_shown",children:(0,c.jsx)("div",{className:"templates_bar--container--FsvIP",children:(0,c.jsx)(pY,{tabNameToTemplatesMap:d,folderId:e.folderId,onClose:e.onClose,tabList:p,newFileFrom:e.newFileFrom})})})}function pY(e){let[t,r]=u.useState(e.tabList[0]),[a,i]=u.useState(e.tabNameToTemplatesMap.get(t.tabKey)??[]),[s,n]=u.useState(null),{sizeRef:o,numTemplates:l,templateWidth:d,templateHeight:m}=function(e){let t=(0,u.useRef)(null),[r,a]=(0,u.useState)(0),i=Math.min(r-4,2229);(0,u.useLayoutEffect)(()=>{a(t?.current?.offsetWidth??0)},[a,t]),(0,pS.yU)(t,e=>{a(e.width)});let s=(0,u.useMemo)(()=>i?Math.min(Math.floor((i+16)/187),e):0,[i,e]),n=s&&i?Math.floor((i-16*(s+1))/s):0,o=n?Math.floor(136*n/171):0;return{sizeRef:t,numTemplates:s,templateWidth:n,templateHeight:o}}(a?.length??0);u.useEffect(()=>{if(!e.tabList||0===e.tabList.length)return;let t=e.tabList[0];r(t),i(e.tabNameToTemplatesMap.get(t.tabKey)??[])},[e.tabList,e.tabNameToTemplatesMap]),u.useEffect(()=>{i(e.tabNameToTemplatesMap.get(t.tabKey)??[])},[t,e.tabNameToTemplatesMap]);let _=(0,c.jsx)(pq,{tabs:e.tabList,activeTab:t,setActiveTab:r});return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"templates_bar--headerContainer--cn78F",children:[(0,c.jsx)("div",{className:"templates_bar--headerLeft--E9ICi",children:(0,c.jsx)(pZ,{})}),(0,c.jsx)("div",{className:"templates_bar--headerEnd--JC9c4",children:_}),(0,c.jsx)("div",{className:"templates_bar--headerRightOld--GTmiK",children:(0,c.jsx)("div",{className:"templates_bar--closeButton--b3VvU",children:(0,c.jsx)(eo.h,{onClick:e.onClose,"aria-label":(0,A.t)("general.close"),children:(0,c.jsx)(el.t,{})})})})]}),(0,c.jsx)("div",{className:"templates_bar--body--1v7AK",ref:o,children:(0,c.jsx)("div",{className:"templates_bar--tilesContainer--iaibN","data-testid":"templates-bar-tiles-container",children:a?.slice(0,l??0).map((r,a)=>(0,c.jsx)("div",{style:{width:d,height:m,marginRight:16},children:(0,c.jsx)(p$,{hubFile:r,rank:a,folderId:e.folderId,tab:t,duplicatingHubId:s,setDuplicatingHubId:n,newFileFrom:e.newFileFrom})},r.id))})})]})}function pZ(){return(0,c.jsx)("div",{className:"templates_bar--headerTitle--E1F5Q text--fontPos13--5OfL8 text--_fontBase--VaHfk",children:(0,A.tx)("file_browser.templates_shelf.interim_title")})}function p$(e){var t;let r=(0,m.I0)(),a=e.hubFile,i=a.id,s=null!==e.duplicatingHubId,n=e.duplicatingHubId===i,o=a&&(0,pU.D3)(e.hubFile),l=t=>{t.stopPropagation(),e.setDuplicatingHubId(i),r(pP.fN({hubFileId:i,hubFileName:o?.name||"this file",openInNewTab:!1,folderId:e.folderId,source:oW.L7.FILE_BROWSER_TEMPLATES_BAR,callback:t=>{e.setDuplicatingHubId(null),(0,Q.T6)({fileKey:t,rank:e.rank,templateId:i,productType:(0,pA.x)(a.viewer_mode)},"topbar_template_selected"),(0,pD.v)("resource_inserted",{fileKey:t,resourceId:i,resourceName:o.name,resourceType:"template",templateType:pV.W.HubFile,triggeredFrom:e.newFileFrom,category:e.tab.tabTitle,templateCategory:e.tab.tabKey})}}))};return a?(0,c.jsx)(pG.iT,{containerStyle:"templates_bar--templatesTileContainer--KPXNj",onClick:s?void 0:l,image:(0,c.jsxs)(pG.fb,{backgroundColor:(0,pF.YI)(a.client_meta),removeBorder:!0,className:"templates_bar--templatesTileImage--XJTbC",customRatioClassName:"templates_bar--imageRatio--N-woz",children:[(0,c.jsx)(pG.$.Cover,{children:(0,c.jsx)("button",{className:"templates_bar--hoverOverlay--6tUuh browse_templates_modal--hoverOverlay--w0Qyl",onClick:l,disabled:s})}),(0,c.jsx)(pG.$.Center,{children:(0,c.jsx)("div",{className:Y()("templates_bar--useTemplateButton--vjKJ5",P.B.bRadius6.$),tabIndex:-1,children:(0,c.jsx)(n_.U,{brand:(t=a.viewer_mode)===eH.Zs.WHITEBOARD?"whiteboard":t===eH.Zs.SLIDE_TEMPLATE?"piper":"design",children:(0,c.jsx)(tV.zx,{onClick:l,disabled:s,children:n?(0,c.jsx)(nl.T,{}):(0,A.tx)("file_browser.new_file_creation_topbar.use_templates")})})})}),(0,c.jsx)(pz.Pk,{image:e.overrideThumbnailUrl||a.thumbnail_url||void 0,isSet:!!e.overrideThumbnailUrl||!!a.thumbnail_is_set,isWhiteboard:a.viewer_mode===eH.Zs.WHITEBOARD,hubFileId:a.id,alt:(0,pU.D3)(a).name,imageClassName:a.viewer_mode===eH.Zs.SLIDE_TEMPLATE?"templates_bar--slidesThumbnailImage--aHG6g templates_bar--thumbnailImage--t-Ce0":"templates_bar--thumbnailImage--t-Ce0",resizedThumbnailUrls:a.resized_thumbnail_urls})]}),bottomRow:(0,c.jsx)(pG.VM.NameAndFileIconMetadata,{name:o.name,className:"templates_bar--tilesBottomRowContainer--pUQ2l",textClassName:"templates_bar--tileBottomRowNameOnly--WBxtg text--fontPos11--rO47d text--_fontBase--VaHfk",viewerMode:a.viewer_mode}),bottomRowStyle:"templates_bar--bottomRowStyle--U5-Yp"}):null}function pq(e){return(0,c.jsx)("div",{className:"templates_bar--tabs--ZqPwn text--fontPos13--5OfL8 text--_fontBase--VaHfk",style:s4.sx.add({columnGap:"26px"}).$,children:e.tabs.map(t=>(0,c.jsx)(pQ,{tab:t,isActive:t.tabKey===e.activeTab.tabKey,setActiveTab:e.setActiveTab},t.tabKey))})}function pQ(e){return(0,c.jsx)(iL.h,{className:Y()("templates_bar--tab--pUz4K text--fontPos11--rO47d text--_fontBase--VaHfk",{"templates_bar--activeTab--e2PZ0":e.isActive}),onClick:()=>{(0,Q.T6)({triggeredFrom:"file-browser",category:e.tab.tabTitle},"template_shelf_category_toggled"),e.setActiveTab(e.tab)},children:e.tab.modifiedTabTitle??e.tab.tabTitle})}var pJ=r(514328),pX=r(768123),p0=r(719214),p1=r(81856),p5=r(599115),p2=r(339189),p4=r(31441);let p9="connected_folder_empty_view--subtitle--gV25e",p7="connected_folder_empty_view--betaTag--b6MjO";function p3(e){var t;let{lgFolder:r,hostPlanName:a,user:i}=e,s=(0,m.I0)(),{properties:n}=(0,r8.gx)(),{handleUpgrade:o,getUpgradeEligibility:l,hasPendingRequest:d,getUpgradePathway:u}=(0,rx.eW)({folderId:r.id}),_=r.canCreateDesignFileWithReasons.result&&r.canEdit,p=(e=>{let t=l(eH.oj.DESIGN,_);return t===p2.V.CAN_UPGRADE?((0,Q.T6)({...n,trackingDescriptor:ev.y.CREATE_FILE,licenseType:eH.oj.DESIGN,billableProductKey:(0,p0.L7)(eH.oj.DESIGN),needsUpgrade:!0}),o({afterUpgradeCallback:e,licenseType:eH.oj.DESIGN,editorType:eH.gg.DESIGN,upgradeReason:p4.t.CREATE_FILE,entryPoint:pX.bH.CREATE_FILE_EMPTY_CONNECTED_PROJECT})):t===p2.V.CANNOT_UPGRADE?()=>s(tp.R.enqueue({message:"Can't upgrade",error:!0})):e})((0,dV.r)({isDraftsFolder:(0,ry.eV)(r),editorType:eH.gg.DESIGN,newFileFrom:oW.L7.FILE_BROWSER_CONNECT_FOLDER_EMPTY_PAGE,contextClicked:"empty_connected_project_page",folderId:r.id})),f=()=>!_&&l(eH.oj.DESIGN)===p2.V.CANNOT_UPGRADE&&d(eH.oj.DESIGN),x=r.team?.org?.id,g=(0,eS.E_)(i,x),h=(0,p5.ni)(r)&&!g;return(0,c.jsxs)("div",{className:"connected_folder_empty_view--connectEmptyStateContainer--kjYZO",children:[(0,c.jsx)("div",{className:"connected_folder_empty_view--connectedEmptyHeading--sGIxU",children:(0,A.tx)("file_browser.folder.what_s_a_connected_project_without_files")}),(0,c.jsxs)("div",{className:"connected_folder_empty_view--creationButtonsContainer--XR38l",children:[(0,c.jsx)(p6,{hideDisabledTooltip:f(),isDisabled:f(),onClick:p,showRequestSentTag:f(),showRequestTag:!_&&l(eH.oj.DESIGN)===p2.V.CAN_UPGRADE&&u(eH.oj.DESIGN)!==p2.e.AUTO_PATHWAY&&!d(eH.oj.DESIGN),subtitle:(0,A.t)("file_browser.folder.create_a_file_in_any_figma_product"),title:(0,A.t)("file_browser.folder.start_from_scratch")}),h&&(0,c.jsx)(p6,{title:(0,A.t)("file_browser.folder.use_existing_work"),onClick:()=>{r&&(s(S.B4(r.id)),s((0,p1.v)()))},subtitle:(0,A.t)("file_browser.folder.import_images_sketch_files_and_pdfs")})]}),(0,c.jsxs)("div",{className:p9,children:[(0,c.jsx)(pJ._,{className:"connected_folder_empty_view--libraryIcon--PC-cB"}),(0,c.jsx)("div",{children:(0,A.tx)("file_browser.folder.the_host_team_can_add_libraries",{hostPlanName:(0,c.jsx)("span",{className:"connected_folder_empty_view--bold--0upsV",children:a}),learnMoreLink:(0,c.jsx)("a",{className:"connected_folder_empty_view--learnMore--4978P modal--blueLink--Mcac6 blue_link--blueLink--4ER8T",href:"https://help.figma.com/hc/articles/30124855491863-Guide-to-connected-projects#h_01JMJDKJFD68CH88F663KG08AJ",target:"_blank",children:t||(0,A.tx)("resource_connection.request_modal.learn_more")})})})]})]})}function p6(e){let t=e.isDisabled,r=e.onClick,a=u.useRef(null),i=u.useCallback(e=>{r(e),a.current?.blur()},[r]),s=(0,dL.vr)().unwrapOr(null);return(0,c.jsxs)("button",{className:Y()("connected_folder_empty_view--creationButton--BIU3A",t&&"connected_folder_empty_view--disabled--UVjpq"),ref:a,"data-testid":"connect_file_browser_create_file_button",tabIndex:0,disabled:t,onClick:t?void 0:i,"data-tooltip":e.isDisabled&&!e.hideDisabledTooltip&&s?s:void 0,"data-tooltip-type":ae.fR.TEXT,children:[(0,c.jsx)("div",{className:"connected_folder_empty_view--creationIcon--eg0JQ",children:(0,c.jsx)(s8.g,{})}),(0,c.jsxs)("div",{className:"connected_folder_empty_view--productNameContainer--fOglf",children:[(0,c.jsx)("span",{className:"connected_folder_empty_view--productName---pgLQ",children:e.title}),(0,c.jsx)("span",{className:p9,children:e.subtitle})]}),e.showRequestTag&&(0,c.jsx)(r7.Ct,{className:p7,text:(0,A.t)("upgrades.request"),color:r7.JV.DEFAULT_TRANSLUCENT}),e.showRequestSentTag&&(0,c.jsx)(r7.Ct,{className:p7,text:(0,A.t)("upgrades.request_sent"),color:r7.JV.DEFAULT_TRANSLUCENT})]})}let p8={open:!0,openNewTab:!0,restoreFromVersion:!0,share:!0,copyLink:!0,rename:!0,duplicate:!0,delete:!0,createBranch:!0,publishOrgTemplate:!0,moveFile:!0,pinToFolder:!0,pinToWorkspace:!0};function fe(e){let t=(0,m.I0)(),r=(0,b.DG)(e0.UR7,{folderId:e.folderId}),a=u.useMemo(()=>"loaded"===r.status?(r.data.project?.pinnedFiles||[]).filter(e=>!!e.file):[],[r]);u.useEffect(()=>{t(pT.YA({folderId:e.folderId,fileKeys:a.map(e=>e.file.key)}))},[a,t,e.folderId]);let i=u.useCallback(()=>{t(rI.LA())},[t]);return 0!==a.length?(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{className:"folder_page_view--pinnedHeader--dHqL9",onMouseDown:i,children:(0,c.jsx)(D.x,{fontSize:13,color:"secondary",children:(0,A.tx)("file_browser.folder.pinned")})}),(0,c.jsx)(pI,{pinnedFiles:a,folderId:e.folderId,tileActions:e.tileActions})]}):null}function ft({files:e,filesByRepoId:t,folderId:r,hasBanner:a,isEditingLocked:i,lgFolder:s,repos:n,team:o,activeProjectConnection:l,infiniteScrollOptions:d}){let _=(0,ea.XU)(),p=(0,eO.vI)(o?.id),f=(0,eO.kP)(),x=(0,m.v9)(e=>fr(r,e.tileSortFilterStateByView)),g=(0,m.v9)(e=>e.selectedBranchKeyByRepoId),h=(0,eP.ZR)(o?.id),v=!!s&&(0,dL.EM)(s),b=v&&!i,y=b?"":(0,A.t)("file_browser.folder.no_files_yet"),{shouldShowTemplatesBar:j,hideTemplatesBar:T}=function({folderId:e,hideTemplatesUserFlag:t,isShowingLockedRedesign:r,additionalVisibilityRequirements:a=!0}){let i=(0,m.I0)(),s=(0,ea.dO)(),{data:n}=(0,dL.RY)(e),o=!!n&&pW.every(e=>(0,dL.tw)(n,e)),l=(0,m.v9)(eK.TS),d=(0,m.v9)(e=>e.userFlags[t]),c=(0,e1.Mz)("useTemplatesBarVisibility").unwrapOr(null),_=c?.tier===eH.Lz.PRO||c?.tier===eH.Lz.STUDENT;return{shouldShowTemplatesBar:!w.ZP.mobile&&o&&!l&&!d&&!r&&_&&a,hideTemplatesBar:(0,u.useCallback)(()=>{i(eG.v({[t]:!0})),(0,Q.T6)({userId:s,opening:!1},"topbar_recommended_templates_toggled")},[s,i,t])}}({folderId:r,hideTemplatesUserFlag:"hide_recommended_templates_in_projects",isShowingLockedRedesign:h||f&&p,additionalVisibilityRequirements:!a}),I=[...(0,u.useMemo)(()=>e.map(e=>(0,rN.dX)(e)),[e]),...n.filter(e=>!e.trashed_at).map(e=>({type:rN.YU.REPO,repo:e,branches:t[e.id],selectedBranchKey:g[e.id]||""}))],E=function({tiles:e,...t}){return u4({tilesResult:u.useMemo(()=>iI.IE.loaded(e),[e]),...t}).data}({tiles:I,tileSortFilterConfig:x.tileSortFilterConfig});return(0,c.jsx)(u9.o,{onShouldFetchNextPage:d.onShouldFetchNextPage,isFetchingNextPage:d.isFetchingNextPage,children:(0,c.jsxs)("div",{className:"folder_page_view--container--wruJf",children:[j&&(0,c.jsx)(pK,{folderId:r,newFileFrom:oW.L7.FILE_BROWSER_TOPBAR_FOLDER,onClose:T}),(0,c.jsx)(fe,{folderId:r,repos:n,tileActions:p8}),(0,c.jsx)(mS,{newFileTile:b,tiles:I,sortedFilteredTiles:E,tileActions:p8,sortFilterOptions:x,emptyStateText:y,emptyStateContent:(()=>{if(0===I.length&&l&&v)return(0,c.jsx)(p3,{lgFolder:s,hostPlanName:l.hostPlanName,user:_})})(),isFolder:!0,isEligbileForProTeamLockedRevampUI:p})]})})}let fr=(0,uz.ws)(ry.zT);var fa=r(61085),fi=r(916078),fs=r(747408);let fn="CONNECTED_PROJECTS_PROJECT_PAGE_ONBOARDING_KEY";function fo({resourceConnection:e}){let t=(0,c.jsx)(id.r,{href:"https://help.figma.com/hc/articles/30124855491863-Guide-to-connected-projects",newTab:!0,children:(0,A.tx)("resource_connection.onboarding.connected_projects_capitalized")}),r=(0,A.tx)("resource_connection.onboarding.connected_projects_are_just_like_normal_projects",{hostPlanName:e.hostPlanName,connectedProjects:t,connectedPlanName:e.connectedPlanName});return(0,c.jsx)(fs.M,{description:r,title:(0,A.tx)("resource_connection.onboarding.projects_are_better_together"),trackingContext:"Connected Projects Project Page Onboarding Modal",onboardingKey:fn,arrowPosition:fi.xI.BOTTOM})}var fl=r(726821),fd=r(715547);function fc({folder:e,onShareClick:t,setFavorite:r,removeFavorite:a}){let{getTriggerProps:i,manager:s}=t2.H9(),n=(0,m.v9)(t=>(0,ry.TC)(e.id,t))??null,o=(0,en.E)({currentOrgId:n,currentTeamId:null}),l=o.transform(e=>(0,J.zF)((0,ec.Wg)(e.currentUser.userSidebarSections)??[],e.currentUser?.baseOrgUser?.fileBrowserPreferences?.orderedSidebarSections??[])).unwrapOr([]),d=u.useMemo(()=>{if("loaded"===o.status)return(0,J.W7)(o.data,e.id)},[o,e.id]),_=u.useCallback(({sectionId:e})=>{r({favoriteId:d?.id,sectionId:e})},[r,d]),p=u.useCallback(()=>{d&&a({favoriteId:d.id})},[a,d]);if("loaded"!==o.status)return(0,c.jsx)("div",{className:P.B.flex.itemsCenter.colorIcon.$,children:(0,c.jsx)(r6.n,{svg:fd.Z})});let f=(0,J.Mi)(o.data,n),x=[];return e.canRead&&x.push((0,c.jsx)(t2.ck,{onClick:t,children:(0,A.tx)("file_browser.folder.share")},"share")),(0,c.jsxs)(t2.fC,{manager:s,children:[(0,c.jsx)(iL.h,{className:Y()(P.B.flex.itemsCenter.colorIcon.$,fl.yY),...i(),children:(0,c.jsx)(t9.O,{})}),(0,c.jsxs)(t2.W2,{children:[x,(0,c.jsxs)(t2.Wd,{children:[(0,c.jsx)(t2.fF,{children:(0,A.tx)("favorited_resources.add_to_sidebar")}),(0,c.jsx)(t2.BH,{children:(0,c.jsx)(rl.c,{setFavorite:_,removeFavorite:p,resourceId:e.id,resourceType:eH.IK.FOLDER,favoriteId:d?.id,currentSectionId:d?.resource.sidebarSectionId??void 0,orderedSidebarSections:l,userHasMaxFavorites:f})})]})]})]})}var fu=r(25100),fm=r(520039),f_=r(397739),fp=r(783168),ff=r(809973),fx=r(774079),fg=r(8303);function fh({lgFolder:e,currentOrgId:t}){return!e.canEdit&&!!e.plan?.isMember&&!e.team?.canAdmin&&null!==t}var fv=r(972798);function fb({folder:e,lgFolder:t,team:r}){let a=(0,m.I0)(),i=(0,m.v9)(e=>"folder"===e.selectedView.view&&e.selectedView.shouldShowRenameModal||!1),s=function(){let e=(0,eP.ZR)(),t=(0,eO.kP)();return e||t}(),n=function(){let e=(0,m.oR)();return(0,u.useCallback)(async t=>{try{await um.ZP.post(`/api/folders/${t}/claim`),e.dispatch(pT.vK({folderId:t})),(0,ry.dL)(t)||e.dispatch((0,X.G3)({folderId:t,loadedFolders:{}}))}catch(t){e.dispatch(a2.l.error(t.message||(0,A.t)("file_browser.file_browser_actions.claim_team_error")))}},[e])}(),o=u.useCallback(()=>n(t.id),[n,t.id]),l=function(e){let t=(0,m.I0)(),r=e.canEdit;return(0,u.useCallback)(()=>{e.name&&r&&t(tF.K4({type:(0,fg.t)(),data:{folder:e}}))},[t,e,r])}(t);(0,h.O)(()=>{i&&l()});let d=(0,q.BF)()===q.o.CONTROL,_=(0,m.v9)(e=>e.currentUserOrgId),p=(0,m.v9)(e=>e.teamRoleRequests),f=t.team?.org?.id,x=t.team?.id,g=fh({lgFolder:t,currentOrgId:_}),v=function({lgFolder:e}){let t=eA({project:e}),r=(0,m.v9)(e=>e.currentUserOrgId);return e.canEdit&&!e.isEditingLockedForUser&&t&&!fh({lgFolder:e,currentOrgId:r})}({lgFolder:t}),b=()=>{a(tF.K4({type:fx.Iq,data:{folderId:t.id}}))},y=t.canRead,j=u.useMemo(()=>{if(g&&p&&r&&p[r.id]&&p[r.id].status===fp.n.PENDING)return p[r.id].id},[g,p,r]);u.useEffect(()=>{g&&_&&a((0,f_.fO)())},[g,a,_]);let w=(0,rE.GG)(f,x),T=s?(0,A.t)("locked_team.label.tooltip"):void 0,I=s?ae.fR.TEXT:void 0,E=({favoriteId:t,sectionId:r})=>{a(eV.Dz({folder:e,entrypoint:"folder_page_view",sectionId:r,favoriteId:t}))},k=({favoriteId:t})=>{a(eV.fC({folder:e,entrypoint:"folder_page_view",favoriteId:t}))},N=function(e){let t=(0,mH.k)(e.id),r=e.canRead,a=e.team?.org?.id,i=(0,u.useMemo)(()=>t({folder:{...e,orgId:a??null},shouldShowJoinButton:!1}),[t,e,a]);return(0,u.useMemo)(()=>{let e=i.some(e=>e.items.length>0);if(r&&e)return{kind:s9.G.CUSTOM,key:na.DROPDOWN,element:(0,c.jsx)(nf,{dataOnboardingKey:pg,buttonAriaLabel:(0,A.t)("file_browser.folder.page_header_dropdown_label"),menuGroups:i})}},[r,i])}(t),C=t?.activeProjectResourceConnections?.[0];return(0,c.jsxs)(z.SV,{boundaryKey:"FolderPageViewHeader",fallback:z.NY.NONE_I_KNOW_WHAT_IM_DOING,severity:m2.mK.Critical,sentryTags:{area:H.k.MONETIZATION_EXPANSION},children:[(0,c.jsx)(s3,{title:t.name,badge:C?(0,c.jsx)(rL.r,{hostPlanName:C?.hostPlanName,connectedPlanName:C?.connectedPlanName,large:!0,dataOnboardingKey:fn}):void 0,rightSideActions:(()=>{let e=[];if(!t.ownerRole&&t.team?.canAdmin&&e.push({kind:s9.G.CUSTOM,key:na.CLAIM,element:(0,c.jsx)(ef.uu,{variant:"secondary",onClick:o,children:(0,A.t)("file_browser.folder.join_as_owner")})}),v&&e.push({kind:s9.G.CUSTOM,key:na.NEW_RESOURCE,showOnMobile:!0,element:(0,c.jsx)(fv.FolderPageViewOmnicreateDropdown,{lgFolder:t,newFileFrom:oW.L7.FILE_BROWSER_TOPBAR_FOLDER})}),y){let t={kind:s9.G.CUSTOM,key:na.SHARE,element:(0,c.jsx)(ef.uu,{variant:"secondary",onClick:b,htmlAttributes:{"data-tooltip-type":I,"data-tooltip":T},disabled:s,children:(0,A.t)("file_browser.folder.share")})};e.push(t)}g&&e.push({kind:s9.G.CUSTOM,key:na.REQUEST_TO_EDIT,element:(0,c.jsx)(ef.uu,{variant:"secondary",onClick:()=>{j?a(fm.pn({requestId:j})):r&&a(tF.K4({type:ff.M,data:{team:r,requesterCurrentLevel:_a.V5.VIEWER,source:"FolderPageView"}}))},children:void 0!==j?(0,A.t)("file_browser.team.cancel_request"):(0,A.t)("file_browser.team.request_to_edit")})}),e.push({kind:s9.G.CUSTOM,key:na.SETTINGS,element:(0,c.jsx)("div",{...{className:"x1n2onr6"},children:(0,c.jsx)(ef.Hz,{variant:"secondary",size:"lg",onClick:()=>{a(tF.K4({type:fu.t,data:{folderId:t.id}}))},"aria-label":(0,A.t)("file_browser.folder_settings_modal.tooltip.settings"),htmlAttributes:{"data-tooltip":(0,A.t)("file_browser.folder_settings_modal.tooltip.settings")},children:(0,c.jsx)(fa.j,{})})})}),d&&w&&e.push({kind:s9.G.CUSTOM,key:na.FAVORITE,element:(0,c.jsx)(nx.d,{setFavorite:E,removeFavorite:k,favoriteType:eH.IK.FOLDER,resourceId:t.id,orgId:_,teamId:x,size:"lg"})});let i=(0,c.jsx)(fc,{folder:t,onShareClick:b,setFavorite:E,removeFavorite:k});return e.push({kind:s9.G.CUSTOM,key:na.PROJECT_OVERFLOW_MENU,showOnMobile:!0,hideOnDesktop:!0,element:i}),e})(),rightSideOfTitleAction:N}),!!C&&(0,c.jsx)(fo,{resourceConnection:C})]})}function fy({folderId:e}){let t=(0,b.DG)(e0.wYh,{projectId:e});var r=e;let[a]=(0,y.aM)((0,e0.Yt0)({projectId:r})),i=a.transform(e=>e.project?.name??null).unwrapOr(null);u.useEffect(()=>{i&&(0,rE.x6)(i)},[i]);let s=(0,eW.Mn)(),[n,o]=function(e){let[t,r]=m4({folderId:e,source:"folder",shouldCompareWithUnpaginated:!!(0,p.BZ)().fb_paginated_files_diff_unpaginated_fetch}),a=u.useCallback(()=>{!t.isFetchingNextPage&&t.hasNextPage&&r.fetchNextPage()},[t.isFetchingNextPage,t.hasNextPage,r]);return(0,pp.ol)("loaded"===t.status,(t,r,a)=>{0===t||r||a||iU.RQ.trackDefinedMetric("file_browser.folder_files_load_time",{durationMs:t,folderId:e})}),[t,a]}(e),l=n.data?.folder,d=t.data?.project||null,_=(0,m.I0)(),f=(0,b.DG)(e0.Cfn,{id:e}),x=(0,eB.A6)(),g="loaded"===f.status&&!f.data.project?.hasPermission||d?.trashedAt,h=d?.trashedAt,v=d?.isAbandonedDrafts&&d?.currentPlanUser?.permission===eH.WM.ADMIN;u.useLayoutEffect(()=>{if(g||h)if(d?.team){let e=d.team.id;_(eL.fv({view:"team",teamId:e}))}else _(eL.fv({view:"recentsAndSharing"}));v&&d.plan&&d.plan.key.parentId&&(d.plan.tier===eH.Lz.PRO?_(eL.fv({view:"abandonedDraftFiles",abandonedDraftFolderId:d.id,planId:d.plan.key.parentId,adminPlanType:oH.k.TEAM})):d.plan.key.type===eH.k9.ORG&&_(eL.fv({view:"abandonedDraftFiles",abandonedDraftFolderId:d.id,planId:d.plan.key.parentId,adminPlanType:oH.k.ORG})))},[_,f,d,g,h,v]);let w=s.teams[d?.teamId||""]||null;u.useEffect(()=>{d&&!d.inviteOnlyAt&&d.teamId&&!w&&_(pf.U2({teamId:d.teamId}))},[_,d,w]);let T=d?.activeProjectResourceConnections?.[0],I=!!w&&!!d?.teamId,E=_R({resource:w,resourceType:eH._g.TEAM,teamId:d?.teamId,shadowReadLabel:sT.NL.FolderPageView.hasBanner}).unwrapOr(!1)&&I,k=(0,et.$0)(),N=(0,uz.ws)(ry.zT),C=(0,m.v9)(t=>N(e,t.tileSortFilterStateByView)),R=!l||!d||"loaded"!==n.status||"loaded"!==t.status;if((0,j.K)("Folder"),(0,j.K4)({markName:"MainBodyContent",isLoaded:!R,contextArgs:{numFiles:n.transform(e=>e.files.length).unwrapOr(null)}}),R)return(0,c.jsx)("div",{className:"folder_page_view--loading--FFmCt",children:(0,c.jsx)(em.TK,{})});let S={view:"project",folderId:e,canEdit:d.canEdit,userSpace:k?at.FQ.ORG:at.FQ.PERSONAL},O=(0,c.jsxs)("div",{...{className:"x78zum5 x167g77z x6s0dn4"},children:[(0,c.jsx)(iW.kP,{config:C.tileSortFilterConfig}),(0,c.jsx)(iW.VP,{dispatch:_,options:C,selectedView:x}),(0,c.jsx)(iW.vs,{initialViewMode:C.tileSortFilterConfig.viewMode,onViewModeChange:e=>{(0,iU.L9)("file view toggle",{viewType:e===sV.H6.GRID?"grid":"list"}),_(eF.lh({selectedView:x,config:{...C.tileSortFilterConfig,viewMode:e}}))}})]});return(0,r8.bC)((0,c.jsx)(s6.S,{content:(0,c.jsxs)("div",{className:P.B.flex.flexColumn.$,children:[(0,c.jsx)(ft,{activeProjectConnection:T?{id:T.id,hostPlanName:T.hostPlanName}:void 0,files:n.data.files,filesByRepoId:n.data.filesByRepoId,folderId:e,hasBanner:E,infiniteScrollOptions:{onShouldFetchNextPage:o,isFetchingNextPage:"isFetchingNextPage"in n&&n.isFetchingNextPage},isEditingLocked:d.isEditingLockedForUser,lgFolder:d,repos:n.data.repos,team:w}),(0,c.jsx)(ud.ap,{})]}),banner:w&&E?(0,c.jsx)(pj,{teamId:w.id}):void 0,toolbar:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(fb,{folder:l,team:w,lgFolder:d}),(0,c.jsx)(pv,{folderId:e})]}),viewbar:(0,c.jsx)(iW.Nb,{leftSide:null,rightSide:O})}),at.V4.FILE_BROWSER,S)}function fj(){let e,t=(0,m.v9)(e=>e.currentTeamId),r=(0,eB.A6)(),a=(0,b.DG)(e0.N2I,{teamId:t??""},{enabled:!!t});if("loaded"!==a.status)e=(0,c.jsx)(em.jz,{});else{let i=("loaded"===a.data.currentUser.status&&a.data.currentUser.data.teamProjectRoles||[]).filter(e=>!!e.project&&(!(0,p.BZ)().dtm_deprecation_org_downgrade||""!==e.project.path)).map(e=>{let t=e.project,r=t.activeProjectResourceConnections?.[0]??null;return{id:t.id,name:t.name,description:t.description,path:t.path,team_id:t.teamId,is_invite_only:!!t.inviteOnlyAt,is_view_only:!!t.viewOnlyAt,deleted_at:t.deletedAt?t.deletedAt.toISOString():null,updated_at:t.updatedAt.toISOString(),created_at:t.createdAt.toISOString(),touched_at:t.lastModifiedAt,shared_at:e.sharedWithYouFolder?.sharedAt.toISOString(),shared_by_user:e.sharedWithYouFolder?.sharedByUser,is_connected_project:!!r,resource_connection:r?{hostPlanName:r.hostPlanName,connectedPlanName:r.connectedPlanName}:null}});e=(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(mq,{viewId:`limitedTeam-${t}`,folderList:i,selectedView:r,isSharerInfoIncluded:!0})})}return(0,r8.bC)((0,c.jsx)(s6.S,{content:(0,c.jsx)(c.Fragment,{children:e}),viewbar:(0,c.jsx)("div",{className:"limited_space_team_projects_page_view--viewbar--BPMr0",children:(0,c.jsx)("div",{className:"limited_space_team_projects_page_view--viewbarHeading--2OmTH",children:(0,A.tx)("file_browser.limited_space_team_projects.heading")})})}),at.V4.FILE_BROWSER,{view:"limitedSpaceTeamProjects"})}function fw({orgId:e}){let t=(0,m.I0)(),r=(0,e1.Rt)("ViewLibrariesAction");return(0,e1.Fg)(r).data?(0,c.jsx)(s9.J,{action:{kind:s9.G.BUTTON,key:na.VIEW_LIBRARIES,displayText:(0,A.t)("org_view.view_libraries"),onClick:()=>{t(eL.fv({view:"org",orgId:e,orgViewTab:tG.i.LIBRARIES}))}}}):null}function fT({canCreateTeam:e,isEnterpriseOrgDirectoryEnabled:t}){let r=(0,m.I0)();return t||!e?null:(0,c.jsx)(s9.J,{action:{kind:s9.G.CUSTOM,key:na.NEW_TEAM,element:(0,c.jsx)(tV.zx,{"aria-label":(0,A.t)("license_group_view.toolbar.new_team_button_aria_label"),variant:"primary",onClick:()=>{r(tF.K4({type:sQ.d3,data:{}}))},iconPrefix:(0,c.jsx)(s8.g,{}),children:(0,A.t)("license_group_view.toolbar.new_team_button")})}})}function fI({orgId:e}){let t=(0,eK.WD)(e),{canCreateTeam:r,cannotCreateTeamReason:a}=(0,es.v8)({id:e},null);return"loaded"!==t.status||a===es.mt.LG_LOADING?null:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(fT,{canCreateTeam:r,isEnterpriseOrgDirectoryEnabled:t.data}),(0,c.jsx)(fw,{orgId:e},"org-library")]})}var fE=r(607496),fk=r(211812);function fN(){let e=(0,m.I0)(),t=(0,et.$0)(),r=_k((0,iT.c)(e=>({...(0,i9.getPermissionsState)(e),selectedView:e.selectedView,userFlags:e.userFlags,userTeamFlags:e.userTeamFlags,isFreeUser:e.isFreeUser,userAnalyticsData:e.userAnalyticsData})),e,sT.NL.OrgDelinquencyBanner.bannerContent).unwrapOr(null);if(!r)return(0,c.jsx)("div",{});let a=_S({resourceType:"org",orgId:t},r),i=r.severity===_l.h.WARN?_d:"",s=`${_v} ${i}`;return(0,c.jsx)("div",{className:s,children:(0,c.jsx)(_A,{...r,tracking:a})})}var fC=r(270961),fR=r(123733),fS=r(795160);function fO(){let e=(0,e1.ZG)("OrgConnectedProjectsContent"),t=e.unwrapOr(null),r=t?.connectionCount??0,a=(0,b.DG)(e0.jC,{planType:t?.key.type??null,planId:t?.key.parentId??""},{enabled:null!==t}),i=u.useMemo(()=>"loaded"!==a.status?[]:((0,ec.Wg)(a.data?.planConnectedProjectsForUser)||[]).map(e=>{let t=(0,ec.Wg)(e.project);return null!=t?(0,rZ.Ni)(t):null}).filter(e=>null!==e),[a]);return"loaded"!==e.status||"loaded"!==a.status?(0,c.jsx)("div",{className:P.B.flex.wFull.hFull.alignCenter.justifyCenter.$,children:(0,c.jsx)(nl.T,{htmlAttributes:{"data-testid":"loading-spinner"}})}):0===r?(0,c.jsx)("div",{className:"org_connected_projects_view--emptyContent--FpVOP",children:(0,c.jsx)(fR.P,{entryPoint:fC.UB.CONNECTED_PROJECT_ORG_PAGE})}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(fS.c,{}),(0,c.jsx)("div",{className:"org_connected_projects_view--tabContentContainer--lsxEg",children:(0,c.jsx)("div",{className:P.B.wFull.$,children:(0,c.jsx)(mW.x,{folderList:i,dataOnboardingKeyIndex:void 0,onChangeSortOptions:_.ZT,viewType:sV.H6.GRID,isSharerInfoIncluded:!1})})})]})}var fP=r(486245);let fA="org_meta_content--container--fC-E8";function fD({org:e}){return(0,c.jsxs)("div",{className:P.B.flex.flexColumn.rowGap16.$,children:[(0,c.jsx)(ro.Kn,{entity:e,size:36}),(0,c.jsx)(D.x,{fontWeight:"medium",fontSize:13,children:e.name})]})}function fF({handle:e}){let t=(0,m.I0)();return(0,c.jsx)(id.r,{trusted:!0,href:new oQ.E3({profileHandle:e}).href,onClick:r=>{r.metaKey||(r.preventDefault(),t(eL.fv({view:"communityHub",subView:"handle",handle:e})))},children:(0,c.jsxs)(D.x,{fontSize:11,children:["@",e]})})}function fM({orgId:e}){let t=(0,m.v9)(t=>(0,ej.IY)(t.orgUsersByOrgId[e]).map(e=>e.user)),r=(0,m.I0)();return(0,c.jsx)(nV,{label:(0,A.t)("org_home_view_meta.admins"),members:t,onMemberClick:(e,t)=>{r(eL.fv({view:"user",userId:t.id,userViewTab:nG.l.INTERNAL_PROFILE}))}})}function fL({org:e,orgStats:t}){let r=t?(0,c.jsxs)(D.x,{fontSize:11,color:"secondary",children:[(0,A.tx)("org_home_view_meta.member_count",{memberCount:t.memberCount.data}),(0,c.jsx)("span",{children:"\xa0\xb7\xa0"}),"workspaceCount"in t?(0,A.tx)("org_home_view_meta.workspace_count",{workspaceCount:t.workspaceCount.data}):(0,A.tx)("org_home_view_meta.team_count",{teamCount:t.discoverableTeamCount.data})]}):(0,c.jsx)(fP.g4,{className:P.B.mb4.$,animationType:fP.F4.SHIMMER});return(0,c.jsxs)("div",{className:fA,children:[(0,c.jsx)(fD,{org:e}),(0,c.jsx)("span",{className:P.B.mt4.$,children:r}),e.community_profile_handle?(0,c.jsx)("span",{className:P.B.mt2.$,children:(0,c.jsx)(fF,{handle:e.community_profile_handle})}):null,(0,c.jsx)("span",{className:P.B.mt32.$,children:(0,c.jsx)(fM,{orgId:e.id})})]})}function fB({org:e}){let t=(0,b.DG)(e0.XVE,{orgId:e.id});return(0,c.jsx)(fL,{orgStats:t.data?.org??null,org:e})}function fU({org:e}){let t=(0,b.DG)(e0.o6R,{orgId:e.id});return(0,c.jsx)(fL,{orgStats:t.data?.org??null,org:e})}function fV({org:e}){return(0,c.jsxs)("div",{className:fA,children:[(0,c.jsx)(fD,{org:e}),e.community_profile_handle?(0,c.jsx)("span",{className:P.B.mt4.$,children:(0,c.jsx)(fF,{handle:e.community_profile_handle})}):null,(0,c.jsx)("span",{className:P.B.mt4.$,children:(0,c.jsxs)(D.x,{fontSize:11,color:"secondary",children:[(0,A.tx)("payments_modal.guest_permission_disclaimer")," ",(0,c.jsx)(id.r,{trusted:!0,newTab:!0,href:"https://help.figma.com/hc/articles/360039957374",children:(0,A.tx)("org_home_view_meta.learn_more")})]})})]})}var fG=r(327857);let fz={[tG.i.HOME]:!0,[tG.i.YOUR_TEAMS]:!0,[tG.i.CONNECTED_PROJECTS]:!0,[tG.i.PLUGINS]:!0,[tG.i.WIDGETS]:!0,[tG.i.LIBRARIES]:!1,[tG.i.FONTS]:!1},fW=Object.keys(fz).filter(e=>fz[e]);function fH(e){let t=(0,m.I0)(),r=(0,e1.Mz)("OrgPageViewBar").unwrapOr(null),a=(0,e1.tY)(r),[i,s,n]=nF.m.useManagedTabs(fz,e.selectedTab,e=>{t(eL.fv({view:"org",orgId:a??"",orgViewTab:e}))}),o=fW.map(e=>(0,u.createElement)(nF.m.Tab,{...i[e],key:e},(e=>{switch(e){case tG.i.HOME:return(0,A.t)("org_view.overview");case tG.i.YOUR_TEAMS:return(0,A.t)("org_view.your_teams");case tG.i.PLUGINS:return(0,A.t)("org_view.plugins");case tG.i.WIDGETS:return(0,A.t)("org_view.widgets");case tG.i.CONNECTED_PROJECTS:return(0,A.t)("org_view.connected_projects");default:return null}})(e)));return(0,c.jsx)(iW.Nb,{leftSide:(0,c.jsx)(nF.m.TabStrip,{manager:n,children:o}),rightSide:[]})}var fK=r(160393);function fY({workspace:e,targetRect:t,isDropdownOpen:r}){let a=nI(),i=(0,et.Ng)(),s=(0,m.I0)();if(!i||!r||!t)return null;let n=a({workspace:e,org:i});return(0,c.jsx)(tM.z,{parentRect:t,items:(0,np.F)(n),dispatch:s,onSelectItem:e=>{e.callback&&e.callback("",null,s)},showPoint:!1,shouldUsePortal:!0})}var fZ=r(402601),f$=r(842095);let fq=u.forwardRef(function({isSelected:e,unassignedTeams:t,draggable:r,cardRole:a,onClick:i,onFocus:s,onBlur:n},o){let l,d,u=(0,ex.Dv)(sO.oV);if(t)l=(0,c.jsx)(ro.uv,{teams:t,size:40}),d=(0,A.tx)("org_view.license_group.unassigned_tile.description",{teamCount:t.length});else if(u&&"loaded"!==u.status)l=(0,c.jsx)(fP.tq,{className:"x100vrsf x1vqgdyp"}),d=(0,c.jsx)(fP.g4,{className:"x1oysuqx",dataTestId:"unassigned-workspace-tile-loading-text"});else{let e=u.data;l=(0,c.jsx)(ro.uv,{teams:e,size:40}),d=(0,A.tx)("org_view.license_group.unassigned_tile.description",{teamCount:e.length})}return(0,c.jsx)(f$.U,{ref:o,cardRole:a,draggable:r,iconImage:l,isSelected:e,onBlur:n,onClick:i,onFocus:s,subtitle:d,title:(0,c.jsx)(D.x,{fontWeight:"medium",fontSize:13,fontFamily:"primary",truncate:"end",children:(0,A.t)("org_view.license_group.unassigned_tile.name")})})});var fQ=r(713540),fJ=r(659482),fX=r(436357);function f0({teamCount:e,workspace:t}){let r=(0,ex.Dv)((0,sO.c5)(t.id));return void 0!==e?(0,A.tx)("org_view.license_group.team_count",{teamCount:e}):"loaded"!==r.status?(0,c.jsx)(fP.g4,{className:P.B.w64.$,dataTestId:"workspace-tile-teams-loading-text"}):(0,A.tx)("org_view.license_group.team_count",{teamCount:r.data})}function f1({workspace:e,titleTextColorClassName:t}){let r=e.orgAccess===eH.Zn.SECRET?(0,c.jsx)("div",{className:P.B.ml4.$,"data-tooltip-type":ae.fR.TEXT,"data-tooltip":(0,A.t)("workspace_table.secret_workspace_lock_tooltip"),"data-tooltip-subtext":(0,A.t)("workspace_table.secret_workspace_lock_tooltip_subtext"),"data-tooltip-timeout-delay":500,"data-tooltip-max-width":300,children:(0,c.jsx)(ug.JO,{icon:"lock-16"})}):null;return(0,c.jsxs)("span",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,c.jsx)(D.x,{fontWeight:"medium",fontSize:13,fontFamily:"primary",truncate:"end",children:(0,c.jsx)("span",{className:t,children:e.name})}),r]})}function f5({workspace:e,teamCountDisplay:t,secondaryTextColorClassName:r}){return(0,c.jsxs)("div",{className:Y()(P.B.flex.flexRow.itemsCenter.$,r),children:[(0,A.tx)("org_view.license_group.member_count",{memberCount:e.memberCount.data??0}),(0,c.jsx)("span",{children:"\xa0\xb7\xa0"}),t]})}let f2=u.forwardRef(function({workspace:e,isSelected:t,isMainWorkspace:r,draggable:a,onClick:i,onFocus:s,onBlur:n,cardRole:o,teamCount:l},d){let _,p,f=(0,m.v9)(e=>e.currentUserOrgId),x=(0,fX.tm)(),g=e.colorConfig?.colors??[],h=r?g[0]:void 0,v=t2.H9(),b=(0,fQ.G)(e.id,eH.IK.WORKSPACE,f),y=u.useMemo(()=>"loaded"===b.status&&void 0!==b.favorite,[b]);h&&(h=function(e,t,r){try{let a=(0,sl.lu)(t),i=(0,sl.Vg)(a),s=(0,sd.iq)(t,!i,i);return r&&s!==t&&(0,iU.L9)("workspace_background_color_adjusted_for_accessibility",{workspace_id:e,original_background_color:t,adjusted_background_color:s}),s}catch(e){console.error(e)}return t}(e.id,h,x()));let j=(0,m.I0)(),w=u.useCallback(({favoriteId:t,sectionId:r})=>{j(eV.lk({workspace:e,entrypoint:"workspace_tile",sectionId:r,favoriteId:t}))},[j,e]),T=u.useCallback(({favoriteId:t})=>{j(eV.r_({workspace:e,entrypoint:"workspace_tile",favoriteId:t}))},[j,e]);h&&((0,sl.Vg)(h)?(_="org_page_view--workspaceTileTitleColorForDarkBackground--Pqhyg",p="org_page_view--secondaryTextColorOnDarkBackground--lAUzz"):(_="org_page_view--workspaceTileTitleColorForLightBackground--sQh-a",p="org_page_view--secondaryTextColorOnLightBackground--EuM3Q"));let I=(0,c.jsx)(ro.zf,{entity:e,size:40}),E=(0,c.jsx)(f0,{teamCount:l,workspace:e}),k=(0,c.jsx)(f5,{workspace:e,teamCountDisplay:E,secondaryTextColorClassName:p}),N=(0,c.jsx)(oi.D.Overlay,{isHoverContentVisibleOverride:y,children:(0,c.jsx)(fJ.P,{favoriteStarMenu:v,setFavorite:w,removeFavorite:T,favoriteType:eH.IK.WORKSPACE,resourceId:e.id,orgId:f})}),C=(0,c.jsx)(f1,{workspace:e,titleTextColorClassName:_});return(0,c.jsx)(f$.U,{ref:d,ariaCurrent:t,backgroundColor:h,cardRole:o,draggable:a,iconImage:I,isHoverContentVisibleOverride:v.manager.isOpen,isSelected:t,onBlur:n,onClick:i,onFocus:s,subtitle:k,title:C,topRightContent:N})});function f4(){return(0,c.jsx)(aP.X,{label:"OrgWorkspacesView",children:(0,c.jsx)(f9,{})})}function f9(){let e=(0,m.I0)(),t=(0,eW.Mn)(),r=(0,et.$0)(),a=(0,es.N_)(r),{canCreateTeam:i}=(0,es.v8)(r?{id:r}:null,null),s=function(e,{description:t,level:r=V.in.INFO,start:a=!0,context:i}={}){let s=(0,u.useRef)(G.l.createVital(e,{level:r,description:t,context:i}));return(0,u.useEffect)(()=>{if(e.includes(" "))throw Error(`Vital name cannot include spaces: ${e}`);a&&s.current.start()},[a,e]),s.current}("OrgWorkspacesView.Load"),n=(0,ex.Dv)(sO.GU),{workspaceTeamCounts:o,unassignedTeams:l}=u.useMemo(()=>{let e=(n.data||[]).filter(e=>(0,sY.kn)(e,t));return{workspaceTeamCounts:(0,rQ.yl)(e),unassignedTeams:e.filter(e=>null===e.workspace_id||void 0===e.workspace_id)}},[t,n]),d=(0,b.DG)(e0.EmY,{orgId:r}),_="loaded"!==n.status,{currentWorkspace:f,otherWorkspaces:x}=u.useMemo(()=>{let e=d.transform(e=>{let t=e.org?.workspaces??[];(0,tN.aV)(t,"name");let r=t.find(e=>e.id===a.data),i=t.filter(e=>e.id!==r?.id);return(l.length>0||_)&&i.push(sq.F),{currentWorkspace:r,otherWorkspaces:i}});return"loaded"===e.status?e.data:{currentWorkspace:null,otherWorkspaces:[]}},[d,a,l,_]);u.useEffect(()=>{s.addContext({currentWorkspaceId:f?.id,workspaceQuery:a?.data}),"loaded"===d.status&&s.stop()},[f,d,s,a.data]);let g=u.useCallback(()=>{e(tF.K4({type:sQ.d3,data:{}}))},[e]),h=!(0,p.BZ)().all_workspaces_incremental_load_teams,v="loaded"!==d.status||h&&_,y=d.transform(e=>e.org?.workspaces?.length??null).unwrapOr(null);if((0,j.K)("OrgAllWorkspaces"),(0,j.K4)({markName:"MainBodyContent",isLoaded:!v,contextArgs:{numWorkspaces:y}}),v)return(0,c.jsx)(sP.r,{isLoading:!0});let w=f&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{...{className:"x1tudf5h"},children:(0,c.jsx)(D.x,{color:"secondary",fontSize:11,children:(0,A.tx)("org_view.your_workspace")})}),(0,c.jsx)(f7,{items:[f],isMainWorkspace:!0,workspaceTeamCounts:o,waitForOrgTeamsToLoad:h,unassignedTeams:l,focusOnLoad:!0})]});return(0,c.jsxs)(c.Fragment,{children:[w,f&&(0,c.jsx)("div",{...{className:"x1tudf5h"},children:(0,c.jsx)(D.x,{color:"secondary",fontSize:11,children:(0,A.tx)("org_view.other_workspaces")})}),0===x.length?(0,c.jsx)(fZ.I,{onCreateTeam:i?g:void 0}):(0,c.jsx)(f7,{items:x,isMainWorkspace:!1,workspaceTeamCounts:o,waitForOrgTeamsToLoad:h,unassignedTeams:l,focusOnLoad:!f})]})}function f7({items:e,isMainWorkspace:t,waitForOrgTeamsToLoad:r,workspaceTeamCounts:a,unassignedTeams:i,focusOnLoad:s}){let{showing:n,show:o,data:l}=(0,sB.xN)("WORKSPACE_CONTEXT_MENU"),d=(0,pu.D)(),m=u.useCallback(e=>e===sq.F?(0,A.t)("org_view.license_group.unassigned_tile.name"):e.name,[]),_=u.useCallback((e,t)=>{d(e===sq.F?null:e.id,t)},[d]),p=u.useCallback((e,t)=>{let r=e[0];r!==sq.F&&o({data:{workspace:r,targetRect:{top:t.clientY,right:t.clientX,bottom:t.clientY,left:t.clientX,width:1,height:1}}})},[o]),f=u.useMemo(()=>({containerStyle:f3.grid,renderCard:({ref:e,item:s,isSelected:n,role:o,onFocus:l,onClick:d,onBlur:u})=>s===sq.F?(0,c.jsx)(fq,{isSelected:n,unassignedTeams:r?i:void 0,ref:e,cardRole:o,onFocus:l,onClick:d,onBlur:u}):(0,c.jsx)(f2,{workspace:s,teamCount:r?a[s.id]??0:void 0,isSelected:n,ref:e,cardRole:o,onFocus:l,onClick:d,onBlur:u,isMainWorkspace:t})}),[t,i,a,r]);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(sF.X,{viewType:sV.H6.GRID,isDraggable:!1,items:e,multiselectDisabled:!0,getAriaLabel:m,gridViewProps:f,handleOpenItem:_,handleContextMenu:p,doNotFocusOnLoad:!s}),n&&(0,c.jsx)(fY,{workspace:l.workspace,isDropdownOpen:n,targetRect:l.targetRect})]})}let f3={grid:{kLKAdn:"x1p5oq8j",kGO01o:"x1gan7if",kE3dHu:"x1tudf5h",kpe85a:"x1m2p0i2",kZCmMZ:null,kwRFfy:null,kumcoG:"x192fo39",$$css:!0}};function f6(e){let t=(0,m.v9)(t=>t.orgById[e.orgId]),r=(0,m.I0)(),a=(0,eK.WD)(e.orgId),i=(0,e1.Rt)("OrgPageView"),s=(0,e1.Fg)(i),n=(0,e1.og)(i);u.useEffect(()=>{s.unwrapOr(!1)&&((0,p.BZ)().fb_org_teams_refetch||r(fE.U2({includeMemberCount:!0,includeTopMembers:!1,includeProjectCount:!0})),r(fk.v5({orgId:e.orgId})))},[s,e.orgId,r]);let o=null;switch(e.selectedTab){case tG.i.WIDGETS:o=(0,c.jsx)(fK.R,{});break;case tG.i.PLUGINS:o=(0,c.jsx)(fG.J,{});break;case tG.i.YOUR_TEAMS:o=(0,c.jsx)(f8,{orgId:e.orgId});break;case tG.i.CONNECTED_PROJECTS:o=(0,c.jsx)(fO,{});break;case tG.i.HOME:case tG.i.FONTS:case tG.i.LIBRARIES:o="loading"===a.status?(0,c.jsx)(sP.r,{isLoading:!0}):a.data?(0,c.jsx)(f4,{}):(0,c.jsx)(xe,{orgId:e.orgId})}let l=null;n.unwrapOr(!1)?l=(0,c.jsx)(fV,{org:t}):"loading"===a.status?l=(0,c.jsx)(fL,{orgStats:null,org:t}):a.data?l=(0,c.jsx)(fB,{org:t}):a.data||(l=(0,c.jsx)(fU,{org:t}));let d=(0,c.jsx)(fH,{selectedTab:e.selectedTab});return(0,c.jsx)(s6.S,{banner:(0,c.jsx)(fN,{}),viewbar:d,content:o,metaContent:l})}function f8({orgId:e}){let t=!!(0,p.BZ)().fb_paginated_joined_teams_shadow_reads,r=s0(),a=s5({workspaceId:null,onlyJoinedTeams:!0}),i=sk(a.status,r),[s]=(0,y.aM)((0,e0.l6B)(t?{orgId:e,firstPageSize:50}:null)),n=u.useMemo(()=>s.transform(e=>sE(e.orgJoinedTeams??[])),[s]);return(0,sT.lT)({enableShadowRead:t,label:sT.NL.OrgPageView.joinedTeams,oldValue:a.data,oldValueReady:i,newValue:n.data,newValueReady:"loaded"===s.status,contextArgs:{orgId:e,numTeams:a.transform(e=>e.length).unwrapOr(null),isGuest:r},comparator:sN}),(0,j.K)("OrgYourTeams"),(0,j.K4)({markName:"MainBodyContent",isLoaded:i,contextArgs:{isGuest:r}}),(0,c.jsx)(sJ,{orgTeamsQuery:a,isGuest:r,workspaceId:null})}function xe({orgId:e}){let t=!!(0,p.BZ)().fb_paginated_all_teams_shadow_reads,r=s0(),a=s5({workspaceId:null,onlyJoinedTeams:!1}),i=sk(a.status,r),[s]=(0,y.aM)((0,e0._qc)(t?{orgId:e,firstPageSize:50}:null)),n=u.useMemo(()=>s.transform(e=>sE(e.orgDiscoverableTeams??[])),[s]);return(0,sT.lT)({enableShadowRead:t,label:sT.NL.OrgPageView.allTeams,oldValue:a.data,oldValueReady:i,newValue:n.data,newValueReady:"loaded"===s.status,contextArgs:{orgId:e,numTeams:a.transform(e=>e.length).unwrapOr(null),isGuest:r},comparator:sN}),(0,j.K)("OrgAllTeams"),(0,j.K4)({markName:"MainBodyContent",isLoaded:i,contextArgs:{isGuest:r}}),(0,c.jsx)(sJ,{orgTeamsQuery:a,isGuest:r,workspaceId:null})}function xt(){let e=(0,m.I0)(),t=(0,ea.XU)();return(0,c.jsx)(s9.J,{action:{kind:s9.G.BUTTON,key:na.VIEW_COMMUNITY_PROFILE,onClick:()=>{e(eL.fv({view:"communityHub",subView:"handle",handle:t.community_profile_handle}))},displayText:(0,A.t)("internal_profile.view_community_profile"),styleClass:P.B.colorText.$}})}var xr=r(547699),xa=r(103321),xi=r(660253),xs=r(566364);function xn({isDisabled:e,isLoading:t,newFileFrom:r}){let a=(0,dV.r)({isDraftsFolder:!0,editorType:eH.gg.COOPER,newFileFrom:r,triggerElement:"pill",contextClicked:"recents_file_creation_thumbnails_created"});return(0,c.jsx)(xs._,{title:(0,A.t)("file_browser.creation_buttons.marketing_asset"),brand:"cooper",dataTestId:"new-cooper-file-button",icon:(0,c.jsx)(xi.t,{}),isDisabled:e,isLoading:t,onClick:a})}var xo=r(255296);function xl({isDisabled:e,isLoading:t,newFileFrom:r}){let a=(0,dV.r)({isDraftsFolder:!0,editorType:eH.gg.DESIGN,newFileFrom:r,triggerElement:"pill",contextClicked:"recents_file_creation_thumbnails_created"});return(0,c.jsx)(xs._,{title:(0,A.t)("file_browser.creation_buttons.design"),brand:"design",dataTestId:"new-design-file-button",icon:(0,c.jsx)(xo.s,{}),isDisabled:e,isLoading:t,onClick:a})}var xd=r(451282);function xc({isDisabled:e,isLoading:t,newFileFrom:r}){let a=(0,dV.r)({isDraftsFolder:!0,editorType:eH.gg.WHITEBOARD,newFileFrom:r,triggerElement:"pill",contextClicked:"recents_file_creation_thumbnails_created"});return(0,c.jsx)(xs._,{title:(0,A.t)("file_browser.creation_buttons.figjam"),brand:"whiteboard",dataTestId:"new-whiteboard-file-button",icon:(0,c.jsx)(xd.t,{}),isDisabled:e,isLoading:t,onClick:a})}var xu=r(330910),xm=r(676864);function x_({isDisabled:e,isLoading:t,newFileFrom:r}){let a=(0,dV.r)({isDraftsFolder:!0,editorType:eH.gg.FIGMAKE,newFileFrom:r,triggerElement:"pill",contextClicked:"recents_file_creation_thumbnails_created"});return(0,c.jsx)(xs._,{title:(0,A.t)("file_browser.creation_buttons.figmake"),brand:"bake-filebrowser",dataOnboardingKey:xr.G,dataTestId:"new-figmake-file-button",icon:(0,c.jsx)(xu.A,{}),isDisabled:e,isLoading:t,onClick:a,showComingSoon:(0,xm.O)()})}var xp=r(985727);function xf(e){return(0,c.jsx)(iL.h,{...{className:"x2lah0s x1d36bvo xb3r6kr x1v8gsql x13bsb82 xpzxyvc x1aqsfbg x6bkol7 x622810 xsfrc4e x13nvs6n"},onClick:e.onClick,"data-testid":e.isLoading?void 0:e.dataTestId,"data-onboarding-key":e.dataOnboardingKey,"data-tooltip":e.tooltipText,"data-tooltip-type":ae.fR.TEXT,"aria-label":e.tooltipText,children:(0,c.jsx)(eu.kO,{loaded:!e.isLoading,loadingSkeletonElement:(0,c.jsx)("div",{...{className:"x1yjdb4r"},children:(0,c.jsx)(fP.tq,{animationType:fP.F4.LIGHT_SHIMMER,...{className:"x10w6t97"}})}),showElementBeforeLoaded:!0,children:(0,c.jsx)("div",{...{className:"xfawy5m"},children:e.icon})})})}function xx({isLoading:e}){let t=(0,m.I0)();return(0,c.jsx)(xf,{dataTestId:"file-import-button",icon:(0,c.jsx)(xp.o,{}),isLoading:e,onClick:()=>{t((0,p1.v)())},tooltipText:(0,A.t)("file_browser.creation_buttons.import")})}var xg=r(698128),xh=r(395624);function xv({isDisabled:e,isLoading:t,newFileFrom:r}){let a=(0,dV.r)({isDraftsFolder:!0,editorType:eH.gg.SLIDES,newFileFrom:r,triggerElement:"pill",contextClicked:"recents_file_creation_thumbnails_created"});return(0,c.jsx)(xs._,{title:(0,A.t)("file_browser.creation_buttons.slide_deck"),brand:"piper",dataTestId:"new-slides-file-button",icon:(0,c.jsx)(xh.a,{}),isDisabled:e,isLoading:t,onClick:a})}function xb({newFileFrom:e}){let t=(0,m.v9)(e=>e.user?.drafts_folder_id),{data:r,status:a}=(0,dL.RY)(t),i=(0,dB.N)(r),s="loading"===a,n=i.map(({editorType:t,canCreate:r})=>{let a=!r;switch(t){case eH.gg.DESIGN:return(0,c.jsx)(xl,{isDisabled:a,isLoading:s,newFileFrom:e},"design");case eH.gg.WHITEBOARD:return(0,c.jsx)(xc,{isDisabled:a,isLoading:s,newFileFrom:e},"whiteboard");case eH.gg.SLIDES:return(0,c.jsx)(xv,{isDisabled:a,isLoading:s,newFileFrom:e},"slides");case eH.gg.SITES:return(0,xa.JI)()?(0,c.jsx)(xg.$,{isDisabled:a,isLoading:s,newFileFrom:e},"seascape"):null;case eH.gg.COOPER:return(0,c.jsx)(xn,{isDisabled:a,isLoading:s,newFileFrom:e},"cooper");case eH.gg.FIGMAKE:return(0,c.jsx)(x_,{isDisabled:a,isLoading:s,newFileFrom:e},"figmake");default:(0,O.vE)(t)}}).filter(Boolean);return n.push((0,c.jsx)(xx,{isLoading:s},"import")),(0,j.K4)({markName:"FileCreateEntrypoint",isLoaded:"loaded"===a}),(0,c.jsx)(c.Fragment,{children:n})}function xy({from:e}){let t=u.useRef(null),r=u.useRef(null),[a,i]=u.useState(!1);return u.useLayoutEffect(()=>{let e=r.current,a=t.current;if(!e||!a)return;let s=()=>{i(a.offsetWidth<e.offsetWidth)};s();let n=new ResizeObserver(s);return n.observe(t.current),()=>n.disconnect()},[]),(0,c.jsxs)("div",{...{className:"xh8yej3 x9f619 x78zum5 x7v6yn8 xz9dl7a xsag5q8"},ref:t,children:[(0,c.jsx)("div",{ref:r,...{0:{className:"x3nfvp2 x167g77z x2lah0s"},1:{className:"x3nfvp2 x167g77z x2lah0s xlshs6z"}}[0|!!a],children:(0,c.jsx)(xb,{newFileFrom:e})}),a&&(0,c.jsx)(dK.$,{newFileFrom:e,dataOnboardingKey:xr.G}),(0,c.jsx)(ud.RD,{newFileFrom:e})]})}var xj=r(318471),xw=r(228414),xT=r(481484),xI=r(694663),xE=r(73982),xk=r(789098),xN=r(740436);let xC=(0,ex.cn)(!1);var xR=r(372609),xS=r.n(xR);let xO=[dm._g.FIGMAKE_TEMPLATE,dm._g.SITE_TEMPLATE,dm._g.COOPER_TEMPLATE_FILE,dm._g.DESIGN_TEMPLATE,dm._g.SLIDE_TEMPLATE,dm._g.FIGJAM_TEMPLATE];function xP(){let e=(0,m.v9)(e=>e.user?.drafts_folder_id)??null,{data:t}=(0,dL.RY)(e);return(0,u.useMemo)(()=>xO.filter(e=>{let r=(0,dP.UU)(e);return r&&t&&(0,dL.tw)(t,r)}),[t])}var xA=r(296247),xD=r(119289);let xF=["habit_tracking_app","meditation_app","neighborhood_social_app","plant_care_app","recipe_discovery_app","workout_tracker","science_trivia_app","daily_trivia_challenge","vocabulary_learning_app","grocery_shopping_app","medication_reminder_app","tarot_reading_app","meal_planning_app","flashcard_study_app","spanish_practice_app","photo_diary_app","virtual_pet_app","blogging_app","trip_itinerary_app","sleep_monitoring_app","budget_tracker","brain_training_app","productivity_dashboard","music_creation_tool","moodboard_tool","elearning_platform","event_management_system","quiz_builder","pixel_art_tool","crossword_generator","expense_management_tool","color_palette_generator","project_task_organizer","kanban_board","mind_mapping_tool","story_creation_platform","shared_drawing_space","writing_tool","collage_maker","photographer_portfolio","startup_landing_page","course_landing_page","jewelry_store_homepage","sneaker_product_page","apartment_listing","travel_blog_post","cooking_tutorial","festival_landing_page","resume_site","ux_portfolio","restaurant_menu","japan_itinerary","film_festival_schedule","gamified_resume","music_zine","glowing_button","dating_card_stack","gradient_background","product_showcase_card","confetti_burst","particle_button","magnetic_button","frosted_glass_card","star_rating","ios_toggle_switch","ripple_effect","image_card_reveal","emoji_picker","translucent_button","sparkle_trail","typewriter_effect","business_card_flip"];var xM=r(742524),xL=r(687788);function xB({onSubmit:e}){let[t,r]=(0,u.useState)(""),[a,i]=(0,u.useState)(!1),[s,n]=(0,u.useState)(!1),[o,l]=(0,u.useState)(!0),[d,m]=(0,u.useState)(!1),[_,p]=(0,u.useState)(!1),{suggestedPromptsVariant:f}=(0,q.EB)()(),x=u.useRef(!1),g=u.useRef(!1),v=u.useRef(!1),b=(0,u.useRef)(null),y=(0,ea.dO)()||"";(0,h.O)(()=>{xL.D5?.removeItem(xM.d.FIGMAKE_INITIAL_MESSAGE_KEY)});let j=t.length>0,w=function(e){let t=u.useMemo(()=>(0,tN.TV)(xF.map(e=>(0,A.t)(`figmake.empty_state.prompt_suggestion.${e}`))),[]),[r,a]=(0,u.useState)(""),[i,s]=(0,u.useState)(0),[n,o]=(0,u.useState)(!1),[l,d]=(0,u.useState)(!0);(0,h.O)(()=>{t.length>0&&t[0]&&(f("",t[0]),d(!1))});let c=(0,u.useRef)(!0),m=(0,u.useRef)(null),_=(0,u.useRef)(4e3),p=(0,u.useRef)(null);(0,u.useEffect)(()=>(c.current=!0,()=>{c.current=!1,m.current&&(clearTimeout(m.current),m.current=null)}),[]);let{animatePlaceholderChange:f,isAnimating:x,pauseAnimation:g,resumeAnimation:v,pendingHoverPause:b}=function({setPlaceholderText:e}){let t=(0,u.useRef)(null),[r,a]=(0,u.useState)(!1),[i,s]=(0,u.useState)(!1),[n,o]=(0,u.useState)(!1);(0,u.useEffect)(()=>()=>{t.current&&clearTimeout(t.current)},[]);let l=(0,u.useCallback)(()=>{r?o(!0):s(!0)},[r]),d=(0,u.useCallback)(()=>{s(!1),o(!1)},[]);return{animatePlaceholderChange:(0,u.useCallback)((r,i)=>{t.current&&clearTimeout(t.current),a(!0),o(!1);let l=e=>0===e?20:Math.max(7,Math.min(35,200/Math.sqrt(e)*1));((r,a)=>{let i=l(r.length),s=r.length,n=()=>{s>0?(s--,e(r.slice(0,s)),t.current=setTimeout(n,i)):a()};n()})(r,()=>{let r=l(i.length),d=0,c=()=>{d<i.length?(d++,e(i.slice(0,d)),t.current=setTimeout(c,r)):(a(!1),n&&(s(!0),o(!1)))};c()})},[e,n]),isAnimating:r,isPaused:i,pauseAnimation:l,resumeAnimation:d,pendingHoverPause:n}}({setPlaceholderText:a}),y=(0,u.useCallback)(()=>{if(g(),m.current&&null!=p.current){let e=Date.now()-p.current;_.current=Math.max(0,_.current-e),clearTimeout(m.current),m.current=null,p.current=null}o(!0)},[g]),j=(0,u.useCallback)(()=>{o(!1),v()},[v]);return(0,u.useEffect)(()=>{if(!(!e&&!n&&t.length>0)){m.current&&(clearTimeout(m.current),m.current=null),n||(_.current=4e3,p.current=null);return}if(!x){if(!m.current){p.current=Date.now();let e=Math.max(0,_.current);m.current=window.setTimeout(()=>{s(e=>{let r=(e+1)%t.length,a=t[e],i=t[r];return a&&i&&f(a,i),r}),_.current=4e3,p.current=null,m.current=null},e)}return()=>{}}},[e,n,x,t,f]),{placeholderText:r,getCurrentSuggestedPrompt:()=>t[i]||"",isAnimating:x,isInitialMount:l,pauseAnimation:y,resumeAnimation:j,pendingHoverPause:b,resetAnimation:(0,u.useCallback)(()=>{m.current&&(clearTimeout(m.current),m.current=null),_.current=4e3,p.current=null,o(!1);let e=t.length>1?(i+1)%t.length:0;s(e),a("");let r=t[e];r&&c.current&&f("",r)},[t,f,i])}}(!f||j),{placeholderText:T="",getCurrentSuggestedPrompt:I=()=>"",isAnimating:E=!1,isInitialMount:k=!1,pauseAnimation:N=()=>{},resumeAnimation:C=()=>{},resetAnimation:R=()=>{}}=f?w:{},S=(0,u.useCallback)((e,t)=>{r(e),p(t),!d&&e.length>0&&(iU.RQ.trackDefinedEvent("activation.file_browser_prompt_box.first_typed_into",{userId:y}),m(!0))},[d,y]);(0,u.useEffect)(()=>{if(f){if(v.current&&!E){if(g.current&&a&&!s&&0===t.length&&o){let e=T||I();e&&(S(e,!0),l(!1),N(),x.current=!0)}g.current=!1}v.current=E}},[f,E,a,s,t.length,o,T,I,N,S]),(0,u.useEffect)(()=>{if(f&&!k&&a&&0===t.length&&!s&&o)if(N(),E)g.current=!0;else{let e=T||I();e&&(S(e,!0),x.current=!0,l(!1))}},[f,k,a,t.length,s,o,E,T,I,N,S]);let O=()=>{xL.D5?.setItem(xM.d.FIGMAKE_INITIAL_MESSAGE_KEY,JSON.stringify(t)),r(""),e()};return(0,c.jsx)(n_.U,{brand:"seascape",children:(0,c.jsx)("form",{...{className:"x16v0e3u x1mxnbhz x1x0gksc x78zum5 xdt5ytf x1cy8zhl xkh2ocl xbxdop8"},onSubmit:e=>{e.preventDefault(),0!==t.trim().length&&O()},"data-testid":"prompt-box",onMouseDown:e=>{if(f&&0===t.length){if(!E){let e=T||I();e&&!s&&S(e,!0)}l(!1),N(),x.current=!1,g.current=!1}let r=e.target,a=b.current;!a||r.closest("input")||r.closest("button")||r.closest('[role="button"]')||document.activeElement!==a&&requestAnimationFrame(()=>{a.focus();try{let e=a.value.length;a.setSelectionRange(e,e)}catch{}})},onFocus:()=>{n(!0),f&&(i(!1),x.current=!1,g.current=!1)},onBlur:()=>{n(!1),f&&0===t.length&&(l(!0),R())},onMouseLeave:f?()=>{if(f){if(g.current=!1,x.current&&!s){x.current=!1,i(!1),r(""),l(!0),C();return}0===t.length&&!s&&o&&(i(!1),C())}}:void 0,onMouseEnter:f?()=>{if(f&&0===t.length&&!s&&o&&(i(!0),!k))if(N(),E)g.current=!0;else{let e=T||I();e&&(S(e,!0),x.current=!0,l(!1),N())}}:void 0,children:(0,c.jsxs)("div",{...{className:"x78zum5 x6s0dn4 xkh2ocl x98rzlu x1n2onr6 x109j2v6 x15h74y x1hhzuzn x5tiur9 xou54vl xb3r6kr"},children:[(0,c.jsx)("input",{ref:b,...{className:"x98rzlu xktpd3l x1a2a7pz x1ed109x x4z9k3i x1akne3o xjbqb8w x17rw0jw x1ghz6dp x1717udv xjb2p0i xuggh6c"},value:t,onChange:e=>{S(e.target.value,!1),f&&e.target.value.length>0&&(i(!1),x.current=!1,g.current=!1)},onKeyDown:e=>{if("Enter"===e.key&&!e.shiftKey&&!e.nativeEvent.isComposing){if(e.preventDefault(),0===t.trim().length)return;(0,Q.T6)({name:"file_browser_prompt_box_make_button",promptType:_?"suggested":"custom"}),O()}"Enter"===e.key&&e.shiftKey&&e.preventDefault()},placeholder:t.length>0||s?"":f?T:(0,A.t)("figmake.empty_state.prompt_title"),"aria-label":(0,A.t)("figmake.file_browser_prompt_box.input_field_label")}),(0,c.jsxs)(ef.CN,{...{0:{className:"x78zum5 xyv8faw x14atkfc xd7y6wv x1gskr33 x1cmmqis x1ihwiht xf18ygs x6s0dn4 xl56j7k xdlk57i x131gfan x1jnr06f x2lah0s x8x9d4c"},1:{className:"x78zum5 xyv8faw x14atkfc xd7y6wv x1gskr33 x1cmmqis x1ihwiht xf18ygs x6s0dn4 xl56j7k xdlk57i x131gfan x1jnr06f x2lah0s x8x9d4c xgbcquw x7oc584"}}[0===t.trim().length|0],type:"submit",disabled:0===t.trim().length,"data-testid":"prompt-box-submit-button",trackingProperties:{name:"file_browser_prompt_box_make_button",promptType:_?"suggested":"custom"},"aria-label":(0,A.t)("figmake.file_browser_prompt_box.make_button_label"),children:[(0,c.jsx)("span",{...{className:"x1tk3asg x2b8uid xlkyzom x1j6dyjg x1j61x8r x10p5zqr x8iu3zt x1lx7fe9 xuxw1ft"},children:(0,A.t)("figmake.file_browser_prompt_box.make_button")}),(0,c.jsx)("span",{...{className:"xwa2v1s x78zum5 x6s0dn4"},children:(0,c.jsx)(xD.j,{})})]})]})})})}function xU({onDismiss:e}){let t=(0,dV.V)({isDraftsFolder:!0,newFileFrom:oW.L7.FILE_BROWSER_PROMPT_BOX})({editorType:eH.gg.FIGMAKE,triggerElement:"pill",contextClicked:"file-browser-prompt-box"}),r=(0,m.I0)(),{color:a}=(0,nm.M)();return(0,c.jsx)(n_.U,{brand:"seascape",children:(0,c.jsxs)("div",{...{0:{className:"x1w4f5ud xpezlj7 xbdeg4j xl8oe17 x78zum5 xdt5ytf x1cy8zhl xkh2ocl xou54vl xlvnts1"},1:{className:"x1w4f5ud xpezlj7 xbdeg4j xl8oe17 x78zum5 xdt5ytf x1cy8zhl xkh2ocl xou54vl x1urz9vi"}}["dark"===a|0],children:[(0,c.jsxs)("div",{...{className:"x78zum5 x6s0dn4 xkh2ocl x167g77z x13y4tvo"},children:[(0,c.jsx)("h2",{...{className:"xor4psk xosj86m xaoa4km x2i041 x14terfx x1akne3o xdpxx8g"},children:(0,A.t)("figmake.file_browser_prompt_box.header")}),(0,c.jsx)("div",{...{className:"x78zum5 x6s0dn4 x2lah0s"},children:(0,c.jsx)(xA.Xp,{helpUrlVariant:xN.v6.CODE_CHAT,ariaLabel:(0,A.t)("figmake.file_browser_prompt_box.ai_badge_label")})}),(0,c.jsx)("div",{...{className:"x78zum5 x6s0dn4 xfq8vap x8x9d4c"},children:(0,c.jsx)(ef.Hz,{"aria-label":(0,A.t)("figmake.file_browser_prompt_box.dismiss_label"),onClick:e,"data-testid":"prompt-box-dismiss-button",trackingProperties:{name:"file_browser_prompt_box_dismiss_button"},children:(0,c.jsx)(ue.J,{})})})]}),(0,c.jsx)(xB,{onSubmit:()=>{t(),r(eG.v({used_file_browser_prompt_box:!0}))}})]})})}var xV=r(926286),xG=r(157981),xz=r(587578),xW=r(95388),xH=r(80593),xK=r(715182),xY=r(394056);function xZ({buttonProps:e,image:t,title:r,author:a}){return(0,c.jsxs)(iL.h,{className:"home_shelf_resource_tile--resourceTileButton--NNuSy",...e,"data-testid":"home-shelf-resource-tile",children:[(0,c.jsxs)("div",{className:"home_shelf_resource_tile--homeShelfResourceTile--jlVQm",children:[(0,c.jsx)("div",{className:"home_shelf_resource_tile--homeShelfTileImageContainer--sssH-",children:t}),(0,c.jsx)("div",{className:"home_shelf_resource_tile--title--6ENUu",children:r})]}),a]})}function x$(){return(0,c.jsx)(xZ,{buttonProps:{disabled:!0},image:(0,c.jsx)(fP.tq,{className:"home_shelf_resource_tile--loadingImage--44jTW home_shelf_resource_tile--loadingColor--Akyob",animationType:fP.F4.NO_SHIMMER}),title:(0,c.jsx)(fP.g4,{className:"home_shelf_resource_tile--loadingTitleText--NRKXx home_shelf_resource_tile--title--6ENUu home_shelf_resource_tile--loadingColor--Akyob",animationType:fP.F4.NO_SHIMMER}),author:(0,c.jsx)(fP.g4,{className:"home_shelf_resource_tile--loadingAuthor--Ayj8g home_shelf_resource_tile--author--6D6fb home_shelf_resource_tile--loadingColor--Akyob",animationType:fP.F4.NO_SHIMMER})})}function xq({resource:e,isSelected:t,onFocus:r}){let a=(0,m.I0)(),i=(0,ch.f3)(e),s=(0,u.useCallback)(()=>{(0,xY.qF)(a,e,{openInNewTab:!1,shouldUpdateUrl:!1}),(0,lQ.VC)(e.resource_type,e.id)},[a,e]),n=u.useRef(null);u.useEffect(()=>{t&&n.current?.focus()},[t]);let o=(0,u.useMemo)(()=>({onClick:s,"aria-label":e.name,"aria-current":t,htmlAttributes:{onFocus:r},ref:n}),[s,t,e.name,r,n]);return(0,c.jsx)(xZ,{buttonProps:o,image:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(xH.X,{resource:e,isSelected:t}),(0,c.jsx)("div",{className:"home_shelf_resource_tile--tileEditorIcon--J3sMN",children:(0,c.jsx)(xK.Td,{editorType:e.editor_types[0]})})]}),title:(0,c.jsx)("div",{className:"home_shelf_resource_tile--titleText--cjvM-",children:e.name}),author:(0,c.jsxs)("div",{className:"home_shelf_resource_tile--subtitle--IZzZd",children:[(0,c.jsx)("span",{className:"home_shelf_resource_tile--author--6D6fb",children:(0,A.tx)("community.resource_tiles.by_author",{author:i})}),"\xa0\xa0\xb7\xa0\xa0",(0,c.jsxs)("div",{className:"home_shelf_resource_tile--metrics--ktgfB",children:[(0,c.jsx)(xW.Ug,{currentUserLiked:!1,likeCount:e.like_count,disableFontStyling:!0}),(0,c.jsx)(xW.dF,{usageCount:(0,cV.BI)(e),disableFontStyling:!0})]})]})})}let xQ=211/244;var xJ=r(857579),xX=r(904713);function x0(){let e=(0,aN.$2)(),t=(0,aN.Pi)(),r=e&&t?new aN.pX({...e,tab:aC.cP.COMMUNITY},t).href:"";return(0,c.jsxs)(xJ.l,{href:r,onClick:a=>{(0,lQ.WC)(),a.preventDefault(),r?g.ZP.push(r):(0,m2.Jz)(H.k.COMMUNITY,Error("NavigationTile: communityTabLink is empty"),{extra:{sharedRouteParams:e,sharedSearchParams:t}})},...{className:"xh8yej3 x5yr21d x78zum5 xdt5ytf x6s0dn4 x1nhvcw1 x1v2ro7d x1ypdohk x1j6cp45 x1q3dr2t xygyc1y x18v4ro7 x16njcsj x11dejv9 x1nauund"},"aria-label":(0,A.t)("community.home_shelf.see_more_on_community"),children:[(0,c.jsxs)("div",{...{className:"x1lliihq x1n2onr6 x1vjfegm xh8yej3 x1mxnbhz x176lpz5 xb3r6kr x1hx8ycc x1klh5xi"},children:[(0,c.jsx)(o4.oG,{...{className:"x1vjfegm xxcbz4w xmsuar6 x10l6tqk xm6i5cn x2e2xj7 x19y5rnk xbngzmg xgk9eko"},src:(0,lu.o1)("2f1ddf99a93705a145b3e9258c29994c2bcc3296"),alt:""}),(0,c.jsx)(o4.oG,{...{className:"xhtitgo xzc2ltc x1yyo7f6 x10l6tqk xm6i5cn x2e2xj7 x19y5rnk xbngzmg xgk9eko"},src:(0,lu.o1)("3b5e7024cc8ec5912d46ce4c4f555f79de8afa22"),alt:""}),(0,c.jsx)(o4.oG,{...{className:"xzkaem6 x156by65 xyl3i5t x10l6tqk xm6i5cn x2e2xj7 x19y5rnk xbngzmg xgk9eko"},src:(0,lu.o1)("1922e9623fd798bcb563e1f4e9ae105b54d904b4"),alt:""}),(0,c.jsx)(r6.n,{svg:xX.Z,...{className:"x10l6tqk xoegz02 xh8yej3 xqmqy1e xb9t1mx"},svgWidth:"100%",svgHeight:"auto"})]}),(0,c.jsx)("span",{...{className:"xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh xh8yej3 xdpxx8g x1quhyk7"},children:(0,A.t)("community.home_shelf.see_more_on_community")})]})}function x1(){let e=(0,m.I0)(),[t,r]=u.useState([]),[{data:a,status:i,errors:s}]=(0,y.aM)(ds.b.getHomeShelfContent({seenResourceIds:t})),n=function(){let e=(0,u.useRef)(null),[t,r]=(0,u.useState)(0),[a,i]=(0,u.useState)(0),[s,n]=(0,u.useState)(0),o=(0,u.useCallback)(e=>{let t=e-48,a=Math.floor((t-24-244*xQ)/268);if(a<1){r(0),i(0),n(0);return}let s=Math.floor((t-24-24*(a=Math.min(a,16)))/(a+xQ)),o=Math.floor(s*a+24*(a-1)),l=Math.floor(s*xQ);r(a),i(o),n(l)},[]);return(0,u.useLayoutEffect)(()=>{let t=e.current;if(!t)return;o(t.clientWidth);let r=new ResizeObserver(e=>{o(e[0]?.target.clientWidth??0)});return r.observe(e.current),()=>r.disconnect()},[e,o]),(0,u.useMemo)(()=>({tileRowWidth:a,navigationSectionWidth:s,numberOfTiles:t,sizeRef:e}),[a,s,t,e])}(),o=function(e,t){let r=xP();return(0,u.useMemo)(()=>{let a=r.slice(),i=xS()(e,e=>e.resource_type),s=[];for(let r=0;r<e.length+a.length&&s.length!==t&&0!==a.length;r++){let e=(i[a[r%a.length]]??[]).shift();e?s.push(e):a.splice(r%a.length,1)}return s},[e,t,r])}(a?.data.meta.recommended_resources??[],n.numberOfTiles),{trackRejectedResources:l}=function({visibleResources:e}){let{trackResourceImpression:t}=(0,dc.xY)(),{properties:r}=(0,r8.gx)();return(0,u.useEffect)(()=>{e.forEach(e=>{t(e)})},[t,e]),{trackRejectedResources:(0,u.useCallback)(e=>{(0,iU.L9)("community_home_shelf_resources_rejected",{rejectedResourceIds:e.join(),...r})},[r])}}({visibleResources:o}),d=(0,u.useCallback)(()=>{let t=o.map(e=>e.id);r(t),l(t),e(eG.v({refreshed_community_home_shelf_v2_recommendations:!0}))},[l,o,e]);if("errors"===i)return(0,m2.Jz)(H.k.COMMUNITY,s),null;let _=n.numberOfTiles<2;return(0,c.jsx)("div",{ref:n.sizeRef,...{className:"x10im51j xtx6riw"},children:!_&&(0,c.jsxs)("div",{...{className:"x2i9t41 xrxpjvj xexx8yu x8e5d8q x1l90r2v xd3ty66 x1mxnbhz x1sjmt1f"},children:[(0,c.jsxs)("div",{...{className:"x78zum5 x1qughib x6s0dn4 x10dr8xq xnjsko4 xettwda"},children:[(0,c.jsx)("div",{...{className:"x1akne3o x1l3kr2 x1mnx3iv xo8tsow xeefxrb xdjnq2g"},children:(0,A.t)("community.home_shelf.title")}),(0,c.jsxs)("div",{...{className:"x78zum5 x1n2onr6 xncym2f x167g77z x6s0dn4"},children:[(0,c.jsx)(eo.h,{"aria-label":(0,A.t)("community.home_shelf.refresh_label"),onClick:d,disabled:"loading"===i,children:(0,c.jsx)(xV.r,{})}),(0,c.jsx)(eo.h,{"aria-label":(0,A.t)("community.home_shelf.dismiss_label"),onClick:()=>e(eG.v({dismissed_community_home_shelf_v2_recommendations:!0})),children:(0,c.jsx)(xG.O,{})})]})]}),(0,c.jsx)(x2,{sizingInfo:n,resources:o,isLoading:"loading"===i})]})})}function x5(){return(0,c.jsx)("div",{...{className:"x1cqoux5 xeuugli"},children:(0,c.jsx)("div",{className:"x186iv6y xh8yej3 x176lpz5 x19y5rnk xmkeg23 xbsl7fq x7z60cl"})})}function x2({resources:e,isLoading:t,sizingInfo:r}){let a=u.useRef(null),[i,s]=u.useState(null),[n,o]=u.useState(null),l=(0,u.useMemo)(()=>!t&&r.numberOfTiles>e.length?(0,og.w6)(r.numberOfTiles-e.length).map(e=>(0,c.jsx)(x5,{},e)):[],[r.numberOfTiles,e.length,t]),d=t?(0,og.w6)(r.numberOfTiles).map(e=>(0,u.createElement)("div",{className:"x1cqoux5 xeuugli",key:e},(0,c.jsx)(x$,{}))):e.map((e,t)=>(0,u.createElement)("div",{...{className:"x1cqoux5 xeuugli"},key:e.id},(0,c.jsx)(xq,{resource:e,isSelected:n===t,onFocus:()=>{s(t),o(t)}})));return(0,c.jsxs)("div",{...{className:"x78zum5 x1665zp3"},children:[(0,c.jsxs)(xz.Q.div,{role:"grid",tabIndex:0,style:{width:r.tileRowWidth},...{className:"x78zum5 x1665zp3 xh8yej3 x1qughib"},onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},onFocus:e=>{e.target===a.current&&null===n&&(o(0),s(0))},onBlur:e=>{e.relatedTarget&&a.current?.contains(e.relatedTarget)||o(null)},ref:a,onKeyDown:t=>{if("ArrowRight"===t.key){t.preventDefault(),t.stopPropagation();let r=Math.min((i??0)+1,e.length-1);s(r),o(r)}else if("ArrowLeft"===t.key){t.preventDefault(),t.stopPropagation();let e=Math.max((i??0)-1,0);s(e),o(e)}},children:[d,l]}),(0,c.jsx)("div",{className:"x1lliihq x1i1rx1s x1hyhr7 xe0pwq x19ypqd9 x1tcoidr"}),(0,c.jsx)("div",{style:{width:r.navigationSectionWidth},children:(0,c.jsx)(x0,{})})]})}function x4(){let e=(0,m.I0)();return(0,c.jsx)(z.SV,{team:H.k.COMMUNITY,boundaryKey:"RecommendedResourcesShelf",fallback:z.NY.NONE_I_KNOW_WHAT_IM_DOING,onError:()=>{e(tp.R.enqueue({message:(0,A.t)("general.root_error_boundary_title"),type:"react-error"}))},hasCustomWASMBuild:ee.hU,children:(0,c.jsx)(r8.Ui,{name:at.V4.COMMUNITY_HOME_SHELF,children:(0,c.jsx)(x1,{})})})}let x9="dismissed_file_browser_prompt_box";function x7(){let e=(0,m.v9)(e=>e.userFlags),t=(0,q.EB)(),r=e.dismissed_file_browser_prompt_box,a=!!e.used_file_browser_prompt_box||!!(0,p.BZ)().default_used_file_browser_prompt_box_to_true,{loading:i,exceedsLifetimeMax:s}=function(){let e=(0,xT.z5)(x9);return{loading:e?.status==="loading",exceedsLifetimeMax:(e?.data??0)>=3}}(),n=!!r&&!(e=>{if(!e||!e.updatedAt)return!0;let t=14*xj.pU,r=new Date(e.updatedAt).getTime();return Date.now()-r>=t})(r)||s||i,o=function(e){let t=(0,xI.I)().transform(e=>e?.canCreateFigmakeFileWithReasons.result??!1).unwrapOr(!1),{meterAllowed:r}=(0,xk.VY)(xN.v6.FIGMAKE),a=(0,xE.Q)();return t&&r&&(!a||a&&e)}(a),l=(0,m.v9)(e=>e.user?.drafts_folder_id)??null,d=(0,eP.ZR)(),c=(0,eO.kP)(),_=d||c,f=o&&!n&&l&&!w.ZP.mobile&&!_&&t().enabled,x=(0,u.useRef)(!1);return f&&(x.current=!0),{showPromptBox:f,wasPromptBoxEverShown:x.current,draftsFolderId:l,showLockedRedesign:_,promptBoxDismissedFlagCounterLoading:i}}function x3(){let e=(0,ex.b9)(xC),t=function(){let{showPromptBox:e,draftsFolderId:t,showLockedRedesign:r,promptBoxDismissedFlagCounterLoading:a}=x7(),i=!!(0,m.v9)(e=>e.userFlags).dismissed_community_home_shelf_v2_recommendations,s=(0,xw.hh)(),n=(0,m.v9)(({currentUserOrgId:e})=>e),o=(0,m.v9)(({orgById:e})=>e),l=(0,eK.TS)({orgById:o,currentUserOrgId:n}),d=xP();return e?"SHOW_PROMPT_BOX":w.ZP.mobile||!t||r||i||l||0===d.length||!s()||a?"SHOW_NOTHING":"SHOW_RESOURCES_SHELF"}(),[r,a]=(0,u.useState)(!1);return((0,u.useEffect)(()=>{e("SHOW_RESOURCES_SHELF"===t)},[e,t]),"SHOW_NOTHING"===t||r)?null:"SHOW_PROMPT_BOX"===t?(0,c.jsx)(r8.Ui,{name:at.V4.FILE_BROWSER_PROMPT_BOX,children:(0,c.jsx)(xU,{onDismiss:()=>{a(!0),(0,xT.Ns)(x9)}})}):(0,c.jsx)(x4,{})}var x6=r(810952),x8=r(367949),ge=r(739640);let gt=function(e){let t=(0,m.I0)();return(0,c.jsx)(r8.Ui,{name:e.trackingContextName,properties:{severity:_l.h.EVENT},children:(0,c.jsxs)("div",{...{0:{className:"x78zum5 x6s0dn4 x1qughib x1hcpp98 x8lzctc x1i71x30 x1rt4tut"},1:{className:"x78zum5 x6s0dn4 x1qughib x1i71x30 x1rt4tut x1tphvzp x8lzctc"}}["large"===e.size|0],style:{backgroundColor:e.bgColor},children:[(0,c.jsx)("div",{...{className:"x78zum5 x6s0dn4 x1qughib x1iyjqo2 x1i71x30 x1rt4tut"},children:e.children}),(0,c.jsx)(eo.h,{"aria-label":(0,A.t)("general.close"),onClick:()=>{var r;return r=e.userFlag,void t(eG.v({[r]:!0}))},children:(0,c.jsx)(el.t,{})})]})})},gr=function(e){let t=e.copy?(0,c.jsx)("p",{...{0:{className:"x17hqfcz xcw2j8d xemv814 xi9x8a2 x10p5zqr x12638g3 x4lxrar xyny9ap x16r6qr4 x1akne3o"},1:{className:"x17hqfcz xcw2j8d xemv814 xi9x8a2 x10p5zqr x12638g3 x4lxrar xyny9ap x16r6qr4 x1n0bwc9"}}[0|!!e.title],children:e.copy}):null,r=e.beta?(0,c.jsx)("div",{...{className:"x1rg5ohu"},children:(0,c.jsx)(ge.C,{children:(0,A.t)("general.beta")})}):null;return(0,c.jsxs)("div",{children:[e.title?(0,c.jsxs)("div",{...{className:"xxymvpz x1nfngrj"},children:[(0,c.jsx)("h2",{...{0:{className:"x17hqfcz xcw2j8d xemv814 xi9x8a2 x1ma9mv9 x84028e x12638g3 x4lxrar xyny9ap x16r6qr4 xt0psk2 x1akne3o"},1:{className:"x17hqfcz xcw2j8d xemv814 xi9x8a2 x1ma9mv9 x84028e x12638g3 x4lxrar xyny9ap x16r6qr4 xt0psk2 x1akne3o x17qaar8"}}[0|!!e.beta],children:e.title}),r]}):null,t]})},ga=function(e,t){return!!(!(0,tb.p)(e)&&(0,p.BZ)()[t])};var gi=r(28618);function gs({viewerCity:e}){let t="dark"===(0,nk.Fg)();return"Tokyo"===e||a6.q.getFeatureGate("marketing_in_app_banner_commons_2025")?(0,c.jsx)(gn,{trackingContextName:"Figma Commons Tokyo Banner",userFlag:"seen_figma_commons_tokyo_banner",darkModeBgColor:t?df.O9.bgHandoffSecondary:df.O9.bgSecondary,lightModeBgColor:t?df.O9.bgHandoffSecondary:df.O9.bgSecondary,copy:(0,A.t)("banner.marketing_promo.figma_commons_tokyo.title"),registrationLink:"https://events.figma.com/figmacommons-tokyo/PB"}):null}function gn({trackingContextName:e,darkModeBgColor:t,lightModeBgColor:r,copy:a,registrationLink:i,userFlag:s}){let n="dark"===(0,nk.Fg)();return(0,c.jsxs)(gt,{trackingContextName:e,bgColor:n?t:r,userFlag:s,size:"small",children:[(0,c.jsxs)("div",{...{className:"x78zum5 x1q0g3np x1excjyp x6s0dn4 x1nhvcw1"},children:[(0,c.jsx)(go,{}),(0,c.jsx)(gr,{copy:a})]}),(0,c.jsx)(n_.U,{brand:"bake-filebrowser",children:(0,c.jsx)(x8.Ip,{href:i,size:"lg",children:(0,A.t)("banner.marketing_promo.figma_commons_sf.cta")})})]})}function go(){return(0,c.jsxs)("div",{...{className:"x1q0g3np x6s0dn4 x1nfngrj x78zum5 xi0feg2"},children:[(0,c.jsx)(r6.n,{svg:gi.Z,ariaHidden:!0,useOriginalSrcFills_DEPRECATED:!0}),(0,c.jsx)("h2",{className:"xdpxx8g x1vzchgk x1ud3kw6 x1yuz8eb x1l13ptj xnq0rdo xuxw1ft",children:"Figma Commons"})]})}var gl=r(253169),gd=r(336023);function gc({viewerCountry:e}){let t="dark"===(0,nk.Fg)(),r=t?gd.Z:gl.Z;return"IN"===e||a6.q.getFeatureGate("marketing_promo_banner_testing")?(0,c.jsxs)(gt,{trackingContextName:"India Office Opening Banner",bgColor:t?"#874FFF":"#C4BAFF",userFlag:"seen_india_office_banner",size:"small",children:[(0,c.jsxs)("div",{...{className:"x78zum5 x6s0dn4 x13a6bvl xp7eebf x1r05qx8 x14atkfc x1fiy98q"},children:[(0,c.jsx)("div",{...{className:"x1q0g3np x6s0dn4 x78zum5 xi0feg2"},children:(0,c.jsx)(r6.n,{svg:r,ariaLabel:"Shipped: India builds with Figma",useOriginalSrcFills_DEPRECATED:!0})}),(0,c.jsx)(gr,{copy:"Join the virtual livestream on 12th November."})]}),(0,c.jsx)(n_.U,{brand:"bake-filebrowser",children:(0,c.jsx)(x8.Ip,{href:"https://fig-events.figma.com/shipped-india-builds-with-figma/register-for-virtual?utm_source=in-app&utm_medium=pdbanner&utm_campaign=Shipped-India-builds-with-Figma-PD-In-App-Banner",size:"lg",children:(0,A.t)("banner.marketing_promo.register")})})]}):null}function gu(){let e=ga("seen_figma_commons_tokyo_banner","marketing_promo_banner_figma_commons_tokyo"),t=ga("seen_india_office_banner","marketing_promo_banner_india_office"),r=ga("seen_figmake_launch_banner","marketing_promo_banner_figmake_launch"),a=lu.Gm(),{wasPromptBoxEverShown:i,promptBoxDismissedFlagCounterLoading:s}=x7();return s||i?null:t&&a.user_data?.locale==="en"?(0,c.jsx)(gc,{viewerCountry:a.iso_code}):e?(0,c.jsx)(gs,{viewerCity:a.viewer_city}):r?(0,c.jsx)(gm,{}):null}function gm(){let e=(0,dV.r)({isDraftsFolder:!0,editorType:eH.gg.FIGMAKE,newFileFrom:oW.L7.FIGMAKE_LAUNCH_BANNER,contextClicked:"figmake_launch_banner_created"}),t=(0,m.v9)(e=>e.user?.drafts_folder_id),{data:r}=(0,dL.RY)(t),a=(0,dB.N)(r).find(e=>e.editorType===eH.gg.FIGMAKE),i=(0,dL.vr)().unwrapOr(null);if(!a)return null;let s=!a.canCreate,n=s&&i?i:void 0;return(0,c.jsxs)(gt,{trackingContextName:"Figmake Launch Banner",bgColor:df.O9.bgSelectedTertiary,userFlag:"seen_figmake_launch_banner",size:"large",children:[(0,c.jsxs)("div",{...{className:"x78zum5 x1i71x30 x6s0dn4 x1w5s15c x1fiy98q"},children:[(0,c.jsx)("div",{...{className:"xsqpjig x78zum5 x100vrsf x1vqgdyp x14odnwx x2lah0s x6s0dn4 xl56j7k xfm0j5p"},children:(0,c.jsx)(x6.b,{className:"x1849jeq x1gnnpzl xwa2v1s"})}),(0,c.jsx)(gr,{title:(0,A.t)("banner.marketing_promo.figmake_launch.title"),copy:(0,A.t)("banner.marketing_promo.figmake_launch.content"),beta:!1})]}),(0,c.jsx)(n_.U,{brand:"bake-filebrowser",children:(0,c.jsx)(n_.U,{mode:"light",children:(0,c.jsx)(tV.DR,{onClick:e,disabled:s,htmlAttributes:{"data-tooltip":n,"data-tooltip-type":ae.fR.TEXT},children:(0,A.t)("banner.marketing_promo.figmake_launch.cta")})})})]})}var g_=r(586703),gp=r(338328),gf=r(818723),gx=r(789184),gg=r(867893);let gh=(0,gg.sB)(gx.EY,e=>({deleted:e.camel(),file_key:e.camel(),id:e.camel(),name:e.camel(),page_id:e.camel(),thumbnail_meta:e.camel(),is_favorited:e.camel(),thumbnail_url:e.camel(),url:e.camel(),fig_file:e.drop(),recentPrototype:e.drop(),can_read:e.drop()}));(0,gg.uc)((e,t,r)=>[e()(gh),t(gh)(),r(gh)()]);let gv=(0,gg.sB)(gx.iZ,e=>({shared_at:e.camel().custom({toLiveGraph:e=>new Date(e),toSinatra:e=>e.toISOString()}),shared_by:e.camel().custom({toLiveGraph:e=>null==e?null:e,toSinatra:e=>null===e?null:e}),id:e.camel(),org_or_team_name:e.drop(),shared_by_text:e.drop(),thumbnail_url:e.drop(),resource_id:e.drop(),resource_type:e.drop(),prototype:e.drop(),parent_org:e.drop(),parent_team:e.drop(),shared_by_user:e.drop(),accessed_at:e.drop()}));(0,gg.uc)((e,t,r)=>[e()(gv),t(gv)(),r(gv)()]);let gb=(0,gg.sB)(gx.c2,e=>({id:e.camel(),name:e.camel()}));(0,gg.uc)((e,t,r)=>[e()(gb),t(gb)(),r(gb)()]);let gy=(0,gg.sB)(gx.B9,e=>({id:e.camel(),name:e.camel(),imgUrl:e.camel()}));(0,gg.uc)((e,t,r)=>[e()(gy),t(gy)(),r(gy)()]);let gj=(0,gg.sB)(gx.xV,e=>({id:e.camel(),name:e.camel().custom({toLiveGraph:e=>null===e?"":e,toSinatra:e=>e}),imgUrl:e.camel()}));function gw(e){let t=(0,e1.I6)().unwrapOr(null),r=(0,rs.R)(t?.planRecordId),a=(0,b.DG)(e0.uvx,{resourceTypes:e.resourceTypes,firstPageSize:30,sortOrder:e.sortOrder,cursorColumn:e.sortKey,sharedBy:e.sharedBy||null,planId:e.planId||null,planType:e.planType||null,fileType:e.fileType||null,orgDeletedDrafts:e.orgDeletedDrafts||null,sharedToFilter:e.sharedWithFilter||null,sharedToUserGroupIdFilter:e.sharedWithUserGroupIdFilter||null}),i=(0,u.useCallback)(()=>{if(r){let e=(0,tu.unwrap)(a.data?.sharedWithYouResourcesV2);e?.loadNext(30)}else a.data?.sharedWithYouResources?.loadNext(30)},[a,r]),s="loaded"===a.status&&(r?(0,tu.unwrap)(a.data.sharedWithYouResourcesV2)?.isLoadingNextPage??!1:a.data.sharedWithYouResources.isLoadingNextPage);return{subscription:a,fetchNextPage:i,isFetchingNextPage:s,userGroupsEnabled:r}}function gT(e){return(0,c.jsx)(aP.X,{label:"SharedWithYouFilesView",children:(0,c.jsx)(gI,{...e})})}function gI(e){let t=(0,eB.A6)(),r=(0,m.v9)(e=>e.tileSortFilterStateByView),a="recentsAndSharing"===t.view?r.recentsAndSharing.sharedFiles:r.sharedWithYou,i={tileSortFilterConfig:a,sortKeys:[sV.BO.SHARED_AT]},s={showInFolder:!0,open:!0,openNewTab:!0,restoreFromVersion:!0,rename:!0,share:!0,copyLink:!0,duplicate:!0,delete:!0,removeFromRecents:!1,createBranch:!0,publishOrgTemplate:!0,moveFile:!0,pinToWorkspace:!0,removeFromSharedFiles:!0},{subscription:n,fetchNextPage:o,isFetchingNextPage:l}=function(e){let{subscription:t,fetchNextPage:r,isFetchingNextPage:a,userGroupsEnabled:i}=gw({...e,resourceTypes:["file","file_repo","prototype"]});return{subscription:(0,u.useMemo)(()=>t.transform(e=>{let t=i?(0,tu.unwrap)(e.sharedWithYouResourcesV2)??[]:e.sharedWithYouResources;return(i?t:t.filter(e=>null===(e.sharedWithYouFile?.userGroupId??e.sharedWithYouRepo?.userGroupId??e.sharedWithYouPrototype?.userGroupId??null))).reduce((e,t)=>{if(t.sharedWithYouFile){let r=function(e){if(null==e||null==e.file)return null;let{file:t,...r}=e,a={...t,...r,editUrl:`${window.location.origin}/file/${t.key}/${(0,gf.W0)(t.name||"")}`,signedPreviewThumbnailUrls:null,trackTags:null};return(0,rN.dX)(oc.v.toSinatra(a),{sharedAt:r.sharedAt,sharedByUser:r.sharedByUser,id:r.id})}(t.sharedWithYouFile);r&&e.push(r)}else if(t.sharedWithYouRepo){let r=function(e){let{repo:t,...r}=e;if(null===t)return null;let{branches:a,...i}=t,s=a?.filter(e=>null!=e)?.map(e=>(0,rZ.MB)({...e,edit_url:e?`${window.location.origin}/file/${e.key}/${(0,gf.W0)(e.name||"")}`:"",client_meta:e.checkpointClientMeta}))??[],n=(0,rZ.MB)({...i,...r});return(0,rZ.MB)({type:rN.YU.REPO,repo:n,branches:s,selectedBranchKey:""},{repoPerms:(0,gp.au)(t)})}(t.sharedWithYouRepo);r&&e.push(r)}else if(t.sharedWithYouPrototype){let r=function(e){let{prototype:t,...r}=e;if(null==t)return null;let a=(0,rZ.MB)({...t,...r,shared_with_you_id:r.id}),i=oc.v.toSinatra(t.fig_file),s={...a,fig_file:i,accessed_at:a.recent_prototype?.viewedAt?.toISOString()??null,shared_at:a.shared_at.toISOString()},n=function(e,t){let r=gh.toSinatra(e),a=oc.v.toSinatra(e.fig_file),i={...r,fig_file:a},s=gv.toSinatra(t);return{...i,...s,shared_by_user:(t.sharedByUser&&gb.toSinatra(t.sharedByUser))??null,parent_org:(t.parentOrg&&gj.toSinatra(t.parentOrg))??null,parent_team:(t.parentTeam&&gy.toSinatra(t.parentTeam))??null,accessed_at:e.recentPrototype?.viewedAt?.toISOString()??null}}(t,r);if((0,p.BZ)().swy_prototype_converter_shadow_reads){let e=Object.keys(n);Object.keys(s).forEach(t=>{e.includes(t)||delete s[t]})}let o=(0,sT.jo)({oldValue:s,newValue:n,label:sT.NL.SharedWithYouPrototypes.useSWYHook,enableShadowRead:!!(0,p.BZ)().swy_prototype_converter_shadow_reads});return(0,rZ.MB)({type:rN.YU.PROTOTYPE,prototype:o},{prototypePerms:(0,g_.g)(t)})}(t.sharedWithYouPrototype);r&&e.push(r)}return e},[])}),[t,i]),fetchNextPage:r,isFetchingNextPage:a}}({sharedBy:a.filters.sharedBy??"",planId:a.filters.plan?.planId??"",planType:a.filters.plan?.planType??"",fileType:(e=>{switch(e){case sV.$Q.DESIGN:return"design";case sV.$Q.FIGJAM:return"whiteboard";case sV.$Q.PROTOTYPE:return"prototype";case sV.$Q.SITES:return"sites";case sV.$Q.SLIDES:return"slides";case sV.$Q.COOPER:return"cooper";case sV.$Q.MAKE:return"figmake";case sV.$Q.ANY:return null;default:(0,O.vE)(e)}})(a.filters.fileType)??"",sortOrder:a.sort.dir===sV.qP.ASC?"asc":"desc",sortKey:(0,mc.go)(a.sort.key)??"shared_at",sharedWithFilter:a.filters.sharedWith??"",sharedWithUserGroupIdFilter:a.filters.sharedWithUserGroupIdFilter?[a.filters.sharedWithUserGroupIdFilter]:[]}),d=u4({tilesResult:n,tileSortFilterConfig:i.tileSortFilterConfig}),_=JSON.stringify(i.tileSortFilterConfig),f=(0,sT.F7)({invalidationKey:_,oldValue:d,newValue:n,label:sT.NL.SharedWithYouFilesView.sortedFilteredTiles,enableFullRead:(0,p.BZ)().swy_files_disable_client_sorting_filtering,contextArgs:{tileSortFilterConfigStr:_}}),x=(0,u.useCallback)(()=>{l||o()},[l,o]),g="loaded"===n.status;return(0,j.K)("SharedFiles"),(0,j.K4)({markName:"MainBodyContent",isLoaded:g}),(0,c.jsx)(eu._k,{loadingElementId:"loading-content-pane",delay:250,result:iI.IE.all([n,f]),loadingElementClassName:P.B.pr32.$,children:([t,r])=>(0,c.jsx)(u9.o,{onShouldFetchNextPage:x,isFetchingNextPage:l,children:(0,c.jsx)(mS,{currentPlanFilter:a.filters.plan,currentSharedByFilter:a.filters.sharedBy,emptyStateText:l?"":(0,A.t)("shared_with_you.no_items"),isEligbileForProTeamLockedRevampUI:e.isEligbileForProTeamLockedRevampUI,newFileTile:!1,sortFilterOptions:i,tileActions:s,tiles:t,sortedFilteredTiles:r})})})}function gE(e){return(0,c.jsx)(aP.X,{label:"SharedWithYouProjectsView",children:(0,c.jsx)(gk,{...e})})}function gk(e){let t=(0,eB.A6)(),r=(0,aB.Rs)(),a=(0,b.DG)(e0.hzW,{id:r?.id||""},{enabled:!!r}),i=(0,b.DG)(e0.ecG,{id:r?.id||""},{enabled:!!r}),s=(0,m.v9)(e=>e.tileSortFilterStateByView),n="recentsAndSharing"===t.view?s.recentsAndSharing.sharedProjects:s.sharedWithYou,{subscription:o,fetchNextPage:l,isFetchingNextPage:d}=function(e){let{subscription:t,fetchNextPage:r,isFetchingNextPage:a,userGroupsEnabled:i}=gw({...e,resourceTypes:["folder"]});return{subscription:(0,u.useMemo)(()=>t.transform(e=>{let t=i?(0,tu.unwrap)(e.sharedWithYouResourcesV2)??[]:e.sharedWithYouResources;return(i?t:t.filter(e=>null===(e.sharedWithYouFolder?.userGroupId??null))).reduce((e,t)=>{if(t.sharedWithYouFolder){let{folder:r,...a}=t.sharedWithYouFolder;if(null==r)return e;let i=r.updatedAt.toString(),s=r.activeProjectResourceConnections?.[0]??null,n=(0,rZ.MB)({...r,...a},{created_at:r.createdAt.toString(),updated_at:i,deleted_at:r.deletedAt?.toString()||null,touched_at:i,is_connected_project:!!s,resource_connection:s?{hostPlanName:s.hostPlanName,connectedPlanName:s.connectedPlanName}:null});e.push(n)}return e},[])}),[t,i]),fetchNextPage:r,isFetchingNextPage:a}}({sharedBy:n.filters.sharedBy??"",planId:n.filters.plan?.planId??"",planType:n.filters.plan?.planType??"",orgDeletedDrafts:"",sortOrder:n.sort.dir===sV.qP.ASC?"asc":"desc",sortKey:(0,mc.go)(n.sort.key)??"shared_at",sharedWithFilter:n.filters.sharedWith??"",sharedWithUserGroupIdFilter:n.filters.sharedWithUserGroupIdFilter?[n.filters.sharedWithUserGroupIdFilter]:[]}),_=(0,u.useCallback)(()=>{d||l()},[d,l]),p="loaded"===a.status&&!!a.data.team&&a.data.team.hasPermission,f=!!i.unwrapOr({team:{hasPermission:!1}})?.team?.hasPermission,x="loaded"===o.status;return(0,j.K)("SharedProjects"),(0,j.K4)({markName:"MainBodyContent",isLoaded:x}),(0,c.jsx)(eu._k,{loadingElementId:"loading-content-pane",delay:250,result:o,loadingElementClassName:P.B.pr32.$,children:a=>(0,c.jsx)(u9.o,{onShouldFetchNextPage:_,isFetchingNextPage:d,children:(0,c.jsx)(mq,{canAdminTeam:f,canEditTeamContents:p,chunkSize:a.length,currentPlanFilter:n.filters.plan,emptyStateText:d?"":(0,A.t)("shared_with_you.no_items"),folderList:a,isEligbileForProTeamLockedRevampUI:!!r&&e.isEligbileForProTeamLockedRevampUI,isSharerInfoIncluded:!0,selectedView:t,team:r,teamId:r?r.id:void 0,viewId:"shared-with-you-projects"})})})}(0,gg.uc)((e,t,r)=>[e()(gj),t(gj)(),r(gj)()]);var gN=r(371241),gC=r(819299),gR=r(221373),gS=r(120146),gO=r(813833),gP=r(394728);let gA=e=>(0,c.jsx)("span",{className:"unsubscribe_confirmation_modal--boldText--YhbIg",children:e}),gD=(0,tA.Y3)(function(e){let t=(0,m.I0)(),r=(0,ea.xJ)();return r?(0,c.jsxs)(gO.G,{tintedModalBackground:!0,headerText:(0,A.t)("interstitial.unsubscribe_success_header"),children:[(0,c.jsx)("div",{className:gP.wz,children:(0,A.tx)("interstitial.unsubscribe_success_subheader_with_address",{emailName:gA((()=>{switch(e.policyType){case"FileCommentActivity":return(0,A.t)("interstitial.comment_activity_digest");case"TeamCommentActivity":return(0,A.t)("interstitial.team_comment_digest");case"FeedWeeklyDigest":return(0,A.t)("interstitial.feed_weekly_digest");case"WorkspaceActivity":return(0,A.t)("interstitial.workspace_activity");default:(0,O.vE)(e.policyType)}})()),emailAddress:gA(r.email)})}),(0,c.jsx)(ar.OK,{onClick:()=>{t(tF.eI())},className:"unsubscribe_confirmation_modal--button--KkLFH",children:(0,A.tx)("interstitial.done")}),(0,c.jsx)("button",{className:"unsubscribe_confirmation_modal--notificationSettingsButton--0w-gp interstitial_modal--secondaryText--rGF-r",onClick:()=>{t((0,tF.K4)({type:gR.p,data:{tab:gR.m.NOTIFICATIONS}})),t(tF.bi())},children:(0,A.tx)("interstitial.open_notifications_settings")})]}):null},"UNSUBSCRIBE_CONFIRMATION_INTERSTITIAL_MODAL");var gF=r(931651);let gM={showInFolder:!0,open:!0,openNewTab:!0,restoreFromVersion:!0,rename:!0,share:!0,copyLink:!0,duplicate:!0,delete:!0,removeFromRecents:!0,createBranch:!0,publishOrgTemplate:!0,moveFile:!0,pinToWorkspace:!0};function gL({isEligbileForProTeamLockedRevampUI:e}){let{tilesResult:t,sortedFilteredTilesResult:r,tileSortFilterConfig:a,isPaginatedFilesQuery:i,hasNextPage:s,tryLoadNextPage:n,isFetchingNextPage:o}=function(){let e=(0,m.v9)(e=>e.tileSortFilterStateByView.recentsAndSharing.recents),{isPaginatedQuery:t,recentFileTilesResult:r,isFetchingNextPage:a,tryLoadNextPage:i,hasNextPage:s}=function(e){let t=(0,mc.c4)(e.filters.fileType),r=!(!(0,p.BZ)().fb_paginated_recent_files_debug_full_read||e.sort.key!==sV.BO.ACCESSED_AT||e.filters.plan?.planId),[a]=(0,rw.aM)(function(){let a={action:"view",firstPageSize:30,sortOrder:e.sort.dir===sV.qP.DESC?"DESC":"ASC"};return t?r?e0.hrK.Query({...a,_editorTypeRaw:t}):e0.GLH.Query({_editorTypeRaw:t}):r?e0.Ijw.Query(a):e0.nXI.Query({})}()),i=u.useMemo(()=>a.transform(e=>"paginatedRecentFiles"in e.currentUser?e.currentUser.paginatedRecentFiles:"paginatedRecentFilesByEditorType"in e.currentUser?e.currentUser.paginatedRecentFilesByEditorType:"recentFiles2"in e.currentUser?e.currentUser.recentFiles2:e.currentUser.recentFiles2ByEditorType),[a]),s=u.useCallback(()=>{let e=i.data;if(e&&"hasNextPage"in e&&e?.hasNextPage())return e?.loadNext(30)},[i]),n=u.useMemo(()=>{let e=i.data;return!!e&&"isLoadingNextPage"in e&&e.isLoadingNextPage},[i]),o=u.useMemo(()=>{let e=i.data;return!!e&&"hasNextPage"in e&&e.hasNextPage()},[i]);u.useEffect(()=>{"loaded"===i.status&&(0,gF.xP)(i.data)},[i]);let l=u.useMemo(()=>i.transform(e=>(0,rZ.NB)(e)),[i]);return u.useEffect(()=>{"loaded"===l.status&&(0,gF.C9)(l.data)},[l]),u.useMemo(()=>({isPaginatedQuery:r,recentFileTilesResult:l.transform(e=>e.recent_files.map(e=>(0,rN.dX)(e))),tryLoadNextPage:s,isFetchingNextPage:n,hasNextPage:o}),[l,s,n,o,r])}(e),n=function(){let e=(0,gF.Y8)();return u.useMemo(()=>e.transform(e=>e.map(rN.Rc)),[e])}(),o=function(){let e=(0,m.v9)(e=>e.recentRepos),t=(0,m.v9)(e=>e.selectedBranchKeyByRepoId);return u.useMemo(()=>e.map(e=>(0,rN.mA)(e,t)),[e,t])}(),l=function(){let e=(0,m3.SZ)();return u.useMemo(()=>Object.values(e).map(rN.jp),[e])}(),d=u.useMemo(()=>iI.IE.merge([r,n],o,l),[l,r,n,o]),c=u4({tilesResult:d,tileSortFilterConfig:e}),_=e.filters.fileType!==sV.$Q.PROTOTYPE;return{tilesResult:d,sortedFilteredTilesResult:u.useMemo(()=>c.transform(e=>{if(!s||!_)return e;let t=-1;for(let r=e.length-1;r>=0;r--){let a=e[r];if(a&&a.type===rN.YU.FILE){t=r;break}}return -1===t?[]:e.slice(0,t+1)}),[c,s,_]),tileSortFilterConfig:e,isPaginatedFilesQuery:t,hasNextPage:s,tryLoadNextPage:u.useCallback(()=>{_&&i()},[i,_]),isFetchingNextPage:a}}(),l=u.useMemo(()=>({tileSortFilterConfig:a,sortKeys:[sV.BO.NAME,sV.BO.CREATED_AT,sV.BO.ACCESSED_AT]}),[a]);!function({sort:e,viewMode:t}){let r=t??sV.H6.GRID,a=u.useRef(e),i=u.useRef(r);i.current=r,u.useEffect(()=>{iU.RQ.trackDefinedEvent("file_browser.recents_sort_on_load",{sortKey:(0,mc.jR)(a.current.key),sortDir:(0,mc.Y1)(a.current.dir),viewMode:(0,mc.nC)(i.current)})},[]);let s=u.useRef(!0);u.useEffect(()=>{if(s.current){s.current=!1;return}iU.RQ.trackDefinedEvent("file_browser.recents_sort_updated",{sortKey:(0,mc.jR)(e.key),sortDir:(0,mc.Y1)(e.dir),viewMode:(0,mc.nC)(i.current)})},[e.dir,e.key])}(a);let d=function({paginationEnabled:e,hasNextPage:t,viewMode:r,pageSize:a}){let i=u.useRef(!1);return u.useCallback(s=>{if(!e||i.current)return;i.current=!0;let n=s&&t;iU.RQ.trackDefinedEvent("file_browser.recent_files_pagination_initial_viewport",{didUnderfetch:n,viewMode:(0,mc.nC)(r??sV.H6.GRID),pageSize:a,isMobileDevice:w.ZP.mobile})},[t,r,a,e])}({paginationEnabled:i,hasNextPage:s,pageSize:30,viewMode:a.viewMode}),_=(0,mc.c4)(a.filters.fileType),f=a.filters.plan?.planId,x=a.sort.dir,g=a.sort.key,h="loaded"===t.status;return(0,j.K)("RecentFiles"),(0,j.K4)({markName:"MainBodyContent",isLoaded:h}),(0,c.jsx)(eu._k,{loadingElementId:"loading-content-pane",result:iI.IE.all([t,r]),loadingElementClassName:P.B.pr32.$,children:([t,r])=>(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(u9.o,{onShouldFetchNextPage:n,isFetchingNextPage:o,onInitialEndOfListObservation:d,children:(0,c.jsx)(mS,{tiles:t,sortedFilteredTiles:r,tileActions:gM,sortFilterOptions:l,newFileTile:!0,emptyStateText:null!==_?(0,A.t)("file_browser.tiles_view.default_overfiltered_text"):w.ZP.mobile||w.ZP.tablet?(0,A.t)("file_browser.tool_bar.recently_viewed_empty_state"):"",isEligbileForProTeamLockedRevampUI:e,shouldLogVisibleTileCount:!0})},`${_}-${f}-${g}-${x}`),(0,c.jsx)(ud.ap,{})]})})}var gB=r(293111),gU=r(908445);function gV(){return{"":{label:(0,A.t)("shared_with_you.filters.all_organizations")}}}let gG=rw.t1.Query({fetch:async e=>{let t=await gU.K.getPlanFilterOptions({resource_type:e}),r={};return t.data.meta.plan_filters.forEach(e=>{let t={label:e.label,plan_id:e.plan_id,plan_type:e.plan_type};e.plan_id&&(r[e.plan_id]=t)}),{...gV(),...r}}});function gz(){return{"":(0,A.t)("shared_with.you.filters.anyone")}}let gW=[sU.D5.RECENTLY_VIEWED,sU.D5.SHARED_FILES,sU.D5.SHARED_PROJECTS];function gH(e){let t=e.options.tileSortFilterConfig.filters.sharedBy,r=e.options.tileSortFilterConfig.filters.plan,a=(0,e1.I6)().unwrapOr(null),i=(0,rs.R)(a?.planRecordId);return(0,c.jsxs)("div",{className:P.B.flex.flexWrap.gap8.$,children:[i&&e.filters?.sharedWith&&(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(iW.OX,{config:e.options.tileSortFilterConfig,tab:e.tab,userGroupIdFilterOptions:e.filters.sharedWithUserGroupIdFilter})}),e.filters?.sharer&&Object.keys(e.filters?.sharer).length>1&&(0,c.jsxs)(c.Fragment,{children:[t&&(0,c.jsx)(iW.dV,{userId:t}),(0,c.jsx)(iW.UC,{config:e.options.tileSortFilterConfig,filterOptions:e.filters.sharer,tab:e.tab})]}),e.filters?.plan&&Object.keys(e.filters?.plan).length>1&&(0,c.jsxs)(c.Fragment,{children:[r?.planId&&(0,c.jsx)(iW.Uo,{planOption:e.filters.plan[r.planId]}),(0,c.jsx)(iW.ny,{config:e.options.tileSortFilterConfig,filterOptions:e.filters.plan,tab:e.tab})]}),e.filters?.fileType&&(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(iW.kP,{config:e.options.tileSortFilterConfig,tab:e.tab})})]})}function gK(e){let t=e.selectedTab,r=(0,m.I0)(),a=(0,eB.A6)(),i=(0,m.v9)(e=>e.tileSortFilterStateByView),s=t===sU.D5.SHARED_PROJECTS?["folder"]:["file","file_repo","prototype"],n={[mc.hj.ALL]:(0,A.t)("shared_with_you.filters.shared_with.all"),[mc.hj.USER]:(0,A.t)("shared_with_you.filters.shared_with.you_directly"),[mc.hj.USER_GROUP]:(0,A.t)("shared_with_you.filters.shared_with.your_user_groups")},o=function(e){let[t,r]=(0,u.useState)(gz()),a=e.join("&resource_type[]=");return(0,u.useEffect)(()=>{gU.K.getSharerFilterOptions({resource_type:a}).then(({data:e})=>{r(e.meta.shared_by_filters.reduce((e,{user_id:t,label:r})=>({...e,[t]:r}),{...gz()}))})},[a]),t}(s),l=function(){let e=(0,m.v9)(e=>e.plans),t=(0,m.v9)(e=>e.orgById),r=(0,m.v9)(gB.G);return e.map(e=>{let a="";if(e.plan_type===oH.k.ORG){let r=t[e.plan_id];a=r?.name??a}else{let t=r[e.plan_id];a=t?.name??a}return{label:a,plan_id:e.plan_id,plan_type:e.plan_type===oH.k.ORG?oH.k.ORG:oH.k.TEAM}}).reduce((e,t)=>({...e,[`${t.plan_id}`]:t}),{...gV()})}(),d=function(e){let t=e.join("&resource_type[]="),[r]=(0,rw.aM)(gG(t));return r.data||gV()}(s),_={[mc.Ox.ALL]:(0,A.t)("shared_with_you.filters.org_deleted_drafts.all"),[mc.Ox.SHARED]:(0,A.t)("shared_with_you.filters.org_deleted_drafts.shared"),[mc.Ox.ORG_DELETED_DRAFTS]:(0,A.t)("shared_with_you.filters.org_deleted_drafts.deleted_user_drafts")},p=function(){let[e,t]=(0,u.useState)({});return(0,u.useEffect)(()=>{gU.K.getUserGroupIdFilterOptions().then(({data:e})=>{t(Object.fromEntries(e.meta.shared_with_user_group_filters.map(({id:e,name:t})=>[e,t])))})},[]),e}(),f={sharer:t!==sU.D5.RECENTLY_VIEWED?o:void 0,plan:t===sU.D5.RECENTLY_VIEWED?l:d,fileType:t!==sU.D5.SHARED_PROJECTS,orgDeletedDrafts:t===sU.D5.SHARED_PROJECTS?_:void 0,sharedWith:t!==sU.D5.RECENTLY_VIEWED?n:void 0,sharedWithUserGroupIdFilter:t!==sU.D5.RECENTLY_VIEWED?p:void 0},x=u.useMemo(()=>{let e;switch(t){case sU.D5.RECENTLY_VIEWED:e=i.recentsAndSharing.recents;break;case sU.D5.SHARED_FILES:e=i.recentsAndSharing.sharedFiles;break;case sU.D5.SHARED_PROJECTS:e=i.recentsAndSharing.sharedProjects;break;default:(0,O.vE)(t)}return{tileSortFilterConfig:e,sortKeys:sU.Xx[t]}},[t,i]),g=(0,c.jsx)("div",{...{className:"x78zum5 x6s0dn4"},children:(0,c.jsx)(iW.vs,{initialViewMode:x.tileSortFilterConfig.viewMode,onViewModeChange:e=>{(0,iU.L9)("file view toggle",{viewType:e===sV.H6.GRID?"grid":"list"}),Object.keys(sU.D5).map(t=>{r(eF.lh({selectedView:a,config:{...x.tileSortFilterConfig,viewMode:e},tab:sU.D5[t]}))},r(eF.zu({viewId:"shared-with-you-projects",viewMode:e})))}})}),h=(0,c.jsx)(iW.VP,{options:x,selectedView:a,dispatch:r,tab:t}),v=(0,c.jsxs)("div",{className:P.B.flex.gap8.$,children:[h,g]},"sortWithViewOptions"),b=(0,c.jsx)(gH,{options:x,filters:f,tab:t},"recentsAndSharingTileFilters"),[y,j,w]=nF.m.useManagedTabs({[sU.D5.RECENTLY_VIEWED]:!0,[sU.D5.SHARED_FILES]:!0,[sU.D5.SHARED_PROJECTS]:!0},e.selectedTab,e=>{e===sU.D5.SHARED_FILES?(0,iU.L9)("file_browser_shared_files"):e===sU.D5.SHARED_PROJECTS&&(0,iU.L9)("file_browser_shared_projects"),r(eL.fv({view:"recentsAndSharing",tab:e}))}),T=gW.map((e,t)=>(0,c.jsx)(nF.m.Tab,{...y[e],children:(e=>{switch(e){case sU.D5.RECENTLY_VIEWED:return(0,A.t)("file_browser.recents_and_sharing_view.recent_files_tab_name");case sU.D5.SHARED_PROJECTS:return(0,A.t)("file_browser.recents_and_sharing_view.shared_projects_tab_name");case sU.D5.SHARED_FILES:return(0,A.t)("file_browser.recents_and_sharing_view.shared_files_tab_name");default:(0,O.vE)(e)}})(e)},t)),I=[b,v];return(0,c.jsx)(iW.Nb,{leftSide:(0,c.jsx)(nF.m.TabStrip,{manager:w,children:T}),rightSide:I,rightSideMobile:I,shouldStackRightSideMobile:!0})}function gY(e){switch(e){case i3.l$.ACCOUNT:return gR.m.ACCOUNT;case i3.l$.COMMUNITY:return gR.m.COMMUNITY;case i3.l$.NOTIFICATIONS:return gR.m.NOTIFICATIONS}}function gZ(e){let t=(0,m.I0)(),r=(0,eO.vI)(),a=_R({checks:{isEligbileForProTeamLockedRevampUI:r},shadowReadLabel:sT.NL.RecentsAndSharingPageView.hasBanner}).unwrapOr(!1),{selectedTab:i,accountModalTab:s,emailPolicyToUnsubscribeFrom:n}=e,o=(0,c.jsx)(gK,{selectedTab:i}),l=(0,v.D9)(s),d=(0,v.D9)(n);(0,gC.s)(),(0,gN.k)();let _=(0,m.I0)(),p=(0,ea.xJ)(),f=(0,aB.Rs)();return(0,u.useEffect)(()=>{if(p&&f&&"true"===sessionStorage.getItem("figma_initial_api_paywall")){sessionStorage.removeItem("figma_initial_api_paywall");let e=f.student_team?eH.Lz.STUDENT:f.org_team?eH.Lz.ORG:f.pro_team?eH.Lz.PRO:eH.Lz.STARTER,t=f.id.toString();if(iU.RQ.trackDefinedEvent("monetization_expansion.api_paywall_redirect",{userId:p.id.toString(),planType:e,planParentType:e,planId:t,planParentId:t,redirectDestination:e===eH.Lz.STARTER?"pricing":"settings"}),e===eH.Lz.STARTER||e===eH.Lz.STUDENT)return void g.ZP.redirect("/pricing","_blank");_((0,tF.K4)({type:gR.p,data:{tab:gR.m.ACCOUNT}}))}},[p,f,_]),(0,u.useEffect)(()=>{s&&s!==l?(t((0,tF.K4)({type:gR.p,data:{tab:gY(s)}})),t(eL.fv({view:"recentsAndSharing"}))):n&&n!==d&&(gS.g.updateUserCommunicationPreference({channelType:"email",policyType:n,policySetting:"none"}).then(()=>{t((0,tF.K4)({type:gD,data:{policyType:n}}))}).catch(e=>{t((0,tF.K4)({type:gR.p,data:{tab:gY(i3.l$.NOTIFICATIONS)}})),t(tp.R.dequeue({}))}),t(eL.fv({view:"recentsAndSharing"})))},[s,l,n,d,t]),(0,c.jsx)(s6.S,{banner:a?(0,c.jsx)(_D,{folderId:null}):(0,c.jsx)(gu,{}),viewbar:o,toolbar:(0,c.jsx)(x3,{}),viewBarSticky:!0,content:function(e,t){switch(e){case sU.D5.SHARED_FILES:return(0,c.jsx)(gT,{isEligbileForProTeamLockedRevampUI:t?.isEligbileForProTeamLockedRevampUI});case sU.D5.SHARED_PROJECTS:return(0,c.jsx)(gE,{isEligbileForProTeamLockedRevampUI:t?.isEligbileForProTeamLockedRevampUI});case sU.D5.RECENTLY_VIEWED:return(0,c.jsx)(gL,{isEligbileForProTeamLockedRevampUI:t?.isEligbileForProTeamLockedRevampUI});default:(0,O.vE)(e)}}(i,{isEligbileForProTeamLockedRevampUI:r})})}var g$=r(640144);function gq({teamId:e}){let t=(0,b.DG)(e0.v0v,{teamId:e}),r=t.data?.team||null,a=(0,et.$0)();if(!r?.org)return null;if(a!==r.org.id)return(0,c.jsx)(pd,{planEntity:r.org});let i=r.org?.hasWorkspaces&&r.plan?.tier===g$.PlanTier.ENTERPRISE;return(0,c.jsxs)(oG.FD,{children:[r.org&&(0,c.jsx)(po,{org:r.org,currentResourceId:e,hasTrailingDivider:!!r.workspace||i}),(r.workspace||i)&&(0,c.jsx)(pm,{workspace:r.workspace??{id:sq.F},currentResourceId:e,orgId:r.org?.id,hasTrailingDivider:!1})]})}var gQ=r(108854),gJ=r(253390),gX=r(162233),g0=r(167894);function g1(){return(0,c.jsxs)("div",{className:P.B.flex.p12.colorBgSelected.bRadius6.m32.$,children:[(0,c.jsx)("div",{className:P.B.mr12.colorIcon.itemSelfCenter.$,children:(0,c.jsx)(r6.n,{svg:g0.Z})}),(0,c.jsxs)("div",{children:[(0,A.tx)("sidebar.meta.this_team_is_for_education_users_only")," ",(0,c.jsx)(ar.Z6,{target:"_blank",trusted:!0,href:"/education/",children:(0,A.tx)("org_home_view_meta.learn_more")})]})]})}function g5({team:e}){let t=(0,m.I0)(),r=(0,b.DG)(e0.hzW,{id:e.id}),a=!!r.data?.team?.hasPermission,[{data:i}]=(0,y.aM)((0,X.RM)({teamId:e.id})),s=(i||[]).filter(e=>""!==e.name).length,n=(0,T.it)("exp_fbg_project_limit_upsell");if(!(!e.subscription&&!e.org_id&&a&&s>=iC.kl)||n.getConfig().getValue("show_upsell",!1))return null;let o=(0,c.jsx)(ar.Z6,{onClick:()=>{t((0,tF.K4)({type:aF.n,data:{teamId:e.id,upsellSource:aU.V.STARTER_TEAM_FOOTER}}))},trusted:!0,trackingProperties:{trackingDescriptor:ev.y.UPGRADE_TO_A_PAID_PLAN},"data-testid":"starterTeamUpsellFooterUpgradeLink",children:(0,A.tx)("file_browser.starter_team.upgrade_link")});return(0,c.jsx)(r8.Ui,{name:"Starter Team Upsell Footer",children:(0,c.jsx)("div",{className:Y()(P.B.flex.p32.mt16.bRadius6.justifyCenter.colorBorder.$,"starter_team_upsell_footer--borderStyle--8C-UI"),"data-testid":"starterTeamUpsellFooter",children:(0,c.jsxs)("div",{className:Y()(P.B.flex.flexColumn.itemsCenter.lh24.$,"starter_team_upsell_footer--contentWrapper--MH8ZE"),children:[(0,c.jsx)("strong",{children:s===iC.kl?(0,A.tx)("file_browser.starter_team.project_limit_warning",{maxProjects:iC.kl}):(0,A.tx)("file_browser.starter_team.project_limit_warning_over_max_projects")}),(0,c.jsx)("p",{className:P.B.alignCenter.$,children:(0,A.tx)("file_browser.starter_team.project_limit_info",{upgradeLink:o})})]})})})}function g2({team:e,showInvite:t,onInviteClick:r,onMembersClick:a,setFavorite:i,removeFavorite:s}){let{getTriggerProps:n,manager:o}=t2.H9(),l=e.org_id??null,d=(0,en.E)({currentOrgId:l,currentTeamId:null}),m=d.transform(e=>(0,J.zF)(e.currentUser.userSidebarSections?.status===tu.OptionalStatus.Loaded?e.currentUser.userSidebarSections?.data??[]:[],e.currentUser.baseOrgUser?.fileBrowserPreferences?.orderedSidebarSections??[])).unwrapOr([]),_=u.useMemo(()=>{if("loaded"===d.status)return(0,J.W7)(d.data,e.id)},[d,e.id]),p=u.useCallback(({sectionId:e})=>{i({favoriteId:_?.id,sectionId:e})},[i,_]),f=u.useCallback(()=>{_&&s({favoriteId:_.id})},[s,_]);if("loaded"!==d.status)return(0,c.jsx)("div",{className:P.B.flex.itemsCenter.colorIcon.$,children:(0,c.jsx)(r6.n,{svg:fd.Z})});let x=(0,J.Mi)(d.data,l);return(0,c.jsxs)(t2.fC,{manager:o,children:[(0,c.jsx)(iL.h,{className:Y()(P.B.flex.itemsCenter.colorIcon.$,fl.yY),...n(),children:(0,c.jsx)(t9.O,{})}),(0,c.jsxs)(t2.W2,{children:[t&&(0,c.jsx)(t2.ck,{onClick:r,children:(0,A.tx)("file_browser.team.invite")},"import"),(0,c.jsx)(t2.ck,{onClick:a,children:(0,A.tx)("file_browser.team.view_members")},"share"),(0,c.jsxs)(t2.Wd,{children:[(0,c.jsx)(t2.fF,{children:(0,A.tx)("favorited_resources.add_to_sidebar")}),(0,c.jsx)(t2.BH,{children:(0,c.jsx)(rl.V,{setFavorite:p,removeFavorite:f,resourceId:e.id,resourceType:eH.IK.TEAM,favoriteId:_?.id,orderedSidebarSections:m,userHasMaxFavorites:x})})]})]})]})}var g4=r(637521),g9=r(13161),g7=r(868926),g3=r(966369),g6=r(658790),g8=r(464687),he=r(412981),ht=r(261245),hr=r(893008),ha=r(139485),hi=r(762161),hs=r(475777);let hn=(0,tA.Y3)(function({teamId:e,trackingProperties:t,hasSecondaryBtn:r=!0}){let a=(0,u.useMemo)(()=>(0,hi.iz)(),[]),i=(0,m.I0)(),s=()=>{i(tF.hV())},n=r?(0,c.jsx)(m8.J,{onClick:()=>{g.ZP.redirect("/pricing","_blank")},children:(0,A.t)("pro_onboarding.pro_feature_modal.compare_plans")}):null;return(0,c.jsx)(r8.Ui,{name:"Pro Features Modal",properties:t??hr.R.getTrackingProperties(e),children:(0,c.jsx)(hs.V,{...a,dismissModal:s,clickPrimaryBtn:s,secondaryBtn:n,showPricing:!1,panelTitleSize:hs.c.LARGE,cardsClickable:!0})})},"ProFeaturesModal");var ho=r(989704);let hl=e=>({tileSortFilterConfig:e.team,sortKeys:[sV.BO.NAME,sV.BO.TOUCHED_AT]});function hd(){let e=(0,m.I0)(),t=(0,eB.A6)(),r=((e,t,r)=>{let a=(0,uz.ws)(hl)(t);return[(0,c.jsx)(iW.VP,{dispatch:e,options:a,selectedView:r},0),(0,c.jsx)(iW.vs,{initialViewMode:a.tileSortFilterConfig.viewMode,onViewModeChange:t=>{(0,iU.L9)("team folder view toggle",{viewType:t===sV.H6.GRID?"grid":"list"}),e(eF.lh({selectedView:r,config:{...a.tileSortFilterConfig,viewMode:t}}))}},1)]})(e,(0,m.v9)(e=>e.tileSortFilterStateByView),t);return(0,c.jsx)(iW.Nb,{leftSide:null,rightSide:r})}function hc(e){let{team:t,orgTeamActionType:r}=e;switch(r){case sY.vN.CLICK_JOIN:case sY.vN.BYPASS_REQUEST:return(0,c.jsxs)(c.Fragment,{children:[(0,A.tx)("file_browser.team.no_permissions_message",{teamName:t.name}),(0,c.jsx)("br",{}),(0,A.tx)("file_browser.team.please_join_team")]});case sY.vN.CLICK_REQUEST:return(0,c.jsxs)(c.Fragment,{children:[(0,A.tx)("file_browser.team.no_permissions_message",{teamName:t.name}),(0,c.jsx)("br",{}),(0,A.tx)("file_browser.team.please_request_to_join_team")]});case sY.vN.CLICK_WITHDRAW:return(0,A.tx)("file_browser.team.request_to_join_team_is_pending",{teamName:t.name});default:return(0,A.tx)("file_browser.team.no_permissions_message",{teamName:t.name})}}function hu({team:e}){let t=(0,m.v9)(e=>e.currentUserOrgId),r=(0,m.v9)(e=>(0,i9.getPermissionsStateMemoized)(e)),a=(0,m.v9)(t=>t.teamRoleRequests[e.id]),i=(0,e1.lE)(),s=(0,sT.F7)({oldValue:iI.IE.loaded((0,i9.canAdminOrg)(t,r)),newValue:(0,e1.N1)(i),enableShadowRead:!1,enableFullRead:(0,ms.XP)(ms.mU.GROUP_7),label:sT.NL.TeamNonMemberJoinView.canAdminOrg}).unwrapOr(!1),n=(0,sY.xP)(e,a,r,s),o=(0,m.I0)(),l=(0,c.jsxs)("div",{className:"team_page_view--nonMemberViewContainer--6XE5w","data-testid":"non-member-join-content",children:[(0,c.jsxs)("div",{className:"team_page_view--header--y6fEy",children:[(0,c.jsx)(ra.Ir,{team:e,size:ra.DZ.LARGE}),(0,c.jsx)("span",{className:"team_page_view--teamName--VkU-3 text--fontPos18--FkHj- text--_fontBase--VaHfk",children:e.name})]}),(0,c.jsx)("div",{className:"team_page_view--joinOptionText--pqCox text--fontPos14--QJNQC text--_fontBase--VaHfk",children:(0,c.jsx)(hc,{team:e,orgTeamActionType:n})}),(0,c.jsx)("div",{className:"team_page_view--joinButton--c3QsD",children:(0,c.jsx)(g7.Os,{team:e,onJoin:(0,fE.FI)(o,e.id),onLeave:()=>{o(tF.K4({type:sz.Y,data:{teamId:e.id}}))},isCardActive:!1})})]});return(0,c.jsx)(s6.S,{content:l})}function hm({teamId:e,selectedTab:t,upgradeModalType:r,showProOnboardingModal:a,showResourceConnectionInviteModal:i}){let s=(0,iT.c)(t=>t.teams[e]),n=(0,m.v9)(e=>e.currentUserOrgId),o=(0,m.v9)(e=>s&&s.org_id&&e.orgById[s.org_id]||null),l=(0,m.v9)(e=>e.loadingState),d=(0,m.I0)(),_=(0,eB.A6)(),[p,f]=u.useState(!1);(0,gQ.n)(e);let x=(0,ht.h)(i),g=(0,g8.M)(x,i);u.useEffect(()=>{i&&g()},[i,g]);let v=(0,iR.Nt)(e).transform(e=>e.tier===eH.Lz.PRO||e.tier===eH.Lz.STUDENT).unwrapOr(!1);(0,b.DG)(e0.C13,{teamId:e});let j=(0,he.EE)(e),w="loaded"===j.status,[{status:T,data:I}]=(0,y.aM)((0,X.RM)({teamId:s?.id}),{revalidateOnMount:!0}),E=j.data,k={canAdminOrg:!!E?.canAdminOrg,canAdminTeam:!!E?.canAdmin,canEditTeam:!!E?.canEdit,canReadTeam:!!E?.canRead,canDeleteTeam:!!E?.canDelete,isInTeam:!!E?.isInTeam},N=!!s&&(0,aB.cU)(s),C=(0,b.DG)(e0.$_z,{},{enabled:N}),R=(0,tu.unwrap)(C.data?.personalDraftToPlanDraftLocation),S=R?.planParentId===e&&R?.status==="started";(0,h.O)(()=>{let e=(0,g6.BA)("team_role_redemption");if(e&&parseInt(e)in _a.V5){let e=(0,ha.S)();e&&d(tp.R.enqueue({message:e})),(0,g6.Zo)("team_role_redemption")}}),u.useEffect(()=>{let e=g3.oD.loadingKeyForPayload();(0,py.hg)(l,e)||(0,py.B4)(l,e)||d(g3.oD())},[d,l]),u.useEffect(()=>{n&&d((0,f_.fO)())},[d,n]),u.useEffect(()=>{if(s)f(!1);else{let t=fE.Hd.loadingKeyForPayload({teamId:e}),r=`TEAM_GET_ACTION_${e}`;n&&!l[t]?d(fE.Hd({teamId:e,disableFlashError:!0})):(0,py.hg)(l,t)||(0,py.hg)(l,r)||f(!0)}},[d,l,s,e,n]),u.useEffect(()=>{if(!s||s.org_id)return;let e=pf.NK.loadingKeyForPayload({teamId:s.id});if((0,py.hg)(l,e)||(0,py.B4)(l,e)||d(pf.NK({teamId:s.id})),t===e2.xB.BILLING){(0,sT.jo)({label:sT.NL.TeamPageView.selectTeamViewBillingTab,oldValue:!1,newValue:!0,maxReports:5});let e=ip.H2.loadingKeyForPayload({teamId:s.id});(0,py.B4)(l,e)||(0,py.hg)(l,e)||d(ip.H2({teamId:s.id}))}else if(t===e2.xB.MEMBERS){let e=pf.NK.loadingKeyForPayload({teamId:s.id});(0,py.hg)(l,e)||(0,py.B4)(l,e)||d(pf.NK({teamId:s.id}))}else if(t===e2.xB.SETTINGS){let e=ip.H2.loadingKeyForPayload({teamId:s.id});k.canAdminTeam&&v&&!(0,py.hg)(l,e)&&!(0,py.B4)(l,e)&&d(ip.H2({teamId:s.id}))}},[d,t,l,s,o,v,k.canAdminTeam]);let O=(0,ea.XU)(),P=(0,b.DG)(e0.w4$,{teamId:e}),D=P.data?.team?.currentTeamUser;u.useEffect(()=>{let e;if(!(s&&O&&D&&r)||!v)return;let a=r===eH.oj.WHITEBOARD?eH.gg.WHITEBOARD:eH.gg.DESIGN;a===eH.gg.DESIGN?e=D.designAccountTypeRequest?.status==="pending":a===eH.gg.WHITEBOARD&&(e=D.whiteboardAccountTypeRequest?.status==="pending"),!0===e&&d(a2.l.flash((0,A.t)("team_view.request_upgrade.request_already_sent"))),d(eL.fv({view:"team",teamId:s.id,teamViewTab:t}))},[d,s,O,D,r,v,t]),(0,h.O)(()=>{a&&d(tF.K4({type:ho.y,data:{teamId:e}}))});let F=u.useRef(!1);u.useEffect(()=>{!F.current&&"team"===_.view&&_.assetTransferRequestId&&d(tF.K4({type:(0,gJ.o)(),data:{selectedAssetTransferRequest:_.assetTransferRequestId}})),F.current=!0});let M=p||!k.canReadTeam&&!n;return w?M?(0,c.jsx)(no.M,{resourceType:i3.Hy.TEAM}):s?k.canReadTeam?(0,c.jsx)(h_,{team:s,lgTeamPermissions:k,org:o,user:O,selectedTab:t,shouldBlockTeamActionsDuringDTMMigration:S,teamFoldersStatus:T,teamFolders:I}):(0,c.jsx)(hu,{team:s}):null:(0,c.jsx)(em.jz,{})}function h_({team:e,lgTeamPermissions:t,org:r,user:a,selectedTab:i,shouldBlockTeamActionsDuringDTMMigration:s,teamFoldersStatus:n,teamFolders:o}){let l,{canAdminOrg:d,canAdminTeam:f,canEditTeam:x,canReadTeam:g,isInTeam:h,canDeleteTeam:v}=t,b="loaded"===n,y=o?.length,w=e.id;(0,pp.ol)(b&&void 0!==y&&0!==y,(e,t,r)=>{t||r||0===e||!(0,p.BZ)().livestore_fix_throttled_invalidate||iU.RQ.trackDefinedMetric("file_browser.team_page_folders_load_time",{durationMs:e,teamId:w,folderCount:y,isPaginated:!1})});let T=(0,eP.ZR)(w),I=(0,eO.vI)(w),E=(0,eO.kP)(),k=(0,q.Hc)(),N=(0,m.v9)(e=>e.teamBilling),C=(0,m.I0)(),R=(0,eB.A6)(),S=(0,e1.Rm)().unwrapOr(null),O=(0,rs.R)(S?.planRecordId),D=u.useCallback(t=>{let r={view:"team",teamId:e?e.id:"",teamViewTab:t};C(eL.fv(r))},[C,e]),F=(0,m.v9)(e=>e.avatarEditorState),M=(0,m.v9)(e=>e.teamRoleRequests),L=u.useMemo(()=>{if(e&&g)switch(e.org_access){case eH.Zn.PRIVATE:return(0,A.t)("file_browser.team_header.closed_team_header");case eH.Zn.SECRET:return(0,A.t)("file_browser.team_header.secret_team_header")}},[e,g]),B=u.useMemo(()=>{if(e&&g){if(e.org_access===eH.Zn.PRIVATE)return(0,A.t)("file_browser.team_header.closed_team_subtitle");else if(e.org_access===eH.Zn.SECRET)return(0,A.t)("file_browser.team_header.secret_team_subtitle")}},[e,g]),U=u.useMemo(()=>{if(e&&g){if(e.org_access===eH.Zn.PRIVATE)return(0,A.t)("file_browser.team_header.closed_team_sr_only_text");else if(e.org_access===eH.Zn.SECRET)return(0,A.t)("file_browser.team_header.secret_team_sr_only_text")}},[e,g]),V=u.useCallback(({favoriteId:t,sectionId:r})=>{C(eV.Aw({team:e,entrypoint:"team_page_view",sectionId:r,favoriteId:t}))},[C,e]),G=u.useCallback(({favoriteId:t})=>{C(eV.NP({team:e,entrypoint:"team_page_view",favoriteId:t}))},[C,e]),z=()=>{C((0,X.nw)({where:rU.A4.FolderListView,team:{...e,canEdit:!!t.canEditTeam}}))},W=()=>{C(eL.kp()),Q(),D(e2.xB.SETTINGS)},H=(0,g9.V)(),K=u.useCallback(()=>{H({teamId:w,canAdmin:t.canAdminTeam})},[H,w,t.canAdminTeam]),Y=e?{team:e,billing:N,teamId:e.id}:void 0,Z={view:"team",teamId:w,teamViewTab:e2.xB.HOME},$=(0,gX.Q)(g4.Kv.MEMBERS,Y,!!t.canAdminTeam,!!t.canEditTeam,!!t.canReadTeam,Z),Q=(0,gX.Q)(g4.Kv.SETTINGS,Y,!!t.canAdminTeam,!!t.canEditTeam,!!t.canReadTeam,Z);u.useEffect(()=>{i===e2.xB.MEMBERS?$():i===e2.xB.SETTINGS&&Q()},[]),(0,j.K)("Team"),(0,j.K4)({markName:"MainBodyContent",isLoaded:b,contextArgs:{numFolders:y??null}}),l=e.org_id?b?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(mq,{canAdminTeam:f,canEditTeamContents:x,folderList:o||[],isEligbileForProTeamLockedRevampUI:I,onCreateNewFolder:z,selectedView:R,team:e,teamId:w,viewId:`team-${w}`}),(0,c.jsx)(ud.ap,{})]}):(0,c.jsx)(em.jz,{}):(0,c.jsx)(c.Fragment,{children:b?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(mq,{canAdminTeam:f,canEditTeamContents:x,folderList:o||[],isEligbileForProTeamLockedRevampUI:I,onCreateNewFolder:z,selectedView:R,team:e,teamId:w,viewId:`team-${w}`}),(0,c.jsx)(ud.ap,{})]}):(0,c.jsx)(em.jz,{})});let J=t.canAdminTeam?(0,c.jsx)(nh.eL,{entity:e,entityType:ng.p.TEAM,avatarEditorState:F,size:40,dispatch:C,avatarSvg:O?void 0:rm.Z,svgSizeRatio:.6}):(0,c.jsx)(ra.Ir,{team:e,size:40,svgSizeRatio:.6,avatarSvg:O?void 0:rm.Z}),ee=!g,et=(0,sL.T)(),er=(()=>{if(ee)return;let t=et({onChangeTeamIconClick:()=>{C((0,nv.u)({team:e}))},onRenameClick:()=>{C(tF.K4({type:(0,sD.A)(),data:{team:e}}))},selectedTeamPermissions:{canAdmin:f,canAdminOrg:d,canDelete:v,canView:g,isInTeam:h},team:e,shouldBlockTeamActionsDuringDTMMigration:s}),a=[];return(Y&&(x&&(r||a.push({displayText:(0,A.t)("teams_table.view_team_members"),onClick:$}),a.push({displayText:(0,A.t)("team_view.settings.view_settings"),onClick:W})),r&&a.push({displayText:(0,A.t)("teams_table.view_team_members"),onClick:$})),a.length>0)?[{key:"team-page-header-menu-items",items:a},...t]:t})(),ea=er?{kind:s9.G.CUSTOM,key:na.DROPDOWN,element:(0,c.jsx)(nf,{buttonAriaLabel:(0,A.t)("team_view.page_header_dropdown_label"),menuGroups:er})}:void 0,ei=e.pro_team,es=e.student_team?(0,c.jsx)(g1,{}):(0,iC.e3)(e)?void 0:(0,c.jsx)(g5,{team:e});return(0,c.jsx)(s6.S,{content:(0,c.jsxs)(c.Fragment,{children:[l,es]}),viewbar:(0,c.jsx)(hd,{}),banner:(0,c.jsx)(pj,{teamId:w,selectedTab:i}),header:(0,c.jsx)(s3,{avatar:J,title:e.name,rightSideActions:function(e,t,r,a,i,s,n,o,l,d){let u=[],m=!!Object.keys(n).includes(e.id)&&n[e.id]?.status===fp.n.PENDING,p=s.canAdminTeam&&!s.isInTeam,f={kind:s9.G.CUSTOM,key:na.FAVORITE,element:(0,c.jsx)(nx.d,{setFavorite:a,removeFavorite:i,favoriteType:eH.IK.TEAM,resourceId:e.id,orgId:e.org_id,size:"lg"})};p&&u.push({kind:s9.G.CUSTOM,key:na.JOIN_TEAM,element:(0,c.jsx)(ef.uu,{variant:"secondary",onClick:(0,fE.FI)(t,e.id,_a.V5.ADMIN),children:(0,A.t)("file_browser.team.join_team")})});let x=d?ae.fR.TEXT:void 0,g=d?(0,A.t)("locked_team.label.tooltip"):void 0;s.canEditTeam&&!(0,eS.E_)(r,e.org_id)?u.push({kind:s9.G.CUSTOM,key:na.NEW_PROJECT,element:(0,c.jsx)("div",{"data-tooltip":g,"data-tooltip-type":x,children:(0,c.jsx)(ef.uu,{"data-onboarding-key":"team-view-new-project-cta","data-testid":"team-view-new-project-cta",variant:"primary",disabled:d,"aria-label":(0,A.t)("project_creation.create_project"),iconPrefix:(0,c.jsx)(t6.Z,{}),onClick:()=>{t((0,X.nw)({team:{...e,canEdit:s.canEditTeam},where:rU.A4.FolderListView}))},children:(0,A.tx)("file_browser.team.add_project")})}),showOnMobile:!0}):!e.org_id||e.org_access===eH.Zn.SECRET||p||s.canAdminTeam||u.push({kind:s9.G.CUSTOM,key:na.REQUEST_TO_EDIT,element:(0,c.jsx)(ef.uu,{variant:"primary",onClick:()=>{m?t(fm.pn({requestId:n[e.id]?.id})):t(tF.K4({type:ff.M,data:{team:e,requesterCurrentLevel:_a.V5.VIEWER}}))},children:m?(0,A.t)("file_browser.team.cancel_request"):(0,A.t)("file_browser.team.request_to_edit")})}),u.push({kind:s9.G.CUSTOM,key:na.INVITE,element:(0,c.jsx)(ef.uu,{variant:"secondary",onClick:d?_.ZT:l,disabled:d,htmlAttributes:{"data-tooltip":g,"data-tooltip-type":x},children:(0,A.t)("file_browser.team.share")})}),e.org_id&&u.push(f);let h=(0,c.jsx)(g2,{team:e,showInvite:!0,onInviteClick:l,onMembersClick:o,setFavorite:a,removeFavorite:i});return u.push({kind:s9.G.CUSTOM,key:na.TEAM_OVERFLOW_MENU,showOnMobile:!0,hideOnDesktop:!0,element:h}),u}(e,C,a,V,G,t,M,e=>{e.stopPropagation(),C(eL.kp()),$(),D(e2.xB.MEMBERS)},K,!!w&&T||E),rightSideOfTitleAction:ea,pageHeaderIcon:void 0,badge:(0,c.jsxs)(mm.j,{direction:"horizontal",children:[L?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(nd.u,{children:U}),(0,c.jsx)("div",{className:P.B.ml4.mr4.$,"data-tooltip-type":ae.fR.TEXT,"data-tooltip":L,"data-tooltip-subtext":B,"data-tooltip-offset-y":-4,"data-tooltip-timeout-delay":50,"data-tooltip-max-width":200,children:(0,c.jsx)(nu.T,{"aria-hidden":"true"})})]}):void 0,ei?(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(r8.Ui,{name:r7.gZ.PROFESSIONAL,properties:hr.R.getTrackingProperties(w),children:(0,c.jsx)(r8.XT,{type:"button",onClick:()=>{k()?C(tF.K4({type:aF.n,data:{upsellSource:aU.V.TEAM_PAGE_VIEW_PROFESSIONAL_BADGE}})):C(tF.K4({type:hn,data:{teamId:e.id}}))},className:"team_page_view--pointerOnHover--CzkTD",trackingProperties:{trackingDescriptor:ev.y.PROFESSIONAL},children:(0,c.jsx)(r7.Ct,{color:r7.JV.INFORMATIONAL,text:(0,A.t)("pro_onboarding.professional"),size:r7.OD.EXTRA_LARGE,dataTestId:"team-page-view-professional-badge"})})})}):void 0]})})})}var hp=r(252455),hf=r(727025),hx=r(203570),hg=r(573253),hh=r(990662),hv=r(399009),hb=r(502726),hy=r(446030),hj=r(678135),hw=r(935058),hT=r(639974),hI=r(896941);let hE="org_user_meta_content--teamsHeader--lChRr org_user_meta_content--sectionHeader--na7OT text--fontPos13--5OfL8 text--_fontBase--VaHfk";function hk(e){let t=(0,m.I0)(),r=(0,ea.xJ)(),a=(0,hT.m)(e.user),i=(0,m.v9)(t=>t.currentUserOrgId===e.orgId),s=()=>{t((0,tF.K4)({type:hI.a}))};return(0,c.jsx)("div",{className:P.B.flex.flexColumn.ml16.hFull.$,children:(0,c.jsx)(hf.u,{isLoading:e.isLoading,children:()=>(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"org_user_meta_content--userData--ZVHAF",children:[(0,c.jsx)(ra.Yt,{user:e.user,size:ra.DZ.LARGE}),(0,c.jsx)("div",{className:"org_user_meta_content--userName---C3P2 text--fontPos18--FkHj- text--_fontBase--VaHfk",children:e.title}),e.user.profile?.job_title&&(0,c.jsxs)("div",{className:"org_user_meta_content--jobTitle--y6-5x text--fontPos11--rO47d text--_fontBase--VaHfk",children:[(0,c.jsx)(r7.Ct,{color:r7.JV.INVERT,text:(0,hb.Cw)(e.user.profile?.job_title)}),e.userId===r?.id&&(0,c.jsx)(tV.zx,{variant:"link",onClick:s,children:(0,A.tx)("internal_profile.change_job_title")})]}),e.user.email&&(0,c.jsx)("div",{className:"org_user_meta_content--email--pjO1x text--fontPos13--5OfL8 text--_fontBase--VaHfk",children:e.user.email}),(e.description||!e.isReadOnly)&&(0,c.jsx)(hy.CH,{value:e.description??"",placeholder:(0,A.t)("internal_profile.add_a_description"),submit:e.submitDescription,formatter:hy.hu,readOnly:e.isReadOnly,className:"org_user_meta_content--description--XR3VX text--fontPos13--5OfL8 text--_fontBase--VaHfk"})]}),a&&e.user?.id===r?.id&&(0,c.jsx)(hP,{user:e.user}),i&&(0,c.jsxs)(e_.l,{className:P.B.flexShrink1.bt1.bSolid.colorBorder.$,innerClassName:P.B.p16.borderBox.flex.flexColumn.$,children:[(0,c.jsx)("h2",{className:hE,children:(0,A.tx)("internal_profile.teams")}),(0,c.jsx)(hS,{userId:e.userId,orgId:e.orgId}),(0,c.jsx)("h2",{className:hE,children:(0,A.tx)("internal_profile.recent_projects")}),(0,c.jsx)(hR,{files:e.recents,isYourProfile:!e.isReadOnly})]})]})})})}function hN(e){let t=(0,ea.xJ)(),r=(0,m.I0)();return(0,c.jsx)(hk,{submitDescription:t=>{r(hw.gz({user:{id:e.userId,description:t},userInitiated:!0}))},isLoading:!e.user,isReadOnly:!t||t.id!==e.userId,description:e.user.description??null,title:e.user.name??e.user.handle??null,userId:e.userId,user:e.user,recents:e.recents,orgId:e.orgId})}function hC(e){let t=(0,m.I0)(),r=(0,ea.xJ)();return(0,c.jsx)(hk,{isLoading:!e.user||!e.orgUser||!e.org,isReadOnly:!r||r.id!==e.userId,description:(e.orgId&&e.orgUser?e.orgUser.description:e.user.description)??null,title:e.user&&e.org?(0,A.t)("internal_profile.title",{userName:e.user.handle,orgName:e.org.name}):null,recents:e.recents,submitDescription:r=>{e.orgId&&e.orgUser&&t(fk.gz({orgUser:{id:e.orgUser.id,org_id:e.orgId,description:r},userInitiated:!0}))},user:e.user,userId:e.userId,orgId:e.orgId})}function hR(e){let t=(0,hj.D)(e=>({view:"folder",folderId:e})),r=(0,u.useMemo)(()=>{let t=new Set;for(let r of"loaded"===e.files.status?e.files.data:[])r.folder_id&&t.add(r.folder_id);return Array.from(t).slice(0,10)},[e.files]),a=(0,hv.wx)(r,"loaded"===e.files.status&&!!e.files.data),i=u.useMemo(()=>{if("loaded"!==e.files.status||"loading"===a.status)return[];let t=[],i=[];if(!e.files)return t;let s=new Set;for(let n of e.files.data){let e=n.folder_id;if(!e||s.has(e)||!r.includes(e)||(s.add(e),""===n.folder_name||null==n.folder_name))continue;let o=!!a?.data?.[e],l={id:e,name:n.folder_name,teamName:n.team_name,canView:o};if(l.canView?t.push(l):i.push(l),t.length+i.length>=5)break}return t.concat(i)},[e.files,a,r]);return(0,c.jsx)(hf.u,{isLoading:"loading"===e.files.status||"loading"===a.status,children:()=>(0,c.jsxs)("div",{children:[0===i.length&&(0,c.jsx)("div",{className:"org_user_meta_content--projectEmptyState--d722J text--fontPos11--rO47d text--_fontBase--VaHfk",children:e.isYourProfile?(0,A.t)("internal_profile.your_recent_projects_will_appear_here"):(0,A.t)("internal_profile.their_recent_projects_will_appear_here")}),i.map(e=>(0,c.jsx)(iL.h,{disabled:!e.canView,onClick:r=>{e.canView&&t(r,e.id)},className:e.canView?"org_user_meta_content--project--jNnkB org_user_meta_content--projectBase--JNu1- text--fontPos13--5OfL8 text--_fontBase--VaHfk ellipsis--ellipsis--70pHK":"org_user_meta_content--dimProject--C8mEH org_user_meta_content--dim--S0Cl9 org_user_meta_content--projectBase--JNu1- text--fontPos13--5OfL8 text--_fontBase--VaHfk ellipsis--ellipsis--70pHK",children:(0,c.jsx)("span",{"data-tooltip-type":ae.fR.TEXT,"data-tooltip":e.canView?void 0:(0,A.t)("internal_profile.you_must_be_a_member_of_team_name",{teamName:e.teamName}),children:e.name})},e.id))]})})}function hS(e){let[t,r]=u.useState(null);u.useEffect(()=>{_Z.W.getTeams({userId:e.userId,orgId:e.orgId||void 0}).then(e=>{r(e.data.meta)}).catch(e=>{console.error("Unable to load org user teams",e)})},[e.userId,e.orgId]);let a=(0,u.useMemo)(()=>(t||[]).slice(0,10),[t]),i=(0,sA.si)(a.map(e=>e.id),!!a),s=(0,hj.D)(e=>({view:"team",teamId:e.id})),n=(a||[]).sort((e,t)=>{let r=i.data?.[e.id],a=i.data?.[t.id];return r&&!a?-1:!r&&a?1:0}),o=!a||"loaded"!==i.status;return(0,c.jsx)(hf.u,{isLoading:o,children:()=>(0,c.jsxs)("div",{className:P.B.flex.flexColumn.gap8.$,children:[n.map(e=>{let t=i.data?.[e.id];return(0,c.jsx)(ro.Zq,{entity:e,size:12,hideFallbackInitial:!0,onClick:t?s:void 0,className:`org_user_meta_content--teamListItem--dWZj4 text--fontPos13--5OfL8 text--_fontBase--VaHfk ${t?"":"org_user_meta_content--dim--S0Cl9"}`,"data-tooltip-type":ae.fR.TEXT,"data-tooltip":t?void 0:(0,A.t)("internal_profile.you_re_not_a_member_of_this_team"),"data-tooltip-offset-y":4},e.id)}),a&&0===a.length&&(0,A.tx)("internal_profile.no_teams_in_common"),t&&t.length>10&&(0,c.jsx)("div",{className:"org_user_meta_content--numOtherTeamsRow---KKYb",children:(0,A.tx)("internal_profile.N_other_teams",{numOtherTeams:t.length-10})})]})})}function hO(e){return(0,c.jsxs)("div",{className:"org_user_meta_content--userProfileNotification--dPI2e",children:[(0,c.jsx)("div",{className:"org_user_meta_content--userProfileNotificationTitle---kCUB text--fontNeg11--bghdh text--_fontBase--VaHfk text--_negText--7Cnf0",children:e.title}),(0,c.jsx)("div",{className:"org_user_meta_content--userProfileNotificationText--hKbcI text--fontNeg11--bghdh text--_fontBase--VaHfk text--_negText--7Cnf0",children:e.text}),(0,c.jsx)("div",{className:"org_user_meta_content--userProfileNotificationAction---0Jqb",children:e.action})]})}function hP(e){let{profile:t}=e.user,r=(0,m.I0)();return(0,c.jsx)(c.Fragment,{children:t?.images?null:(0,c.jsx)(hO,{title:(0,A.t)("internal_profile.profile_image_nudge.title"),text:(0,A.t)("internal_profile.profile_image_nudge.text"),action:(0,c.jsx)(tV.zx,{variant:"link",onClick:()=>{r((0,nv.X)({entity:e.user,entityType:ng.p.CURRENT_USER,shape:"CIRCLE"})),(0,Q.T6)({trackingContext:at.V4.FILE_BROWSER,context:"job_title",text:"Update Photo"})},children:(0,A.tx)("internal_profile.profile_image_nudge.action")})})})}var hA=r(946853);function hD(e){let t=(0,hA.pJ)(e.publishedPlugins),r=(0,hA.V5)((0,hA.GE)(t,e.userId),e.org),a=Object.keys(r).map(e=>r[e]),i=(0,tN.ih)(a);return 0===i.length?null:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("h2",{className:"user_org_resources--sectionHeader--2tWQy internal_user_profile_page_view--sectionHeader--9DHK0 text--fontPos13--5OfL8 text--_fontBase--VaHfk",children:(0,A.tx)("file_browser.settings.plugins_published",{orgName:e.org.name})}),(0,c.jsxs)("div",{className:"user_org_resources--container--mZI6O profile_resources_grid--_resourcesGridTemplateColumns---lpye",children:[i.map(e=>(0,c.jsx)(pz.J9,{pluginId:e.id,showInstallCount:!0,viewContext:"UserOrgResources"},`plugin-${e.id}`)),(0,c.jsx)(pz.Ur,{numResources:i.length})]})]})}function hF(e){let{org:t}=e,r=(0,m.v9)(r=>(t&&t.id&&r.orgUsersByOrgId[t.id]||{})[e.user.id]);return t?(0,c.jsx)(hC,{orgId:t.id,recents:e.recents,userId:e.user.id,user:e.user,org:t,orgUser:r}):(0,c.jsx)(hN,{orgId:null,recents:e.recents,userId:e.user.id,user:e.user})}let hM={showInFolder:!0,open:!0,openNewTab:!0,restoreFromVersion:!0,rename:!0,share:!0,copyLink:!0,duplicateToDrafts:!0,delete:!0,removeFromRecents:!1,createBranch:!0,publishOrgTemplate:!1,moveFile:!0,pinToWorkspace:!1},hL=e=>{let t=e.user.id,r=(0,m.I0)(),a=(0,m.v9)(e=>e.selectedView),i=e.orgUser&&e.orgUser.org_id,s=(0,m.v9)(e=>e.currentUserOrgId),n=void 0===i?s:i,o=(0,m.v9)(e=>n&&e.orgById[n]||null),l=(0,p.BZ)().xr_debounce_threshold&&o,d="user"===a.view?a.userViewTab:void 0;u.useEffect(()=>{r((0,tF.h0)({type:hh.I}))},[r,d]);let f=(0,m.v9)(e=>e.userFlags);u.useEffect(()=>{f.seen_profile||r(eG.v({seen_profile:!0}))},[r,f.seen_profile]);let x=(0,m.v9)(e=>e.tileSortFilterStateByView.user),{recentFilesResult:g,isFetchingNextPage:h,loadNextPage:v}=function({userId:e,currentOrgId:t,editorTypeFilter:r}){let a={action:"edit",userId:e,firstPageSize:55,sortOrder:"DESC"},[i]=(0,y.aM)(r?e0.iO4.Query({...a,_editorTypeRaw:r}):e0.rEj.Query(a)),s=u.useMemo(()=>i.transform(e=>e.userPublic?"paginatedRecentFilesByEditorType"in e.userPublic?e.userPublic.paginatedRecentFilesByEditorType:e.userPublic.paginatedRecentFiles:null),[i]),n=u.useMemo(()=>s.transform(e=>{let r=[];for(let a of e??[])null!==a.file&&a.file.parentOrgId===t&&!a.file.isDraftFile&&null===a.file.trashedAt&&r.push({key:a.file.key,name:a.file.name,timestamp:a.actionAt.getTime()/1e3,editor_type:a.file.editorType,folder_name:a.file.project?.name||"",folder_id:a.file.folderId,team_id:a.file.teamId,team_name:a.file.team?.name||"",thumbnail_url:a.file.signedThumbnailUrl,client_meta:a.file.clientMeta,thumbnail_guid:a.file.thumbnailGuid||null,edit_url:a.file.editUrl,source_file_name:a.file.sourceFile?.name||null,has_file_link_password:!!a.file.hasFileLinkPassword,link_access:a.file.linkAccess});return r}),[s,t]);return{recentFilesResult:n,isFetchingNextPage:u.useMemo(()=>s.transform(e=>e?.isLoadingNextPage??!1).unwrapOr(!1),[s]),loadNextPage:u.useCallback(()=>{s.data?.loadNext(55)},[s])}}({userId:t,currentOrgId:n,editorTypeFilter:(0,mc.c4)(x.filters.fileType)}),b=(0,hp.q)(()=>o&&o.community_profile_id?r(hg.ge({profileId:o.community_profile_id})):Promise.resolve([]),[r,o]),j="user"===a.view&&a.userViewTab===nG.l.INTERNAL_PROFILE_POSTS?nG.l.INTERNAL_PROFILE_POSTS:nG.l.INTERNAL_PROFILE,w=d===nG.l.INTERNAL_PROFILE?[(0,c.jsx)("div",{className:"internal_user_profile_page_view--hideFilterRightPadding--OkHUU",children:(0,c.jsx)(iW.kP,{config:x})},"sort-filter")]:[],[T,I,E]=nF.m.useManagedTabs({[nG.l.INTERNAL_PROFILE]:!0,[nG.l.INTERNAL_PROFILE_POSTS]:!0},j,e=>{r(eL.fv({view:"user",userId:t,userViewTab:e}))}),k=(0,c.jsx)(iW.Nb,{leftSide:l?(0,c.jsxs)(nF.m.TabStrip,{manager:E,children:[(0,c.jsx)(nF.m.Tab,{...T[nG.l.INTERNAL_PROFILE],children:(0,A.t)("internal_profile.file_contributions")},nG.l.INTERNAL_PROFILE),(0,c.jsx)(nF.m.Tab,{...T[nG.l.INTERNAL_PROFILE_POSTS],children:(0,A.t)("internal_profile.posts")},nG.l.INTERNAL_PROFILE_POSTS)]}):(0,c.jsx)("h2",{className:"internal_user_profile_page_view--sectionHeader--9DHK0 text--fontPos13--5OfL8 text--_fontBase--VaHfk",children:(0,A.tx)("internal_profile.file_contributions")}),rightSide:w}),N=u.useCallback((e,t,i)=>{mR({tile:e,index:i,dispatch:r,selectedView:a,isListView:!1})},[a,r]),{showing:C,show:R,data:S}=(0,oo.H)(),O=u.useCallback((e,t,r)=>{R({data:{tile:e,targetRect:{top:t.clientY,right:t.clientX,bottom:t.clientY,left:t.clientX,width:1,height:1},index:r}})},[R]),P=u.useMemo(()=>g.transform(e=>e.map(e=>(function(e){let t={...e,name:e.source_file_name?e.source_file_name+": "+e.name:e.name,description:null,created_at:"",url:"",creator_id:"",deleted_at:null,trashed_at:null,trashed_user_id:null,has_proto_link_password:!1,license:null,proto_link_access:null,touched_at:new Date(1e3*e.timestamp).toString(),prototype_url:"",updated_at:"",file_repo_id:null,source_file_key:null,is_try_file:!1};return(0,rN.dX)(t)})(e))),[g]);return(0,r8.bC)((0,c.jsx)(s6.S,{scrollableContainerClass:"internal_user_profile_page_view--pageContainer--ze7e3",containerClass:"internal_user_profile_page_view--pageContainerInner--V6b0H",content:!e.userNotInPlan&&(0,c.jsxs)("div",{className:"internal_user_profile_page_view--content---S0NI",children:[(0,c.jsx)("div",{className:"internal_user_profile_page_view--viewbar--4nRKF",children:k}),d===nG.l.INTERNAL_PROFILE&&(b.status===hx.Q.SUCCESS&&"loaded"===g.status?(0,c.jsxs)(c.Fragment,{children:[o&&(0,c.jsx)(hD,{userId:t,org:o,publishedPlugins:b.value}),(0,c.jsxs)(e_.l,{children:[(0,c.jsx)(u9.o,{onShouldFetchNextPage:v,isFetchingNextPage:h,children:(0,c.jsx)(me.E,{items:P.data??[],handleOpenTile:N,handleOpenDropdown:O,sortConfig:x.sort,viewType:sV.H6.GRID,gridContainerStyle:hU.grid,sortBy:_.ZT})},`${x.filters.fileType}-${x.sort.key}-${x.sort.dir}`),(()=>{let e=S?.tile??null;return(0,c.jsx)(r8.Ui,{name:at.V4.TILES_VIEW_DROP_DOWN,enabled:C,properties:{tileType:e?.type,tileFileId:e?.type===rN.YU.FILE?e?.file.key:void 0},children:(0,c.jsx)(ol.b,{tileActions:hM,selectedTiles:e?[e]:[],tile:e,openTile:()=>{e?.type===rN.YU.FILE&&(0,rE.ZB)(r,e.file)},dropdownVisible:C})})})()]})]}):(0,c.jsx)(em.jz,{})),d===nG.l.INTERNAL_PROFILE_POSTS&&o&&(0,c.jsx)(uD,{currentOrgId:o.id,selectedUser:e.user})]}),metaContent:(0,c.jsx)(hF,{user:e.user,recents:g,org:o,orgUser:e.orgUser})}),at.V4.USER_DETAILS,{view:"org_user",userId:t})};function hB(e){return(0,c.jsx)(hL,{user:e.user,orgUser:e.orgUser,userNotInPlan:e.userNotInPlan},e.user.id)}let hU={grid:{kpe85a:"x1m2p0i2",kE3dHu:"x163pfp",kZCmMZ:null,kwRFfy:null,kGO01o:"x1gan7if",$$css:!0}},hV={[nG.l.INTERNAL_PROFILE]:{Component:hB},[nG.l.INTERNAL_PROFILE_POSTS]:{Component:hB},[nG.l.PLUGINS]:{Component:u.Fragment}};function hG(e){return(0,c.jsx)(e.component,{...e.context})}function hz(e){let t=(0,m.I0)(),r=(0,ea.xJ)(),a=e.orgId,i=(0,m.v9)(e=>e.currentUserOrgId),s=void 0===a?i:a,n=(0,e1.ZG)("UserPageView").unwrapOr(null),o=(0,hp.q)(()=>{var a,i;return Promise.all([(a=e.userId,r&&r.id===a?Promise.resolve(r):_Z.W.getUser({userId:a}).then(e=>e.data.meta).catch(e=>{throw t(a2.l.error("Failed to get user",5e3)),console.warn("Failed to get user files"),e})),(i=e.userId,!s?Promise.resolve(null):t(fk.__({orgId:s,userId:i,allowNoOrgUser:!0})))]).then(([r,a])=>(s&&!a&&t(tp.R.enqueue({type:"org_user_not_found",message:n?.name?(0,A.t)("org_user_actions.org_user_not_found",{userHandle:r.handle,planName:n.name}):(0,A.t)("org_user_actions.org_user_not_found_without_plan_name",{userHandle:r.handle}),error:!0,onDismiss:_.ZT})),(0,rE.x6)(r.handle),{userNotInPlan:!!(s&&!a),userId:e.userId,user:r,orgUser:a,profileHandle:r.community_profile_handle||null,on404Redirect:a?()=>{t(eL.fv({view:"user",userId:e.userId,orgId:s,userViewTab:nG.l.INTERNAL_PROFILE}))}:()=>{g.ZP.redirect("/404")}}))},[t,r,s,e.userId,n]),{tab:l}=e;if(!l)return null;let{Component:d}=hV[l];return(0,c.jsx)(hf.u,{className:"user_page_view--loadingContainer--kSmnp",state:o,failure:void 0,children:t=>(0,c.jsx)(hG,{component:d,tab:l,userId:e.userId,context:t})})}function hW({workspaceId:e}){let t=(0,et.Ng)(),r=(0,es._P)(t.id,e);return"loaded"!==r.status?null:"Unassigned"===r.data?(0,c.jsx)(oG.FD,{children:(0,c.jsx)(hK,{org:t,workspaceId:e})}):(0,c.jsx)(oG.FD,{children:(0,c.jsx)(hH,{org:t,workspaceId:e,workspace:r.data})})}function hH({org:e,workspaceId:t,workspace:r}){let a=sp(r);return(0,c.jsx)(hK,{org:e,workspaceId:t,parentBackgroundColor:a})}function hK({org:e,workspaceId:t,parentBackgroundColor:r}){let a=(0,m.I0)();return(0,c.jsx)(oG.jN,{text:e.name,parentBackgroundColor:r,onClick:r=>{a(eL.fv({view:"org",orgId:e.id,orgViewTab:tG.i.HOME})),(0,Q.T6)({clickedResourceType:"org",clickedResourceId:e.id,currentResource:t,orgId:e.id})}})}function hY({showingFileBrowserLoader:e}){let t=(0,eB.A6)();u.useEffect(()=>{(0,Q.J8)(t)},[t]);let r=function(){let e=(0,m.I0)(),t=(0,ea.XU)(),r=(0,et.$0)(),a=(0,eB.A6)(),i=(0,aB.V7)(),s=(0,et.Ng)(),n=(0,m.v9)(e=>e.search),o=function(){let e=eA({project:"drafts"});return u.useCallback(({from:t})=>e?[(0,c.jsx)(xy,{from:t},t)]:[],[e])}();switch(a.view){case"resourceHub":return{pageHeaderContent:(0,c.jsx)(us,{}),pageContent:(0,c.jsx)(c9,{})};case"deletedFiles":return{pageHeaderTitle:(0,A.t)("file_browser.tool_bar.trash"),pageContent:(0,r8.bC)((0,c.jsx)(mX,{selectedTab:mJ.FILES},"trashed"),at.V4.FILE_BROWSER,{view:"trashed"})};case"litmus":if(!(0,uo.Ex)())return null;switch(a.subView){case"projects":return{pageHeaderContent:"Litmus",pageContent:(0,c.jsx)(un.O4,{})};case"feed":return{pageHeaderContent:"Litmus",pageContent:(0,c.jsx)(un.cs,{})}}case"trashedFolders":return{pageHeaderTitle:(0,A.t)("file_browser.tool_bar.trash"),pageContent:(0,r8.bC)((0,c.jsx)(mX,{selectedTab:mJ.FOLDERS},"trashed"),at.V4.FILE_BROWSER,{view:"trashed"})};case"draftsToMove":return{pageHeaderTitle:(0,A.t)("file_browser.tool_bar.drafts_to_move"),pageContent:(0,c.jsx)(ps,{},"draftsToMove")};case"folder":if(a.folderId===t?.drafts_folder_id)return{pageHeaderTitle:(0,A.t)("file_browser.tool_bar.drafts"),pageHeaderActions:o({from:oW.L7.FILE_BROWSER_TOPBAR_DRAFTS}),pageContent:(0,r8.bC)((0,c.jsx)(_U,{folderId:a.folderId,userId:t.id},"drafts"),at.V4.FILE_BROWSER_DRAFTS,{orgId:r,teamId:i})};return{pageContent:(0,r8.bC)((0,c.jsx)(fy,{folderId:a.folderId},`folder-${a.folderId}`),at.V4.FOLDER_PAGE,{orgId:r,teamId:i,folderId:a.folderId}),pageHeaderContent:(0,c.jsx)(p_,{folderId:a.folderId}),pageHeaderDividerHidden:!0};case"workspace":switch(a.subView){case tn.ep.ADMIN:return{pageHeaderContent:(0,c.jsx)(hW,{workspaceId:a.workspaceId}),pageHeaderDividerHidden:!0,pageContent:(0,r8.bC)((0,c.jsx)(L.Vx,{workspaceId:a.workspaceId,selectedTab:a.selectedTab}),at.V4.WORKSPACE_ADMIN_SETTINGS_PAGE,{workspaceId:a.workspaceId,workspaceViewTab:a.selectedTab})};case tn.ep.DIRECTORY:return{pageHeaderContent:(0,c.jsx)(hW,{workspaceId:a.workspaceId??null}),pageHeaderDividerHidden:!0,pageContent:(0,r8.bC)(a.workspaceId?(0,c.jsx)(oB,{workspaceId:a.workspaceId},a.workspaceId):(0,c.jsx)(nn,{}),at.V4.WORKSPACE_DIRECTORY_PAGE,{workspaceId:a.workspaceId,workspaceGroupViewTab:a.selectedTab})};default:(0,O.vE)(a)}case"licenseGroup":if(a.subView===ts.gp.ADMIN)return{pageContent:(0,r8.bC)((0,c.jsx)(L.lS,{licenseGroupId:a.licenseGroupId,selectedTab:a.selectedTab}),at.V4.LICENSE_GROUP_ADMIN_SETTINGS_PAGE,{licenseGroupId:a.licenseGroupId,licenseGroupViewTab:a.selectedTab})};(0,O.vE)(a);case"org":return{pageHeaderTitle:s?(0,c.jsx)(ag,{}):void 0,pageHeaderActions:[(0,c.jsx)(fI,{orgId:a.orgId},"org-page-header-actions")],pageContent:(0,r8.bC)((0,c.jsx)(f6,{orgId:a.orgId,selectedTab:a.orgViewTab}),at.V4.ORG_PAGE,{orgId:a.orgId,orgViewTab:(a.orgViewTab===tG.i.HOME?"HOME":a.orgViewTab)||""})};case"orgAdminSettings":let l=(0,F.EO)(a.orgAdminSettingsViewTab,a.orgAdminSettingsViewSecondaryTab,{showResourceConnectionInviteModal:!!a.showResourceConnectionInviteModal,showResourceConnectionFlyout:!!a.showResourceConnectionFlyout,isEnterpriseOrg:s?.tier===eH.Lz.ENTERPRISE,isK12Org:!!s?.k12_google_org});return{pageContent:(0,r8.bC)((0,c.jsx)(L.zr,{selectedTab:a.orgAdminSettingsViewTab,selectedSecondaryTab:l,selectedExtensionId:a.selectedExtensionId,selectedWorkspaceId:a.selectedWorkspaceId,showResourceConnectionInviteModal:a.showResourceConnectionInviteModal,showResourceConnectionFlyout:a.showResourceConnectionFlyout}),at.V4.ORG_ADMIN_SETTINGS_PAGE,{orgId:r,orgViewTab:a.orgAdminSettingsViewTab||"dashboard",source:a.orgAdminSettingsViewTab||"dashboard",orgViewSecondaryTab:l})};case"abandonedDraftFiles":return{pageContent:(0,r8.bC)((0,c.jsx)(L.Lz,{abandonedDraftFolderId:a.abandonedDraftFolderId,planType:a.adminPlanType,planId:a.planId}),at.V4.ABANDONED_DRAFTS_PAGE,a.adminPlanType===oH.k.ORG?{orgId:a.planId}:{teamId:a.planId})};case"orgDomainManagement":let d=(0,c.jsxs)(oG.FD,{children:[(0,c.jsx)(oG.gN,{text:(0,A.t)("general.admin"),onClick:()=>{e(eL.fv({view:"orgAdminSettings",orgAdminSettingsViewTab:e5.rN.DASHBOARD}))},hasTrailingDivider:!0}),(0,c.jsx)(oG.gN,{text:(0,A.t)("org_dashboard.settings"),onClick:()=>{e(eL.fv({view:"orgAdminSettings",orgAdminSettingsViewTab:e5.rN.SETTINGS}))},hasTrailingDivider:!1})]});return{pageContent:(0,r8.bC)((0,c.jsx)(L.rT,{}),at.V4.ORG_DOMAIN_MANAGEMENT_PAGE,{orgId:r}),pageHeaderContent:d};case"billingGroupDashboard":return{pageContent:(0,r8.bC)((0,c.jsx)(L.Cm,{selectedTab:a.selectedTab}),at.V4.BILLING_GROUP_DASHBOARD_SETTINGS_PAGE,{orgId:r,orgViewTab:a.selectedTab})};case"recentsAndSharing":let _=a.tab??sU.D5.RECENTLY_VIEWED,p=o({from:oW.L7.FILE_BROWSER_TOPBAR_RECENTS});return{pageHeaderTitle:(0,A.t)("file_browser.tool_bar.recents"),pageHeaderActions:p,pageContent:(0,r8.bC)((0,c.jsx)(gZ,{selectedTab:_,userId:t.id,accountModalTab:a.accountModalTab,emailPolicyToUnsubscribeFrom:a.emailPolicyToUnsubscribeFrom}),at.V4.FILE_BROWSER,{view:"recentsAndSharing",userSpace:r?at.FQ.ORG:at.FQ.PERSONAL})};case"resourceUnavailable":return{pageContent:(0,c.jsx)(no.M,{resourceType:a.resourceType})};case"search":{let{searchScope:e,query:t}=n.parameters,r=!w.ZP.mobile;return{pageHeaderTitle:(0,c.jsx)(hZ,{query:t}),pageContent:(0,r8.bC)((0,c.jsx)(iW.du,{}),at.V4.UNIFIED_SEARCH,{showInternalModal:r&&e!==oK.$0.COMMUNITY,showCommunityModal:r&&e===oK.$0.COMMUNITY}),pageHeaderActions:o({from:oW.L7.FILE_BROWSER_TOPBAR_SEARCH})}}case"seatRequests":return{pageContent:(0,r8.bC)((0,c.jsx)(B.n,{}),at.V4.SEAT_REQUESTS_PAGE,{orgId:r,teamId:i,planType:a.adminPlanType})};case"limitedTeamSharedProjects":return{pageContent:(0,c.jsx)(fj,{})};case"team":{let e=a.teamViewTab??e2.xB.HOME;return{pageContent:(0,r8.bC)((0,c.jsx)(hm,{teamId:a.teamId,selectedTab:e,upgradeModalType:a.upgradeModalType,showProOnboardingModal:a.isProUpgrade,showResourceConnectionInviteModal:a.showResourceConnectionInviteModal},`team-${a.teamId}`),at.V4.TEAM_PAGE,{teamId:a.teamId,userSpace:r?at.FQ.ORG:at.FQ.PERSONAL,orgId:r}),pageHeaderContent:(0,c.jsx)(gq,{teamId:a.teamId}),pageHeaderDividerHidden:!0}}case"teamAdminConsole":{let e=a.teamAdminConsoleViewTab??(a.isProTeam?e2.mb.DASHBOARD:e2.mb.MEMBERS),t=(0,M.P4)(e,a.teamAdminConsoleViewSecondaryTab,{showResourceConnectionInviteModal:!!a.showResourceConnectionInviteModal,showResourceConnectionFlyout:!!a.showResourceConnectionFlyout});return{pageContent:(0,r8.bC)((0,c.jsx)(L.Qu,{teamId:a.teamId,selectedTab:e,selectedSecondaryTab:t,showResourceConnectionInviteModal:a.showResourceConnectionInviteModal,showResourceConnectionFlyout:a.showResourceConnectionFlyout}),at.V4.TEAM_ADMIN_PAGE,{teamId:a.teamId,teamAdminConsoleViewTab:e,teamAdminConsoleViewSecondaryTab:t})}}case"teamFeed":return{pageHeaderContent:(0,c.jsx)(oG.FD,{children:(0,c.jsx)(oG.gN,{text:(0,A.t)("fig_feed.feed"),onClick:()=>{e(eL.fv({view:"teamFeed"}))},hasTrailingDivider:!1})}),pageContent:(0,c.jsx)(h$,{postUuid:a.postUuid,creatorId:a.creatorId})};case"user":return{pageHeaderTitle:(0,A.t)("internal_profile.profile"),pageHeaderActions:t.community_profile_handle&&t.id===a.userId?[(0,c.jsx)(xt,{},"viewCommunityProfileAction")]:void 0,pageContent:(0,c.jsx)(hz,{userId:a.userId,tab:a.userViewTab,orgId:a.orgId})};case"orgIdpManagement":let f=(0,c.jsxs)(oG.FD,{children:[(0,c.jsx)(oG.gN,{text:(0,A.t)("general.admin"),onClick:()=>{e(eL.fv({view:"orgAdminSettings",orgAdminSettingsViewTab:e5.rN.DASHBOARD}))},hasTrailingDivider:!0}),(0,c.jsx)(oG.gN,{text:(0,A.t)("org_dashboard.settings"),onClick:()=>{e(eL.fv({view:"orgAdminSettings",orgAdminSettingsViewTab:e5.rN.SETTINGS}))},hasTrailingDivider:!1})]});return{pageContent:(0,r8.bC)((0,c.jsx)(L.D6,{}),at.V4.ORG_IDP_MANAGEMENT_PAGE,{orgId:r}),pageHeaderContent:f};default:return null}}();if(!r)return null;let{CustomPageLayout:a,pageContent:i}=r;if(a)return(0,c.jsx)(m5,{children:(0,c.jsx)(a,{children:!e&&i})});{let t=r.pageHeaderContent?{pageHeaderContent:r.pageHeaderContent}:{pageHeaderTitle:r.pageHeaderTitle};return(0,c.jsx)(m5,{children:(0,c.jsx)(sw,{showingFileBrowserLoader:e,pageHeaderActions:r.pageHeaderActions,pageHeaderDividerHidden:r.pageHeaderDividerHidden,...t,children:i})})}}function hZ(e){return e.query?(0,c.jsxs)("div",{className:P.B.flex.columnGap8.$,children:[(0,c.jsx)("span",{className:P.B.flexShrink0.$,children:(0,c.jsx)(D.x,{color:"secondary",children:(0,A.tx)("search.search_results_for")})}),(0,c.jsxs)("div",{className:P.B.flex.fontMedium.minW0.$,children:["\u201C",(0,c.jsx)(D.x,{truncate:!0,children:e.query}),"\u201D"]})]}):(0,c.jsx)("div",{className:P.B.flex.columnGap8.$,children:(0,c.jsx)("span",{className:P.B.flexShrink0.$,children:(0,c.jsx)(D.x,{color:"secondary",children:(0,A.tx)("search.search_results")})})})}function h$(e){return(0,oz.q)()?(0,c.jsx)(uG,{postUuid:e.postUuid,creatorId:e.creatorId}):null}var hq=r(795293),hQ=r(919542),hJ=r(75254),hX=r(382830),h0=r(827642),h1=r(300028),h5=r(20023);let h2="add_collaborators--emailListItem--1YkU3";function h4({selectedView:e}){let[t,r]=u.useState(["","",""]),a=(0,m.v9)(t=>t.teams[e.teamId]),i=(0,m.v9)(e=>e.teamCreation),s=(0,m.v9)(e=>e.payment),n=(0,m.I0)(),o=u.useCallback(()=>{a&&n(eL.fv({view:"team",teamId:a.id}))},[n,a]),l=u.useCallback((e,a)=>{if(a>=t.length)return;let i=[...t];i[a]=e,r(i)},[t]),d=u.useCallback(()=>{r([...t,""])},[t]),_=u.useCallback(()=>{let e=!!i.isEduTeam;s.promo?n(h1.nw({teamId:a.id,teamName:a.name,previousView:{view:"team",teamId:a.id}})):e?n(d$.y4({teamId:a.id,showBreadcrumbs:!0})):n(eL.fv({view:"teamUpgrade",teamFlowType:i3.wD.UPGRADE_EXISTING_TEAM,teamId:a.id,paymentStep:iv.iy.UPGRADE_NEW_TEAM,previousView:{view:"team",teamId:a.id},planType:i3.rD.TEAM}))},[n,a,s.promo,i.isEduTeam]),p=u.useCallback(()=>t.filter(e=>e).map(e=>e.trim()),[t]),f=u.useCallback(()=>{n((0,h5.Pv)({emails:p(),resourceType:eH._g.TEAM,resourceIdOrKey:a.id,level:_a.V5.EDITOR,teamId:a.id,onSuccess:()=>{n(pf.K4({loading:!1})),_()}}))},[p,a,_,n]);return(0,c.jsx)(r8.Ui,{name:"Add Collaborators",properties:{teamId:a?.id},children:(0,c.jsx)("div",{children:(0,c.jsxs)(hJ.K,{menu:(0,c.jsx)(hQ.h,{onClick:o,children:(0,c.jsx)(r6.n,{svg:uB.Z,className:"add_collaborators--modalCloseX--A5Kmi"})}),children:[(0,c.jsx)(h0.O,{index:2}),(0,c.jsx)(hX.rQ,{children:(0,A.tx)("team_creation.add_your_collaborators")}),(0,c.jsx)(hX.hX,{children:(0,A.tx)("team_creation.you_can_update_user_permissions_on_the_team_page_after_setting_up")}),(0,c.jsxs)("div",{className:"add_collaborators--formContainer--abJQ0",children:[(0,c.jsx)("div",{className:"add_collaborators--emailInputsContainer--lc92Y",children:t.map((e,t)=>(0,c.jsx)(ar.Ev,{className:h2,value:e,onChange:e=>l(e.target.value,t),maxLength:255,placeholder:(0,A.t)("team_creation.email")},`collaborator-email-input-${t}`))}),(0,c.jsx)(ar.PL,{className:h2,onClick:d,children:(0,A.tx)("team_creation.add_another")}),(0,c.jsx)("div",{className:"add_collaborators--spacing--XCv0w"}),(0,c.jsxs)("div",{className:"add_collaborators--ctaContainer--XOZHu",children:[(0,c.jsx)(ar.OK,{disabled:0===p().length,onClick:f,trackingProperties:{numCollaborators:p().length},children:(0,A.tx)("team_creation.continue")}),(0,c.jsx)(ar.Cr,{onClick:_,trusted:!0,children:(0,A.tx)("team_creation.skip_for_now")})]})]})]})})})}var h9=r(983138),h7=r(101307),h3=r(941502),h6=r(63761),h8=r(561043),ve=r(162611),vt=r(408600);let vr=["folder","team","search","recentsAndSharing"];function va(){let e=(0,m.v9)(e=>e.autosave),t=(0,eB.A6)(),r=(0,h7.Ai)(),{unsyncedFiles:a,localUnsyncedFiles:i}=(0,m3.MG)();return!r||null!=e.lastSnoozeTime&&Date.now()-e.lastSnoozeTime<864e5?null:(a.length>0||i.length>0)&&vr.includes(t.view)?(0,c.jsx)(vs,{unsyncedFiles:a,localUnsyncedFiles:i}):null}let vi=!1;function vs(e){let t=(0,m.I0)();u.useEffect(()=>{let e=()=>{t(h6.Cq())};return ve.pk.register(ve.CP,e),function(){ve.pk.unregister(ve.CP,e),t(tF.h0({type:h3.TR.type}))}},[t]);let r=(0,eB.A6)(),[a,i]=u.useState(!1);u.useEffect(()=>{vi||(vi=!0,(0,h9.Bz)()),a||(i(!0),(0,iU.L9)("Autosave Notification",{hasUnsyncedFiles:e.unsyncedFiles.length>0,hasLocalUnsyncedFiles:e.localUnsyncedFiles.length>0,firstUnsyncedFile:e.unsyncedFiles.length>0?e.unsyncedFiles[0].fileKey:null,firstLocalUnsyncedFile:e.localUnsyncedFiles.length>0?e.localUnsyncedFiles[0].fileKey:null,view:r.view},{forwardToDatadog:!0}))},[t,e.unsyncedFiles,e.localUnsyncedFiles,a,r]);let s=(0,ea.xJ)(),n=[...e.unsyncedFiles,...e.localUnsyncedFiles];if(0===n.length||!s)return(0,c.jsx)(c.Fragment,{});let o=n.length>1,l=n[0],d=(0,h8.KM)(l)?l.file.name:l.name,_=d.length>40?d.substring(0,40)+"\u2026":d,p=o?(0,A.t)("autosave.notification.message.more_than_one_file"):(0,A.t)("autosave.notification.message.one_file",{fileName:_}),f=o?(0,A.tx)("autosave.notification.action_review"):(0,A.tx)("autosave.notification.action_open_to_sync");return(0,c.jsxs)("div",{className:"autosave_notification--notification--2hAjb text--_negText--7Cnf0",children:[(0,c.jsx)(r6.n,{className:"autosave_notification--icon--BLpMd",svg:vt.Z,width:"24",height:"24"}),(0,c.jsx)("div",{className:"autosave_notification--message--S--Qr",children:p}),(0,c.jsxs)("div",{className:"autosave_notification--actions--X4AUD",children:[(0,c.jsx)("div",{className:"autosave_notification--mainAction--ACLtF autosave_notification--action--uD6q1",onClick:()=>{o?t(tF.K4({type:h3.TR})):(0,h8.KM)(l)?g.ZP.redirect((0,rj.BD)(oc.v.toLiveGraph(l.file),!0),"_blank"):t(mt.mp({file:l,openNewFileIn:oW.JD.NEW_TAB,source:ml.j.AUTOSAVE_NOTIFICATION}))},children:f}),(0,c.jsx)("div",{className:"autosave_notification--action--uD6q1",onClick:()=>{(0,iU.L9)("Autosave Notification Snooze",{files:n.length,firstFile:l.fileKey}),t(h6.mb(Date.now()))},children:(0,A.tx)("autosave.notification.action_later")})]})]})}var vn=r(618768),vo=r(205433),vl=r(696200),vd=r(707707),vc=r(272921);function vu(){let e=(0,eB.A6)(),t=function(){let e=(0,b.mU)((0,e0.Kmw)({})),[t]=(0,vo.j)([e]),r=t.currentUser?.teamRoles;if(!r?.length)return null;let a=r.find(({team:e})=>e&&null===e.subscription&&!e.orgId);return a?.team??null}(),r=(0,vd.E)(),a=(0,vc.l)({openInNewTab:!1,entryPoint:"purchasePro"===e.view?e.entryPoint:void 0});return u.useEffect(()=>{"purchasePro"===e.view&&r&&t?.id&&a({isOrgUpgrade:!1,teamId:t.id})},[e.view,r,t?.id,a]),"purchasePro"!==e.view||r&&t||g.ZP.redirect("/files/recent"),null}function vm(){return(0,c.jsx)(vl.U,{boundaryKey:"PurchaseProfessionalRouteHandler",team:H.k.UPGRADES,errorFallback:()=>(g.ZP.redirect("/files/recent"),(0,c.jsx)(c.Fragment,{})),loadingFallback:(0,c.jsx)("div",{...{className:"x78zum5 x6s0dn4 xl56j7k xh8yej3 x5yr21d"},children:(0,c.jsx)(nl.T,{})}),children:(0,c.jsx)(vu,{})})}let v_="team-org-access-dropdown";function vp(e){let t=(0,m.I0)(),r=e.dropdownShown&&e.dropdownShown.type===v_;return(0,c.jsxs)("div",{className:"team_org_access_dropdown--orgAccess--RJETW",children:[(0,c.jsxs)("button",{className:"team_org_access_dropdown--select--k-Ls3",onClick:e=>{e.stopPropagation(),e.preventDefault(),r?t(eL.kp()):t(eL.SP({type:v_}))},children:[(0,eS.Bb)()[e.orgAccess],(0,c.jsx)(r6.n,{svg:ac.Z,className:"team_org_access_dropdown--downCaret--MGnf0"})]}),r&&(0,c.jsx)("div",{className:"team_org_access_dropdown--orgAccessDropdownContainer--O1Flc",children:(0,c.jsxs)(nE.Lt,{className:"team_org_access_dropdown--orgAccessDropdown---4YjJ",children:[(0,c.jsx)(nE.kq,{checked:e.orgAccess===eH.Zn.PUBLIC,onClick:()=>{e.onChangeOrgAccess(eH.Zn.PUBLIC)},children:(0,eS.Bb)()[eH.Zn.PUBLIC]}),(0,c.jsx)(nE.kq,{checked:e.orgAccess===eH.Zn.PRIVATE,onClick:()=>{e.onChangeOrgAccess(eH.Zn.PRIVATE)},children:(0,eS.Bb)()[eH.Zn.PRIVATE]}),(0,c.jsx)(nE.kq,{checked:e.orgAccess===eH.Zn.SECRET,onClick:()=>{e.onChangeOrgAccess(eH.Zn.SECRET)},children:(0,eS.Bb)()[eH.Zn.SECRET]})]})})]})}let vf="team_creation--createTeamText--kpxfD";function vx({currentTeamId:e,currentUserOrgId:t,user:r,selectedView:a,dropdownShown:i,teamCreation:s,orgById:n}){var o;let l=(0,m.I0)(),[d,_]=(0,u.useState)(null),[p,f]=(0,u.useState)(eH.Zn.PUBLIC),x=a.ignoreCurrentPlan,h=t&&!x?n[t]:null,v=!e&&!t,b=(0,u.useRef)(null);(0,u.useEffect)(()=>{if(b.current)for(let e=0;e<b.current.elements.length;e++){let t=b.current.elements[e];if(!t.value){t.focus();break}}t&&!x&&(0,iU.L9)("team_creation_started",{user_id:r?.id??"",org_id:t})},[t,r,x]);let y=e=>{e.preventDefault(),e.stopPropagation(),d?(l((0,f_.$Y)({teamName:d,orgAccess:p,dontRedirect:!!a.onSubmitReturnToPrevView,ignoreCurrentPlan:x})),a.onSubmitReturnToPrevView&&l(eL.fv((0,g.zt)()||{view:"recentsAndSharing"}))):l(a2.l.error((0,A.t)("team_creation.your_team_name_cannot_be_empty")))},j=!(t&&!x)&&!a.onSubmitReturnToPrevView,w=v?null:(0,c.jsx)(hQ.h,{onClick:()=>{l(eL.fv((0,g.zt)()||{view:"recentsAndSharing"}))},children:(0,c.jsx)(r6.n,{svg:uB.Z,className:"team_creation--modalCloseX--xbDef"})});return(0,c.jsx)(r8.Ui,{name:"Team Creation",children:(0,c.jsx)("div",{children:(0,c.jsxs)(hJ.K,{menu:w,children:[j&&(0,c.jsx)(h0.O,{index:1}),(0,c.jsxs)("form",{ref:b,onSubmit:y,children:[(0,c.jsx)(hX.rQ,{children:(0,A.tx)("team_creation.create_a_team_title")}),(0,c.jsxs)("div",{className:"team_creation--newTeamContainer--mVsAS team_creation--newTeamContainerBase--TwMX0",children:[(0,c.jsxs)("div",{className:"team_creation--teamNameContainer--iKfJR",children:[(0,c.jsx)("div",{className:"team_creation--teamNameLabel--fiZ7Y",children:(0,A.tx)("team_creation.team_name_label")}),(0,c.jsx)(ar.Ev,{value:d||"",onChange:e=>{_(e.target.value)},className:"team_creation--newTeamInput--oYOTR",maxLength:255,placeholder:(0,A.t)("team_creation.team_name_input_placeholder")})]}),h?(0,c.jsxs)("div",{className:"team_creation--orgTeamSettings--BkGZE",children:[(0,c.jsxs)("div",{className:P.B.flex.$,children:[(0,c.jsx)("div",{className:P.B.fontSemiBold.$,children:(0,A.tx)("team_creation.access_within_the_organization")}),(0,c.jsx)(vp,{orgAccess:p,dropdownShown:i,onChangeOrgAccess:e=>{f(e)}})]}),(0,c.jsx)("div",{className:vf,children:(o=h.name,{[eH.Zn.PUBLIC]:(0,A.tx)("org_access_strings.public.description_with_org_name",{orgName:o}),[eH.Zn.PRIVATE]:(0,A.tx)("org_access_strings.closed.description_with_org_name",{orgName:o}),[eH.Zn.SECRET]:(0,A.tx)("org_access_strings.secret.description_with_org_name",{disclaimerLabel:(0,c.jsx)("span",{className:P.B.fontSemiBold.$,children:(0,A.tx)("org_access_strings.secret.description.disclaimer_label")}),orgName:o})})[p]})]}):(0,c.jsx)("div",{className:vf,children:(0,A.tx)("team_creation.after_creating_a_team_you_can_invite_others_to_join")}),(0,c.jsx)(ar.OK,{className:t?"team_creation--createTeamButtonOrg--SnlUe":"team_creation--createTeamButton--Xhhky",type:"submit",disabled:s.loading,onClick:y,children:(0,A.tx)("team_creation.create_team_button")})]})]})]})})})}function vg({selectedView:e}){let t=(0,m.I0)(),r=(0,et.$0)(),a=(0,m.v9)(e=>e.orgById),i=(0,ea.xJ)(),s=(0,m.v9)(e=>e.currentTeamId),n=(0,sB.LB)(),o=(0,m.v9)(e=>e.teamCreation);return(0,eS.E_)(i,r)?(g.ZP.redirect("/"),t(a2.l.error((0,A.t)("team_creation.missing_team_creation_controls"))),null):(0,c.jsx)(vx,{currentTeamId:s,currentUserOrgId:r,user:i,dropdownShown:n,teamCreation:o,orgById:a,selectedView:e})}let vh="team_restore--page--mxsud",vv="team_restore--section--lFe-i",vb="team_restore--button--GDKZo";function vy({selectedView:e}){let t,r,a=(0,m.I0)(),[i,s]=u.useState(!1),n=e.teamId,o=(0,m.v9)(e=>e.teams[n]);u.useEffect(()=>{s(!0),a9.j.getDeleted({teamId:n}).then(({data:e})=>{a(pf.v_({team:e.meta})),s(!1)}).catch(e=>{400!==e.status&&(a(eL.fv({view:"recentsAndSharing"})),a(a2.l.error(`${e.data.message}`))),s(!1)})},[a,n]);let l=()=>{a(eL.fv({view:"recentsAndSharing"}))},d=(0,c.jsx)(ar.RS,{className:vb,onClick:l,children:(0,A.tx)("team_restore.back")});if(o)if(o.deleted_at){let e=(0,eg.Z)(o.deleted_at).add(28,"days").toDate();t=(0,A.t)("team_restore.confirm_restore_header",{teamName:o.name}),r=(0,c.jsxs)("div",{children:[(0,A.tx)("team_restore.confirm_restore"),(0,c.jsx)("br",{}),(0,c.jsx)("br",{}),(0,A.tx)("team_restore.confirm_restore_deadline",{deleteDeadline:e})]}),d=(0,c.jsx)(ar.RS,{className:vb,onClick:()=>{a(pf.kt({teamId:n}))},children:(0,A.tx)("team_restore.restore")})}else t=(0,A.t)("team_restore.ineligible"),r=(0,A.t)("team_restore.questions_contact_support",{supportEmail:(0,lu.sJ)()});else{if(i)return(0,c.jsx)("div",{className:vh,children:(0,c.jsx)("div",{className:vv,children:(0,c.jsx)(em.TK,{})})});t=(0,A.t)("team_restore.expired_header"),r=(0,c.jsxs)("div",{children:[(0,A.tx)("team_restore.expired"),(0,c.jsx)("br",{}),(0,c.jsx)("br",{}),(0,A.tx)("team_restore.questions_contact_support",{supportEmail:(0,lu.sJ)()})]})}return(0,c.jsx)(r8.Ui,{name:"Team Restore",properties:{teamId:n},children:(0,c.jsx)(hJ.K,{menu:(0,c.jsx)(r6.n,{svg:uB.Z,onClick:l,className:"team_restore--modalCloseX--ELIXg"}),children:(0,c.jsx)("div",{className:vh,children:(0,c.jsxs)("div",{className:vv,children:[(0,c.jsx)("div",{className:"team_restore--header--s7lmg text--fontPos20--WslT3 text--_fontBase--VaHfk",children:t}),(0,c.jsx)("div",{className:"team_restore--text--3Khhw text--fontPos12--oWc5z text--_fontBase--VaHfk",children:r}),d]})})})})}var vj=r(513827),vw=r(470199),vT=r(775055),vI=r(920860);function vE(e){let t=(0,ea.xJ)(),[r,a]=u.useState(()=>(0,vI.x_)()),i=aU.V.UPGRADE_NEW_TEAM,s=(0,m.I0)(),n=(0,vj.k)(),o=(t,a)=>{let i=e.selectedView;s(d$.F2({teamId:e.selectedView.teamId,selectedView:i,newTeam:!0,currency:r,billingPeriod:a}))},l=null===e.selectedView.teamId?void 0:()=>{let r=t?.id;if(r){let t={userId:r,orgId:null,teamId:e.selectedView.teamId};s(S.NO({workspace:t,view:{view:"allProjects"}}))}else s(eL.fv({view:"team",teamId:e.selectedView.teamId}))},d=()=>{s(d$.s3({currency:r,upsellSource:i}))},_=e=>{a(e),s(eL.kp())},p=e.selectedView.teamId,f=u.useRef(null);return(0,c.jsx)(r8.Ui,{name:"Upgrade Team",properties:{teamId:p,step:iv.iy.UPGRADE_NEW_TEAM},children:(0,c.jsx)("div",{className:"legacy_upgrade--teamUpgrade--552x4",children:(0,c.jsxs)(hJ.K,{menu:(0,c.jsx)(hQ.h,{onClick:()=>{let r=t?.id,a=e.selectedView.teamId,i={view:"recentsAndSharing"};r&&a?s(S.NO({workspace:{userId:r,teamId:a,orgId:null},view:e.selectedView.previousView||i})):s(eL.fv(e.selectedView.previousView||i))},children:(0,c.jsx)(r6.n,{svg:uB.Z,className:"legacy_upgrade--closeButton--3ZGnp"})}),pageRef:f,children:[(0,c.jsx)(h0.O,{index:3}),(0,c.jsx)(r8.Ui,{name:"Upgrade New Team",properties:{teamId:p,trackingDescriptor:ev.y.UPGRADE_YOUR_TEAM},children:(0,c.jsxs)("div",{className:Y()(e.className,"step_upgrade_new_team--container--TjQQ2"),children:[(0,c.jsx)(hX.rQ,{className:"step_upgrade_new_team--stepTitleComparisonChart--lnxXM step_upgrade_new_team--stepTitle--vWpB1",children:(0,c.jsx)("span",{children:(0,A.tx)("plan_details.choose_your_team_plan")})}),n?(0,c.jsx)("div",{className:P.B.mxAuto.$,style:s4.sx.add({width:"1049px"}).$,children:(0,c.jsx)(vw.b,{upsellSource:i,currency:r,updateCurrency:_,chooseStarterPlan:l,chooseProPlan:e=>o(null,e),chooseOrgPlan:d,hideModalHeader:!0})}):(0,c.jsx)(vT.p,{currency:r,chooseStarterPlan:l,chooseProPlan:e=>o(null,e),chooseOrgPlan:d,updateCurrency:_,upsellSource:i,parentRef:f})]})})]})})})}var vk=r(285263),vN=r(388136),vC=r(13590),vR=r(596002),vS=r(515152),vO=r(312177),vP=r(33793),vA=r(567910);class vD extends u.PureComponent{constructor(){super(...arguments),this._isMounted=!1,this.timer=null,this.controller=new AbortController,this.payload=null,this.fetchScheduledDowntimeInfo=async()=>{let e=this.controller?.signal,t=(0,lu.o1)("011a24693cd9b63ea5492d50d7713dfb7ed18ea6"),r=await fetch(t,{signal:e,cache:"no-cache"}),a=await r.json(),i={finished:a.finished,warningDurationMs:Number(a.warning_ms),notifDurationMs:Number(a.notif_ms),pollIntervalMinutes:Number(a.poll_interval_minutes),downtimeStartDate:new Date(a.timestamp+" UTC"),minLengthMinutes:Number(a.estimated_length_min),maxLengthMinutes:Number(a.estimated_length_max),helpcenterUrl:a.helpcenter_url};return(0,p.BZ)().display_downtime_banner_force&&(i.warningDurationMs*=1e3,i.notifDurationMs*=1e3),"hostname"in a&&(i={...i,renderOnHostname:a.hostname}),i},this.onTick=()=>{null!=this.payload&&this.props.dispatch(vP.N.onTick({payload:this.payload,hostname:window.location.hostname,currentTimeMs:Date.now()}))},this.poll=async()=>{for(;this._isMounted;)try{let e=await this.fetchScheduledDowntimeInfo();this._isMounted&&(this.payload=e,this.timer||(this.onTick(),this.timer=setInterval(this.onTick,3e4)))}catch(e){"AbortError"!==e.name&&console.warn(e)}finally{let e=this.payload&&60*this.payload.pollIntervalMinutes||900;await (0,vR.X_)(1e3*e)}}}componentDidMount(){this._isMounted=!0,this.poll()}componentWillUnmount(){this._isMounted=!1,this.controller?.abort(),this.timer&&clearInterval(this.timer)}render(){return null}}function vF(e){let{dispatch:t,downtime:r}=e,a=u.useCallback(e=>()=>{t(e)},[t]),i=u.useCallback((e,t)=>()=>{g.ZP.unsafeRedirect(e,"_blank"),a(t)},[a]),s=u.useCallback(e=>(0,A.t)("downtime_banner.ongoing.figma_will_be_entering_a_maintenance_period",{minutes:e}),[]),n=u.useMemo(()=>(0,A.t)("downtime_banner.ongoing.currently_undergoing_maintenance"),[]),o=u.useRef(e.notifications),l=u.useCallback(()=>{o.current.length>0&&t(vO.X.dequeue({type:vS.k.DOWNTIME}))},[t,o]);return u.useEffect(()=>{let{payload:e,status:o,hidingDowntimeNotif:d,notifMinutesRemaining:c}=r;if((0,p.BZ)().display_downtime_banner){switch(o){case vA.l.Imminent:case vA.l.Warning:if(e&&null!=c&&d!==vA.E.warningHidden){let r=s(c),n=i(e.helpcenterUrl,vP.N.hideWarningNotif()),o=a(vP.N.hideWarningNotif());t(vO.X.dequeue({type:vS.k.DOWNTIME})),t(vO.X.enqueue({notification:{type:vS.k.DOWNTIME,message:r,acceptCallback:n,dismissCallback:o}}))}break;case vA.l.Ongoing:if(e&&d!==vA.E.ongoingHidden){let r=i(e.helpcenterUrl,vP.N.hideOngoingNotif()),s=a(vP.N.hideOngoingNotif());t(vO.X.dequeue({type:vS.k.DOWNTIME})),t(vO.X.enqueue({notification:{type:vS.k.DOWNTIME,message:n,acceptCallback:r,dismissCallback:s}}))}break;case vA.l.Finished:l()}return()=>{l()}}},[r,t,s,i,a,n,l]),null}vD.displayName="DowntimePoller";var vM=r(278007),vL=r(719193);function vB(){let e=(0,vM.m)();return(0,c.jsx)(vL.g,{prioritizedBanners:e,location:"file_browser"})}var vU=r(24075);function vV(e){let t=(0,m.I0)(),r=(0,m.v9)(e=>e.fileImport.step),a=(0,p5.nb)().unwrapOr(!1),[i,s]=u.useState(!1),n=u.useCallback(()=>s(!0),[]),o=u.useCallback(()=>s(!1),[]),l=u.useCallback(e=>{s(!1),a&&t((0,p5.Vs)(e))},[t,a]);return(0,c.jsxs)(tm.h,{className:P.B.flex.flexColumn.$,isDragTarget:p5.pZ,onTargetDragEnter:n,onTargetDragLeave:o,onTargetDrop:l,children:[e.children,a&&(0,c.jsx)(vG,{step:r,dragging:i})]})}function vG({step:e,dragging:t}){switch(e){case vU.s9.CONFIRM_PDF_IMPORT:case vU.s9.IMPORT_REPO:return null;case vU.s9.START:case vU.s9.FILE_IMPORT_WITH_CANCELED_PDF:case vU.s9.FILE_IMPORT_WITH_CONFIRMED_PDF:return(0,c.jsx)("div",{className:t?"file_browser_drop_zone--dragTargetDragging--CcIa0 file_browser_drop_zone--dragTargetNormal--nLi0m":"file_browser_drop_zone--dragTargetNormal--nLi0m"});default:(0,O.vE)(e)}}function vz(e){return(0,c.jsx)(z.SV,{boundaryKey:"FileBrowserDropZone",fallback:(0,c.jsx)(c.Fragment,{children:e.children}),team:H.k.WAYFINDING,children:(0,c.jsx)(vV,{...e})})}let vW="file_browser_view--filebrowserHtml--aIIa3",vH="file_browser_view--filebrowserBody--yian7",vK="file_browser_view--desktop--ZU1og";function vY(){let e=(0,m.I0)(),t=(0,et.$0)(),r=(0,sB.LB)(),a=(0,ea.xJ)(),i=(0,eB.A6)(),s=hq.Qv.useIsLoading(),n=(0,m.v9)(e=>e.payment),o=(0,m.v9)(e=>e.currentTeamId),l=(0,ei.Y)(),d=(0,m.v9)(e=>e.downtime),O=(0,m.v9)(e=>e.notifications),P=(0,m.oR)(),D=u.useMemo(()=>(0,vN.k)(),[]),F=(0,b.DG)(e0.dXH,{cacheNonce:D});u.useEffect(()=>{if("loaded"===F.status&&F.data.currentUser.assetTransferReload.status===ec.wy.Loaded){let e=(0,ec.Wg)(F.data.currentUser.assetTransferReload);if(!e)return;let t=(0,lu.ZP)().user_data?.id,r=P.getState(),a="folder"===r.selectedView.view&&r.selectedView.folderId===e.folderId,i="team"===r.selectedView.view&&r.selectedView.teamId===e.teamId,s="folder"===r.selectedView.view&&r.folders[r.selectedView.folderId],n=s&&s.team_id===e.teamId,o=e.folderId?a:i||n,l={view:"folder",folderId:e.folderId||""},d={view:"team",teamId:e.teamId||"",teamViewTab:e2.xB.HOME};if(t&&e.userId===t){let t={userId:e.userId,orgId:e.destOrgId},r=e.folderId?l:d;if(o){let a=e.folderId?(0,A.t)("realtime.asset_reload.project_has_been_transferred_redirecting"):(0,A.t)("realtime.asset_reload.team_has_been_transferred_redirecting");P.dispatch(tp.R.enqueue({message:a})),setTimeout(()=>{P.dispatch(S.NO({workspace:t,view:r}))},2e3)}else P.dispatch(S.mi({reason:"asset transfer reload",delay:S.s6.DEFAULT}))}}},[P,F]),(0,h.O)(()=>{a&&e(h6.Cq())}),(0,y.aM)((0,vk.c8)({currentOrgId:t??void 0,currentTeamId:o??void 0,fileTags:["figjam_template","figma_basics"]}),{enabled:(0,p.BZ)().create_starter_files_from_file_browser&&i3.PN.includes(i.view)});let[M,L]=u.useState(0),[B,U]=u.useState(0),[V,G]=u.useState(!1);(0,h.O)(()=>(document.body.classList.add(vH),document.documentElement.classList.add(vW),(0,j.q$)(),(0,Q.O5)(i,t,o,l),(0,T.hv)("exp_aa_test_file_browser_view").catch(_.ZT),()=>{document.body.classList.remove(vH),document.documentElement.classList.remove(vW),(0,j.G9)(),e(tF.VG())})),u.useEffect(()=>{if(x.YO||(0,f.mC)()){let e=document.createElement("div");return e.classList.add("file_browser_view--desktopBackground--ZfAhg"),document.body.appendChild(e),document.body.classList.add(vK),()=>{document.body.classList.remove(vK),document.body.removeChild(e)}}},[]);let z=(0,v.D9)(i);u.useEffect(()=>{z&&z!==i&&((0,vC.Qo)(z,i)&&window.scrollTo(0,0),V?G(!1):(L(B+1),U(B+1)))},[z,i,V,B]),u.useEffect(()=>{"teamCreation"===i.view&&i.fromNewTab&&e(S.Nf({previousView:i.previousView,onSubmitReturnToPrevView:i.onSubmitReturnToPrevView,isEduTeam:i.isEduTeam,ignoreCurrentPlan:!0}))},[i,e]);let W=w.GF;if(!function(){let e=(0,eB.A6)(),t=(0,m.I0)(),r=(0,ea.dO)(),a=null;("teamUpgrade"===e.view||"promoReview"===e.view||"eduReview"===e.view)&&(a=e.teamId);let i=(0,b.DG)((0,e0.aHU)(a?{teamId:a}:null)),s=u.useMemo(()=>i.transform(({team:e})=>{if(!e)return!1;let t=!(0,iC.h4)(e)||_e.pl.getProTrialStatusLG(e)===_r.Y.IN_TRIAL;return e.canAdmin||e.canEdit&&t}),[i]);u.useEffect(()=>{"loaded"===s.status&&!s.data&&a&&(r?t(S.NO({workspace:{userId:r,teamId:a,orgId:null},view:{view:"allProjects"}})):t(eL.fv({view:"team",teamId:a})))},[r,t,s.data,s.status,a])}(),"teamUpgrade"===i.view)if(i.paymentStep===iv.iy.UPGRADE_NEW_TEAM)return(0,c.jsx)(vE,{selectedView:i});else return(0,p.BZ)().cart_rewrite_full_send&&(0,p.BZ)().cart_rewrite_pro_flow?(0,c.jsx)(E.t,{teamId:i.teamId,tier:ih.K0.PRO,currency:n.currency,renewalTerm:(0,iC.Ui)(n.billingPeriod),entryPoint:i.entryPoint}):(0,c.jsx)(k.H,{selectedView:i});if("teamCreation"===i.view)if(i.fromNewTab)return null;else return(0,c.jsx)(vg,{selectedView:i});if("addCollaborators"===i.view)return(0,c.jsx)(h4,{selectedView:i});if("orgSelfServe"===i.view)return(0,p.BZ)().cart_rewrite_full_send&&(0,p.BZ)().cart_rewrite_org_flow?(0,c.jsx)(E.t,{teamId:null,tier:ih.K0.ORG,orgMigrated:!!i.orgMigrated,currency:n.currency,renewalTerm:iv.kT.YEAR,upsellSource:i.upsellSource,entryPoint:i.entryPoint}):(0,c.jsx)(N.J,{step:i.step||_t.UC.Initial,initialDesignSeats:i.initialDesignEditors||0,orgMigrated:!!i.orgMigrated,dropdownShown:r,newTeamProps:i.newTeamProps,upsellSource:i.upsellSource,entryPoint:i.entryPoint});if("purchasePro"===i.view)return(0,c.jsx)(vm,{});else if("teamRestore"===i.view)return(0,c.jsx)(vy,{selectedView:i});else if("promoReview"===i.view)return(0,c.jsx)(C.V,{promo:n?.promo,selectedView:i});else if("eduReview"===i.view)return(0,c.jsx)(R.i,{selectedView:i});return a?t||o?(0,c.jsxs)(vn.m.Provider,{value:{goBack:()=>{B>0&&(history.back(),U(B-1),G(!0))},goForward:()=>{B<M&&(history.forward(),U(B+1),G(!0))},canGoBack:B>0,canGoForward:B<M},children:[W&&(0,c.jsx)(I.I,{userIdForTracking:a?.id}),(0,c.jsxs)(vz,{children:[(0,c.jsx)(vB,{}),(0,c.jsx)(vF,{downtime:d,notifications:O,dispatch:e}),(0,c.jsx)(va,{}),(0,c.jsx)(hY,{showingFileBrowserLoader:s})]})]}):(console.error("No current organization or team plan set for user. Redirecting to /files"),g.ZP.redirect("/files"),null):(console.error(`Signed out page: unrecognized route ${g.ZP.location.pathname}, redirecting to /`),g.ZP.redirect("/"),null)}},971406:function(e,t,r){r.r(t),r.d(t,{ImportModal:()=>ee,useCloseTabWarningWhenImportInProgress:()=>el,getStatusComponents:()=>er,FileRow:()=>es,fileImportStats:()=>ei,useCurrentFolderTeam:()=>ea,FileImportModal:()=>X,getFooterButtons:()=>et});var a=r(750357),i=r(853505),s=r(577851),n=r(850340),o=r(451410),l=r(514177),d=r(317429),c=r(363545),u=r(362971),m=r(29260),_=r(118204),p=r(492342),f=r(992977);r(607906);var x=r(444947),g=r(661897),h=r(45190),v=r(739842),b=r(633740),y=r(259946),j=r(558089),w=r(661193),T=r(555792),I=r(590914),E=r(491420),k=r(627482),N=r(469271),C=r(871567),R=r(926941),S=r(260251),O=r(843589),P=r(380904),A=r(61842),D=r(979002),F=r(479852),M=r(10553),L=r(118960),B=r(998324),U=r(892243),V=r(164526),G=r(24075),z=r(826250),W=r(541189),H=r(273634),K=r(632959),Y=r(202794),Z=r(73838);let $="file_import_modal--scrollContainer--R9vnf";function q(e){let{fileImport:t,onDone:r,onCancel:c}=e,m=o.dd({open:e.open,onClose:e.onClose}),_=(0,s.I0)(),p=ei(t),f=0===p.remainingFiles,x=ea(),g=(0,s.v9)(e=>"folder"===e.selectedView.view?e.selectedView.folderId:null),h=Z.t1.Folder.useValue(g).data,[b,T]=(0,i.useState)(Y.YK.IMPORTING_FILES);el(b===Y.YK.IMPORTING_FILES||b===Y.YK.ATTACHING_BRANCH);let E=h?.name||(0,I.t)("file_browser.tool_bar.drafts"),k=b===Y.YK.SUCCESS?(0,I.t)("file_browser.file_import_view.imported_to_folder",{folderName:E}):(0,I.t)("file_browser.file_import_view.import_to_folder",{folderName:E}),{statusIcon:N,statusMessage:C,statusMessageSecondary:R}=function(e,t,r){let i=null,s=null,o=null,l=er(e===Y.YK.SUCCESS,t,r);switch(e){case Y.YK.IMPORTING_FILES:i=l.statusIcon,s=l.statusMessage,o=l.statusMessageSecondary;break;case Y.YK.ATTACHING_BRANCH:i=(0,a.jsx)(y.TK,{imageBacked:!0,testId:"loadingSpinner"}),s=(0,I.tx)("file_browser.file_import_view.repo.attaching_branch"),o=(0,a.jsx)("span",{className:w.B.textBodyMedium.$,children:(0,I.tx)("file_browser.file_import_view.to_continue_working",{openANewTabLink:(0,a.jsx)(v.Z6,{href:window.location.href,target:"_blank",trusted:!0,"data-testid":"openANewTabLink",children:(0,I.tx)("file_browser.file_import_view.open_a_new_tab_link")})})});break;case Y.YK.SUCCESS:i=l.statusIcon,s=l.statusMessage,t.importedFiles===t.totalFiles&&(s=(0,I.tx)("file_browser.file_import_view.repo.success")),o=l.statusMessageSecondary;break;case Y.YK.ERROR:i=(0,a.jsx)(u.A,{}),s=(0,I.tx)("file_browser.file_import_view.repo.error");break;default:(0,n.vE)(e)}return i&&s?{statusIcon:i,statusMessage:s,statusMessageSecondary:o}:((0,K.Jz)(H.k.SCENEGRAPH_AND_SYNC,Error("Missing status in repo import")),{statusIcon:(0,a.jsx)(u.A,{}),statusMessage:(0,I.tx)("file_browser.file_import_view.repo.error"),statusMessageSecondary:null})}(b,p,E),S=et({isImportComplete:f,fileImport:t,onDone:r,team:x,dispatch:_,stats:p,shouldShowMoveToProjectButton:!1,onMoveToProject:()=>{},filesToMove:[],onCancel:c});return(0,i.useEffect)(()=>{if(f){T(Y.YK.ATTACHING_BRANCH);let e=Object.values(t.files),r=e.find(e=>e.name.includes("branch tip"))?.fileKey,a=e.find(e=>e.name.includes("branch point"))?.fileKey,i=e.find(e=>e.name.includes("main tip"))?.fileKey;r&&a&&i?(0,Y.Bz)(r,a,i).then(()=>{T(Y.YK.SUCCESS)}).catch(()=>{T(Y.YK.ERROR)}):(T(Y.YK.ERROR),console.error("Missing branch key, branch point key, or main tip key files"))}},[f,t.files]),(0,a.jsx)(l.fC,{manager:m,width:480,children:(0,a.jsxs)(d.AU,{children:[(0,a.jsx)(d.h4,{children:(0,a.jsx)(d.Dx,{children:k})}),(0,a.jsx)(d.uT,{children:t&&(0,a.jsx)(j.l,{innerClassName:w.B.flex.flexColumn.$,className:$,children:Object.values(t.files).map(e=>(0,a.jsx)(es,{file:e},`file-import-${e.id}`))})}),(0,a.jsx)(d.$_,{children:(0,a.jsxs)("div",{className:w.B.flex.flexRow.wFull.justifyBetween.py8.gap16.bt1.bSolid.colorBorder.$,children:[(0,a.jsxs)("div",{className:w.B.flex.flexRow.itemsCenter.gap8.$,children:[N&&(0,a.jsx)("div",{className:w.B.flex.itemsCenter.justifyCenter.h32.w32.$,children:N}),C&&(0,a.jsx)("span",{className:w.B.fontSemiBold.$,children:C}),R&&(0,a.jsx)("span",{className:w.B.ml8.$,children:R})]}),(0,a.jsx)("div",{children:S})]})})]})})}var Q=r(595571);let J="import_progress_modal";function X(){let e=(0,s.I0)(),{fileImport:t}=(0,f.c)(e=>({fileImport:e.fileImport})),r=()=>{e(N.hV()),e(A.Ki())},i=()=>{e(A.GP())},o=()=>{e(A.Ki())},l=(()=>{switch(t.step){case G.s9.CONFIRM_PDF_IMPORT:return(0,a.jsx)(Q.PdfConfirmationModal,{fileImportDescription:(0,I.tx)("file_browser.file_import_view.select_pdf_source_description",{pdfCount:ei(t).pdfCount}),onConfirm:t=>{e(A.V9(t))},onCancel:()=>{e(A.Uw()),i()}});case G.s9.IMPORT_REPO:return(0,a.jsx)(q,{fileImport:t,onDone:r,onCancel:i,onMoveToProject:o,onClose:()=>e(N.hV()),open:!0});case G.s9.START:case G.s9.FILE_IMPORT_WITH_CANCELED_PDF:case G.s9.FILE_IMPORT_WITH_CONFIRMED_PDF:return(0,a.jsx)(ee,{fileImport:t,onDone:r,onCancel:i,onMoveToProject:o});default:(0,n.vE)(t.step)}})();return(0,a.jsx)(R.Ui,{name:J,children:l})}function ee({fileImport:e,onDone:t,onCancel:r,onMoveToProject:n}){let c=(0,s.I0)(),u=ea(),m=ei(e),_=(0,s.v9)(e=>e.selectedView),p=(0,L.Mz)("ImportModal").unwrapOr(null),f=p?.tier!==F.Lz.STARTER,x=0===m.remainingFiles,g=(0,s.v9)(e=>"folder"===e.selectedView.view?e.folders[e.selectedView.folderId]:null),v=(0,P.Gd)(g),b=(0,B.gC)(_);el(!x);let y=g?.name||(0,I.t)("file_browser.tool_bar.drafts"),w=x?(0,I.t)("file_browser.file_import_view.imported_to_folder",{folderName:y}):(0,I.t)("file_browser.file_import_view.import_to_folder",{folderName:y}),{statusIcon:T,statusMessage:E,statusMessageSecondary:k}=er(x,m,y),N=f&&(v||b)&&m.importedFiles>=1,R=(0,i.useMemo)(()=>(function(e,t){let r=[];if(!e)return r;for(let e of Object.values(t))e.fileKey&&r.push({fileKey:e.fileKey});return r})(N,e.files),[N,e.files]),O=(0,h.YW)(M.OK3,R),A=et({isImportComplete:x,fileImport:e,onDone:t,team:u,dispatch:c,stats:m,shouldShowMoveToProjectButton:N,onMoveToProject:n,filesToMove:(0,i.useMemo)(()=>(function(e){let t=[];for(let r of e){let e=r.result.data?.file;e&&t.push({key:e.key,name:e.name,folder_id:e.folderId,team_id:e.teamId,editor_type:e.editorType,is_team_template:e.isTeamTemplate,parent_org_id:e.parentOrgId})}return t})(O),[O]),onCancel:r}),D=o.dd({open:!0,onClose:()=>{(0,S.T6)({trackingContext:J,trackingDescriptor:C.y.FILE_IMPORT_X_BUTTON,text:"dismiss"}),e.queue.length?r():t()},preventUserClose:!x});return(0,a.jsx)(l.fC,{manager:D,width:480,children:(0,a.jsxs)(d.AU,{children:[(0,a.jsx)(d.h4,{children:(0,a.jsx)(d.Dx,{children:w})}),(0,a.jsx)(d.uT,{padding:0,children:(0,a.jsx)(j.l,{...{className:"x78zum5 xdt5ytf"},className:$,children:Object.values(e.files).map(e=>(0,a.jsx)(es,{file:e},`file-import-${e.id}`))})}),(0,a.jsxs)(d.$_,{children:[(0,a.jsxs)("div",{...{className:"x78zum5 x6s0dn4 x167g77z"},children:[T,E&&(0,a.jsx)("span",{className:"xkezfkh",children:E}),k&&(0,a.jsx)("span",{className:"xet2fuk",children:k})]}),(0,a.jsx)(d.Dj,{children:A})]})]})})}function et({isImportComplete:e,fileImport:t,onDone:r,team:i,dispatch:s,stats:n,shouldShowMoveToProjectButton:o,onMoveToProject:l,filesToMove:d,onCancel:c}){var u,m,_,f,g,h,v;if(!e){return[(u=c,(0,a.jsx)(T.XT,{variant:"destructive",onClick:u,htmlAttributes:{"data-testid":"cancelButton"},children:(0,I.tx)("file_browser.file_import_view.cancel")},"cancelButton"))]}if(t.failedOnFileLimit){return[(m=r,_=i,f=s,g=n,(0,a.jsx)(T.XT,{variant:"primary",onClick:()=>{m(),null!=_&&f((0,N.K4)({type:W.yd,data:{team:_,resource:g.hasMakeFile&&!(0,p.BZ)().bake_starter_limit?V.gx.FIGMAKE:V.Q3.FILE,action:z.XH.IMPORT_FILES,editorType:g.editorType,multipleResources:g.failedFiles>1,currentPlan:O.V.Plan.STARTER,upsellPlan:O.V.Plan.PRO,upsellSource:U.V.CREATE_NEW_FILE}}))},htmlAttributes:{"data-testid":"nextButton"},children:(0,I.tx)("file_browser.file_import_view.next")},"nextButton"))]}let b=[(h=o?"secondary":"primary",v=r,(0,a.jsx)(T.XT,{variant:h,onClick:v,htmlAttributes:{"data-testid":"doneButton"},children:(0,I.tx)("file_browser.file_import_view.done")},"doneButton"))];return o&&b.push(function({onMoveToProject:e,filesToMove:t,stats:r,dispatch:i}){return(0,a.jsx)(T.XT,{variant:"primary",onClick:()=>{e(),(0,x.L9)("file_import.move_to_project.button_clicked",{numFiles:r.importedFiles}),1===t.length&&t[0]?(0,k.E)(t[0],null,i,void 0,void 0,void 0,!0):(0,k.W)(t,[],i,!0)},htmlAttributes:{"data-testid":"moveToProjectButton"},children:(0,I.tx)("file_browser.file_import_view.move_to_project")},"moveToProjectButton")}({onMoveToProject:l,filesToMove:d,stats:n,dispatch:s})),b}function er(e,t,r){let i=null,s=null,n=null;return e?t.importedFiles===t.totalFiles?(s=(0,a.jsx)("div",{className:w.B.fontSemiBold.inline.$,children:(0,I.tx)("file_browser.file_import_view.file_import_all_succeeded",{totalFiles:t.totalFiles,folder:r})}),i=(0,a.jsx)(c.x,{"data-testid":"checkIcon"})):(s=(0,a.jsx)("div",{className:w.B.fontSemiBold.inline.$,children:(0,I.tx)("file_browser.file_import_view.file_import_progress_to_folder",{importedFiles:t.importedFiles,totalFiles:t.totalFiles,folder:r})}),i=(0,a.jsx)(u.A,{"data-testid":"warningIcon"}),t.canceledFiles>0&&(n=(0,I.tx)("file_browser.file_import_view.file_import_cancel"))):(i=(0,a.jsx)(y.TK,{imageBacked:!0,testId:"loadingSpinner"}),s=(0,I.tx)("file_browser.file_import_view.file_import_progress",{processedFiles:t.processedFiles,totalFiles:t.totalFiles}),n=(0,a.jsx)("span",{className:w.B.textBodyMedium.$,children:(0,I.tx)("file_browser.file_import_view.to_continue_working",{openANewTabLink:(0,a.jsx)(v.Z6,{href:window.location.href,target:"_blank",trusted:!0,"data-testid":"openANewTabLink",children:(0,I.tx)("file_browser.file_import_view.open_a_new_tab_link")})})})),{statusIcon:i,statusMessage:s,statusMessageSecondary:n}}function ea(){return(0,s.v9)(e=>{if("folder"===e.selectedView.view){let t=e.selectedView.folderId&&e.folders[e.selectedView.folderId]?.team_id;if(null!=t)return e.teams[t]}return null})}function ei(e){let t=Object.keys(e.files).length,r=e.queue.length,a=0,i=0,s=0,o=0,l=0,d=new Set;for(let t in e.files){let r=e.files[t];if(r){switch(r.status){case G.DR.SUCCESS:case G.DR.WARNING:a++;break;case G.DR.CANCELED:i++;break;case G.DR.FAILURE:s++;break;case G.DR.WAITING:case G.DR.BUSY:o++;break;default:(0,n.vE)(r.status)}(0,G.hh)(r.name)&&l++,d.add((0,G.VX)(r))}}return{totalFiles:t,remainingFiles:r,processedFiles:t-r,importedFiles:a,canceledFiles:i,failedFiles:s,pendingFiles:o,editorType:1===d.size&&Array.from(d)[0]||null,hasMakeFile:d.has(F.gg.FIGMAKE),pdfCount:l}}function es(e){let{file:t}=e,r=null;return t.status===G.DR.CANCELED?r=(0,I.tx)("file_browser.file_import_view.file_row_import_cancel"):t.message&&(r=Array.isArray(t.message)?t.message.map((e,t)=>(0,a.jsx)("div",{children:e},t)):t.message),(0,a.jsx)(eo,{status:t.status,fileKey:t.fileKey,children:(0,a.jsx)("div",{className:w.B.flex.itemsCenter.justifyBetween.flex1.pl8.pr16.textBodyMedium.$,children:(0,a.jsxs)("div",{className:w.B.flex.gap8.if(r,w.B.itemsStart,w.B.itemsCenter).$,children:[(0,a.jsx)("div",{className:w.B.flex.justifyCenter.h32.w32.itemsCenter.$,children:(0,a.jsx)(en,{file:t})}),(0,a.jsxs)("div",{className:w.B.if(r,w.B.pb6).$,children:[(0,a.jsx)("div",{className:w.B.truncate.lh32.$,style:E.sx.add({maxWidth:"384px"}).$,"data-tooltip":t.name,"data-tooltip-type":"text",children:t.name}),r&&(0,a.jsxs)("div",{className:w.B.flex.flexColumn.mt4.colorTextSecondary.$,children:[r,t.cta&&(0,a.jsx)(v.Z6,{className:w.B.colorTextSecondary.underline.ml8.$,role:"button",onClick:t.cta.action,trusted:!0,"data-testid":"ctaLink",children:t.cta.text})]})]})]})})})}function en({file:e}){switch(e.status){case G.DR.BUSY:case G.DR.WAITING:return(0,a.jsx)(y.TK,{imageBacked:!0,testId:"fileRowLoadingSpinner"});case G.DR.FAILURE:case G.DR.CANCELED:return(0,a.jsx)(m.t,{"data-testid":"failIcon",className:w.B.colorIconDanger.$});case G.DR.SUCCESS:case G.DR.WARNING:let t=(0,G.VX)(e);return(0,a.jsx)(b.XV,{size:16,type:(0,b.M7)(t)});default:(0,n.vE)(e.status)}}function eo(e){let{fileKey:t,status:r,children:i}=e;if(r!==G.DR.SUCCESS&&r!==G.DR.WARNING)return i;let s=t?(0,D.z4)({file:{key:t}}):void 0;return s?(0,a.jsxs)(v.Cr,{href:s,target:"_blank",trusted:!0,className:"file_import_modal--fileRowWrapperLink--amYS6","data-testid":"fileLink",trackingProperties:{action:"Import Modal - File Link Clicked"},children:[i,(0,a.jsx)(_.P,{})]}):i}function el(e){let t=(0,i.useCallback)(e=>{e.preventDefault()},[]);(0,i.useEffect)(()=>(e&&(window.addEventListener("beforeunload",t),g.YO?.setIsImporting(!0)),()=>{window.removeEventListener("beforeunload",t),g.YO?.setIsImporting(!1)}),[e,t])}},768021:function(e,t,r){r.r(t),r.d(t,{FileRestoreFromVersionModal:()=>x});var a=r(750357),i=r(577851),s=r(444947),n=r(739842),o=r(558089),l=r(590914),d=r(375025),c=r(469271),u=r(5794),m=r(580957),_=r(68634);let p="file_restore_from_version_modal--fileRestoreText--ex0ut";function f(e){let t=e.version,r=function(e){if(e.participating_images_dict){let[t,r]=Object.entries(e.participating_images_dict)[0]||[];if(t)return{name:t,imageUrl:r}}return{name:e.user.handle,imageUrl:e.user.img_url}}(t);return(0,a.jsxs)("div",{className:"file_restore_from_version_modal--fileRestoreRow--vfvEe",children:[(0,a.jsxs)("div",{className:"file_restore_from_version_modal--fileRestoreDecoration--mGaPT",children:[r&&(0,a.jsx)(u.Kn,{className:"file_restore_from_version_modal--fileRestoreAvatar--ZvvFF",size:30,entity:{img_url:r.imageUrl}}),e.connector&&(0,a.jsx)("div",{className:"file_restore_from_version_modal--fileRestoreConnector--YON97"})]}),(0,a.jsxs)("div",{className:"file_restore_from_version_modal--fileRestoreData--fgpp-",children:[t.label&&(0,a.jsx)("div",{className:"file_restore_from_version_modal--fileRestoreLabel--yzO3M ellipsis--ellipsis--70pHK",children:t.label||""}),t.description&&(0,a.jsx)("div",{className:p,children:t.description}),(0,a.jsx)("div",{className:p,children:(0,a.jsx)(m.RX,{time:t.touched_at})}),(0,a.jsx)("div",{className:"file_restore_from_version_modal--fileRestoreUser--pg7h1",children:r?.name??""})]}),(0,a.jsx)(n.rU,{onClick:e.callback,className:"file_restore_from_version_modal--fileRestoreAction--qNiWu",trusted:!0,children:(0,l.tx)("file_restore_from_version_modal.restore")})]})}function x(e){let t=(0,i.I0)(),r=e.versions.filter(e=>!e.disabled);return(0,a.jsx)(_.xm,{title:(0,l.t)("file_restore_from_version_modal.restore_from_version_history"),maxWidth:396,onClose:()=>{t(c.eI())},children:(0,a.jsx)("div",{className:"file_restore_from_version_modal--fileRestorePanel--G7xND",children:(0,a.jsx)(o.l,{width:396,children:r.map((i,n)=>(0,a.jsx)(f,{version:i,callback:()=>{var r;return r=i.id,void((0,s.L9)("restore_version_from_modal",{fileKey:e.fig.key,versionId:r}),t(c.hV()),t(d.nu({fileKey:e.fig.key,versionId:r,source:d.Od.FILE_BROWSER_MODAL})))},connector:n+1!==r.length},i.id))})})})}},972798:function(e,t,r){r.d(t,{FolderPageViewOmnicreateDropdown:()=>O});var a,i=r(750357),s=r(966188),n=r(834161),o=r(850340),l=r(122610),d=r(694340),c=r(479852),u=r(756809),m=r(339189),_=((a=_||{}).CAN_CREATE="CAN_CREATE",a.CANNOT_CREATE="CANNOT_CREATE",a.CAN_AUTO_UPGRADE="CAN_AUTO_UPGRADE",a.CAN_REQUEST_UPGRADE="CAN_REQUEST_UPGRADE",a.UPGRADE_PENDING="UPGRADE_PENDING",a),p=r(577851),f=r(498498),x=r(160067),g=r(599115),h=r(853505),v=r(193447),b=r(273634),y=r(632959),j=r(590914),w=r(1093),T=r(768123),I=r(733265),E=r(871567),k=r(926941),N=r(260251),C=r(719214),R=r(380904),S=r(31441);function O({lgFolder:e,newFileFrom:t}){let r=function({lgFolder:e}){let{getUpgradeEligibility:t,hasPendingRequest:r,getUpgradePathway:a}=(0,u.eW)({folderId:e.id});return(0,d.N)(e).map(({editorType:i,canCreate:s})=>{let d=(()=>{if(s)return"CAN_CREATE";if(!function({editorType:e,lgFolder:t}){let r=(0,l.xw)(t)[e];if(!r)return!1;if(r.result)return!0;if(!t.canEdit)return!1;let a=r.publicDenyReasons;return 1===a.length&&a[0]===c.yZ.FOLDER_CREATE_FILE_DENY_UNLICENSED_USERS}({lgFolder:e,editorType:i}))return"CANNOT_CREATE";let d=(0,n.jk)(i);if(!d)return"CANNOT_CREATE";let u=t(d),_=r(d);switch(u){case m.V.CAN_UPGRADE:let p=a(d);switch(p){case m.e.AUTO_PATHWAY:case m.e.ADMIN_AUTO_PATHWAY:return"CAN_AUTO_UPGRADE";case m.e.PROVISIONAL_PATHWAY:case m.e.RE_REQUEST_PATHWAY:return _?"UPGRADE_PENDING":"CAN_REQUEST_UPGRADE";default:(0,o.vE)(p)}case m.V.CANNOT_UPGRADE:return _?"UPGRADE_PENDING":"CANNOT_CREATE";case m.V.UPGRADE_NOT_NEEDED:return s?"CAN_CREATE":"CANNOT_CREATE";default:(0,o.vE)(u)}})(),u=(()=>{switch(d){case"CAN_CREATE":case"CAN_AUTO_UPGRADE":case"CAN_REQUEST_UPGRADE":return!1;case"CANNOT_CREATE":case"UPGRADE_PENDING":return!0;default:(0,o.vE)(d)}})();return{editorType:i,fileCreationOptionState:d,isDisabled:u}})}({lgFolder:e}),a=function({newFileFrom:e,lgFolder:t,fileCreationOptions:r}){let a=(0,p.I0)(),i=function({lgFolder:e,newFileFrom:t}){let r=(0,p.I0)(),a=(0,I.V)({isDraftsFolder:(0,R.eV)(e),newFileFrom:t,folderId:e.id}),{properties:i}=(0,k.gx)(),{handleUpgrade:s}=(0,u.eW)({folderId:e.id});return(0,h.useCallback)(({editorType:e,contextClicked:t,fileCreationOptionState:l})=>{let d=function({editorType:e,fileCreationOptionState:t,createFile:r,handleUpgradeBuilder:a,dispatch:i}){switch(t){case _.CAN_CREATE:return r;case _.CANNOT_CREATE:case _.UPGRADE_PENDING:return v.ZT;case _.CAN_AUTO_UPGRADE:case _.CAN_REQUEST_UPGRADE:return s=>(function({event:e,editorType:t,fileCreationOptionState:r,createFile:a,handleUpgradeBuilder:i,dispatch:s}){let o=(0,n.jk)(t);if(!o){(0,y.Jz)(b.k.MONETIZATION_UPGRADES,Error("Editor type has no corresponding license type for file creation upgrade flow"),{extra:{editorType:t,fileCreationOptionState:r}}),s(w.R.enqueue({message:(0,j.t)("general.an_error_occurred"),error:!0}));return}i({afterUpgradeCallback:a,licenseType:o,editorType:t,upgradeReason:S.t.CREATE_FILE,entryPoint:T.bH.CREATE_FILE_PROJECT_VIEW})(e)})({event:s,editorType:e,createFile:r,dispatch:i,fileCreationOptionState:t,handleUpgradeBuilder:a});default:(0,o.vE)(t)}}({fileCreationOptionState:l,createFile:a({editorType:e,contextClicked:t}),handleUpgradeBuilder:s,editorType:e,dispatch:r}),c=function({editorType:e,fileCreationOptionState:t,trackingContextProperties:r}){let a=(0,n.jk)(e),i=(()=>{switch(t){case _.CAN_CREATE:case _.CANNOT_CREATE:case _.UPGRADE_PENDING:return!1;case _.CAN_AUTO_UPGRADE:case _.CAN_REQUEST_UPGRADE:return!0;default:(0,o.vE)(t)}})();return{...r,trackingDescriptor:E.y.CREATE_FILE,licenseType:a,billableProductKey:a&&(0,C.L7)(a),needsUpgrade:i}}({editorType:e,fileCreationOptionState:l,trackingContextProperties:i});return e=>{(0,N.T6)(c),d(e)}},[a,i,r,s])}({lgFolder:t,newFileFrom:e});return{newFiles:r.map(({editorType:e,fileCreationOptionState:t,isDisabled:r})=>(0,f.r)({editorType:e,isDisabled:r,isLoading:!1,showRequestLabel:t===_.CAN_REQUEST_UPGRADE,showRequestSentLabel:t===_.UPGRADE_PENDING,onClick:i({editorType:e,contextClicked:(0,x.W)(e),fileCreationOptionState:t})})),import:(0,g.ni)(t)?(0,f.C)({isLoading:!1,dispatch:a}):null}}({lgFolder:e,newFileFrom:t,fileCreationOptions:r}),O=r.filter(e=>e.fileCreationOptionState===_.CAN_REQUEST_UPGRADE).map(e=>(0,n.jk)(e.editorType)).filter(Boolean).sort().join(",");return(0,i.jsx)(s.q,{menuItems:a,trackingProperties:{requestableLicenseTypes:O,hasRequestableLicenses:!!O}})}},606499:function(e,t,r){r.d(t,{B:()=>n,E:()=>o});var a=r(363240);let{useRegisterMenu:i,isOpenAtom:s}=(0,r(48572).s)(),n=()=>(0,a.KO)(s)[0],o=9793==r.j?i:null},966188:function(e,t,r){r.d(t,{q:()=>h,$:()=>v});var a=r(750357),i=r(577851),s=r(139349),n=r(287211),o=r(211839),l=r(997669),d=r(853505),c=r(403706),u=r(771790),m=r(889354);r(607906);var _=r(590914);let p=d.forwardRef(function(e,t){let r=e["aria-expanded"];return(0,a.jsxs)(c.h,{ref:t,...{0:{className:"x78zum5 x167g77z x1iorvi4 xjkvuk6 x163pfp xmzs88n x6s0dn4 x19y5rnk x1tk3asg xwa2v1s xu5wzci x3sfz7g xazsp2l x1roy7tt x14nhee1 xb67q6v xn3n4wp x1swp962 xb3r6kr x1pshirs"},1:{className:"x78zum5 x167g77z x1iorvi4 xjkvuk6 x163pfp xmzs88n x6s0dn4 x19y5rnk x1tk3asg xwa2v1s xb3r6kr x1pshirs xs07v55 xb67q6v"}}[0|!!(r&&"false"!==r)],...e,children:[(0,a.jsx)(u.g,{"aria-hidden":!0}),(0,a.jsxs)("div",{...{className:"x78zum5 x1v2ro7d x6s0dn4"},children:[(0,_.t)("file_browser.tool_bar.create"),(0,a.jsx)(m.i,{"aria-hidden":!0})]})]})});var f=r(606499);function x({menuItems:e,trackingProperties:t,disabled:r,dataOnboardingKey:i}){let{getTriggerProps:s,manager:n}=o.H9();return(0,f.E)(n),(0,a.jsxs)(o.fC,{manager:n,children:[(0,a.jsx)(p,{...s(),disabled:r,"data-onboarding-key":i}),(0,a.jsx)(l.c,{menuItems:e,trackingProperties:t})]})}var g=r(160067);function h(e){let t=(0,g.H)();return(0,s.K4)({markName:"FileCreateEntrypoint",isLoaded:!0}),(0,a.jsx)(x,{...e,disabled:t})}function v({newFileFrom:e,forceOpenNewTab:t,dataOnboardingKey:r}){let s=(0,i.v9)(e=>e.user?.drafts_folder_id),o=(0,n.y)({newFileFrom:e,forceOpenNewTab:t,folderId:s,contextClicked:"recents_file_creation_thumbnails_created"});return(0,a.jsx)(h,{menuItems:o,dataOnboardingKey:r})}},160067:function(e,t,r){if(r.d(t,{H:()=>l,W:()=>o}),9793==r.j)var a=r(479852);var i=r(428785),s=r(745371),n=r(630838);function o(e){return({[a.gg.DESIGN]:"toolbar_design_created",[a.gg.WHITEBOARD]:"toolbar_figjam_created",[a.gg.SLIDES]:"toolbar_slides_created",[a.gg.SITES]:`toolbar_${i.RN}_created`,[a.gg.COOPER]:`toolbar_${i.u2}_created`,[a.gg.FIGMAKE]:`toolbar_${i.mT}_created`})[e]}function l(){let e=(0,n.ZR)(),t=(0,s.kP)();return e||t}},595571:function(e,t,r){r.r(t),r.d(t,{PdfConfirmationModal:()=>h});var a=r(750357),i=r(853505),s=r(850340),n=r(408014),o=r(451410),l=r(514177),d=r(317429),c=r(680441),u=r(974014),m=r(944365),_=r(641857),p=r(661193),f=r(555792),x=r(590914),g=r(871567);function h({fileImportDescription:e,onConfirm:t,onCancel:r}){let[h,v]=(0,i.useState)(void 0),b=(0,i.useMemo)(()=>{let e=(0,n.H)(_._s).map(e=>({key:e,value:_._s[e],label:function(e){switch(e){case _._s.MIRO:return"Miro";case _._s.MURAL:return"Mural";case _._s.LUCID:return"Lucid";case _._s.JAMBOARD:return"Jamboard";case _._s.UNKNOWN:return(0,x.t)("file_browser.file_import_view.select_pdf_source_input_unknown_value");default:(0,s.vE)(e)}}(e)}));return e.sort((e,t)=>e.key===t.key?0:e.key===_._s.UNKNOWN?1:t.key===_._s.UNKNOWN?-1:e.label.localeCompare(t.label)),e},[]),y=(0,i.useCallback)(e=>{v(e)},[]),j=(0,i.useCallback)(()=>{h&&t(_._s[h])},[t,h]),w=o.dd({open:!0,onClose:r,preventUserClose:!0});return(0,a.jsx)(l.fC,{manager:w,width:"fit-content",children:(0,a.jsxs)(d.AU,{children:[(0,a.jsx)(d.h4,{children:(0,a.jsx)(d.Dx,{children:(0,x.t)("file_browser.file_import_view.select_pdf_source_header")})}),(0,a.jsx)(d.uT,{children:(0,a.jsxs)("div",{className:p.B.flex.flexColumn.pt4.gap16.textBodyMedium.$,children:[(0,a.jsx)("div",{children:e}),(0,a.jsx)("form",{className:p.B.mb8.$,children:(0,a.jsx)(c.f,{legend:(0,a.jsx)(u.e,{children:(0,x.tx)("file_browser.file_import_view.select_pdf_source_input_legend")}),value:h,onChange:y,children:b.map(e=>(0,a.jsx)(c.W,{value:e.value,label:(0,a.jsx)(m._,{className:p.B.textBodyMedium.$,children:e.label}),children:e.key===_._s.UNKNOWN&&(0,x.tx)("file_browser.file_import_view.select_pdf_source_input_unknown_disclaimer")},e.key))})})]})}),(0,a.jsx)(d.$_,{children:(0,a.jsxs)(d.Dj,{children:[(0,a.jsx)(f.XT,{variant:"secondary",onClick:r,trackingProperties:{trackingDescriptor:g.y.FILE_IMPORT_X_BUTTON,text:"dismiss"},children:(0,x.tx)("modal.cancel")}),(0,a.jsx)(f.XT,{variant:"primary",disabled:!h,onClick:j,children:(0,x.tx)("modal.confirm")})]})})]})})}},627946:function(e,t,r){r.r(t),r.d(t,{RevokeProjectTransferModal:()=>f});var a=r(750357),i=r(577851),s=r(451410),n=r(514177),o=r(317429),l=r(5929),d=r(661193),c=r(590914),u=r(1093),m=r(469271),_=r(926941),p=r(849231);function f(e){let{pending:t,canRevokeProjectTransfer:r,isTransferTeam:f=!1}=e,x=(0,i.I0)(),g=s.dd({open:e.open,onClose:e.onClose}),h=t.id,v=t.source_user_email,b=t.destination_user_email,y=t.is_transfer_copy;return(0,a.jsx)(_.Ui,{name:"Asset Transfer Revoke Modal",properties:{pendingInviteId:h},children:(0,a.jsx)(n.fC,{manager:g,width:"lg",children:(0,a.jsxs)(o.AU,{children:[(0,a.jsx)(o.h4,{children:(0,a.jsx)(o.Dx,{children:(0,c.t)("revoke_transfer_modal.header_title")})}),(0,a.jsxs)(o.uT,{scrolling:"manual",children:[(0,a.jsx)("div",{className:d.B.py8.$,children:f?(0,c.tx)("revoke_transfer_modal.transfer_details_team",{sourceUserEmail:v,destinationUserEmail:b}):y?(0,c.tx)("revoke_transfer_modal.transfer_copy_details",{sourceUserEmail:v,destinationUserEmail:b}):(0,c.tx)("revoke_transfer_modal.transfer_details",{sourceUserEmail:v,destinationUserEmail:b})}),(0,a.jsx)("div",{className:d.B.py8.$,children:(0,c.tx)("revoke_transfer_modal.function_explanation")})]}),(0,a.jsx)(o.$_,{children:(0,a.jsxs)(o.Dj,{children:[(0,a.jsx)(l.zx,{variant:"secondary",onClick:e.onClose,children:(0,c.t)("revoke_transfer_modal.go_back")}),(0,a.jsx)(l.zx,{variant:"destructive",onClick:()=>{p.j.deleteAssetTransferRequest({id:h}).then(()=>{x(u.R.enqueue({message:(0,c.t)("revoke_transfer_modal.visual_bell.transfer_revoked")}))},e=>{x(u.R.enqueue({message:(0,c.t)("revoke_transfer_modal.visual_bell.something_went_wrong"),error:!0}))}),x(m.eI())},disabled:!r,children:(0,c.t)("revoke_transfer_modal.revoke")})]})})]})})})}},101670:function(e,t,r){r.d(t,{V:()=>o});var a=r(750357),i=r(260736),s=r(608657),n=r(939401);function o(e){return(0,a.jsx)(s.Hz,{className:"addition_button--button--14wqO","data-onboarding-key":e.data_onboarding_key,"data-tooltip":e.data_tooltip,"data-tooltip-show-immediately":e.disabled||void 0,"data-tooltip-type":i.fR.TEXT,disabled:e.disabled,innerText:e.innerText,isBackgroundTransparent:e.isBackgroundTransparent,onClick:e.onClick,onMouseDown:e.onMouseDown,onMouseEnter:e.onMouseEnter,svg:n.Z})}},764517:function(e,t,r){function a(e,t,r){let a=e.indexOf(t);return -1!==a&&a+r>=0&&a+r<e.length}function i(e,t,r){let a=e.indexOf(t);if(-1===a)return;let i=[...e];return[i[a],i[a+r]]=[i[a+r],i[a]],i}r.d(t,{A:()=>i,T:()=>a})},668956:function(e,t,r){r.r(t),r.d(t,{FolderUpdateDescriptionModal:()=>l});var a=r(750357),i=r(577851),s=r(590914),n=r(947090),o=r(620756);function l({folder:e}){let t=(0,i.I0)();return(0,a.jsx)(o.q,{initialName:e.description??"",title:(0,s.t)("resource_rename_modal.edit_description"),placeholder:"",submitText:(0,s.t)("resource_rename_modal.save"),onRename:r=>t(n.YW({folderId:e.id,description:r.trim()})),allowEmptyString:!0,maxLength:200})}},265325:function(e,t,r){r.r(t),r.d(t,{FolderCreationModal:()=>et});var a=r(750357),i=r(853505),s=r(577851),n=r(451410),o=r(514177),l=r(317429),d=r(492342),c=r(330837),u=r(45190),m=r(739842),_=r(259946),p=r(555792),f=r(590914),x=r(493073),g=r(947090),h=r(469271),v=r(926941),b=r(388798),y=r(748387),j=r(242802),w=r(753392),T=r(133645),I=r(479852),E=r(10553),k=r(800583),N=r(761050),C=r(218048),R=r(98583),S=r(118960),O=r(410237),P=r(892243),A=r(750077),D=r(157973),F=r(95238),M=r(617758),L=r(363240),B=r(545449),U=r(661193),V=r(621298),G=r(595475),z=r(940358),W=r(913408),H=r(421177),K=r(382455),Y=r(417027);let Z=(0,G.n_)("seen_sharing_clarity_project_modal_overlay"),$="sc_project_creation_permission_onboarding_key";function q(){let e=(0,L.Dv)(Z),{show:t,isShowing:r,complete:i}=(0,V.I)({overlay:Y.Nkg,priority:z.b.DEFAULT_MODAL},[e]);(0,B.O)(()=>{t({canShow:e=>!e})});let s=(0,a.jsx)("a",{href:"https://help.figma.com/hc/articles/360038006494-Create-a-new-project",className:U.B.colorTextOnbrand.underline.$,children:(0,f.tx)("rcs.sharing_clarity.learn_more")});return(0,a.jsx)(W.ZZ,{arrowPosition:K.xI.LEFT_TITLE,description:(0,a.jsx)("p",{children:(0,f.tx)("rcs.sharing_clarity.project_creation_permissions_description",{learnMoreLink:s})}),disableHighlight:!0,emphasized:!0,isShowing:r,onClose:i,targetKey:$,title:(0,f.tx)("rcs.sharing_clarity.project_creation_permissions_title"),trackingContextName:"Sharing Clarity Project Creation Permission Onboarding",zIndex:H.c.MODAL})}var Q=r(370669),J=r(854758),X=r(792241),ee=r(469287);function et(e){let t=(0,s.I0)(),[r,L]=i.useState(""),[B,U]=i.useState(!1),[V,G]=i.useState(0),z=I.nX.TEAM_ACCESS_EDIT,W=b.t.useTrackingContext({trigger:P.V.FOLDER_CREATION_MODAL}),H=(0,s.v9)(e=>e.contacts),K=(0,s.v9)(e=>e.dropdownShown),Y=(0,s.v9)(e=>e.autocomplete),Z=(0,j.xJ)(),et=(0,u.DG)(E.T0c,{teamId:e.teamId}),er=i.useMemo(()=>{if("loading"===et.status||!et.data)return null;let t=et.data.team;if(!t)return null;let r="loaded"===t.workspace.status?t.workspace.data:void 0,a={id:e.teamId,name:t.name,imgUrl:t.imgUrl,subscription:t.subscription,student_team:!!t.studentTeamAt,grace_period_end:t.gracePeriodEnd,restrictions_list:t.restrictionsList,canAdmin:t.canAdmin,canEdit:t.canEdit,sharing_audience_control:t.sharingAudienceControl},i=t.org&&{id:t.org.id,name:t.org.name,img_url:t.org.imgUrl,org_domains:(0,k.Hm)(t.org.orgDomains),domain_capture:t.org.domainCapture,invite_whitelist_guest_invite_setting:t.org.inviteWhitelist?.guestInviteSetting};return{team:a,plan:t?.plan,org:i||null,workspace:r}},[et,e.teamId]),ea=er&&er.team,ei=er&&er.org,es=(0,S.I6)().transform(e=>e.planRecordId).unwrapOr(null),en=(0,w.R)(es),eo=(0,T.n)(es),el=ei&&ei.org_domains?ei.org_domains:{domains:[],isFetching:!1,fetchedAt:null},ed=i.useCallback(()=>ea&&ea.sharing_audience_control!==I.I1.ORG_EDIT&&ea.sharing_audience_control!==I.I1.ORG_VIEW?ea.sharing_audience_control===I.I1.WORKSPACE_EDIT||ea.sharing_audience_control===I.I1.WORKSPACE_VIEW?Q.x_.WORKSPACE:Q.x_.INVITE_ONLY:Q.x_.ORG,[ea]),ec=i.useCallback(()=>ea&&(ea.sharing_audience_control===I.I1.ORG_EDIT||ea.sharing_audience_control===I.I1.WORKSPACE_EDIT)?Q.CG.EDIT:Q.CG.VIEW,[ea]),eu=(0,D.vc)(Y),[em,e_]=i.useState(ed()),[ep,ef]=i.useState(ec()),[ex,eg]=i.useState(A.V5.EDITOR),eh=(0,y.N1)(Y.tokens);i.useEffect(()=>{e_(ed()),ef(ec())},[ed,ec]);let ev=()=>{1===V?G(0):(t(h.eI()),t(x.H()))},eb=(0,ee.TY)(ei||null),ey=e=>(0,O.Qf)(e,H.usersByEmail,Z,[],ei?.id||null,null,null,{inviteLevel:ex,source:"folder-creation-modal"}),ej=e=>(0,O.Dm)(e,H.usersByEmail,Z,[],es,{inviteLevel:ex,source:"folder-creation-modal"},{resourceType:I._g.FOLDER,resourceIdOrKey:void 0}),ew=e=>(0,R.r9)(e,ei,el),eT=e=>{let t=(0,d.BZ)().folder_creation_restricted_guests_err_ui&&ei?.invite_whitelist_guest_invite_setting!=null;return(0,R.yH)(e,H.usersByEmail[e]||e,ei,el,Z.email,t?(0,f.t)("project_creation.restricted_against_adding_external_users"):null)},eI=()=>{let a;em===Q.x_.ORG?a=ep===Q.CG.EDIT?I.I1.ORG_EDIT:I.I1.ORG_VIEW:em===Q.x_.WORKSPACE?a=ep===Q.CG.EDIT?I.I1.WORKSPACE_EDIT:I.I1.WORKSPACE_VIEW:em===Q.x_.INVITE_ONLY&&(a=I.I1.INVITE_ONLY),t(g.Ue({shouldRedirect:!e.modalShown,name:r.trim(),teamId:e.teamId,isInviteOnly:void 0,isViewOnly:void 0,sharingAudienceControl:ei?a:void 0,teamAccess:z,inviteEmails:eu.emails,userGroupIds:en?eu.userGroups:[],inviteLevel:ex,orgId:ei?.id,onFolderCreated:e.onFolderCreated}))},eE=n.dd({open:e.open,onClose:ev}),ek=0===V?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"folder_creation_modal--nameHeader--ie-P- folder_creation_modal--sectionHeader----1JW text--fontPos11--rO47d text--_fontBase--VaHfk",children:(0,f.t)("project_creation.name")}),(0,a.jsx)(m.Sc,{"aria-label":(0,f.t)("project_creation.project_name"),autoFocus:!0,className:"folder_creation_modal--folderNameInput--3KsVl",maxLength:m.kj,minLength:1,onBlur:()=>U(!1),onChange:e=>L(e.target.value),onFocus:()=>U(!0),placeholder:(0,f.t)("project_creation.ex_growth_experiments"),required:!0,value:r}),0===r.trim().length&&!B&&(0,a.jsx)("div",{className:"folder_creation_modal--inputErrorMessage--DyZTE",children:(0,f.t)("project_creation.project_name_empty")}),ei&&ea&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"folder_creation_modal--sectionHeader----1JW text--fontPos11--rO47d text--_fontBase--VaHfk","data-onboarding-key":$,children:(0,f.t)("project_creation.who_has_access")}),(0,a.jsx)(q,{}),(0,a.jsx)(Q.tn,{resourceType:I._g.FOLDER,value:em,onChange:e_,org:ei,team:ea,audienceAccessLevel:ep,workspace:eo?er.workspace:void 0}),em!==Q.x_.INVITE_ONLY&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Q.KS,{selectedPermissionsLevel:ep,setSelectedPermissionsLevel:ef,label:(0,f.t)("folder_permissions_modal.what_they_can_do")}),(0,a.jsx)("div",{className:"folder_creation_modal--subtitle--W-eh2 text--fontPos11--rO47d text--_fontBase--VaHfk text--fontPos11--rO47d text--_fontBase--VaHfk",children:ep===Q.CG.VIEW?(0,f.t)("project_creation.can_view_and_comment"):(0,f.t)("project_creation.can_create_and_edit_files")})]})]})]}):(()=>{let e=[A.V5.EDITOR,A.V5.VIEWER];return(0,a.jsx)("div",{className:"folder_creation_modal--stepTwoContainer--0cWB-",children:(0,a.jsx)(M.x,{SearchResultComponent:en?J.VM:J.ay,TokenComponent:en?J.k7:J.EZ,autocomplete:Y,dispatch:t,dropdownKey:"permissions-invite-dropdown",dropdownShown:K,fixedAutocompleteResults:!0,getSearchResults:en?ej:ey,getSelectText:C.h1,getTokenIdentifier:J._o,getTokenPopover:en?e=>(0,J.z)(e,eh):void 0,inviteLevel:ex,joinLinkShown:!1,onInviteLevelChange:eg,options:e,placeholderText:en?(0,f.t)("user_groups.add_emails_names_or_user_groups"):(0,f.t)("team_creation.add_a_name_or_email"),searchResultDisabled:en?J.Yb:void 0,searchResultToken:en?eb:ew,shouldAutoFocus:!0,useContainerRefForWidth:!0,validateToken:eT,validateTokensAsEmail:!0})})})();return(0,a.jsx)(v.Ui,{name:F.V4.CREATE_NEW_PROJECT_MODAL,properties:{teamId:ea?.id,...W},children:(0,a.jsx)(o.fC,{manager:eE,width:"lg",children:(0,a.jsx)("div",{className:"folder_creation_modal--multiContents--RI9A1",children:(0,a.jsxs)(l.AU,{children:[(0,a.jsx)(l.h4,{children:(0,a.jsx)(l.Dx,{children:0===V?(0,f.t)("project_creation.create_project"):(0,f.t)("project_creation.add_people_to_project_name",{projectName:r})})}),(0,a.jsx)(l.uT,{children:er?ek:(0,a.jsx)("div",{className:"folder_creation_modal--loading--M0DVE",children:(0,a.jsx)(_.jz,{})})}),er&&(0,a.jsxs)(l.$_,{children:[(0,a.jsx)("div",{className:"folder_creation_modal--footer--FSArV folder_creation_modal--subtitle--W-eh2 text--fontPos11--rO47d text--_fontBase--VaHfk",children:(0,f.tx)("project_creation.step_number_of_max_steps",{currentStep:V+1,maxSteps:2})}),(0,a.jsxs)(l.Dj,{children:[(0,a.jsx)(p.XT,{onClick:ev,variant:"secondary",children:0===V?(0,f.tx)("project_creation.cancel"):(0,f.tx)("project_creation.back")}),(0,a.jsx)(p.XT,{variant:"primary",onClick:()=>{if(0===V)G(1);else if(ei){let e=ei&&ei.domain_capture&&el.domains.length>0?eu.emails.filter(e=>(0,c.Jh)(e)&&!(0,N.nv)(el.domains,e)):[];e.length>0?(e=>{if(ei&&ei?.invite_whitelist_guest_invite_setting==null&&e.length>0)return t((0,h.K4)({type:X.E,data:{emails:e,onConfirm:()=>{eI()},popStack:!0,orgName:ei.name}}))})(e):eI()}else eI()},disabled:0===V&&0===r.trim().length,children:0===V?(0,f.tx)("general.continue"):(0,f.tx)("project_creation.create_project")})]})]})]})})})})}},817644:function(e,t,r){r.d(t,{J:()=>n,g:()=>s});var a,i,s=9793==r.j?((a=s||{}).LIMITED_TEAM_SPACE="Limited Team Space",a.EDU_EXPIRY="EDU Expiry",a.EDU_UPGRADE="EDU Upgrade",a.ORG_UPGRADE="Org Upgrade",a.PAID_FREE_SPACE="Paid Free Space",a.UNIVERSAL="Universal",a.RESUBSCRIPTION="Resubscription",a):null,n=9793==r.j?((i=n||{}).BETWEEN_CONTENT="between_content",i.AFTER_CONTENT="after_content",i.IN_FOOTER="in_footer",i):null},497597:function(e,t,r){r.d(t,{_:()=>a});let a="trashed-projects"},676283:function(e,t,r){if(r.d(t,{q:()=>i}),9793==r.j)var a=r(479852);function i(e){return e?e.sort((e,t)=>{let r=e.permission===a.F9.ADMIN,i=t.permission===a.F9.ADMIN;if(r&&!i)return -1;if(!r&&i)return 1;let s=e.baseOrgUser?.user?.handle||"",n=t.baseOrgUser?.user?.handle||"",o=""===s,l=""===n;return o&&!l?1:!o&&l?-1:o&&l?0:s.localeCompare(n,void 0,{sensitivity:"base"})}):[]}},344460:function(e,t,r){r.r(t),r.d(t,{AddPinModal:()=>y});var a=r(750357),i=r(853505),s=r(577851),n=r(850340),o=r(273634),l=r(45190),d=r(632959),c=r(733791),u=r(590914),m=r(225094),_=r(469271),p=r(635789),f=r(260251),x=r(269356),g=r(10553),h=r(952319),v=r(915482),b=r(398023);function y({fileKey:e,source:t,open:r,onClose:n}){let m=(0,s.I0)(),y=(0,v.p)((0,u.t)("file_browser.pinning.pin_modal.confirmation_bell"),"file-browser-workspace-add-pin"),w=(0,l.DG)(g.BrP,{fileKey:e}),T=function(e){let[t,r]=i.useState(!1),a="loaded"===e.status&&e.data.file&&!e.data.file.canPinToWorkspace&&e.data.file.canEdit;return a&&!t&&r(!0),a||t}(w);if("loaded"!==w.status)return null;let{file:I}=w.data;if(!I)return(0,d.Jz)(o.k.WAYFINDING,Error("AddPinModal unable to lookup file by ID")),m(_.eI()),null;let E=I.computedWorkspace?.workspace;if(!E)return(0,d.Jz)(o.k.WAYFINDING,Error("AddPinModal opened for file with no workspace")),m(_.eI()),null;let k=x.v.toSinatra(I),N=async e=>{try{await h.f.pinFile({resourceType:b.dv,resourceId:E.id,fileKey:I.key,description:e,shouldUpdatePermissions:T}),(0,f.hM)("file_browser_file_pinned_to_resource",I,{resourceType:b.dv,resourceId:E.id,source:t,pinDescription:(0,p.nV)(e)}),y(E.id)}catch(e){throw m(c.l.error((0,u.t)("file_browser.pinning.pin_modal.error"))),e}},C=T?(0,a.jsx)(j,{file:I,workspace:E}):null;return(0,a.jsx)(v.U,{title:(0,u.t)("file_browser.pinning.pin_modal.pin_file_to_workspace"),confirmText:(0,u.t)("file_browser.pinning.pin_file"),onSubmit:N,file:k,initialDescription:null,warningContent:C,open:r,onClose:n})}function j({file:e,workspace:t}){let r=e.parentOrgId;(0,n.Eb)(r);let i=(0,s.v9)(({orgById:e})=>e[r].name);return(0,a.jsx)(m.x,{children:(0,u.tx)("file_browser.pinning.update_permissions.content",{workspaceName:t.name,permission:(0,a.jsx)(m.x,{fontWeight:"bold",children:(0,u.tx)("file_browser.pinning.update_permissions.content.permission",{orgName:i})})})})}},134919:function(e,t,r){r.r(t),r.d(t,{DeletePinModal:()=>v});var a=r(750357),i=r(853505),s=r(577851),n=r(273634),o=r(45190),l=r(632959),d=r(791110),c=r(733791),u=r(590914),m=r(635789),_=r(260251),p=r(242802),f=r(479852),x=r(10553),g=r(952319),h=r(915482);function v({pinnedFileId:e,open:t,onClose:r}){let v=(0,p.dO)(),b=(0,s.I0)(),y=(0,h.p)((0,u.t)("file_browser.pinning.delete_pin_modal.confirmation_bell"),"file-browser-workspace-delete-pin"),[j,w]=i.useState(!1),T=(0,o.DG)(x.pRj,{pinnedFileId:e});if("loaded"!==T.status)return null;let{pinnedFile:I}=T.data;if(!I)return(0,l.Jz)(n.k.WAYFINDING,Error("DeletePinModal unable to lookup pinned file by ID")),r(),null;if(I.resourceType!==f.oG.WORKSPACE)return(0,l.Jz)(n.k.WAYFINDING,Error("DeletePinModal opened for pinned file with non-workspace resource type"),{extra:{resourceType:I.resourceType}}),r(),null;let E=async t=>{t.preventDefault();try{w(!0),await g.f.deletePin({pinnedFileId:e}),(0,_.hM)("file_browser_file_unpinned_from_resource",I.file,{resourceId:I.resourceId,resourceType:I.resourceType,isPinCreator:I.creator?.id===v,pinDescription:(0,m.nV)(I.description)}),y(I.resourceId),r()}catch(e){b(c.l.error((0,u.t)("file_browser.pinning.delete_pin_modal.error")))}finally{w(!1)}};return(0,a.jsx)(d.c,{title:(0,u.t)("file_browser.pinning.delete_pin_modal.header"),confirmText:(0,u.t)("file_browser.pinning.delete_pin_modal.confirm"),onConfirm:E,destructive:!0,isLoading:j,open:t,onClose:r,children:(0,u.t)("file_browser.pinning.delete_pin_modal.content")})}},869009:function(e,t,r){r.r(t),r.d(t,{EditPinModal:()=>x});var a=r(750357),i=r(577851),s=r(273634),n=r(45190),o=r(632959),l=r(733791),d=r(590914),c=r(469271),u=r(269356),m=r(479852),_=r(10553),p=r(952319),f=r(915482);function x({pinnedFileId:e,open:t,onClose:r}){let x=(0,i.I0)(),g=(0,f.p)((0,d.t)("file_browser.pinning.pin_modal.edit.confirmation_bell"),"file-browser-workspace-edit-pin"),h=(0,n.DG)(_.LTv,{pinnedFileId:e});if("loaded"!==h.status)return null;let{pinnedFile:v}=h.data;if(!v)return(0,o.Jz)(s.k.WAYFINDING,Error("EditPinModal unable to lookup pinned file by ID")),x(c.eI()),null;if(v.resourceType!==m.oG.WORKSPACE)return(0,o.Jz)(s.k.WAYFINDING,Error("EditPinModal opened for pinned file with non-workspace resource type"),{extra:{resourceType:v.resourceType}}),x(c.eI()),null;let b=v.resourceId,y=async t=>{try{await p.f.updatePin({pinnedFileId:e,description:t}),g(b)}catch(e){throw x(l.l.error((0,d.t)("file_browser.pinning.pin_modal.edit.error"))),e}},j=u.v.toSinatra(v.file);return(0,a.jsx)(f.U,{title:(0,d.t)("file_browser.pinning.pin_modal.edit_pin_description"),confirmText:(0,d.t)("file_browser.pinning.pin_modal.save"),onSubmit:y,file:j,initialDescription:v.description,open:t,onClose:r})}},915482:function(e,t,r){r.d(t,{p:()=>z,U:()=>G});var a=r(750357),i=r(853505),s=r(577851),n=r(451410),o=r(514177),l=r(317429),d=r(5929),c=r(362971);r(607906);var u=r(633740),m=r(259946),_=r(266935),p=r(661193),f=r(590914),x=r(1093),g=r(408305),h=r(191752),v=r(404639),b=r(635789),y=r(274933),j=r(845277),w=r(880944),T=r(193447),I=r(825828),E=r(363240),k=r(53022),N=r.n(k),C=r(950161),R=r(656190),S=r.n(R),O=r(558089),P=r(488480),A=r(998669),D=r(344107),F=r(410802),M=r(409469),L=r(976163);function B({onInsert:e,closeOnInsert:t}){let[r,s]=i.useState(null),n=i.useRef(null),o=i.useCallback(()=>{n.current&&s(n.current.getBoundingClientRect())},[s]),l=i.useCallback(r=>{e(r),t&&s(null)},[e,t,s]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(F.h,{ref:n,onClick:o,"aria-label":(0,f.t)("comments.add_emoji"),children:(0,a.jsx)(M.q,{})}),r&&(0,a.jsx)(L.y,{onInsert:l,onCancel:()=>s(null),targetRect:r})]})}let U={library:{list:()=>Promise.resolve([]),search:()=>Promise.resolve([]),maxResultsLength:()=>0}};function V({placeholder:e,text:t,onChange:r,maxLength:n,onSubmit:o,textAreaClassName:l}){let d=(0,s.I0)(),c=E.n_.get(A.pK),[u,m]=i.useState(!1),[_,x]=i.useState(!1),g=i.useRef(null),h=i.useCallback(e=>{e.preventDefault(),e.stopPropagation(),g.current&&g.current.focus()},[]),v=(0,b.YM)(t,{includeTrailingWhitespace:!0}),[y,j]=i.useState(v),w=S()(e=>{j((0,b.YM)(e,{includeTrailingWhitespace:!0}))},500);return i.useEffect(()=>(w(t),()=>{w.cancel()}),[t,w]),(0,a.jsxs)("div",{className:_?"emoji_text_area--textAreaContainerFocused--F3wKa":"emoji_text_area--textAreaContainer--R7N-Q",onClick:h,children:[(0,a.jsxs)(O.l,{className:N()(p.B.flexGrow1.overflowAuto.maxWFull.borderBox.if(u,p.B.bb1.bSolid.colorBorder).$,l),innerClassName:p.B.hFull.$,children:[(0,a.jsx)(D.AJ,{ref:g,className:p.B.pt16.px16.borderBox.if(u,p.B.pb4).$,currentOrgUsers:{orgUsers:{}},dispatch:d,editorOnClear:T.ZT,editorOnInsert:T.ZT,mentionables:U,messageMeta:t,mountInputFocused:!1,onCancel:T.ZT,onFocus:T.ZT,onSubmit:o??T.ZT,onUpdateTextArea:T.ZT,placeholderText:e,setIsEditorFocused:x,submitOnEnter:!1,typeahead:c,updateMessage:([e,t])=>{r(e)}}),(0,a.jsx)(P.X,{onInitialLoad:e=>m(!e),onIntersectionChange:e=>m(!e.isIntersecting)})]}),(0,a.jsxs)("div",{className:p.B.flex.justifyBetween.itemsCenter.pl12.pr16.py12.$,children:[(0,a.jsx)(B,{onInsert:e=>{if(g.current){let t=C.WV.get(e.id);t&&(g.current.insertEmoji(t),g.current.focus())}},closeOnInsert:!0}),n&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:p.B.if(v>n,p.B.colorTextDanger,p.B.colorTextSecondary).cursorDefault.$,"aria-hidden":!0,children:[v,"/",n]}),(0,a.jsx)(I.n,{screenReaderOnly:!0,children:(0,f.t)("file_browser.pinning.pin_modal.character_count_announcement",{textLength:y,maxLength:n})})]})]})]})}function G({title:e,confirmText:t,onSubmit:r,file:s,initialDescription:x,warningContent:v,open:j,onClose:w}){let[T,I]=i.useState(x??[]),[E,k]=i.useState(!1),N=(0,y.dX)(s),C=(0,g.i)(s.folder_id),R=(0,b.YM)(T,{includeTrailingWhitespace:!0}),S=R<=100&&R>0,O=i.useCallback(async()=>{if(S)try{k(!0),await r(T),w()}finally{k(!1)}},[r,S,w,T]),P=n.dd({open:j,onClose:w}),A=(0,h.i)(N),D=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:p.B.p16.gap16.flex.flexColumn.$,children:[(0,a.jsxs)("div",{className:p.B.flex.flexColumn.gap16.$,children:[(0,a.jsx)("div",{children:(0,a.jsx)(_.O,{tile:N,borderRadius:6})}),(0,a.jsxs)("div",{...{className:"x78zum5 x1q0g3np x1v2ro7d x6s0dn4"},children:[(0,a.jsx)(u.XV,{size:16,type:A}),(0,a.jsxs)("div",{className:p.B.flex.flexColumn.gap2.flexGrow1.justifyCenter.overflowHidden.cursorDefault.$,children:[(0,a.jsx)("div",{...{className:"xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh"},children:s.name}),"loaded"===C.status&&C.data?(0,a.jsx)("div",{...{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up"},children:C.data}):null]})]})]}),(0,a.jsx)(V,{placeholder:(0,f.t)("file_browser.pinning.pin_modal.description_textarea_placeholder"),text:T,onChange:I,onSubmit:O,maxLength:100,textAreaClassName:p.B.maxH100.$})]}),v?(0,a.jsxs)("div",{className:p.B.colorBgWarningTertiary.px16.py12.flex.columnGap8.$,children:[(0,a.jsx)(c.A,{className:p.B.flexShrink0.$}),(0,a.jsx)("span",{children:v})]}):null]});return(0,a.jsx)(o.fC,{manager:P,width:"lg",children:(0,a.jsxs)(l.AU,{children:[(0,a.jsx)(l.h4,{children:(0,a.jsx)(l.Dx,{children:e})}),(0,a.jsx)(l.uT,{padding:0,children:D}),(0,a.jsx)(l.$_,{children:(0,a.jsxs)(l.Dj,{children:[(0,a.jsx)(d.zx,{variant:"secondary",onClick:w,children:(0,f.tx)("modal.cancel")}),E?(0,a.jsx)(d.zx,{disabled:!0,children:(0,a.jsx)(m.TK,{className:p.B.colorIconOnbrand.$})}):(0,a.jsx)(d.zx,{disabled:!S,variant:"primary",onClick:O,children:t})]})})]})})}function z(e,t){let r=(0,s.I0)(),a=(0,j.A6)();return i.useCallback(i=>{let s;("workspace"!==a.view||a.subView!==w.ep.DIRECTORY)&&(s={text:(0,f.t)("file_browser.pinning.pin_modal.confirmation_bell.view_workspace"),action:()=>{r(v.fv({view:"workspace",subView:w.ep.DIRECTORY,workspaceId:i,selectedTab:w.rE.TEAMS}))}}),r(x.R.enqueue({type:t,message:e,button:s}))},[r,e,t,a])}},449943:function(e,t,r){r.d(t,{D:()=>m});var a=r(853505),i=r(577851),s=r(458780),n=r(424969);if(9793==r.j)var o=r(453393);var l=r(404639),d=r(764162);if(9793==r.j)var c=r(372908);var u=r(880944);function m(){let e=(0,d.$0)(),t=(0,i.I0)();return a.useCallback((r,a)=>{if(t(o.Hg({clickedResourceType:"workspace",resourceIdOrKey:r??void 0})),(0,n.As)(a)||a.shiftKey){let t=`/files/${e}/workspace/${r??c.F}/directory/teams`;s.ZP.redirect(t,"_blank"),a.preventDefault()}else t(l.fv({view:"workspace",subView:u.ep.DIRECTORY,workspaceId:r,selectedTab:u.rE.TEAMS}))},[e,t])}},482538:function(e,t,r){r.d(t,{LB:()=>f});var a=r(750357),i=r(853505),s=r(53022),n=r.n(s),o=r(225094),l=r(805014),d=r(842095),c=r(868926),u=r(5794),m=r(320890);function _({team:e}){return(0,a.jsx)(o.x,{fontWeight:"medium",fontSize:13,fontFamily:"primary",truncate:"end",children:e.name})}function p({team:e}){return(0,a.jsx)("div",{className:n()(m.Ii,m.Eh),children:e.description})}let f=i.forwardRef(function({team:e,isSelected:t,onLeave:r,cardRole:i,onClick:s,onFocus:n,onBlur:o,draggable:f},x){let g=(0,a.jsx)(l.D.Overlay,{children:(0,a.jsx)(c.Os,{team:e,onLeave:r,isCardActive:!0})});return(0,a.jsx)(d.U,{ref:x,ariaCurrent:t,cardRole:i,draggable:f,iconImage:(0,a.jsx)(u.Kn,{className:m.l5,entity:e,size:40}),isSelected:t,onBlur:o,onClick:s,onFocus:n,subtitle:(0,a.jsx)(p,{team:e}),title:(0,a.jsx)(_,{team:e}),topRightContent:g})})},478297:function(e,t,r){r.d(t,{r:()=>o});var a=r(750357),i=r(303501),s=r(53022),n=r.n(s);function o(e){let t;return e.isLoading?(0,a.jsx)("div",{className:"tile_grid--loadingContainer--y8qmM",children:(0,a.jsx)(i.T,{htmlAttributes:{"data-testid":"loading-spinner"}})}):!e.children||Array.isArray(e.children)&&!e.children.length?(0,a.jsx)("div",{className:"tile_grid--emptyContainer--iuXcY text--fontPos11--rO47d text--_fontBase--VaHfk",children:e.emptyView}):(t="Large"===e.tileSize?"tile_grid--gridLarge--idGjE":"tile_grid--gridMedium--9i0-v",(0,a.jsx)("div",{className:n()("tile_grid--gridContainer--H78Q5",e.containerClassName),children:(0,a.jsx)("div",{className:t,children:e.children})}))}},236885:function(e,t,r){r.d(t,{d:()=>_});var a=r(750357),i=r(211839),s=r(853505),n=r(410802),o=r(969173),l=r(116866),d=r(929547);r(607906);var c=r(260736);let u=s.forwardRef(function({isFavorited:e,tooltip:t,dataTestId:r,size:i,monochrome:s,disabled:u,onClick:m,"aria-expanded":_,...p},f){let x=(0,a.jsx)(n.h,{ref:f,"aria-label":t,"aria-pressed":e,"aria-expanded":_,disabled:u,htmlAttributes:_?{}:{"data-tooltip-type":c.fR.TEXT,"data-tooltip":t,"data-tooltip-timeout-delay":50,"data-testid":r},onClick:m,variant:"secondary",size:i,...p,children:e?(0,a.jsx)(o.Z,{style:s?void 0:{"--color-icon":d.O9.iconfavorite},"data-testid":`${r}-favorited-icon`}):(0,a.jsx)(l.Y,{"data-testid":`${r}-unfavorited-icon`})});return u&&s?(0,a.jsx)("div",{className:"xjp7ctv x1qgxxjq",children:x}):x});var m=r(22883);function _({favoriteType:e,orgId:t,resourceId:r,setFavorite:s,removeFavorite:n,monochrome:o,teamId:l,size:d="md",dataTestId:c="favorite-star-button"}){let _=i.H9();return(0,a.jsx)(m.n,{resourceId:r,favoriteType:e,orgId:t,teamId:l,setFavorite:s,removeFavorite:n,favoriteStarMenu:_,children:e=>(0,a.jsx)(u,{dataTestId:c,monochrome:o,size:d,...e})})}},747540:function(e,t,r){r.d(t,{Qu:()=>x,Rn:()=>j,Wp:()=>h,XY:()=>g,zx:()=>b});var a=r(273634),i=r(492342),s=r(903132),n=r(632959);if(9793==r.j)var o=r(295902);var l=r(753139);if(9793==r.j)var d=r(929204);var c=r(201452);if(9793==r.j)var u=r(407720);if(9793==r.j)var m=r(479852);var _=r(911340),p=r(845004),f=r(758226);function x({limit:e=o._,resourceTypes:t,teamId:r,orgId:i,caller:d,includeContent:c=!1,enableQuery:u=!0,sortBy:m=l.A.Browse.ALL_TIME,selfPublished:_}){let[{data:f,status:x,hasNextPage:g,isFetchingNextPage:h},{fetchNextPage:v}]=(0,s.aM)(p.b.InternalResourcesPaginatedQuery({resourceType:t,orgId:i,teamId:r,caller:d,pageSize:e,includeContent:c,sortBy:m,selfPublished:_}),{enabled:u&&(!!r||!!i)});return!u||r||i?{resources:f??[],loading:"loading"===x,hasNextPage:g??!1,isFetchingNextPage:h,fetchNextPage:v}:((0,n.Jz)(a.k.COMMUNITY,Error("useInternalResources: teamId and orgId cannot both be undefined"),{extra:{resourceTypes:t,caller:d}}),{resources:[],loading:!1,hasNextPage:!1,isFetchingNextPage:!1,fetchNextPage:()=>{}})}function g({limit:e=o._,orgId:t,caller:r,includeContent:a=!1}){return x({limit:e,resourceTypes:[c._g.PLUGIN],teamId:void 0,orgId:t,caller:r,includeContent:a,enableQuery:!!t,sortBy:l.A.Browse.ALL_TIME})}function h({orgId:e,teamId:t,resourceType:r,planTier:a,sortBy:i,isTemplatesPublishingDisabledForOrg:s}){return x({resourceTypes:[r],limit:u.dw,orgId:e,teamId:t,caller:d.f.RESOURCE_HUB,includeContent:!0,enableQuery:(0,_.R7)(a,r,s),sortBy:i})}function v({planTier:e,teamId:t,isTemplatesPublishingDisabledForOrg:r,numTemplates:a,resourceType:i,enabled:n}){return(0,s.aM)(p.b.InternalResourcesPaginatedQuery({resourceType:[i],teamId:t,caller:d.f.RESOURCE_HUB,pageSize:a+1,includeContent:!0}),{enabled:n&&!!t&&(0,_.R7)(e,i,r)})}function b(e,t,r,a=u.dw){let s=(0,i.BZ)().cmty_templates_by_team_on_resources,n=function({planTier:e,teamId:t,isTemplatesPublishingDisabledForOrg:r,enabled:a,numTemplates:i}){let{templatesByTeam:s,isLoading:n}=(0,f.yy)({teamId:t,editorType:m.gg.COOPER,pageSize:i+1,enabled:a&&(0,_.R7)(e,c._g.COOPER_TEMPLATE_FILE,r)}),o=s?.templates??[],{templatesByTeam:l,isLoading:d}=(0,f.yy)({teamId:t,editorType:m.gg.WHITEBOARD,pageSize:i+1,enabled:a&&(0,_.R7)(e,c._g.FIGJAM_TEMPLATE,r)}),u=l?.templates??[],{templatesByTeam:p,isLoading:x}=(0,f.yy)({teamId:t,editorType:m.gg.SLIDES,pageSize:i+1,enabled:a&&(0,_.R7)(e,c._g.SLIDE_TEMPLATE,r)}),g=p?.templates??[],{templatesByTeam:h,isLoading:v}=(0,f.yy)({teamId:t,editorType:m.gg.FIGMAKE,pageSize:i+1,enabled:a&&(0,_.R7)(e,c._g.FIGMAKE_TEMPLATE,r)}),b=h?.templates??[];return{[m.gg.COOPER]:{templates:o,isLoading:n,hasMoreTemplates:o.length>i},[m.gg.WHITEBOARD]:{templates:u,isLoading:d,hasMoreTemplates:u.length>i},[m.gg.SLIDES]:{templates:g,isLoading:x,hasMoreTemplates:g.length>i},[m.gg.FIGMAKE]:{templates:b,isLoading:v,hasMoreTemplates:b.length>i}}}({planTier:e,teamId:t,isTemplatesPublishingDisabledForOrg:r,enabled:!s,numTemplates:a}),o=function({planTier:e,teamId:t,isTemplatesPublishingDisabledForOrg:r,numTemplates:a,enabled:i}){let[{data:s,status:n}]=v({planTier:e,resourceType:c._g.COOPER_TEMPLATE_FILE,teamId:t,isTemplatesPublishingDisabledForOrg:r,numTemplates:a,enabled:i}),[{data:o,status:l}]=v({planTier:e,resourceType:c._g.FIGJAM_TEMPLATE,teamId:t,isTemplatesPublishingDisabledForOrg:r,enabled:i,numTemplates:a}),[{data:d,status:u}]=v({planTier:e,resourceType:c._g.SLIDE_TEMPLATE,teamId:t,isTemplatesPublishingDisabledForOrg:r,enabled:i,numTemplates:a}),[{data:_,status:p}]=v({planTier:e,resourceType:c._g.FIGMAKE_TEMPLATE,teamId:t,isTemplatesPublishingDisabledForOrg:r,enabled:i,numTemplates:a});return{[m.gg.COOPER]:{templates:s??[],isLoading:"loading"===n,hasMoreTemplates:(s?.length??0)>0},[m.gg.WHITEBOARD]:{templates:o??[],isLoading:"loading"===l,hasMoreTemplates:(o?.length??0)>0},[m.gg.SLIDES]:{templates:d??[],isLoading:"loading"===u,hasMoreTemplates:(d?.length??0)>0},[m.gg.FIGMAKE]:{templates:_??[],isLoading:"loading"===p,hasMoreTemplates:(_?.length??0)>0}}}({planTier:e,teamId:t,isTemplatesPublishingDisabledForOrg:r,enabled:!!s,numTemplates:a});return s?o:n}function y({planTier:e,orgId:t,resourceType:r,isTemplatesPublishingDisabledForOrg:a,enabled:i,numTemplates:n}){return(0,s.aM)(p.b.getResourcesByTeamPaginatedQuery({orgId:t,resourceType:[r],pageSize:n+1,includeContent:!0}),{enabled:i&&!!t&&(0,_.R7)(e,r,a)})}function j(e,t,r,a=u.dw){let s=(0,i.BZ)().cmty_templates_by_team_on_resources,n=function({planTier:e,orgId:t,isTemplatesPublishingDisabledForOrg:r,enabled:a,numTemplates:i}){let s=e===m.Lz.ENTERPRISE,{teamTemplates:n,isLoading:o}=(0,f.Bw)({orgId:t,editorType:m.gg.COOPER,areWorkspacesEnabled:s,numTemplatesPerTeam:i+1,filterByIds:null,enabled:a&&(0,_.R7)(e,c._g.COOPER_TEMPLATE_FILE,r)}),l=n.flatMap(e=>e.templates.map(e=>e.template)),{teamTemplates:d,isLoading:u}=(0,f.Bw)({orgId:t,editorType:m.gg.WHITEBOARD,areWorkspacesEnabled:s,numTemplatesPerTeam:i+1,filterByIds:null,enabled:a&&(0,_.R7)(e,c._g.FIGJAM_TEMPLATE,r)}),p=d.flatMap(e=>e.templates.map(e=>e.template)),{teamTemplates:x,isLoading:g}=(0,f.Bw)({orgId:t,editorType:m.gg.SLIDES,areWorkspacesEnabled:s,numTemplatesPerTeam:i+1,filterByIds:null,enabled:a&&(0,_.R7)(e,c._g.SLIDE_TEMPLATE,r)}),h=x.flatMap(e=>e.templates.map(e=>e.template)),{teamTemplates:v,isLoading:b}=(0,f.Bw)({orgId:t,editorType:m.gg.FIGMAKE,areWorkspacesEnabled:s,numTemplatesPerTeam:i+1,filterByIds:null,enabled:a&&(0,_.R7)(e,c._g.FIGMAKE_TEMPLATE,r)}),y=v.flatMap(e=>e.templates.map(e=>e.template));return{[m.gg.COOPER]:{templates:l,isLoading:o,hasMoreTemplates:l.length>i},[m.gg.WHITEBOARD]:{templates:p,isLoading:u,hasMoreTemplates:p.length>i},[m.gg.SLIDES]:{templates:h,isLoading:g,hasMoreTemplates:h.length>i},[m.gg.FIGMAKE]:{templates:y,isLoading:b,hasMoreTemplates:y.length>i}}}({planTier:e,orgId:t,isTemplatesPublishingDisabledForOrg:r,enabled:!s,numTemplates:a}),o=function({planTier:e,orgId:t,isTemplatesPublishingDisabledForOrg:r,enabled:a,numTemplates:i}){let[{data:s,status:n}]=y({planTier:e,orgId:t,resourceType:c._g.COOPER_TEMPLATE_FILE,isTemplatesPublishingDisabledForOrg:r,enabled:a,numTemplates:i}),o=s?.flatMap(e=>e.resources)??[],[{data:l,status:d}]=y({planTier:e,orgId:t,resourceType:c._g.FIGJAM_TEMPLATE,isTemplatesPublishingDisabledForOrg:r,enabled:a,numTemplates:i}),u=l?.flatMap(e=>e.resources)??[],[{data:_,status:p}]=y({planTier:e,orgId:t,resourceType:c._g.SLIDE_TEMPLATE,isTemplatesPublishingDisabledForOrg:r,enabled:a,numTemplates:i}),f=_?.flatMap(e=>e.resources)??[],[{data:x,status:g}]=y({planTier:e,orgId:t,resourceType:c._g.FIGMAKE_TEMPLATE,isTemplatesPublishingDisabledForOrg:r,enabled:a,numTemplates:i}),h=x?.flatMap(e=>e.resources)??[];return{[m.gg.COOPER]:{templates:o,isLoading:"loading"===n,hasMoreTemplates:o.length>i},[m.gg.WHITEBOARD]:{templates:u,isLoading:"loading"===d,hasMoreTemplates:u.length>i},[m.gg.SLIDES]:{templates:f,isLoading:"loading"===p,hasMoreTemplates:f.length>i},[m.gg.FIGMAKE]:{templates:h,isLoading:"loading"===g,hasMoreTemplates:h.length>i}}}({planTier:e,orgId:t,isTemplatesPublishingDisabledForOrg:r,enabled:!!s,numTemplates:a});return s?o:n}},356671:function(e,t,r){r.d(t,{B:()=>c});var a=r(853505),i=r(577851),s=r(581294),n=r(966369),o=r(242802),l=r(98583),d=r(31147);function c({prepopulatedEmail:e,parentOrg:t,orgDomains:r}){let c=(0,i.I0)(),u=(0,i.v9)(e=>e.contacts),m=(0,o.XU)();a.useEffect(()=>{c(n.oD())},[c]);let _=r??d.Nj,p=a.useCallback(e=>(0,l.yH)(e,u.usersByEmail[e]||e,null,_,m.email),[u.usersByEmail,m.email,_]);return a.useEffect(()=>{if(e){let t=p(e);c(s.t8({tokens:[t],inputValue:"",errorMessage:""}))}},[e,p,c]),a.useEffect(()=>()=>{c(s.mc())},[c]),{validateToken:p,searchResultToken:a.useCallback(e=>(0,l.r9)(e,t,_),[_,t])}}},190743:function(e,t,r){r.d(t,{f:()=>s});var a=r(502726),i=r(242802);function s({rolesToDefaultToOther:e}={}){let t=(0,i.xJ)()?.profile.job_title,r=(0,a.Yb)(t);return e&&e.includes(r)?"other":r}},293442:function(e,t,r){r.d(t,{y:()=>l});var a=r(577851),i=r(551916),s=r(780331),n=r(979076),o=r(139485);function l(e){let t=(0,a.v9)(e=>e.loadingState),r=(0,a.v9)(e=>e.teamJoinLinks);return!function(e,t,r){let a=!(0,n.hg)(t,(0,o.aH)(e))&&!(0,n.OZ)(t,(0,o.aH)(e))&&!r;return(0,n.hg)(t,(0,o.aH)(e))||(0,n.hg)(t,s.Lg.loadingKeyForPayload({teamId:e}))||(0,n.hg)(t,(0,o.WT)(e))||a}(e,t,r)?i.IE.loaded(r?.url):i.IE.loading()}},73982:function(e,t,r){r.d(t,{Q:()=>o,g:()=>n});var a=r(363240),i=r(13021),s=r(595475);let n=(0,a.cn)(e=>{let t=e((0,s.OD)("has_prompted_in_figma_make")),r=e(i.f9);return!!t.data||!!r?.prompted_in_make});function o(){return(0,a.Dv)(n)}},723819:function(e,t,r){r.d(t,{Ll:()=>o,Nt:()=>l,Qy:()=>n,xF:()=>d});var a=r(551916),i=r(45190),s=r(10553);function n(e){let t=(0,i.DG)(s.O3Q,{fileKey:e},{enabled:!!e});if(null!==t.data&&!t.data?.file?.plan){let t={code:"nonNullableResult",path:[],retriable:!1,error:Error("No Plan found for file, key: "+e)};return a.IE.error([t])}return t.transform(e=>e.file?.plan)}function o(e){let t=(0,i.DG)(s.U_b,{fileKey:e},{enabled:!!e});if(null!==t.data&&!t.data?.file?.currentPlanUser){let t={code:"nonNullableResult",path:[],retriable:!1,error:Error("No PlanUser found for file, key: "+e)};return a.IE.error([t])}return t.transform(e=>e.file?.currentPlanUser)}function l(e){let t=(0,i.DG)(s.eA4,{teamId:e},{enabled:!!e});if(null!==t.data&&!t.data?.team?.plan){let t={code:"nonNullableResult",path:[],retriable:!1,error:Error("No Plan found for team, id: "+e)};return a.IE.error([t])}return t.transform(e=>e.team?.plan)}function d(e){let t=(0,i.DG)(s.q8_,{orgId:e},{enabled:!!e});if(null!==t.data&&!t.data?.org?.plan){let t={code:"nonNullableResult",path:[],retriable:!1,error:Error("No Plan found for org, id: "+e)};return a.IE.error([t])}return t.transform(e=>e.org?.plan)}},31147:function(e,t,r){r.d(t,{Nj:()=>a}),r(182948);let a={domains:[],isFetching:!1,fetchedAt:null}},952319:function(e,t,r){r.d(t,{f:()=>i});var a=r(681768);let i=new class{async pinFile({resourceType:e,resourceId:t,fileKey:r,description:i,shouldUpdatePermissions:s}){await a.ZP.post(`/api/pinned_files/${e}/${t}`,{file_key:r,description:i,should_update_permissions:s})}async updatePin({pinnedFileId:e,description:t}){await a.ZP.put(`/api/pinned_files/${e}`,{description:t})}async deletePin({pinnedFileId:e}){await a.ZP.del(`/api/pinned_files/${e}`)}}},424735:function(e,t,r){r.d(t,{_:()=>g,e:()=>x});var a=r(492342),i=r(551916),s=r(903132),n=r(852258),o=r(663914);if(9793==r.j)var l=r(929204);var d=r(127830),c=r(758226);if(9793==r.j)var u=r(479852);var m=r(10553),_=r(118960),p=r(911340),f=r(845004);function x({teamId:e,orgId:t,resourceType:r,enabled:a,pageSize:n,includeContent:o}){let[d,{fetchNextPage:c}]=(0,s.aM)(f.b.InternalResourcesPaginatedQuery({resourceType:r,caller:l.f.RESOURCE_HUB,teamId:e,orgId:t,pageSize:n,includeContent:o}),{enabled:a&&r.length>0}),[u]=(0,s.aM)((0,m.C13)({teamId:e}),{enabled:a&&!!e}),[_]=(0,s.aM)((0,m.hOA)({orgId:t}),{enabled:a&&!!t}),p=u.data?.team?.name||_.data?.org?.plan.name;return{resources:d.data,teamOrOrgName:p,status:i.IE.all([d,u,_]).status,requestLoadMoreForTeam:d.hasNextPage?c:void 0}}function g(){let e=(0,a.BZ)().cmty_templates_by_team_on_resources,t=[],r=(0,_.I6)(),i="loaded"===r.status,{resourceTypeSlug:s,forOrg:l,forTeamId:m}=(0,o.GF)(d.G)??{},f=null;if(s)try{(t=(0,p.yl)(s)).length>0&&t[0]&&(f=(0,n.UU)(t[0]))}catch{}let g=r.data?.type===u.k9.ORG,h=g?r.data?.key.parentId:void 0,v=g?m:r.data?.key.parentId,b=x({...l?{orgId:h,teamId:void 0}:{orgId:void 0,teamId:v},resourceType:t,includeContent:!0,enabled:!!e&&!!s&&i&&!!(l&&h||v)}),y=(0,c.yy)({teamId:v??null,editorType:f,enabled:!e&&!!f&&!!v&&i});return e?{resources:b.resources,teamOrOrgName:b.teamOrOrgName,status:b.status,requestLoadMoreForTeam:b.requestLoadMoreForTeam}:{templates:y.templatesByTeam?.templates,teamOrOrgName:y.templatesByTeam?.teamName,status:y.status,requestLoadMoreForTeam:y.requestLoadMoreForTeam}}},123985:function(e,t,r){r.d(t,{f:()=>L});var a=r(750357),i=r(853505),s=r(577851),n=r(870102),o=r(5929),l=r(115908),d=r(875533),c=r(202066),u=r(976236),m=r(303501),_=r(403706),p=r(451410),f=r(514177),x=r(317429),g=r(61085),h=r(492342),v=r(879370),b=r(240473),y=r(555792),j=r(367949),w=r(590914),T=r(404639),I=r(469271),E=r(780331),k=r(293442),N=r(218048),C=r(750077),R=r(260736),S=r(712824),O=r(269332),P=r(842440);let A="team_join_link_permissions--loadedViewWrapper--OLr2-",D="team_join_link_permissions--urlText--YlOLN ellipsis--ellipsis--70pHK";var F=r(720900);let M=(0,n.D)((e,t,r)=>e(E.El({teamId:t,level:r})));function L(e){let{teamId:t,initialInviteLevel:r,teamPermissions:n}=e,c=(0,s.I0)(),u=(0,s.v9)(e=>e.teamJoinLinks),[m,_]=(0,i.useState)(r),p=(0,k.y)(t),f="loading"===p.status,x=p.data;(0,i.useEffect)(()=>(M(c,t,r),()=>{c(E.FO(null))}),[c,t,r]);let g=e.teamPermissions.canEdit&&!!u?.url&&e.includeCopyLinkButton,v=i.useCallback(()=>{c(I.bF({type:G,data:{resetLink:()=>{c(E.sJ({teamId:t,level:m,shouldShowVisualBell:!0}))}}}))},[c,t,m]),b=i.useCallback(()=>(0,a.jsx)(B,{dropdownShown:e.dropdownShown,resetInviteLinks:v,disableInviteLinks:()=>c(E.Lg({teamId:t})),loading:f,canAdmin:n.canAdmin}),[c,e.dropdownShown,f,v,n.canAdmin,t,,]),y=i.useCallback(()=>{x&&c(E.IL({teamId:e.teamId,url:x,source:E.cC.TEAM_PERMISSIONS_MODAL}))},[c,e.teamId,x]),j=i.useMemo(()=>e.includeCopyLinkButton?(0,a.jsx)(o.zx,{onClick:y,disabled:!x,children:(0,w.tx)("team_join_links.copy_link")}):b(),[y,e.includeCopyLinkButton,x,b]);return!f&&!u||!n.canAdmin&&u?.disabled?null:(0,a.jsxs)(a.Fragment,{children:[(0,h.BZ)().expire_team_link_join&&(0,a.jsx)(l.mQ,{variant:"brand",children:(0,a.jsx)(d.v,{children:(0,w.tx)("team_join_links.link_will_expire")})}),(0,a.jsxs)("div",{style:g?{justifyContent:"space-between"}:{justifyContent:"flex-start"},className:"team_join_link_permissions--inviteLinkTitleWrapper--Fz04j",children:[(0,a.jsx)("span",{className:"team_join_link_permissions--inviteHeader--b0O7S",children:(0,w.tx)("team_join_links.invite_link")}),g&&b()]}),"loading"===p.status||u?.url?(0,a.jsx)(U,{dropdownShown:e.dropdownShown,getPermissionDescriptionText:e.getPermissionDescriptionText,showDropdownSeparators:e.showDropdownSeparators,setLevel:e=>{m!==e&&(_(e),c(E.El({teamId:t,level:e,shouldShowFailureMessage:!0,callbackOnFailure:()=>_(m)})))},currentLevel:m,url:f?void 0:u?.url,inviteLevels:n.canEdit?[C.V5.VIEWER,C.V5.EDITOR]:[C.V5.VIEWER],teamId:e.teamId,button:j}):(0,a.jsx)(V,{turnOnInviteLinks:()=>c(E.sJ({teamId:t,level:m}))})]})}function B(e){let t=(0,s.I0)(),r="team-link-settings-dropdown",n=i.createRef(),o=()=>e.dropdownShown?.type===r;return(0,a.jsxs)(c.S,{eventListeners:["onMouseDown"],children:[(0,a.jsx)("div",{ref:n,children:(0,a.jsx)(u.F,{"aria-expanded":o(),disabled:e.loading,"aria-label":(0,w.t)("team_join_links.team_invite_link_settings"),onClick:()=>{let e=n.current?.getBoundingClientRect();o()?t(T.kp()):e&&t(T.SP({type:r,data:{targetRect:e}}))},htmlAttributes:{"data-tooltip-type":R.fR.TEXT,"data-tooltip":(0,w.t)("team_join_links.team_invite_link_settings")},children:(0,a.jsx)(g.j,{})})}),o()&&(0,a.jsxs)(O.AQ,{targetRect:e.dropdownShown.data.targetRect,maxWidth:140,minWidth:140,lean:"left",propagateCloseClick:!0,children:[(0,a.jsx)(v.Wx,{onClick:e.resetInviteLinks,children:(0,w.tx)("team_join_links.reset_invite_links")}),e.canAdmin&&(0,a.jsx)(v.Wx,{onClick:e.disableInviteLinks,children:(0,w.tx)("team_join_links.turn_off_invite_links")})]})]})}function U(e){let t=(0,s.I0)(),r="join-link-permission-level-dropdown",i=e.currentLevel===C.V5.VIEWER?"-32px":"-61px",n=(0,a.jsxs)("div",{className:"team_join_link_permissions--linkAndDropdown--UYKif",children:[(0,a.jsxs)("span",{className:"team_join_link_permissions--urlSection--c82eN",children:[!e.url&&(0,a.jsx)(m.T,{}),e.url&&(0,a.jsx)("span",{className:D,children:e.url})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(_.h,{onClick:a=>{a.stopPropagation(),e.url&&(e.dropdownShown?t(T.kp()):t(T.SP({type:r})))},className:"team_join_link_permissions--permissionLevelDropdown--rKklE role_row--select--ASXVQ",children:[(0,a.jsx)("span",{children:(0,N.h1)(e.currentLevel)}),(0,a.jsx)("div",{className:"team_join_link_permissions--caretWrapper--ACI1S role_row--caretWrapper--xd3RP",children:(0,a.jsx)(b.n,{svg:F.Z})})]}),e.dropdownShown&&e.dropdownShown.type===r&&(0,a.jsx)(v.Lt,{className:"team_join_link_permissions--permissionLevelDropdownOptions--ld09i",style:{marginTop:i},children:e.inviteLevels.map((t,r)=>(0,a.jsx)(v.kq,{checked:t===e.currentLevel,onClick:()=>e.setLevel(t),children:(0,N.h1)(t)},r))})]})]}),o=(0,a.jsxs)("div",{className:"team_join_link_permissions--linkAndDropdownV2--qYw2B",children:[(0,a.jsxs)("div",{className:"team_join_link_permissions--urlSectionV2--FBSav",children:[!e.url&&(0,a.jsx)(m.T,{}),e.url&&(0,a.jsx)("span",{className:D,children:e.url})]}),(0,a.jsx)("div",{className:"team_join_link_permissions--permissionLevelDropdownWrapper--3Q616",children:(0,a.jsx)(P.B3,{value:e.currentLevel,options:e.inviteLevels,getPermissionName:N.h1,getPermissionDescription:e.getPermissionDescriptionText,showSeparators:e.showDropdownSeparators,onChange:e.setLevel})})]});return(0,a.jsxs)("div",{className:A,children:[(0,h.BZ)().team_permission_modal_styling?o:n,e.button]})}function V(e){return(0,a.jsxs)("div",{className:A,children:[(0,w.tx)("team_join_links.share_a_secret_link_people_can_use_to_join_your_team")," ",(0,a.jsx)(j.Cr,{href:"#",onClick:e.turnOnInviteLinks,children:(0,w.tx)("team_join_links.turn_on_invite_links")})]})}let G="RESET_LINKS_CONFIRMATION_MODAL";(0,S.Y3)(function(e){let t=(0,s.I0)(),r=p.dd({open:e.open,onClose:e.onClose});return(0,a.jsx)(f.fC,{width:"md",manager:r,children:(0,a.jsxs)(x.AU,{children:[(0,a.jsx)(x.h4,{children:(0,a.jsx)(x.Dx,{children:(0,w.tx)("team_join_links.reset_invite_links")})}),(0,a.jsx)(x.uT,{children:(0,w.tx)("team_join_links.modal_description")}),(0,a.jsx)(x.$_,{children:(0,a.jsxs)(x.Dj,{children:[(0,a.jsx)(y.XT,{variant:"secondary",onClick:()=>t(I.eI()),children:(0,w.tx)("team_join_links.cancel")}),(0,a.jsx)(y.XT,{variant:"destructive",onClick:()=>{e.resetLink(),t(I.eI())},children:(0,w.tx)("team_join_links.reset_links")})]})})]})})},G)},437955:function(e,t,r){r.d(t,{I:()=>b});var a=r(750357),i=r(853505),s=r(5929),n=r(53022),o=r.n(n),l=r(444947),d=r(449900),c=r(574059),u=r(342534),m=r(367949),_=r(590914),p=r(871567),f=r(926941);let x="mobile_download_prompt--mobilePromptTitle--e5rY- text--fontPos13--5OfL8 text--_fontBase--VaHfk",g="mobile_download_prompt--mobilePromptOptionTitle--Ghs0U text--fontPos13--5OfL8 text--_fontBase--VaHfk",h="mobile_download_prompt--mobilePromptOptionImage--T4AYF",v="mobile_download_prompt_dismissed";function b(e){let{isCompact:t}=e,r=u.s?"https://apps.apple.com/us/app/figma-mirror/id1152747299#":"https://play.google.com/store/apps/details?id=com.figma.mirror",n=(0,d.WC)(),x=!t&&!!e.renderBlockingPrompt,[b,w]=i.useState(!x),[T,I]=i.useState(!x);i.useEffect(()=>{null===n.get(v)&&(w(!1),I(!1))},[n,x]);let E=()=>{x||(w(!0),(0,l.L9)("mobile_web_mobile_app_download_prompt_dismissed",{userId:e.userIdForTracking}),setTimeout(()=>{I(!0)},300),n.set(v,!0))};return null!==n.get(v)?null:(0,a.jsx)(f.Ui,{name:"Mobile Download Prompt",children:(0,a.jsx)("div",{className:o()({"mobile_download_prompt--overlay--Tq-vG":!0,"mobile_download_prompt--overlayClosed--uWDQD":b,"mobile_download_prompt--overlayAnimateEnd--Be2BM":T}),style:{transitionDuration:"300ms"},onClick:E,children:(0,a.jsxs)("div",{className:o()("mobile_download_prompt--mobilePromptContainer--CBeP0","mobile_download_prompt--mobileDownloadPromptContainer--JOO7H",{"mobile_download_prompt--mobileDownloadPromptContainerClosed--9vXDJ":b,"mobile_download_prompt--mobileDownloadPromptContainerFullHeightBlocking--X68a1":x}),onClick:e=>{e.stopPropagation()},children:[(0,a.jsx)("div",{className:o()("mobile_download_prompt--mobilePromptDescriptionContainer--Zps7Z",{"mobile_download_prompt--fullHeightPrompt--036K7":x}),children:t?(0,a.jsx)(j,{}):(0,a.jsx)(y,{renderBlockingPrompt:x??!1})}),(0,a.jsx)("hr",{className:o()({"mobile_download_prompt--mobilePromptHR--SzrGh":!0,"mobile_download_prompt--fullWidthHR--LbZ0-":x})}),(0,a.jsxs)("div",{className:"mobile_download_prompt--mobilePromptGrid--1lsPr",children:[(0,a.jsx)("img",{className:h,src:(0,c.o1)("249f0f055b922ecef6bffc592a8420e7e6eddcea"),alt:(0,_.t)("file_browser.mobile_prompt.app_image_alt")}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:g,children:(0,_.tx)("file_browser.mobile_prompt.app_title")}),(0,a.jsx)("p",{className:"mobile_download_prompt--mobilePromptOptionDescription--42fMD text--fontPos11--rO47d text--_fontBase--VaHfk",children:x?(0,_.tx)("file_browser.mobile_prompt.app_description_new"):(0,_.tx)("file_browser.mobile_prompt.app_description")})]}),(0,a.jsx)(m.Ip,{size:"lg",trackingProperties:{userId:e.userIdForTracking,appLink:r,trackingDescriptor:p.y.MOBILE_WEB_MOBILE_APP_DOWNLOAD_PROMPT_CLICKED},width:"fill",href:r,children:(0,_.tx)("file_browser.mobile_prompt.app_action")}),!x&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("img",{className:h,src:(0,c.o1)("741698fed49afa5e8f3becdd906e66d32c8e7fae"),alt:(0,_.t)("file_browser.mobile_prompt.browser_image_alt")}),(0,a.jsx)("div",{children:(0,a.jsx)("h3",{className:g,children:(0,_.tx)("file_browser.mobile_prompt.browser_title")})}),(0,a.jsx)(s.Hw,{onClick:E,variant:"secondary",children:(0,_.tx)("file_browser.mobile_prompt.browser_action")})]})]})]})})})}function y(e){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("img",{className:"mobile_download_prompt--mobilePromptImage--5ASWC",src:(0,c.o1)("5f1dc37f397dbddf711d3d950bee5dd46c07fc72"),alt:(0,_.t)("file_browser.mobile_prompt.image_alt")}),(0,a.jsxs)("div",{className:"mobile_download_prompt--mobilePromptTitleContainer--HlH3w",children:[(0,a.jsx)("h2",{className:x,children:e.renderBlockingPrompt?(0,_.tx)("file_browser.mobile_prompt.modal_title_blocking"):(0,_.tx)("file_browser.mobile_prompt.modal_title")}),(0,a.jsx)("p",{className:"mobile_download_prompt--mobilePromptSubTitle--ykgWK text--fontPos13--5OfL8 text--_fontBase--VaHfk",children:e.renderBlockingPrompt?(0,_.tx)("file_browser.mobile_prompt.modal_body_blocking"):(0,_.tx)("file_browser.mobile_prompt.modal_body")})]})]})}function j(){return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("h2",{className:x,children:(0,_.tx)("file_browser.mobile_prompt.modal_title_compact")})})}},48064:function(e,t,r){r.d(t,{p:()=>n});var a=r(370273),i=r(853505),s=r(750357);let n=(0,i.memo)(function(e){return(0,a.s)()?(0,s.jsx)("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e,"data-fpl-icon-size":"16",children:(0,s.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M11.5 5h-2V4h2zm1 0a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1zm-8 5h2v2h-2zm-1 0a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1zm3-6h-2v3h2zm-2-1a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1zm7 9h-2V8h2zm1 0a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1z",clipRule:"evenodd"})}):(0,s.jsx)("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e,"data-fpl-icon-size":"16",children:(0,s.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M11 5H9V4h2zm1 0a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1zm-8 5h2v2H4zm-1 0a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1zm3-6H4v3h2zM4 3a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1zm7 9H9V8h2zm1 0a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1z",clipRule:"evenodd"})})})},549409:function(e,t,r){r.d(t,{q:()=>s});var a=r(853505),i=r(750357);let s=(0,a.memo)(function(e){return(0,i.jsx)("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e,"data-fpl-icon-size":"16",children:(0,i.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M6 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0m1 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0m3 5a1 1 0 1 1 2 0v2.5a.5.5 0 0 0 1 0V10a2 2 0 1 0-4 0v2.5a.5.5 0 0 0 1 0zM5 9a1 1 0 0 0-1 1v2.5a.5.5 0 0 1-1 0V10a2 2 0 1 1 4 0v2.5a.5.5 0 0 1-1 0V10a1 1 0 0 0-1-1m7-4a1 1 0 1 1-2 0 1 1 0 0 1 2 0m1 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0",clipRule:"evenodd"})})})},773053:function(e,t,r){r.d(t,{r:()=>n});var a=r(370273),i=r(853505),s=r(750357);let n=(0,i.memo)(function(e){return(0,a.s)()?(0,s.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24L",children:(0,s.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M20 12a8 8 0 1 1-16 0 8 8 0 0 1 16 0m1 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0m-5.146-.354-3.5-3.5a.5.5 0 0 0-.708 0l-3.5 3.5a.5.5 0 0 0 .708.708L11.5 9.707V15.5a.5.5 0 0 0 1 0V9.707l2.646 2.647a.5.5 0 0 0 .708-.708",clipRule:"evenodd"})}):(0,s.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24L",children:(0,s.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M19 11.5a7.5 7.5 0 1 1-15 0 7.5 7.5 0 0 1 15 0m1 0a8.5 8.5 0 1 1-17 0 8.5 8.5 0 0 1 17 0m-5.146-.354-3-3a.5.5 0 0 0-.708 0l-3 3a.5.5 0 0 0 .708.708L11 9.707V14.5a.5.5 0 0 0 1 0V9.707l2.146 2.147a.5.5 0 0 0 .708-.708",clipRule:"evenodd"})})})},442092:function(e,t,r){r.d(t,{P:()=>s});var a=r(853505),i=r(750357);let s=(0,a.memo)(function(e){return(0,i.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24L",children:(0,i.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M2.5 9.497a1 1 0 0 1 .62-.925l8.119-3.343a2 2 0 0 1 1.522 0l8.12 3.343a1 1 0 0 1 0 1.85l-.881.362v4.718a.5.5 0 0 1-1 0v-4.306l-1 .412v4.394c0 .64-.328 1.148-.706 1.505-.375.355-.865.629-1.387.838-1.05.42-2.432.657-3.907.657s-2.857-.237-3.907-.657c-.522-.21-1.012-.483-1.387-.838C6.328 17.15 6 16.642 6 16.002v-4.394L3.12 10.42a1 1 0 0 1-.62-.924M7 12.019v3.983c0 1.105 2.239 2 5 2s5-.895 5-2v-3.983l-4.238 1.746a2 2 0 0 1-1.524 0zM3.5 9.497l1.313.54 6.806 2.803a1 1 0 0 0 .762 0l6.806-2.803 1.313-.54-1.313-.541-6.806-2.803a1 1 0 0 0-.762 0L4.813 8.956z",clipRule:"evenodd"})})})}}]);

//# debugId=0c535041-67ed-5387-9552-5dcba091f6c4

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/2c48b64b6cf49f41921112425d35e4677978e569/0c62c2fd-314c225334d49110.min.js.map