"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="4e3b455c-c5ac-576c-af27-6fd69a721bc6")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([["5522"],{983166:function(e,t,o){o.d(t,{j6:()=>b,N3:()=>y,Zx:()=>v,Me:()=>m,S_:()=>k});var r=o(853505),n=o(997199),i=o(288269),a=o(148799),s=o(381770);let l=(e,t,o)=>{let r=t.safeParse(o);if(!r.success){let t=Object.keys(o);throw new a.I(`Failed to parse ${e} message part. Type: ${o.type}. Keys: ${t.join(", ")}. Error: ${r.error.message}`)}return r.data};var c=o(363240),d=o(704516),u=o(997535),p=o(45190),f=o(416792),g=o(10553);function h(e){return r.useMemo(()=>"errors"!==e.status?[]:e.errors.filter(e=>!e.retriable),[e.status,e.errors])}function m({isEnabled:e,fileKey:t,nodeGuid:o}){let n=e&&t&&o,i=(0,p.mU)((0,g.nRz)(n?{ownerId:t,nodeGuid:o}:null)),a=(0,d.unwrap)(i.data?.nodeAiChatThreads)?.[0],s=h(i);return r.useEffect(()=>{e&&0!==s.length&&(0,u.WX)(new u.IV("Errors occurred while querying Livegraph NodeAiChatThreadsView"),"nodeaichatthreadsview_initial_view_fail",{subscriptionErrors:JSON.stringify(s),fileKey:t,nodeGuid:o})},[e,s,t,o]),{threadId:a?.id??null,isOldFile:a?"old_file"===a.nodeGuid:null,subscriptionStatus:i.status,latestUserMessage:a?.latestUserMessage??null}}function v(e,t,o,n,i){let a=(0,p.mU)((0,g.lU2)(e?{ownerId:e}:null)),s=h(a);r.useEffect(()=>{0!==s.length&&(0,u.WX)(new u.hn("Errors occurred while querying Livegraph FileAiChatThreadsView"),"fileaichatthreadsview_initial_view_fail",{subscriptionErrors:JSON.stringify(s),fileKey:e})},[s,e]);let l=a.data?.fileAiChatThreads?.[0]?.id??null,c="loaded"!==a.status,[f,m]=r.useState(null),v=f??l,k=e&&v?{ownerId:e,id:v}:null,b=(0,p.mU)((0,g.JRq)(k)),S=(0,d.unwrap)(b.data?.activeAiChatThread);return r.useEffect(()=>{if(!S||!v||i)return;let e=S.messages.map(y);m(e=>(e!==v&&(0,u.pR)(`Livegraph threadId updating: ${e} => ${v}`),v));let r=n();e.length>r.length+t&&((0,u.pR)("LiveGraph ActiveAiChatThread updating =>",e),o(e))},[S,n,o,v,t,i,m]),{threadId:i?null:v,setThreadId:m,isLoadingThreadId:c}}function y(e){let t=(e.parts??[]).map(({partType:e,contentPb:t,blobstoreContentKey:o})=>{let{type:r,...a}=(0,n.h4)(e,t);return(0,i.S)({type:r,contentJson:a,blobstoreContentKey:o})});return function({role:e,content:t,...o}){return{...(()=>{switch(e){case"user":return{role:e,content:t.map(t=>l(e,s.Jn,t))};case"assistant":return{role:e,content:t.map(t=>l(e,s.x_,t))};case"tool":return{role:e,content:t.map(t=>l(e,s.Zj,t))};case"system":return{role:e,content:t.map(t=>l(e,s.$6,t))};default:throw new a.I(`Unknown message role: ${e}`)}})(),...o}}({role:e.role,content:t,createdAtMs:e.createdAt.getTime(),clientId:e.clientId??void 0,userId:"user"in e?e.user?.id??void 0:void 0,guid:"nodeGuid"in e?e.nodeGuid??void 0:void 0,scenegraphSentAt:"scenegraphSentAt"in e?e.scenegraphSentAt??void 0:void 0})}function k({chatMessagesNode:e,disabled:t}){let o=(0,c.Dv)(f.Sh),r=!t&&o&&e,{threadId:n,subscriptionStatus:i}=m({isEnabled:!!r,fileKey:o,nodeGuid:e?.guid||""}),a=!t&&r&&n,s=(0,p.mU)((0,g.JRq)(a?{ownerId:o,id:n}:null),{enabled:!!a});return{thread:(s.data?.activeAiChatThread?(0,d.unwrap)(s.data.activeAiChatThread):null)??null,subscriptionStatus:s.status??i}}function b({chatMessagesNode:e,disabled:t}){let o=(0,c.Dv)(f.Sh),r=!t&&o&&e,{threadId:n,subscriptionStatus:i}=m({isEnabled:!!r,fileKey:o,nodeGuid:e?.guid||""}),a=(0,p.mU)((0,g.bnc)(!t&&r&&n?{ownerId:o,id:n,firstPageSize:50}:null));return{thread:(a.data?.activeAiChatThread?(0,d.unwrap)(a.data.activeAiChatThread):null)??null,subscriptionStatus:a.status??i}}},892552:function(e,t,o){o.d(t,{M9:()=>w,f3:()=>S,Gh:()=>C,zv:()=>O});var r=o(853505),n=o(577774),i=o(710162),a=o(148799),s=o(641857),l=o(386181),c=o(850340);async function d(e){let t={userId:e.userId,messageGuid:e.guid,createdAtMs:e.createdAtMs,scenegraphSentAt:e.scenegraphSentAt};switch(e.role){case"user":{let o=function(e,t){let o=(0,l.d7)(e,"code-chat-snapshot-restore");if(o){let e={type:"restore",plainText:"",codeSnapshot:{codeSnapshotKey:o.legacyS3CodeSnapshotKey,blobstoreContentKey:o.blobstoreContentKey},title:o.title},r=u(s.Q_5.SYSTEM_MESSAGE,t);return r.textContent=JSON.stringify(e),r}let r=(0,l.d7)(e,"code-chat-manual-edit");if(r){let e={type:"manual_edit",plainText:"",changedFiles:r.changedFiles},o=u(s.Q_5.SYSTEM_MESSAGE,t);return o.textContent=JSON.stringify(e),o}let n=(0,l.d7)(e,"code-chat-duplicated-file");if(n){let e={type:"duplicated_file",plainText:n.plainText,fileKeyHash:n.fileKeyHash},o=u(s.Q_5.SYSTEM_MESSAGE,t);return o.textContent=JSON.stringify(e),o}let i=(0,l.d7)(e,"code-chat-deleted-chat-history");if(i){let e={type:"deleted_chat_history",plainText:"",userId:i.userId,timestamp:Number(i.timestamp)},o=u(s.Q_5.SYSTEM_MESSAGE,t);return o.textContent=JSON.stringify(e),o}}(e,t);if(o)return o;let r={plainText:"",imports:[]};for(let t of e.content)switch(t.type){case"text":r.plainText=t.text;break;case"selected-node-ids":break;case"code-chat-model-config-version":r.modelConfigVersion=t.modelConfigVersion;break;case"code-chat-library-keys":r.libraryKey=t.libraryKeys[0],r.libraryKeys=[...t.libraryKeys];break;case"code-chat-errors":r.errors=[...t.errors],r.hidden=!0,r.plainText="";break;case"cortex-request-uuid":r.requestUuid=t.requestUuid;break;case"code-chat-origin":r.origin=t.origin;break;case"code-chat-inspected-component":r.inspectedComponent={filePath:t.filePath,tagName:t.tagName};break;case"code-chat-inspected-library":r.inspectedLibrary={folderPath:t.folderPath,libraryName:t.libraryName};break;case"code-chat-snapshot-restore":case"code-chat-manual-edit":case"code-chat-duplicated-file":case"code-chat-deleted-chat-history":throw new a.I(`${t.type} should have been handled by maybeHandleNodeChatSystemMessage. Probably a bug`);case"code-chat-code-import-ref":case"code-chat-image-import-ref":case"code-chat-diff-import-ref":case"code-chat-inspected-element-ref":console.warn(`[chat-sdk] Part not implemented: ${t.type}`);break;case"image":case"jsx":throw new a.I(`Make does not support message part with type ${t.type}`);default:(0,c.vE)(t)}let i=u(s.Q_5.USER_MESSAGE,t);return i.textContent=(0,n.Gl)(r),i}case"assistant":{let o=[],r=[],i={plainText:""};for(let t of e.content)switch(t.type){case"text":throw new a.I("Cannot use 'text' for Code Chat assistant messages. Use 'code-chat-assistant-text' instead.");case"tool-call":o.push({toolCallId:t.toolCallId,toolName:t.toolName,argsJson:t.argsJSON});break;case"code-chat-legacy-assistant-tool-result":{let{type:e,...o}=t;r.push({...o});break}case"reasoning":t.signature?i.signedReasoning={text:t.text,signature:t.signature}:i.reasoning=[{text:t.text}];break;case"redacted-reasoning":i.redactedReasoning=t.data;break;case"code-chat-model-config-version":i.modelConfigVersion=t.modelConfigVersion;break;case"code-chat-assistant-text":i.plainText=t.text,i.mode=t.textMode;break;case"code-chat-assistant-code":case"code-chat-provider-metadata":console.warn(`[chat-sdk] Part not implemented: ${t.type}`);break;case"code-chat-assistant-title":i.title=t.title;break;case"code-chat-legacy-s3-code-snapshot":{let e=i.codeSnapshot??{};i.codeSnapshot={...e,codeSnapshotKey:t.codeSnapshotKey,fileVersionId:"-1"};break}case"code-chat-code-snapshot":{let e=i.codeSnapshot??{};i.codeSnapshot={...e,blobstoreContentKey:t.blobstoreContentKey,fileVersionId:"-1"};break}default:(0,c.vE)(t)}let l=u(s.Q_5.ASSISTANT_MESSAGE,t);return l.textContent=(0,n.Gl)(i),l.toolCalls=o,l.toolResults=r,l}case"tool":{let o=[],r={plainText:""};for(let t of e.content)switch(t.type){case"tool-result":o.push({toolCallId:t.toolCallId,toolName:t.toolName,resultJson:t.resultJSON});break;case"code-chat-model-config-version":r.modelConfigVersion=t.modelConfigVersion;break;case"tool-result-ref":console.warn(`[chat-sdk] Part not implemented: ${t.type}`);break;default:(0,c.vE)(t)}let i=u(s.Q_5.TOOL_MESSAGE,t);return i.textContent=(0,n.Gl)(r),i.toolResults=o,i}case"system":throw new a.I("Chat SDK does not store system messages in the database (yet), we should never get here");default:(0,c.vE)(e)}}function u(e,t){let o=(0,n.vg)(e,t.userId??"placeholderUserId",()=>"placeholderMessageGuid");return void 0!==t.messageGuid&&(o.id=t.messageGuid),o.sentAt64=t.scenegraphSentAt??t.createdAtMs.toString(),o}var p=o(363240),f=o(983166),g=o(997535),h=o(154761),m=o(105519),v=o(479929),y=o(50175);let k="null-hash",b=(0,v.o)({hash:k,messages:[]});function S(e){let t=(0,m.OU)((e,t)=>t?.chatMessagesHash??k,e),o=e?.guid||"",[i,a]=(0,p.KO)(b(o)),s=(0,p.oR)(),l=r.useMemo(()=>!!(e&&i.hash!==k),[i.hash,e]);r.useEffect(()=>{e&&t&&t!==i.hash&&a({hash:t,messages:e.chatMessages_DEPRECATED||[],pendingMessages:void 0})},[e,t,i.hash,a,o]);let c=r.useCallback(()=>{let e=s.get(b(o));return e.pendingMessages??e.messages??[]},[s,o]),d=r.useCallback(t=>{if(l&&e){let r=(0,n.j1)(t);(0,h.K)(()=>e.chatMessages_DEPRECATED=r);let i=s.get(b(o));s.set(b(o),{...i,pendingMessages:(0,n.j1)(t)})}},[l,e,s,o]),u=r.useCallback(t=>{l&&e&&d([...(0,n.j1)(c()),...t])},[d,c,l,e]),f=r.useCallback(t=>{l&&e&&d(t((0,n.j1)(c())))},[c,l,e,d]);return r.useMemo(()=>({getMessages:c,appendMessages:u,editMessages:f,isInitialized:l}),[c,u,f,l])}function O(e){return(0,p.Dv)(b(e)).hash!==k}let P=(0,v.o)({messages:[]}),N=(0,v.o)({messages:[]});function w(e){let t=function(e){let[t,o]=(0,p.KO)(P(e?.guid||"")),n=r.useRef({numberOfMessages:0,lastMessageUpdatedAt:new Date(0),lastMessageId:""}),i=((0,y.D)("make_chat_sdk_read")&&(0,y.D)("make_chat_sdk_read_pagination"))??!1,a=(0,y.D)("make_chat_sdk_read")&&e,{thread:s,subscriptionStatus:l}=(0,f.S_)({chatMessagesNode:e,disabled:!a}),{thread:c,subscriptionStatus:d}=(0,f.j6)({chatMessagesNode:e,disabled:!i}),u=i?c:s,h=i?"loaded"!==d:"loaded"!==l,m=r.useMemo(()=>!!(!a||u&&!h),[a,u,h]),v=r.useMemo(()=>i?[...c?.paginatedMessages??[]].reverse():s?.messages??[],[i,c,s]);r.useEffect(()=>{if(!m||!u)return;let e=v.length,t=v[e-1],r=t?.updatedAt??new Date(0),i=t?.id??"";if(e!==n.current.numberOfMessages||i!==n.current.lastMessageId||r.getTime()!==n.current.lastMessageUpdatedAt.getTime()){let t=v.map(f.N3);(0,g.Wv)("Updating local cache with AiChatMessages",{thread:u,aiChatMessages:t}),o({messages:t??[]}),n.current={numberOfMessages:e,lastMessageUpdatedAt:r,lastMessageId:i}}},[u,m,o,v]);let k=r.useCallback(()=>t.messages,[t.messages]),b=r.useCallback(e=>[],[]),S=r.useCallback(()=>{},[]),O=r.useMemo(()=>{if(!i||!c)return;let e=c.paginatedMessages;return{loadNextPage:t=>{(0,g.Wv)("Loading next page of messages",{count:t??50}),e.loadNext(t??50)},hasMore:e.hasNextPage(),isLoading:e.isLoadingNextPage,totalCount:void 0}},[i,c]);return r.useMemo(()=>({getMessages:k,editMessages:b,appendMessages:S,isInitialized:m,pagination:O}),[k,b,S,m,O])}(e),o=t.getMessages(),[n,i]=(0,p.KO)(N(e?.guid||"")),a=((0,y.D)("make_chat_sdk_read")&&(0,y.D)("make_chat_sdk_read_pagination"))??!1,s=r.useRef(!1);r.useEffect(()=>{0!==o.length&&(s.current=!0,Promise.all(o.map(async e=>await d(e))).then(e=>{(0,g.Wv)("Converted chat messages from AI SDK to NodeChatMessages",{messages:o,convertedMessages:e,paginationEnabled:a}),i({messages:e})}).catch(e=>{(0,g.Wv)("Error converting chat messages from AI SDK to NodeChatMessages",e),s.current=!1}))},[o,i,a]);let l=r.useMemo(()=>{let e=o.length===n.messages.length;return e&&(s.current=!1),e&&!s.current},[o.length,n.messages.length]),c=r.useCallback(()=>n.messages,[n.messages]),u=r.useCallback(e=>[],[]),h=r.useCallback(()=>{},[]),m=r.useMemo(()=>{if(t.pagination)return{...t.pagination,isLoading:t.pagination.isLoading||!l}},[t.pagination,l]);return r.useMemo(()=>({getMessages:c,editMessages:u,appendMessages:h,isInitialized:t.isInitialized,pagination:m}),[c,u,h,t.isInitialized,m])}function C(e){let t=e?.getMessages();return r.useMemo(()=>t?(0,i.Ib)((0,n.j1)(t)):[],[t])}},590317:function(e,t,o){o.d(t,{OZ:()=>l,Tj:()=>a,oZ:()=>s});var r,n=o(363240),i=o(834761),a=9793==o.j?((r=a||{}).LOADING_VIEW="loading",r.AUTH="auth",r.CREATE_PROJECT="create_project",r.CONNECT_TO_EXISTING_PROJECTS="connect_to_existing_projects",r.CONNECTED_PROJECT="connected_project",r.PENDING_PROJECT="pending_project",r.AUTH_EXPIRED="auth_expired",r):null;let s=(0,i.gI)(()=>(0,n.cn)("loading")),l=(0,i.gI)(()=>(0,n.cn)(null))},710162:function(e,t,o){o.d(t,{GV:()=>l,Ib:()=>s,ec:()=>c});var r=o(577774),n=o(641857);if(9793==o.j)var i=o(716774);var a=o(895996);function s(e){let t=(0,i.p)(e);return t?t.filter(e=>e.type!==n.Q_5.TOOL_MESSAGE).reduce((e,t)=>{let o=t.type===n.Q_5.ASSISTANT_MESSAGE,i=t.toolCalls.length>0,s=0===(0,r.jR)(t.textContent||"").plainText.length;if(o&&i&&s){let o=e[e.length-1];return o?.type===n.Q_5.ASSISTANT_MESSAGE&&(o.toolCalls=a([...o.toolCalls,...t.toolCalls],"toolCallId")),e}return[...e,t]},[]):[]}function l(e){let{hidden:t,errors:o}=e;return!!t&&!!o&&o.length>0&&e.origin!==r.rz.FIX_ERRORS_BUTTON}function c(e){let t=e.slice().reverse().find(e=>e.type===n.Q_5.USER_MESSAGE);return t?t.id:null}},997199:function(e,t,o){o.d(t,{h4:()=>s,w$:()=>i});var r=o(148799),n=o(31907);function i(e){return n.Q.includes(e)}function a(e,t){let o=(function(e){let t=n.k[e];if(null==t)throw new r.I(`Unknown message part type: ${e}. Did you add a new message part type to a proto file? Run \`pnpm --filter @figma/synapse-global generate-ai-chat-proto\` to regenerate Typescript bindings.`);return t})(e).decode(t);return{type:e,...o}}function s(e,t){try{return a(e,function(e){let t=atob(e),o=new Uint8Array(t.length);for(let e=0;e<t.length;e++)o[e]=t.charCodeAt(e);return o}(t))}catch(o){return a(e,function(e){let t=new Uint8Array(e.length/2);for(let o=0;o<e.length;o+=2){let r=e.slice(o,o+2);t[o/2]=parseInt(r,16)}return t}(t))}}},31907:function(e,t,o){o.d(t,{Q:()=>eV,k:()=>eB});var r=o(185018);function n(){return{selectedNodeIds:[]}}let i={encode(e,t=new r.Lt){for(let o of e.selectedNodeIds)t.uint32(10).string(o);return t},decode(e,t){let o=e instanceof r.oP?e:new r.oP(e),i=void 0===t?o.len:o.pos+t,a=n();for(;o.pos<i;){let e=o.uint32();switch(e>>>3){case 1:if(10!==e)break;a.selectedNodeIds.push(o.string());continue}if((7&e)==4||0===e)break;o.skip(7&e)}return a},fromJSON:e=>({selectedNodeIds:s.Array.isArray(e?.selectedNodeIds)?e.selectedNodeIds.map(e=>s.String(e)):[]}),toJSON(e){let t={};return e.selectedNodeIds?.length&&(t.selectedNodeIds=e.selectedNodeIds),t},create:e=>i.fromPartial(e??{}),fromPartial(e){let t=n();return t.selectedNodeIds=e.selectedNodeIds?.map(e=>e)||[],t}},a={encode:(e,t=new r.Lt)=>(""!==e.jsx&&t.uint32(10).string(e.jsx),t),decode(e,t){let o=e instanceof r.oP?e:new r.oP(e),n=void 0===t?o.len:o.pos+t,i={jsx:""};for(;o.pos<n;){let e=o.uint32();switch(e>>>3){case 1:if(10!==e)break;i.jsx=o.string();continue}if((7&e)==4||0===e)break;o.skip(7&e)}return i},fromJSON:e=>({jsx:null!=e.jsx?s.String(e.jsx):""}),toJSON(e){let t={};return""!==e.jsx&&(t.jsx=e.jsx),t},create:e=>a.fromPartial(e??{}),fromPartial(e){let t={jsx:""};return t.jsx=e.jsx??"",t}},s=(()=>{if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw"Unable to locate global object"})();function l(){return{text:"",providerOptions:{}}}let c={encode:(e,t=new r.Lt)=>(""!==e.text&&t.uint32(10).string(e.text),Object.entries(e.providerOptions).forEach(([e,o])=>{u.encode({key:e,value:o},t.uint32(18).fork()).join()}),t),decode(e,t){let o=e instanceof r.oP?e:new r.oP(e),n=void 0===t?o.len:o.pos+t,i=l();for(;o.pos<n;){let e=o.uint32();switch(e>>>3){case 1:if(10!==e)break;i.text=o.string();continue;case 2:{if(18!==e)break;let t=u.decode(o,o.uint32());void 0!==t.value&&(i.providerOptions[t.key]=t.value);continue}}if((7&e)==4||0===e)break;o.skip(7&e)}return i},fromJSON:e=>({text:ee(e.text)?Y.String(e.text):"",providerOptions:Z(e.providerOptions)?Object.entries(e.providerOptions).reduce((e,[t,o])=>(e[t]=String(o),e),{}):{}}),toJSON(e){let t={};if(""!==e.text&&(t.text=e.text),e.providerOptions){let o=Object.entries(e.providerOptions);o.length>0&&(t.providerOptions={},o.forEach(([e,o])=>{t.providerOptions[e]=o}))}return t},create:e=>c.fromPartial(e??{}),fromPartial(e){let t=l();return t.text=e.text??"",t.providerOptions=Object.entries(e.providerOptions??{}).reduce((e,[t,o])=>(void 0!==o&&(e[t]=Y.String(o)),e),{}),t}};function d(){return{key:"",value:""}}let u={encode:(e,t=new r.Lt)=>(""!==e.key&&t.uint32(10).string(e.key),""!==e.value&&t.uint32(18).string(e.value),t),decode(e,t){let o=e instanceof r.oP?e:new r.oP(e),n=void 0===t?o.len:o.pos+t,i=d();for(;o.pos<n;){let e=o.uint32();switch(e>>>3){case 1:if(10!==e)break;i.key=o.string();continue;case 2:if(18!==e)break;i.value=o.string();continue}if((7&e)==4||0===e)break;o.skip(7&e)}return i},fromJSON:e=>({key:ee(e.key)?Y.String(e.key):"",value:ee(e.value)?Y.String(e.value):""}),toJSON(e){let t={};return""!==e.key&&(t.key=e.key),""!==e.value&&(t.value=e.value),t},create:e=>u.fromPartial(e??{}),fromPartial(e){let t=d();return t.key=e.key??"",t.value=e.value??"",t}};function p(){return{textBlobstoreKey:"",providerOptions:{}}}let f={encode:(e,t=new r.Lt)=>(""!==e.textBlobstoreKey&&t.uint32(10).string(e.textBlobstoreKey),Object.entries(e.providerOptions).forEach(([e,o])=>{h.encode({key:e,value:o},t.uint32(18).fork()).join()}),t),decode(e,t){let o=e instanceof r.oP?e:new r.oP(e),n=void 0===t?o.len:o.pos+t,i=p();for(;o.pos<n;){let e=o.uint32();switch(e>>>3){case 1:if(10!==e)break;i.textBlobstoreKey=o.string();continue;case 2:{if(18!==e)break;let t=h.decode(o,o.uint32());void 0!==t.value&&(i.providerOptions[t.key]=t.value);continue}}if((7&e)==4||0===e)break;o.skip(7&e)}return i},fromJSON:e=>({textBlobstoreKey:ee(e.textBlobstoreKey)?Y.String(e.textBlobstoreKey):"",providerOptions:Z(e.providerOptions)?Object.entries(e.providerOptions).reduce((e,[t,o])=>(e[t]=String(o),e),{}):{}}),toJSON(e){let t={};if(""!==e.textBlobstoreKey&&(t.textBlobstoreKey=e.textBlobstoreKey),e.providerOptions){let o=Object.entries(e.providerOptions);o.length>0&&(t.providerOptions={},o.forEach(([e,o])=>{t.providerOptions[e]=o}))}return t},create:e=>f.fromPartial(e??{}),fromPartial(e){let t=p();return t.textBlobstoreKey=e.textBlobstoreKey??"",t.providerOptions=Object.entries(e.providerOptions??{}).reduce((e,[t,o])=>(void 0!==o&&(e[t]=Y.String(o)),e),{}),t}};function g(){return{key:"",value:""}}let h={encode:(e,t=new r.Lt)=>(""!==e.key&&t.uint32(10).string(e.key),""!==e.value&&t.uint32(18).string(e.value),t),decode(e,t){let o=e instanceof r.oP?e:new r.oP(e),n=void 0===t?o.len:o.pos+t,i=g();for(;o.pos<n;){let e=o.uint32();switch(e>>>3){case 1:if(10!==e)break;i.key=o.string();continue;case 2:if(18!==e)break;i.value=o.string();continue}if((7&e)==4||0===e)break;o.skip(7&e)}return i},fromJSON:e=>({key:ee(e.key)?Y.String(e.key):"",value:ee(e.value)?Y.String(e.value):""}),toJSON(e){let t={};return""!==e.key&&(t.key=e.key),""!==e.value&&(t.value=e.value),t},create:e=>h.fromPartial(e??{}),fromPartial(e){let t=g();return t.key=e.key??"",t.value=e.value??"",t}};function m(){return{mimeType:void 0,providerOptions:{}}}let v={encode:(e,t=new r.Lt)=>(void 0!==e.mimeType&&t.uint32(18).string(e.mimeType),Object.entries(e.providerOptions).forEach(([e,o])=>{k.encode({key:e,value:o},t.uint32(26).fork()).join()}),t),decode(e,t){let o=e instanceof r.oP?e:new r.oP(e),n=void 0===t?o.len:o.pos+t,i=m();for(;o.pos<n;){let e=o.uint32();switch(e>>>3){case 2:if(18!==e)break;i.mimeType=o.string();continue;case 3:{if(26!==e)break;let t=k.decode(o,o.uint32());void 0!==t.value&&(i.providerOptions[t.key]=t.value);continue}}if((7&e)==4||0===e)break;o.skip(7&e)}return i},fromJSON:e=>({mimeType:ee(e.mimeType)?Y.String(e.mimeType):void 0,providerOptions:Z(e.providerOptions)?Object.entries(e.providerOptions).reduce((e,[t,o])=>(e[t]=String(o),e),{}):{}}),toJSON(e){let t={};if(void 0!==e.mimeType&&(t.mimeType=e.mimeType),e.providerOptions){let o=Object.entries(e.providerOptions);o.length>0&&(t.providerOptions={},o.forEach(([e,o])=>{t.providerOptions[e]=o}))}return t},create:e=>v.fromPartial(e??{}),fromPartial(e){let t=m();return t.mimeType=e.mimeType??void 0,t.providerOptions=Object.entries(e.providerOptions??{}).reduce((e,[t,o])=>(void 0!==o&&(e[t]=Y.String(o)),e),{}),t}};function y(){return{key:"",value:""}}let k={encode:(e,t=new r.Lt)=>(""!==e.key&&t.uint32(10).string(e.key),""!==e.value&&t.uint32(18).string(e.value),t),decode(e,t){let o=e instanceof r.oP?e:new r.oP(e),n=void 0===t?o.len:o.pos+t,i=y();for(;o.pos<n;){let e=o.uint32();switch(e>>>3){case 1:if(10!==e)break;i.key=o.string();continue;case 2:if(18!==e)break;i.value=o.string();continue}if((7&e)==4||0===e)break;o.skip(7&e)}return i},fromJSON:e=>({key:ee(e.key)?Y.String(e.key):"",value:ee(e.value)?Y.String(e.value):""}),toJSON(e){let t={};return""!==e.key&&(t.key=e.key),""!==e.value&&(t.value=e.value),t},create:e=>k.fromPartial(e??{}),fromPartial(e){let t=y();return t.key=e.key??"",t.value=e.value??"",t}};function b(){return{text:"",signature:void 0,providerOptions:{}}}let S={encode:(e,t=new r.Lt)=>(""!==e.text&&t.uint32(10).string(e.text),void 0!==e.signature&&t.uint32(18).string(e.signature),Object.entries(e.providerOptions).forEach(([e,o])=>{P.encode({key:e,value:o},t.uint32(26).fork()).join()}),t),decode(e,t){let o=e instanceof r.oP?e:new r.oP(e),n=void 0===t?o.len:o.pos+t,i=b();for(;o.pos<n;){let e=o.uint32();switch(e>>>3){case 1:if(10!==e)break;i.text=o.string();continue;case 2:if(18!==e)break;i.signature=o.string();continue;case 3:{if(26!==e)break;let t=P.decode(o,o.uint32());void 0!==t.value&&(i.providerOptions[t.key]=t.value);continue}}if((7&e)==4||0===e)break;o.skip(7&e)}return i},fromJSON:e=>({text:ee(e.text)?Y.String(e.text):"",signature:ee(e.signature)?Y.String(e.signature):void 0,providerOptions:Z(e.providerOptions)?Object.entries(e.providerOptions).reduce((e,[t,o])=>(e[t]=String(o),e),{}):{}}),toJSON(e){let t={};if(""!==e.text&&(t.text=e.text),void 0!==e.signature&&(t.signature=e.signature),e.providerOptions){let o=Object.entries(e.providerOptions);o.length>0&&(t.providerOptions={},o.forEach(([e,o])=>{t.providerOptions[e]=o}))}return t},create:e=>S.fromPartial(e??{}),fromPartial(e){let t=b();return t.text=e.text??"",t.signature=e.signature??void 0,t.providerOptions=Object.entries(e.providerOptions??{}).reduce((e,[t,o])=>(void 0!==o&&(e[t]=Y.String(o)),e),{}),t}};function O(){return{key:"",value:""}}let P={encode:(e,t=new r.Lt)=>(""!==e.key&&t.uint32(10).string(e.key),""!==e.value&&t.uint32(18).string(e.value),t),decode(e,t){let o=e instanceof r.oP?e:new r.oP(e),n=void 0===t?o.len:o.pos+t,i=O();for(;o.pos<n;){let e=o.uint32();switch(e>>>3){case 1:if(10!==e)break;i.key=o.string();continue;case 2:if(18!==e)break;i.value=o.string();continue}if((7&e)==4||0===e)break;o.skip(7&e)}return i},fromJSON:e=>({key:ee(e.key)?Y.String(e.key):"",value:ee(e.value)?Y.String(e.value):""}),toJSON(e){let t={};return""!==e.key&&(t.key=e.key),""!==e.value&&(t.value=e.value),t},create:e=>P.fromPartial(e??{}),fromPartial(e){let t=O();return t.key=e.key??"",t.value=e.value??"",t}};function N(){return{providerOptions:{}}}let w={encode:(e,t=new r.Lt)=>(Object.entries(e.providerOptions).forEach(([e,o])=>{J.encode({key:e,value:o},t.uint32(18).fork()).join()}),t),decode(e,t){let o=e instanceof r.oP?e:new r.oP(e),n=void 0===t?o.len:o.pos+t,i=N();for(;o.pos<n;){let e=o.uint32();switch(e>>>3){case 2:{if(18!==e)break;let t=J.decode(o,o.uint32());void 0!==t.value&&(i.providerOptions[t.key]=t.value);continue}}if((7&e)==4||0===e)break;o.skip(7&e)}return i},fromJSON:e=>({providerOptions:Z(e.providerOptions)?Object.entries(e.providerOptions).reduce((e,[t,o])=>(e[t]=String(o),e),{}):{}}),toJSON(e){let t={};if(e.providerOptions){let o=Object.entries(e.providerOptions);o.length>0&&(t.providerOptions={},o.forEach(([e,o])=>{t.providerOptions[e]=o}))}return t},create:e=>w.fromPartial(e??{}),fromPartial(e){let t=N();return t.providerOptions=Object.entries(e.providerOptions??{}).reduce((e,[t,o])=>(void 0!==o&&(e[t]=Y.String(o)),e),{}),t}};function C(){return{key:"",value:""}}let J={encode:(e,t=new r.Lt)=>(""!==e.key&&t.uint32(10).string(e.key),""!==e.value&&t.uint32(18).string(e.value),t),decode(e,t){let o=e instanceof r.oP?e:new r.oP(e),n=void 0===t?o.len:o.pos+t,i=C();for(;o.pos<n;){let e=o.uint32();switch(e>>>3){case 1:if(10!==e)break;i.key=o.string();continue;case 2:if(18!==e)break;i.value=o.string();continue}if((7&e)==4||0===e)break;o.skip(7&e)}return i},fromJSON:e=>({key:ee(e.key)?Y.String(e.key):"",value:ee(e.value)?Y.String(e.value):""}),toJSON(e){let t={};return""!==e.key&&(t.key=e.key),""!==e.value&&(t.value=e.value),t},create:e=>J.fromPartial(e??{}),fromPartial(e){let t=C();return t.key=e.key??"",t.value=e.value??"",t}};function I(){return{data:"",providerOptions:{}}}let x={encode:(e,t=new r.Lt)=>(""!==e.data&&t.uint32(10).string(e.data),Object.entries(e.providerOptions).forEach(([e,o])=>{K.encode({key:e,value:o},t.uint32(18).fork()).join()}),t),decode(e,t){let o=e instanceof r.oP?e:new r.oP(e),n=void 0===t?o.len:o.pos+t,i=I();for(;o.pos<n;){let e=o.uint32();switch(e>>>3){case 1:if(10!==e)break;i.data=o.string();continue;case 2:{if(18!==e)break;let t=K.decode(o,o.uint32());void 0!==t.value&&(i.providerOptions[t.key]=t.value);continue}}if((7&e)==4||0===e)break;o.skip(7&e)}return i},fromJSON:e=>({data:ee(e.data)?Y.String(e.data):"",providerOptions:Z(e.providerOptions)?Object.entries(e.providerOptions).reduce((e,[t,o])=>(e[t]=String(o),e),{}):{}}),toJSON(e){let t={};if(""!==e.data&&(t.data=e.data),e.providerOptions){let o=Object.entries(e.providerOptions);o.length>0&&(t.providerOptions={},o.forEach(([e,o])=>{t.providerOptions[e]=o}))}return t},create:e=>x.fromPartial(e??{}),fromPartial(e){let t=I();return t.data=e.data??"",t.providerOptions=Object.entries(e.providerOptions??{}).reduce((e,[t,o])=>(void 0!==o&&(e[t]=Y.String(o)),e),{}),t}};function E(){return{key:"",value:""}}let K={encode:(e,t=new r.Lt)=>(""!==e.key&&t.uint32(10).string(e.key),""!==e.value&&t.uint32(18).string(e.value),t),decode(e,t){let o=e instanceof r.oP?e:new r.oP(e),n=void 0===t?o.len:o.pos+t,i=E();for(;o.pos<n;){let e=o.uint32();switch(e>>>3){case 1:if(10!==e)break;i.key=o.string();continue;case 2:if(18!==e)break;i.value=o.string();continue}if((7&e)==4||0===e)break;o.skip(7&e)}return i},fromJSON:e=>({key:ee(e.key)?Y.String(e.key):"",value:ee(e.value)?Y.String(e.value):""}),toJSON(e){let t={};return""!==e.key&&(t.key=e.key),""!==e.value&&(t.value=e.value),t},create:e=>K.fromPartial(e??{}),fromPartial(e){let t=E();return t.key=e.key??"",t.value=e.value??"",t}};function j(){return{providerOptions:{}}}let T={encode:(e,t=new r.Lt)=>(Object.entries(e.providerOptions).forEach(([e,o])=>{L.encode({key:e,value:o},t.uint32(18).fork()).join()}),t),decode(e,t){let o=e instanceof r.oP?e:new r.oP(e),n=void 0===t?o.len:o.pos+t,i=j();for(;o.pos<n;){let e=o.uint32();switch(e>>>3){case 2:{if(18!==e)break;let t=L.decode(o,o.uint32());void 0!==t.value&&(i.providerOptions[t.key]=t.value);continue}}if((7&e)==4||0===e)break;o.skip(7&e)}return i},fromJSON:e=>({providerOptions:Z(e.providerOptions)?Object.entries(e.providerOptions).reduce((e,[t,o])=>(e[t]=String(o),e),{}):{}}),toJSON(e){let t={};if(e.providerOptions){let o=Object.entries(e.providerOptions);o.length>0&&(t.providerOptions={},o.forEach(([e,o])=>{t.providerOptions[e]=o}))}return t},create:e=>T.fromPartial(e??{}),fromPartial(e){let t=j();return t.providerOptions=Object.entries(e.providerOptions??{}).reduce((e,[t,o])=>(void 0!==o&&(e[t]=Y.String(o)),e),{}),t}};function M(){return{key:"",value:""}}let L={encode:(e,t=new r.Lt)=>(""!==e.key&&t.uint32(10).string(e.key),""!==e.value&&t.uint32(18).string(e.value),t),decode(e,t){let o=e instanceof r.oP?e:new r.oP(e),n=void 0===t?o.len:o.pos+t,i=M();for(;o.pos<n;){let e=o.uint32();switch(e>>>3){case 1:if(10!==e)break;i.key=o.string();continue;case 2:if(18!==e)break;i.value=o.string();continue}if((7&e)==4||0===e)break;o.skip(7&e)}return i},fromJSON:e=>({key:ee(e.key)?Y.String(e.key):"",value:ee(e.value)?Y.String(e.value):""}),toJSON(e){let t={};return""!==e.key&&(t.key=e.key),""!==e.value&&(t.value=e.value),t},create:e=>L.fromPartial(e??{}),fromPartial(e){let t=M();return t.key=e.key??"",t.value=e.value??"",t}};function _(){return{toolCallId:"",toolName:"",providerOptions:{}}}let A={encode:(e,t=new r.Lt)=>(""!==e.toolCallId&&t.uint32(10).string(e.toolCallId),""!==e.toolName&&t.uint32(18).string(e.toolName),Object.entries(e.providerOptions).forEach(([e,o])=>{D.encode({key:e,value:o},t.uint32(34).fork()).join()}),t),decode(e,t){let o=e instanceof r.oP?e:new r.oP(e),n=void 0===t?o.len:o.pos+t,i=_();for(;o.pos<n;){let e=o.uint32();switch(e>>>3){case 1:if(10!==e)break;i.toolCallId=o.string();continue;case 2:if(18!==e)break;i.toolName=o.string();continue;case 4:{if(34!==e)break;let t=D.decode(o,o.uint32());void 0!==t.value&&(i.providerOptions[t.key]=t.value);continue}}if((7&e)==4||0===e)break;o.skip(7&e)}return i},fromJSON:e=>({toolCallId:ee(e.toolCallId)?Y.String(e.toolCallId):"",toolName:ee(e.toolName)?Y.String(e.toolName):"",providerOptions:Z(e.providerOptions)?Object.entries(e.providerOptions).reduce((e,[t,o])=>(e[t]=String(o),e),{}):{}}),toJSON(e){let t={};if(""!==e.toolCallId&&(t.toolCallId=e.toolCallId),""!==e.toolName&&(t.toolName=e.toolName),e.providerOptions){let o=Object.entries(e.providerOptions);o.length>0&&(t.providerOptions={},o.forEach(([e,o])=>{t.providerOptions[e]=o}))}return t},create:e=>A.fromPartial(e??{}),fromPartial(e){let t=_();return t.toolCallId=e.toolCallId??"",t.toolName=e.toolName??"",t.providerOptions=Object.entries(e.providerOptions??{}).reduce((e,[t,o])=>(void 0!==o&&(e[t]=Y.String(o)),e),{}),t}};function U(){return{key:"",value:""}}let D={encode:(e,t=new r.Lt)=>(""!==e.key&&t.uint32(10).string(e.key),""!==e.value&&t.uint32(18).string(e.value),t),decode(e,t){let o=e instanceof r.oP?e:new r.oP(e),n=void 0===t?o.len:o.pos+t,i=U();for(;o.pos<n;){let e=o.uint32();switch(e>>>3){case 1:if(10!==e)break;i.key=o.string();continue;case 2:if(18!==e)break;i.value=o.string();continue}if((7&e)==4||0===e)break;o.skip(7&e)}return i},fromJSON:e=>({key:ee(e.key)?Y.String(e.key):"",value:ee(e.value)?Y.String(e.value):""}),toJSON(e){let t={};return""!==e.key&&(t.key=e.key),""!==e.value&&(t.value=e.value),t},create:e=>D.fromPartial(e??{}),fromPartial(e){let t=U();return t.key=e.key??"",t.value=e.value??"",t}};function R(){return{toolCallId:"",toolName:"",isError:void 0,providerOptions:{}}}let F={encode:(e,t=new r.Lt)=>(""!==e.toolCallId&&t.uint32(10).string(e.toolCallId),""!==e.toolName&&t.uint32(18).string(e.toolName),void 0!==e.isError&&t.uint32(32).bool(e.isError),Object.entries(e.providerOptions).forEach(([e,o])=>{G.encode({key:e,value:o},t.uint32(42).fork()).join()}),t),decode(e,t){let o=e instanceof r.oP?e:new r.oP(e),n=void 0===t?o.len:o.pos+t,i=R();for(;o.pos<n;){let e=o.uint32();switch(e>>>3){case 1:if(10!==e)break;i.toolCallId=o.string();continue;case 2:if(18!==e)break;i.toolName=o.string();continue;case 4:if(32!==e)break;i.isError=o.bool();continue;case 5:{if(42!==e)break;let t=G.decode(o,o.uint32());void 0!==t.value&&(i.providerOptions[t.key]=t.value);continue}}if((7&e)==4||0===e)break;o.skip(7&e)}return i},fromJSON:e=>({toolCallId:ee(e.toolCallId)?Y.String(e.toolCallId):"",toolName:ee(e.toolName)?Y.String(e.toolName):"",isError:ee(e.isError)?Y.Boolean(e.isError):void 0,providerOptions:Z(e.providerOptions)?Object.entries(e.providerOptions).reduce((e,[t,o])=>(e[t]=String(o),e),{}):{}}),toJSON(e){let t={};if(""!==e.toolCallId&&(t.toolCallId=e.toolCallId),""!==e.toolName&&(t.toolName=e.toolName),void 0!==e.isError&&(t.isError=e.isError),e.providerOptions){let o=Object.entries(e.providerOptions);o.length>0&&(t.providerOptions={},o.forEach(([e,o])=>{t.providerOptions[e]=o}))}return t},create:e=>F.fromPartial(e??{}),fromPartial(e){let t=R();return t.toolCallId=e.toolCallId??"",t.toolName=e.toolName??"",t.isError=e.isError??void 0,t.providerOptions=Object.entries(e.providerOptions??{}).reduce((e,[t,o])=>(void 0!==o&&(e[t]=Y.String(o)),e),{}),t}};function q(){return{key:"",value:""}}let G={encode:(e,t=new r.Lt)=>(""!==e.key&&t.uint32(10).string(e.key),""!==e.value&&t.uint32(18).string(e.value),t),decode(e,t){let o=e instanceof r.oP?e:new r.oP(e),n=void 0===t?o.len:o.pos+t,i=q();for(;o.pos<n;){let e=o.uint32();switch(e>>>3){case 1:if(10!==e)break;i.key=o.string();continue;case 2:if(18!==e)break;i.value=o.string();continue}if((7&e)==4||0===e)break;o.skip(7&e)}return i},fromJSON:e=>({key:ee(e.key)?Y.String(e.key):"",value:ee(e.value)?Y.String(e.value):""}),toJSON(e){let t={};return""!==e.key&&(t.key=e.key),""!==e.value&&(t.value=e.value),t},create:e=>G.fromPartial(e??{}),fromPartial(e){let t=q();return t.key=e.key??"",t.value=e.value??"",t}};function V(){return{toolCallId:"",toolName:"",argsJson:"",providerOptions:{}}}let B={encode:(e,t=new r.Lt)=>(""!==e.toolCallId&&t.uint32(10).string(e.toolCallId),""!==e.toolName&&t.uint32(18).string(e.toolName),""!==e.argsJson&&t.uint32(26).string(e.argsJson),Object.entries(e.providerOptions).forEach(([e,o])=>{H.encode({key:e,value:o},t.uint32(34).fork()).join()}),t),decode(e,t){let o=e instanceof r.oP?e:new r.oP(e),n=void 0===t?o.len:o.pos+t,i=V();for(;o.pos<n;){let e=o.uint32();switch(e>>>3){case 1:if(10!==e)break;i.toolCallId=o.string();continue;case 2:if(18!==e)break;i.toolName=o.string();continue;case 3:if(26!==e)break;i.argsJson=o.string();continue;case 4:{if(34!==e)break;let t=H.decode(o,o.uint32());void 0!==t.value&&(i.providerOptions[t.key]=t.value);continue}}if((7&e)==4||0===e)break;o.skip(7&e)}return i},fromJSON:e=>({toolCallId:ee(e.toolCallId)?Y.String(e.toolCallId):"",toolName:ee(e.toolName)?Y.String(e.toolName):"",argsJson:ee(e.argsJson)?Y.String(e.argsJson):"",providerOptions:Z(e.providerOptions)?Object.entries(e.providerOptions).reduce((e,[t,o])=>(e[t]=String(o),e),{}):{}}),toJSON(e){let t={};if(""!==e.toolCallId&&(t.toolCallId=e.toolCallId),""!==e.toolName&&(t.toolName=e.toolName),""!==e.argsJson&&(t.argsJson=e.argsJson),e.providerOptions){let o=Object.entries(e.providerOptions);o.length>0&&(t.providerOptions={},o.forEach(([e,o])=>{t.providerOptions[e]=o}))}return t},create:e=>B.fromPartial(e??{}),fromPartial(e){let t=V();return t.toolCallId=e.toolCallId??"",t.toolName=e.toolName??"",t.argsJson=e.argsJson??"",t.providerOptions=Object.entries(e.providerOptions??{}).reduce((e,[t,o])=>(void 0!==o&&(e[t]=Y.String(o)),e),{}),t}};function $(){return{key:"",value:""}}let H={encode:(e,t=new r.Lt)=>(""!==e.key&&t.uint32(10).string(e.key),""!==e.value&&t.uint32(18).string(e.value),t),decode(e,t){let o=e instanceof r.oP?e:new r.oP(e),n=void 0===t?o.len:o.pos+t,i=$();for(;o.pos<n;){let e=o.uint32();switch(e>>>3){case 1:if(10!==e)break;i.key=o.string();continue;case 2:if(18!==e)break;i.value=o.string();continue}if((7&e)==4||0===e)break;o.skip(7&e)}return i},fromJSON:e=>({key:ee(e.key)?Y.String(e.key):"",value:ee(e.value)?Y.String(e.value):""}),toJSON(e){let t={};return""!==e.key&&(t.key=e.key),""!==e.value&&(t.value=e.value),t},create:e=>H.fromPartial(e??{}),fromPartial(e){let t=$();return t.key=e.key??"",t.value=e.value??"",t}};function Q(){return{toolCallId:"",toolName:"",resultJson:"",isError:void 0,providerOptions:{}}}let z={encode:(e,t=new r.Lt)=>(""!==e.toolCallId&&t.uint32(10).string(e.toolCallId),""!==e.toolName&&t.uint32(18).string(e.toolName),""!==e.resultJson&&t.uint32(26).string(e.resultJson),void 0!==e.isError&&t.uint32(32).bool(e.isError),Object.entries(e.providerOptions).forEach(([e,o])=>{X.encode({key:e,value:o},t.uint32(42).fork()).join()}),t),decode(e,t){let o=e instanceof r.oP?e:new r.oP(e),n=void 0===t?o.len:o.pos+t,i=Q();for(;o.pos<n;){let e=o.uint32();switch(e>>>3){case 1:if(10!==e)break;i.toolCallId=o.string();continue;case 2:if(18!==e)break;i.toolName=o.string();continue;case 3:if(26!==e)break;i.resultJson=o.string();continue;case 4:if(32!==e)break;i.isError=o.bool();continue;case 5:{if(42!==e)break;let t=X.decode(o,o.uint32());void 0!==t.value&&(i.providerOptions[t.key]=t.value);continue}}if((7&e)==4||0===e)break;o.skip(7&e)}return i},fromJSON:e=>({toolCallId:ee(e.toolCallId)?Y.String(e.toolCallId):"",toolName:ee(e.toolName)?Y.String(e.toolName):"",resultJson:ee(e.resultJson)?Y.String(e.resultJson):"",isError:ee(e.isError)?Y.Boolean(e.isError):void 0,providerOptions:Z(e.providerOptions)?Object.entries(e.providerOptions).reduce((e,[t,o])=>(e[t]=String(o),e),{}):{}}),toJSON(e){let t={};if(""!==e.toolCallId&&(t.toolCallId=e.toolCallId),""!==e.toolName&&(t.toolName=e.toolName),""!==e.resultJson&&(t.resultJson=e.resultJson),void 0!==e.isError&&(t.isError=e.isError),e.providerOptions){let o=Object.entries(e.providerOptions);o.length>0&&(t.providerOptions={},o.forEach(([e,o])=>{t.providerOptions[e]=o}))}return t},create:e=>z.fromPartial(e??{}),fromPartial(e){let t=Q();return t.toolCallId=e.toolCallId??"",t.toolName=e.toolName??"",t.resultJson=e.resultJson??"",t.isError=e.isError??void 0,t.providerOptions=Object.entries(e.providerOptions??{}).reduce((e,[t,o])=>(void 0!==o&&(e[t]=Y.String(o)),e),{}),t}};function W(){return{key:"",value:""}}let X={encode:(e,t=new r.Lt)=>(""!==e.key&&t.uint32(10).string(e.key),""!==e.value&&t.uint32(18).string(e.value),t),decode(e,t){let o=e instanceof r.oP?e:new r.oP(e),n=void 0===t?o.len:o.pos+t,i=W();for(;o.pos<n;){let e=o.uint32();switch(e>>>3){case 1:if(10!==e)break;i.key=o.string();continue;case 2:if(18!==e)break;i.value=o.string();continue}if((7&e)==4||0===e)break;o.skip(7&e)}return i},fromJSON:e=>({key:ee(e.key)?Y.String(e.key):"",value:ee(e.value)?Y.String(e.value):""}),toJSON(e){let t={};return""!==e.key&&(t.key=e.key),""!==e.value&&(t.value=e.value),t},create:e=>X.fromPartial(e??{}),fromPartial(e){let t=W();return t.key=e.key??"",t.value=e.value??"",t}},Y=(()=>{if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw"Unable to locate global object"})();function Z(e){return"object"==typeof e&&null!==e}function ee(e){return null!=e}let et={encode:(e,t=new r.Lt)=>(""!==e.foo&&t.uint32(10).string(e.foo),t),decode(e,t){let o=e instanceof r.oP?e:new r.oP(e),n=void 0===t?o.len:o.pos+t,i={foo:""};for(;o.pos<n;){let e=o.uint32();switch(e>>>3){case 1:if(10!==e)break;i.foo=o.string();continue}if((7&e)==4||0===e)break;o.skip(7&e)}return i},fromJSON:e=>({foo:eG(e.foo)?eq.String(e.foo):""}),toJSON(e){let t={};return""!==e.foo&&(t.foo=e.foo),t},create:e=>et.fromPartial(e??{}),fromPartial(e){let t={foo:""};return t.foo=e.foo??"",t}};function eo(){return{requestUuid:""}}let er={encode:(e,t=new r.Lt)=>(""!==e.requestUuid&&t.uint32(10).string(e.requestUuid),t),decode(e,t){let o=e instanceof r.oP?e:new r.oP(e),n=void 0===t?o.len:o.pos+t,i=eo();for(;o.pos<n;){let e=o.uint32();switch(e>>>3){case 1:if(10!==e)break;i.requestUuid=o.string();continue}if((7&e)==4||0===e)break;o.skip(7&e)}return i},fromJSON:e=>({requestUuid:eG(e.requestUuid)?eq.String(e.requestUuid):""}),toJSON(e){let t={};return""!==e.requestUuid&&(t.requestUuid=e.requestUuid),t},create:e=>er.fromPartial(e??{}),fromPartial(e){let t=eo();return t.requestUuid=e.requestUuid??"",t}};function en(){return{text:"",textMode:""}}let ei={encode:(e,t=new r.Lt)=>(""!==e.text&&t.uint32(10).string(e.text),""!==e.textMode&&t.uint32(18).string(e.textMode),t),decode(e,t){let o=e instanceof r.oP?e:new r.oP(e),n=void 0===t?o.len:o.pos+t,i=en();for(;o.pos<n;){let e=o.uint32();switch(e>>>3){case 1:if(10!==e)break;i.text=o.string();continue;case 2:if(18!==e)break;i.textMode=o.string();continue}if((7&e)==4||0===e)break;o.skip(7&e)}return i},fromJSON:e=>({text:eG(e.text)?eq.String(e.text):"",textMode:eG(e.textMode)?eq.String(e.textMode):""}),toJSON(e){let t={};return""!==e.text&&(t.text=e.text),""!==e.textMode&&(t.textMode=e.textMode),t},create:e=>ei.fromPartial(e??{}),fromPartial(e){let t=en();return t.text=e.text??"",t.textMode=e.textMode??"",t}};function ea(){return{code:"",codeFilePath:""}}let es={encode:(e,t=new r.Lt)=>(""!==e.code&&t.uint32(10).string(e.code),""!==e.codeFilePath&&t.uint32(18).string(e.codeFilePath),t),decode(e,t){let o=e instanceof r.oP?e:new r.oP(e),n=void 0===t?o.len:o.pos+t,i=ea();for(;o.pos<n;){let e=o.uint32();switch(e>>>3){case 1:if(10!==e)break;i.code=o.string();continue;case 2:if(18!==e)break;i.codeFilePath=o.string();continue}if((7&e)==4||0===e)break;o.skip(7&e)}return i},fromJSON:e=>({code:eG(e.code)?eq.String(e.code):"",codeFilePath:eG(e.codeFilePath)?eq.String(e.codeFilePath):""}),toJSON(e){let t={};return""!==e.code&&(t.code=e.code),""!==e.codeFilePath&&(t.codeFilePath=e.codeFilePath),t},create:e=>es.fromPartial(e??{}),fromPartial(e){let t=ea();return t.code=e.code??"",t.codeFilePath=e.codeFilePath??"",t}};function el(){return{modelConfigVersion:""}}let ec={encode:(e,t=new r.Lt)=>(""!==e.modelConfigVersion&&t.uint32(10).string(e.modelConfigVersion),t),decode(e,t){let o=e instanceof r.oP?e:new r.oP(e),n=void 0===t?o.len:o.pos+t,i=el();for(;o.pos<n;){let e=o.uint32();switch(e>>>3){case 1:if(10!==e)break;i.modelConfigVersion=o.string();continue}if((7&e)==4||0===e)break;o.skip(7&e)}return i},fromJSON:e=>({modelConfigVersion:eG(e.modelConfigVersion)?eq.String(e.modelConfigVersion):""}),toJSON(e){let t={};return""!==e.modelConfigVersion&&(t.modelConfigVersion=e.modelConfigVersion),t},create:e=>ec.fromPartial(e??{}),fromPartial(e){let t=el();return t.modelConfigVersion=e.modelConfigVersion??"",t}};function ed(){return{title:""}}let eu={encode:(e,t=new r.Lt)=>(""!==e.title&&t.uint32(10).string(e.title),t),decode(e,t){let o=e instanceof r.oP?e:new r.oP(e),n=void 0===t?o.len:o.pos+t,i=ed();for(;o.pos<n;){let e=o.uint32();switch(e>>>3){case 1:if(10!==e)break;i.title=o.string();continue}if((7&e)==4||0===e)break;o.skip(7&e)}return i},fromJSON:e=>({title:eG(e.title)?eq.String(e.title):""}),toJSON(e){let t={};return""!==e.title&&(t.title=e.title),t},create:e=>eu.fromPartial(e??{}),fromPartial(e){let t=ed();return t.title=e.title??"",t}};function ep(){return{providerMetadataJson:""}}let ef={encode:(e,t=new r.Lt)=>(""!==e.providerMetadataJson&&t.uint32(10).string(e.providerMetadataJson),t),decode(e,t){let o=e instanceof r.oP?e:new r.oP(e),n=void 0===t?o.len:o.pos+t,i=ep();for(;o.pos<n;){let e=o.uint32();switch(e>>>3){case 1:if(10!==e)break;i.providerMetadataJson=o.string();continue}if((7&e)==4||0===e)break;o.skip(7&e)}return i},fromJSON:e=>({providerMetadataJson:eG(e.providerMetadataJson)?eq.String(e.providerMetadataJson):""}),toJSON(e){let t={};return""!==e.providerMetadataJson&&(t.providerMetadataJson=e.providerMetadataJson),t},create:e=>ef.fromPartial(e??{}),fromPartial(e){let t=ep();return t.providerMetadataJson=e.providerMetadataJson??"",t}},eg={encode:(e,t=new r.Lt)=>t,decode(e,t){let o=e instanceof r.oP?e:new r.oP(e),n=void 0===t?o.len:o.pos+t;for(;o.pos<n;){let e=o.uint32();if((7&e)==4||0===e)break;o.skip(7&e)}return{}},fromJSON:e=>({}),toJSON:e=>({}),create:e=>eg.fromPartial(e??{}),fromPartial:e=>({})},eh={encode:(e,t=new r.Lt)=>t,decode(e,t){let o=e instanceof r.oP?e:new r.oP(e),n=void 0===t?o.len:o.pos+t;for(;o.pos<n;){let e=o.uint32();if((7&e)==4||0===e)break;o.skip(7&e)}return{}},fromJSON:e=>({}),toJSON:e=>({}),create:e=>eh.fromPartial(e??{}),fromPartial:e=>({})},em={encode:(e,t=new r.Lt)=>t,decode(e,t){let o=e instanceof r.oP?e:new r.oP(e),n=void 0===t?o.len:o.pos+t;for(;o.pos<n;){let e=o.uint32();if((7&e)==4||0===e)break;o.skip(7&e)}return{}},fromJSON:e=>({}),toJSON:e=>({}),create:e=>em.fromPartial(e??{}),fromPartial:e=>({})};function ev(){return{codeSnapshotKey:""}}let ey={encode:(e,t=new r.Lt)=>(""!==e.codeSnapshotKey&&t.uint32(10).string(e.codeSnapshotKey),t),decode(e,t){let o=e instanceof r.oP?e:new r.oP(e),n=void 0===t?o.len:o.pos+t,i=ev();for(;o.pos<n;){let e=o.uint32();switch(e>>>3){case 1:if(10!==e)break;i.codeSnapshotKey=o.string();continue}if((7&e)==4||0===e)break;o.skip(7&e)}return i},fromJSON:e=>({codeSnapshotKey:eG(e.codeSnapshotKey)?eq.String(e.codeSnapshotKey):""}),toJSON(e){let t={};return""!==e.codeSnapshotKey&&(t.codeSnapshotKey=e.codeSnapshotKey),t},create:e=>ey.fromPartial(e??{}),fromPartial(e){let t=ev();return t.codeSnapshotKey=e.codeSnapshotKey??"",t}},ek={encode:(e,t=new r.Lt)=>t,decode(e,t){let o=e instanceof r.oP?e:new r.oP(e),n=void 0===t?o.len:o.pos+t;for(;o.pos<n;){let e=o.uint32();if((7&e)==4||0===e)break;o.skip(7&e)}return{}},fromJSON:e=>({}),toJSON:e=>({}),create:e=>ek.fromPartial(e??{}),fromPartial:e=>({})};function eb(){return{errors:[]}}let eS={encode(e,t=new r.Lt){for(let o of e.errors)t.uint32(10).string(o);return t},decode(e,t){let o=e instanceof r.oP?e:new r.oP(e),n=void 0===t?o.len:o.pos+t,i=eb();for(;o.pos<n;){let e=o.uint32();switch(e>>>3){case 1:if(10!==e)break;i.errors.push(o.string());continue}if((7&e)==4||0===e)break;o.skip(7&e)}return i},fromJSON:e=>({errors:eq.Array.isArray(e?.errors)?e.errors.map(e=>eq.String(e)):[]}),toJSON(e){let t={};return e.errors?.length&&(t.errors=e.errors),t},create:e=>eS.fromPartial(e??{}),fromPartial(e){let t=eb();return t.errors=e.errors?.map(e=>e)||[],t}};function eO(){return{libraryKeys:[]}}let eP={encode(e,t=new r.Lt){for(let o of e.libraryKeys)t.uint32(10).string(o);return t},decode(e,t){let o=e instanceof r.oP?e:new r.oP(e),n=void 0===t?o.len:o.pos+t,i=eO();for(;o.pos<n;){let e=o.uint32();switch(e>>>3){case 1:if(10!==e)break;i.libraryKeys.push(o.string());continue}if((7&e)==4||0===e)break;o.skip(7&e)}return i},fromJSON:e=>({libraryKeys:eq.Array.isArray(e?.libraryKeys)?e.libraryKeys.map(e=>eq.String(e)):[]}),toJSON(e){let t={};return e.libraryKeys?.length&&(t.libraryKeys=e.libraryKeys),t},create:e=>eP.fromPartial(e??{}),fromPartial(e){let t=eO();return t.libraryKeys=e.libraryKeys?.map(e=>e)||[],t}};function eN(){return{filePath:"",snippetStartLine:0,tagLine:0,tagName:""}}let ew={encode:(e,t=new r.Lt)=>(""!==e.filePath&&t.uint32(10).string(e.filePath),0!==e.snippetStartLine&&t.uint32(16).int32(e.snippetStartLine),0!==e.tagLine&&t.uint32(24).int32(e.tagLine),""!==e.tagName&&t.uint32(34).string(e.tagName),t),decode(e,t){let o=e instanceof r.oP?e:new r.oP(e),n=void 0===t?o.len:o.pos+t,i=eN();for(;o.pos<n;){let e=o.uint32();switch(e>>>3){case 1:if(10!==e)break;i.filePath=o.string();continue;case 2:if(16!==e)break;i.snippetStartLine=o.int32();continue;case 3:if(24!==e)break;i.tagLine=o.int32();continue;case 4:if(34!==e)break;i.tagName=o.string();continue}if((7&e)==4||0===e)break;o.skip(7&e)}return i},fromJSON:e=>({filePath:eG(e.filePath)?eq.String(e.filePath):"",snippetStartLine:eG(e.snippetStartLine)?eq.Number(e.snippetStartLine):0,tagLine:eG(e.tagLine)?eq.Number(e.tagLine):0,tagName:eG(e.tagName)?eq.String(e.tagName):""}),toJSON(e){let t={};return""!==e.filePath&&(t.filePath=e.filePath),0!==e.snippetStartLine&&(t.snippetStartLine=Math.round(e.snippetStartLine)),0!==e.tagLine&&(t.tagLine=Math.round(e.tagLine)),""!==e.tagName&&(t.tagName=e.tagName),t},create:e=>ew.fromPartial(e??{}),fromPartial(e){let t=eN();return t.filePath=e.filePath??"",t.snippetStartLine=e.snippetStartLine??0,t.tagLine=e.tagLine??0,t.tagName=e.tagName??"",t}};function eC(){return{filePath:"",tagName:""}}let eJ={encode:(e,t=new r.Lt)=>(""!==e.filePath&&t.uint32(10).string(e.filePath),""!==e.tagName&&t.uint32(18).string(e.tagName),t),decode(e,t){let o=e instanceof r.oP?e:new r.oP(e),n=void 0===t?o.len:o.pos+t,i=eC();for(;o.pos<n;){let e=o.uint32();switch(e>>>3){case 1:if(10!==e)break;i.filePath=o.string();continue;case 2:if(18!==e)break;i.tagName=o.string();continue}if((7&e)==4||0===e)break;o.skip(7&e)}return i},fromJSON:e=>({filePath:eG(e.filePath)?eq.String(e.filePath):"",tagName:eG(e.tagName)?eq.String(e.tagName):""}),toJSON(e){let t={};return""!==e.filePath&&(t.filePath=e.filePath),""!==e.tagName&&(t.tagName=e.tagName),t},create:e=>eJ.fromPartial(e??{}),fromPartial(e){let t=eC();return t.filePath=e.filePath??"",t.tagName=e.tagName??"",t}};function eI(){return{folderPath:"",libraryName:void 0}}let ex={encode:(e,t=new r.Lt)=>(""!==e.folderPath&&t.uint32(10).string(e.folderPath),void 0!==e.libraryName&&t.uint32(18).string(e.libraryName),t),decode(e,t){let o=e instanceof r.oP?e:new r.oP(e),n=void 0===t?o.len:o.pos+t,i=eI();for(;o.pos<n;){let e=o.uint32();switch(e>>>3){case 1:if(10!==e)break;i.folderPath=o.string();continue;case 2:if(18!==e)break;i.libraryName=o.string();continue}if((7&e)==4||0===e)break;o.skip(7&e)}return i},fromJSON:e=>({folderPath:eG(e.folderPath)?eq.String(e.folderPath):"",libraryName:eG(e.libraryName)?eq.String(e.libraryName):void 0}),toJSON(e){let t={};return""!==e.folderPath&&(t.folderPath=e.folderPath),void 0!==e.libraryName&&(t.libraryName=e.libraryName),t},create:e=>ex.fromPartial(e??{}),fromPartial(e){let t=eI();return t.folderPath=e.folderPath??"",t.libraryName=e.libraryName??void 0,t}};function eE(){return{origin:""}}let eK={encode:(e,t=new r.Lt)=>(""!==e.origin&&t.uint32(10).string(e.origin),t),decode(e,t){let o=e instanceof r.oP?e:new r.oP(e),n=void 0===t?o.len:o.pos+t,i=eE();for(;o.pos<n;){let e=o.uint32();switch(e>>>3){case 1:if(10!==e)break;i.origin=o.string();continue}if((7&e)==4||0===e)break;o.skip(7&e)}return i},fromJSON:e=>({origin:eG(e.origin)?eq.String(e.origin):""}),toJSON(e){let t={};return""!==e.origin&&(t.origin=e.origin),t},create:e=>eK.fromPartial(e??{}),fromPartial(e){let t=eE();return t.origin=e.origin??"",t}};function ej(){return{toolCallId:"",toolName:"",resultJson:""}}let eT={encode:(e,t=new r.Lt)=>(""!==e.toolCallId&&t.uint32(10).string(e.toolCallId),""!==e.toolName&&t.uint32(18).string(e.toolName),""!==e.resultJson&&t.uint32(26).string(e.resultJson),t),decode(e,t){let o=e instanceof r.oP?e:new r.oP(e),n=void 0===t?o.len:o.pos+t,i=ej();for(;o.pos<n;){let e=o.uint32();switch(e>>>3){case 1:if(10!==e)break;i.toolCallId=o.string();continue;case 2:if(18!==e)break;i.toolName=o.string();continue;case 3:if(26!==e)break;i.resultJson=o.string();continue}if((7&e)==4||0===e)break;o.skip(7&e)}return i},fromJSON:e=>({toolCallId:eG(e.toolCallId)?eq.String(e.toolCallId):"",toolName:eG(e.toolName)?eq.String(e.toolName):"",resultJson:eG(e.resultJson)?eq.String(e.resultJson):""}),toJSON(e){let t={};return""!==e.toolCallId&&(t.toolCallId=e.toolCallId),""!==e.toolName&&(t.toolName=e.toolName),""!==e.resultJson&&(t.resultJson=e.resultJson),t},create:e=>eT.fromPartial(e??{}),fromPartial(e){let t=ej();return t.toolCallId=e.toolCallId??"",t.toolName=e.toolName??"",t.resultJson=e.resultJson??"",t}};function eM(){return{changedFilesJson:"",title:"",legacyS3CodeSnapshotKey:void 0}}let eL={encode:(e,t=new r.Lt)=>(""!==e.changedFilesJson&&t.uint32(10).string(e.changedFilesJson),""!==e.title&&t.uint32(18).string(e.title),void 0!==e.legacyS3CodeSnapshotKey&&t.uint32(26).string(e.legacyS3CodeSnapshotKey),t),decode(e,t){let o=e instanceof r.oP?e:new r.oP(e),n=void 0===t?o.len:o.pos+t,i=eM();for(;o.pos<n;){let e=o.uint32();switch(e>>>3){case 1:if(10!==e)break;i.changedFilesJson=o.string();continue;case 2:if(18!==e)break;i.title=o.string();continue;case 3:if(26!==e)break;i.legacyS3CodeSnapshotKey=o.string();continue}if((7&e)==4||0===e)break;o.skip(7&e)}return i},fromJSON:e=>({changedFilesJson:eG(e.changedFilesJson)?eq.String(e.changedFilesJson):"",title:eG(e.title)?eq.String(e.title):"",legacyS3CodeSnapshotKey:eG(e.legacyS3CodeSnapshotKey)?eq.String(e.legacyS3CodeSnapshotKey):void 0}),toJSON(e){let t={};return""!==e.changedFilesJson&&(t.changedFilesJson=e.changedFilesJson),""!==e.title&&(t.title=e.title),void 0!==e.legacyS3CodeSnapshotKey&&(t.legacyS3CodeSnapshotKey=e.legacyS3CodeSnapshotKey),t},create:e=>eL.fromPartial(e??{}),fromPartial(e){let t=eM();return t.changedFilesJson=e.changedFilesJson??"",t.title=e.title??"",t.legacyS3CodeSnapshotKey=e.legacyS3CodeSnapshotKey??void 0,t}};function e_(){return{plainText:"",fileKeyHash:""}}let eA={encode:(e,t=new r.Lt)=>(""!==e.plainText&&t.uint32(10).string(e.plainText),""!==e.fileKeyHash&&t.uint32(18).string(e.fileKeyHash),t),decode(e,t){let o=e instanceof r.oP?e:new r.oP(e),n=void 0===t?o.len:o.pos+t,i=e_();for(;o.pos<n;){let e=o.uint32();switch(e>>>3){case 1:if(10!==e)break;i.plainText=o.string();continue;case 2:if(18!==e)break;i.fileKeyHash=o.string();continue}if((7&e)==4||0===e)break;o.skip(7&e)}return i},fromJSON:e=>({plainText:eG(e.plainText)?eq.String(e.plainText):"",fileKeyHash:eG(e.fileKeyHash)?eq.String(e.fileKeyHash):""}),toJSON(e){let t={};return""!==e.plainText&&(t.plainText=e.plainText),""!==e.fileKeyHash&&(t.fileKeyHash=e.fileKeyHash),t},create:e=>eA.fromPartial(e??{}),fromPartial(e){let t=e_();return t.plainText=e.plainText??"",t.fileKeyHash=e.fileKeyHash??"",t}};function eU(){return{userId:"",timestamp:""}}let eD={encode:(e,t=new r.Lt)=>(""!==e.userId&&t.uint32(10).string(e.userId),""!==e.timestamp&&t.uint32(18).string(e.timestamp),t),decode(e,t){let o=e instanceof r.oP?e:new r.oP(e),n=void 0===t?o.len:o.pos+t,i=eU();for(;o.pos<n;){let e=o.uint32();switch(e>>>3){case 1:if(10!==e)break;i.userId=o.string();continue;case 2:if(18!==e)break;i.timestamp=o.string();continue}if((7&e)==4||0===e)break;o.skip(7&e)}return i},fromJSON:e=>({userId:eG(e.userId)?eq.String(e.userId):"",timestamp:eG(e.timestamp)?eq.String(e.timestamp):""}),toJSON(e){let t={};return""!==e.userId&&(t.userId=e.userId),""!==e.timestamp&&(t.timestamp=e.timestamp),t},create:e=>eD.fromPartial(e??{}),fromPartial(e){let t=eU();return t.userId=e.userId??"",t.timestamp=e.timestamp??"",t}};function eR(){return{title:"",legacyS3CodeSnapshotKey:void 0,blobstoreContentKey:void 0}}let eF={encode:(e,t=new r.Lt)=>(""!==e.title&&t.uint32(10).string(e.title),void 0!==e.legacyS3CodeSnapshotKey&&t.uint32(18).string(e.legacyS3CodeSnapshotKey),void 0!==e.blobstoreContentKey&&t.uint32(26).string(e.blobstoreContentKey),t),decode(e,t){let o=e instanceof r.oP?e:new r.oP(e),n=void 0===t?o.len:o.pos+t,i=eR();for(;o.pos<n;){let e=o.uint32();switch(e>>>3){case 1:if(10!==e)break;i.title=o.string();continue;case 2:if(18!==e)break;i.legacyS3CodeSnapshotKey=o.string();continue;case 3:if(26!==e)break;i.blobstoreContentKey=o.string();continue}if((7&e)==4||0===e)break;o.skip(7&e)}return i},fromJSON:e=>({title:eG(e.title)?eq.String(e.title):"",legacyS3CodeSnapshotKey:eG(e.legacyS3CodeSnapshotKey)?eq.String(e.legacyS3CodeSnapshotKey):void 0,blobstoreContentKey:eG(e.blobstoreContentKey)?eq.String(e.blobstoreContentKey):void 0}),toJSON(e){let t={};return""!==e.title&&(t.title=e.title),void 0!==e.legacyS3CodeSnapshotKey&&(t.legacyS3CodeSnapshotKey=e.legacyS3CodeSnapshotKey),void 0!==e.blobstoreContentKey&&(t.blobstoreContentKey=e.blobstoreContentKey),t},create:e=>eF.fromPartial(e??{}),fromPartial(e){let t=eR();return t.title=e.title??"",t.legacyS3CodeSnapshotKey=e.legacyS3CodeSnapshotKey??void 0,t.blobstoreContentKey=e.blobstoreContentKey??void 0,t}},eq=(()=>{if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw"Unable to locate global object"})();function eG(e){return null!=e}let eV=["selected-node-ids","jsx","text","text-ref","image-ref","reasoning","reasoning-ref","redacted-reasoning","redacted-reasoning-ref","tool-call-ref","tool-result-ref","tool-call-json-DO-NOT-USE-IN-PROD","tool-result-json-DO-NOT-USE-IN-PROD","figmake-test-part","cortex-request-uuid","code-chat-assistant-text","code-chat-assistant-code","code-chat-model-config-version","code-chat-assistant-title","code-chat-provider-metadata","code-chat-code-import-ref","code-chat-image-import-ref","code-chat-diff-import-ref","code-chat-legacy-s3-code-snapshot","code-chat-code-snapshot","code-chat-errors","code-chat-library-keys","code-chat-inspected-element-ref","code-chat-inspected-component","code-chat-inspected-library","code-chat-origin","code-chat-legacy-assistant-tool-result","code-chat-manual-edit","code-chat-duplicated-file","code-chat-deleted-chat-history","code-chat-snapshot-restore"],eB={"selected-node-ids":i,jsx:a,text:c,"text-ref":f,"image-ref":v,reasoning:S,"reasoning-ref":w,"redacted-reasoning":x,"redacted-reasoning-ref":T,"tool-call-ref":A,"tool-result-ref":F,"tool-call-json-DO-NOT-USE-IN-PROD":B,"tool-result-json-DO-NOT-USE-IN-PROD":z,"figmake-test-part":et,"cortex-request-uuid":er,"code-chat-assistant-text":ei,"code-chat-assistant-code":es,"code-chat-model-config-version":ec,"code-chat-assistant-title":eu,"code-chat-provider-metadata":ef,"code-chat-code-import-ref":eg,"code-chat-image-import-ref":eh,"code-chat-diff-import-ref":em,"code-chat-legacy-s3-code-snapshot":ey,"code-chat-code-snapshot":ek,"code-chat-errors":eS,"code-chat-library-keys":eP,"code-chat-inspected-element-ref":ew,"code-chat-inspected-component":eJ,"code-chat-inspected-library":ex,"code-chat-origin":eK,"code-chat-legacy-assistant-tool-result":eT,"code-chat-manual-edit":eL,"code-chat-duplicated-file":eA,"code-chat-deleted-chat-history":eD,"code-chat-snapshot-restore":eF}},288269:function(e,t,o){o.d(t,{S:()=>d,q:()=>c});var r=o(148799),n=o(381770),i=o(31907),a=o(997199),s=o(18368);if(9793==o.j)var l=o(850340);function c(e){let t=structuredClone(e);switch(t.type){case"text":case"reasoning":case"redacted-reasoning":return{...t,providerOptions:{}};case"selected-node-ids":case"jsx":case"cortex-request-uuid":case"code-chat-assistant-code":case"code-chat-assistant-text":case"code-chat-assistant-title":case"code-chat-model-config-version":case"code-chat-legacy-s3-code-snapshot":case"code-chat-errors":case"code-chat-library-keys":case"code-chat-origin":case"code-chat-legacy-assistant-tool-result":case"code-chat-snapshot-restore":return t;case"tool-call":{let{toolCallId:e,toolName:o,argsJSON:r}=t;return{type:"tool-call-json-DO-NOT-USE-IN-PROD",toolCallId:e,toolName:o,argsJson:r,providerOptions:{}}}case"tool-result":{let{toolCallId:e,toolName:o,resultJSON:r,isError:n}=t;return{type:"tool-result-json-DO-NOT-USE-IN-PROD",toolCallId:e,toolName:o,resultJson:r,isError:n,providerOptions:{}}}case"tool-result-ref":{let{toolCallId:e,toolName:o,blobstoreContentKey:r,isError:n}=t;return{type:"tool-result-ref",toolCallId:e,toolName:o,isError:n,providerOptions:{}}}case"code-chat-provider-metadata":return{type:"code-chat-provider-metadata",providerMetadataJson:JSON.stringify(t.providerMetadata)};case"code-chat-code-import-ref":case"code-chat-image-import-ref":case"code-chat-diff-import-ref":case"code-chat-code-snapshot":return{type:t.type};case"code-chat-inspected-element-ref":{let{blobstoreContentKey:e,...o}=t;return o}case"code-chat-inspected-component":return{type:t.type,filePath:t.filePath,tagName:t.tagName};case"code-chat-inspected-library":return{type:t.type,folderPath:t.folderPath,libraryName:t.libraryName};case"code-chat-manual-edit":return{type:t.type,changedFilesJson:JSON.stringify(t.changedFiles),title:t.title,legacyS3CodeSnapshotKey:t.legacyS3CodeSnapshotKey};case"code-chat-duplicated-file":return{type:t.type,plainText:t.plainText,fileKeyHash:t.fileKeyHash};case"code-chat-deleted-chat-history":return{type:t.type,timestamp:t.timestamp,userId:t.userId??""};case"image":throw new r.I(`Not implemented: Conversion from part type ${t.type} to protobuf not implemented`);default:(0,l.vE)(t)}}function d({type:e,contentJson:t,blobstoreContentKey:o}){if(!(0,a.w$)(e))throw new r.I(`Unknown message part type: ${e}`);let c=i.k[e].fromJSON(t),d={type:e,...c};switch(d.type){case"text":case"reasoning":case"redacted-reasoning":case"selected-node-ids":case"jsx":case"cortex-request-uuid":case"code-chat-assistant-code":case"code-chat-assistant-title":case"code-chat-model-config-version":case"code-chat-legacy-s3-code-snapshot":case"code-chat-errors":case"code-chat-library-keys":case"code-chat-legacy-assistant-tool-result":case"code-chat-snapshot-restore":case"code-chat-duplicated-file":case"code-chat-deleted-chat-history":return d;case"code-chat-manual-edit":{let e,{title:t,changedFilesJson:o,legacyS3CodeSnapshotKey:i}=c;try{let t=JSON.parse(o);e=n.qO.shape.changedFiles.parse(t)}catch(t){let e=t instanceof Error?t.message:String(t);throw new r.I(`Invalid changedFiles for code-chat-manual-edit: ${e}`)}return{type:"code-chat-manual-edit",changedFiles:e,title:t,legacyS3CodeSnapshotKey:i,blobstoreContentKey:void 0}}case"code-chat-origin":{let{origin:e}=c,t=n.cB.shape.origin.safeParse(e);if(!t.success)throw new r.I(`Invalid origin for code-chat-origin: ${e}`);return{type:"code-chat-origin",origin:t.data}}case"tool-call-json-DO-NOT-USE-IN-PROD":{let{toolCallId:e,toolName:t,argsJson:o}=c;return{type:"tool-call",toolCallId:e,toolName:t,argsJSON:o}}case"tool-result-json-DO-NOT-USE-IN-PROD":{let{toolCallId:e,toolName:t,resultJson:o,isError:r}=c;return{type:"tool-result",toolCallId:e,toolName:t,resultJSON:o,isError:r}}case"tool-result-ref":{if(!o)throw new r.I("Blobstore content key is required for tool-result-ref");let{toolCallId:e,toolName:t,isError:n}=c;return{type:"tool-result-ref",toolCallId:e,toolName:t,isError:n,blobstoreContentKey:o}}case"code-chat-assistant-text":{let{text:e,textMode:t}=c,o=s.ab.safeParse(t);if(!o.success)throw new r.I(`Invalid textMode for code-chat-assistant-text: ${t}`);if("code"===o.data)throw new r.I("Code mode messages should be represented by code-chat-assistant-code, not code-chat-assistant-text");return{type:"code-chat-assistant-text",text:e,textMode:o.data}}case"code-chat-provider-metadata":return{type:"code-chat-provider-metadata",providerMetadata:JSON.parse(c.providerMetadataJson)};case"code-chat-code-snapshot":if(!o)throw new r.I("Blobstore content key is required for code-chat-code-snapshot");return{type:"code-chat-code-snapshot",blobstoreContentKey:o};case"code-chat-image-import-ref":if(!o)throw new r.I("Blobstore content key is required for code-chat-image-import-ref");return{type:"code-chat-image-import-ref",blobstoreContentKey:o};case"code-chat-code-import-ref":if(!o)throw new r.I("Blobstore content key is required for code-chat-code-import-ref");return{type:"code-chat-code-import-ref",blobstoreContentKey:o};case"code-chat-diff-import-ref":if(!o)throw new r.I("Blobstore content key is required for code-chat-diff-import-ref");return{type:"code-chat-diff-import-ref",blobstoreContentKey:o};case"code-chat-inspected-element-ref":{if(!o)throw new r.I("Blobstore content key is required for code-chat-inspected-element-ref");let{filePath:e,snippetStartLine:t,tagLine:n,tagName:i}=c;return{type:"code-chat-inspected-element-ref",filePath:e,snippetStartLine:t,tagLine:n,tagName:i,blobstoreContentKey:o}}case"code-chat-inspected-component":{let{filePath:e,tagName:t}=c;return{type:"code-chat-inspected-component",filePath:e,tagName:t}}case"code-chat-inspected-library":{let{folderPath:e,libraryName:t}=c;return{type:"code-chat-inspected-library",folderPath:e,libraryName:t}}case"text-ref":case"image-ref":case"reasoning-ref":case"redacted-reasoning-ref":case"tool-call-ref":case"figmake-test-part":throw new r.I(`Not implemented: Conversion from pb MessagePart type ${d.type} to AnyPart not implemented`);default:(0,l.vE)(d)}}}}]);

//# debugId=4e3b455c-c5ac-576c-af27-6fd69a721bc6

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/9c564bdbda1fe10c15a994517a3fbf172d84ee29/5522-6e9f2c9b9f83d7d1.min.js.map