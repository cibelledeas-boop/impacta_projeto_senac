"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="93f5c3ba-9dc9-5329-b57b-df8671a4a94e")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([["3275"],{159077:function(e,t,a){a.d(t,{Z:()=>s});let s=9793==a.j?'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path fill="#000" fill-opacity=".8" fill-rule="evenodd" stroke="none" d="m17.122 11.64-.012-.003-6.666-1.9 4.91 4.91c.195-.095.414-.147.646-.147.828 0 1.5.672 1.5 1.5 0 .828-.672 1.5-1.5 1.5-.828 0-1.5-.672-1.5-1.5 0-.232.053-.45.146-.647L9.743 10.45l1.832 6.39.01.037.008.037C12.015 18.961 13.829 20.5 16 20.5c.494 0 .968-.08 1.411-.225l.585-.193.435.435 1.847 1.847 2.122-2.121-1.865-1.865-.43-.43.184-.58c.137-.43.211-.89.211-1.368 0-2.093-1.43-3.854-3.366-4.356l-.012-.003zm5.985 7.895.707.708-.707.707-2.122 2.121-.707.707-.707-.707-1.847-1.847c-.542.18-1.122.276-1.724.276-2.655 0-4.871-1.882-5.387-4.384L8.325 9.132 8 8l1.133.323 8.252 2.353C19.752 11.29 21.5 13.44 21.5 16c0 .582-.09 1.144-.258 1.67z"/></svg>':null},447600:function(e,t,a){a.d(t,{Z:()=>s});let s=9793==a.j?'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill="#000" fill-opacity="1" fill-rule="evenodd" stroke="none" d="M2 3h5v2H2zM1 5V2h7v3h7v9H1zm7 1H2v7h12V6z"/></svg>':null},127762:function(e,t,a){a.d(t,{Z:()=>s});let s=9793==a.j?'<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12"><path fill="#000" fill-opacity="1" fill-rule="nonzero" stroke="none" d="M3.743 2.748 6 .5l2.257 2.248L6 4.996zm-.995 5.51L.5 6l2.248-2.257L4.996 6zm5.51.994L6 11.5 3.743 9.252 6 7.004zM11.5 6 9.252 3.743 7.004 6l2.248 2.257z"/></svg>':null},630979:function(e,t,a){a.d(t,{Z:()=>s});let s=9793==a.j?'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill="#000" fill-opacity="1" fill-rule="evenodd" stroke="none" d="M8 3 2.5 13h11zm0 2.075L4.191 12h7.618z"/></svg>':null},889934:function(e,t,a){a.d(t,{Z:()=>s});let s=9793==a.j?'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 10 10"><path fill="#000" fill-opacity="1" fill-rule="nonzero" stroke="none" d="M0 0h10v3H9V1H5.5v8H7v1H3V9h1.5V1H1v2H0z"/></svg>':null},163888:function(e,t,a){a.d(t,{Z:()=>s});let s=9793==a.j?'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path fill="#000" fill-opacity="1" fill-rule="evenodd" stroke="none" d="M13.5 9h1V7.5c0-.828.672-1.5 1.5-1.5.828 0 1.5.672 1.5 1.5V9H23v15H9V9zm5-1H24v17H8V8h5.5v-.5C13.5 6.12 14.62 5 16 5c1.38 0 2.5 1.12 2.5 2.5zM16 12.5c-1.105 0-2 .895-2 2 0 1.105.895 2 2 2 1.105 0 2-.895 2-2 0-1.105-.895-2-2-2m-3 2c0-1.657 1.343-3 3-3 1.657 0 3 1.343 3 3 0 1.212-.718 2.255-1.752 2.729 1.317.503 2.252 1.778 2.252 3.271v.5h-1v-.5c0-1.38-1.12-2.5-2.5-2.5-1.38 0-2.5 1.12-2.5 2.5v.5h-1v-.5c0-1.493.935-2.768 2.252-3.271C13.718 16.755 13 15.712 13 14.5"/></svg>':null},530170:function(e,t,a){a.d(t,{Z:()=>s});let s=9793==a.j?'<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><path fill="#000" fill-opacity=".9" fill-rule="evenodd" stroke="none" d="M14 10.443c0-.35.349-.59.676-.468l2 .75c.195.073.324.26.324.468v3.614c0 .208-.13.395-.324.468l-2 .75c-.327.123-.676-.119-.676-.468zm4 3.057v1.307c0 .625-.388 1.185-.973 1.405l-2 .75c-.98.367-2.027-.358-2.027-1.405v-5.114c0-1.047 1.046-1.772 2.027-1.404l1.973.74V9c0-4.418-3.582-8-8-8-4.418 0-8 3.582-8 8v.778l1.973-.74C3.953 8.671 5 9.396 5 10.443v5.114c0 1.047-1.046 1.772-2.027 1.405l-2-.75c-.585-.22-.973-.78-.973-1.405V9c0-4.97 4.03-9 9-9 4.97 0 9 4.03 9 9zm-17 0v-2.307c0-.208.13-.395.324-.468l2-.75c.327-.123.676.119.676.468v5.114c0 .35-.349.59-.676.468l-2-.75c-.195-.073-.324-.26-.324-.468z"/></svg>':null},618996:function(e,t,a){a.d(t,{Z:()=>s});let s=9793==a.j?'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill="#000" fill-opacity="1" fill-rule="evenodd" stroke="none" d="M12 6c0 1.105-.895 2-2 2-1.105 0-2-.895-2-2 0-1.105.895-2 2-2 1.105 0 2 .895 2 2m-1 0c0 .552-.448 1-1 1-.552 0-1-.448-1-1 0-.552.448-1 1-1 .552 0 1 .448 1 1M3 2c-.552 0-1 .448-1 1v10c0 .552.448 1 1 1h10c.552 0 1-.448 1-1V3c0-.552-.448-1-1-1zm10 1H3v6.293l2.5-2.5L11.707 13H13zM3 13v-2.293l2.5-2.5L10.293 13z"/></svg>':null},178805:function(e,t,a){a.d(t,{Z:()=>s});let s=9793==a.j?'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path fill="#000" fill-opacity=".8" fill-rule="evenodd" stroke="none" d="M15.373 22h1.258c.28-.32.616-.597.995-.819 1.479-.862 4.005-.909 5.386.109H24.5v-9.2c0 0-.797-2.25-4.42-2.25-1.875 0-2.902.602-3.456 1.184-.389.407-.545.804-.6.976h-.049c-.054-.172-.21-.57-.599-.976-.554-.582-1.581-1.184-3.456-1.184-3.623 0-4.42 2.25-4.42 2.25v9.19h1.488c1.382-1.019 3.91-.97 5.388-.105.38.223.717.502.997.825m1.127-9.711v8.457q.293-.236.622-.428c.927-.541 2.115-.796 3.241-.787 1.006.008 2.081.227 2.952.759h.185v-7.973l-.03-.05c-.086-.138-.236-.339-.474-.545-.461-.397-1.33-.882-2.916-.882-1.586 0-2.34.483-2.694.835-.189.186-.296.367-.354.49-.029.061-.045.108-.052.131l-.005.017.001-.006.002-.008v-.005l.001-.002v-.002l-.005-.001zm-1 0h-.475l-.005.001v.002l.001.002.001.005.002.008.001.006q.001.001-.005-.017c-.007-.023-.024-.07-.053-.131-.057-.123-.164-.303-.353-.49-.354-.352-1.108-.835-2.694-.835-1.585 0-2.455.485-2.916.882-.238.206-.388.407-.474.545l-.03.05v7.963h.185c.872-.533 1.948-.752 2.954-.759 1.128-.008 2.316.249 3.243.792q.326.191.618.426z"/></svg>':null},569890:function(e,t,a){a.d(t,{Z:()=>s});let s='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path fill="#000" fill-opacity="1" fill-rule="evenodd" stroke="none" d="m13 10.098.765.478 8 5 .678.424-.678.424-8 5-.765.478zm1 1.804v8.196L20.557 16z"/></svg>'},122591:function(e,t,a){a.d(t,{Z:()=>s});let s=9793==a.j?'<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30"><path fill="#b3b3b3" fill-opacity="1" fill-rule="evenodd" stroke="none" d="M8 14h15v1H8z"/></svg>':null},784475:function(e,t,a){a.d(t,{Z:()=>s});let s=9793==a.j?'<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30"><path fill="#b3b3b3" fill-opacity="1" fill-rule="evenodd" stroke="none" d="M15 15v7h1v-7h7v-1h-7V7h-1v7H8v1z"/></svg>':null},2851:function(e,t,a){a.d(t,{Z:()=>s});let s=9793==a.j?'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="#000" fill-opacity="1" fill-rule="evenodd" stroke="none" d="M16.708 6.895c-1.39 0-2.518 1.127-2.518 2.518 0 1.391 1.127 2.52 2.518 2.52 1.391 0 2.52-1.129 2.52-2.52 0-1.39-1.129-2.518-2.52-2.518m-3.314 2.518c0-1.83 1.484-3.314 3.314-3.314 1.83 0 3.315 1.484 3.315 3.314 0 1.65-1.205 3.017-2.781 3.272 2.76.246 4.968 2.38 4.968 5.04v1.565H2.458v-1.565c0-2.66 2.207-4.794 4.968-5.04-1.577-.255-2.781-1.623-2.781-3.272 0-1.83 1.484-3.314 3.314-3.314 1.83 0 3.314 1.484 3.314 3.314 0 1.65-1.204 3.017-2.78 3.272 1.554.138 2.933.875 3.841 1.968.907-1.093 2.283-1.83 3.84-1.968-1.576-.255-2.78-1.623-2.78-3.272M3.253 17.725c0-2.325 2.073-4.268 4.706-4.268 2.633 0 4.706 1.943 4.706 4.268v.77H3.253zm10.207.77h7.954v-.77c0-2.325-2.072-4.268-4.706-4.268-1.63 0-3.055.75-3.897 1.876.414.71.65 1.523.65 2.392v.77zM5.44 9.412c0-1.39 1.128-2.518 2.52-2.518 1.39 0 2.518 1.127 2.518 2.518 0 1.391-1.128 2.52-2.519 2.52-1.391 0-2.519-1.129-2.519-2.52"/></svg>':null},9489:function(e,t,a){a.d(t,{Z:()=>s});let s=9793==a.j?'<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><path fill="#000" fill-opacity="1" fill-rule="nonzero" stroke="none" d="M.2 9h17.6l.2.4v.6H0v-.6zm0 0h17.6l.2.4v.6H0v-.6zM0 17h18v1H0zm0 0h18v1H0zM7 6h4v1H7zm0 0h4v1H7zm0-6h4v1H7zm0 0h4v1H7zm5 3h2.8l3 6h-1.105L14.2 4H12zM6 3H3.2l-3 6h1.105L3.8 4H6zm-6 7h1v7H0zm0 0h1v7H0zm17 0h1v7h-1zm0 0h1v7h-1zM6 0h1v7H6zm0 0h1v7H6zm5 0h1v7h-1zm0 0h1v7h-1z"/></svg>':null},428460:function(e,t,a){a.d(t,{DS:()=>C,G1:()=>r,Jm:()=>d,QQ:()=>E,RA:()=>c,RG:()=>g,Rj:()=>_,Um:()=>j,VN:()=>h,WT:()=>y,Wi:()=>f,cZ:()=>N,cv:()=>S,db:()=>v,ec:()=>i,fK:()=>x,fU:()=>o,kZ:()=>u,lF:()=>s,mv:()=>m,tP:()=>p,tj:()=>l,wt:()=>n,yR:()=>T,yb:()=>b});let s="org_self_serve_figjam--stepContent--BF4vK",r="org_self_serve_figjam--stepContentTeamCreation--VItZn",i="org_self_serve_figjam--menuContainer--4HJ6l",n="org_self_serve_figjam--cancelMenuItem--sFWm5",l="org_self_serve_figjam--pageTitle--7oR7h",d="org_self_serve_figjam--summaryDivider--tXje-",o="org_self_serve_figjam--flex--m8vtt",c="org_self_serve_figjam--svgText--rpnqz org_self_serve_figjam--flex--m8vtt",m="org_self_serve_figjam--helpIcon--EIlPd",u="org_self_serve_figjam--textLink--XawSw org_self_serve_figjam--billingSubText--gxmEb",_="org_self_serve_figjam--confirmationBox--uwR1i org_self_serve_figjam--stepRect--C3LZ- org_self_serve_figjam--boxBorder--QfBpe",p="org_self_serve_figjam--flexBox--YMye9",h="org_self_serve_figjam--confirmationPageText--eW0nA text--fontPos13--5OfL8 text--_fontBase--VaHfk",x="org_self_serve_figjam--confirmationCharge--JfhWg org_self_serve_figjam--confirmationPageText--eW0nA text--fontPos13--5OfL8 text--_fontBase--VaHfk",g="org_self_serve_figjam--confirmationRow--7IviV",y="org_self_serve_figjam--confirmationHomeButton--J0Kva text--fontNeg13--NfHlH text--_fontBase--VaHfk text--_negText--7Cnf0",f="org_self_serve_figjam--confirmationAmountDue--xyJ97",v="org_self_serve_figjam--confirmationHeading--BE4xm",T="org_self_serve_figjam--confirmationLoadingText---ZviI org_self_serve_figjam--msaLabelText--W7meK",j="org_self_serve_figjam--greenCheck--CxeNx",E="org_self_serve_figjam--confirmationPage--fJCKG",S="org_self_serve_figjam--createTeamContainer--IhwVG",N="org_self_serve_figjam--teamsContainer--wFESd",b="org_self_serve_figjam--teamCheckboxContainer--2ba9z",C="org_self_serve_figjam--selectTeamsIcon--bAjxo"},892566:function(e,t,a){a.r(t),a.d(t,{EduReviewPage:()=>S});var s=a(750357),r=a(853505),i=a(577851),n=a(203570),l=a(739842),d=a(919542),o=a(75254),c=a(705881),m=a(727025),u=a(382830),_=a(240473),p=a(661193),h=a(590914),x=a(832200),g=a(827642),y=a(404639),f=a(404756),v=a(272727),T=a(926941),j=a(920860),E=a(384787);function S({selectedView:e}){let{teamId:t}=e,a=(e=>{let t=(0,i.v9)(t=>{let a=v.gI.loadingKeyForPayload({teamId:e});return t.loadingState[a]}),a=(0,i.v9)(t=>t.teamUserByTeamId[e]||{}),s=(0,i.I0)();r.useEffect(()=>{s(v.gI({teamId:e}))},[s,e]);let l=t!==n.Q.SUCCESS;return r.useEffect(()=>{if(!l){let e=Object.keys(a).length;s(f.DY({numWhiteboardEditors:e})),s(f.Rd({numDesignEditors:e}))}},[s,l,a]),l})(t),S=(0,i.I0)(),N=()=>{S(f.Po({teamId:t,onCloseOrComplete:e.onCloseOrComplete}))};return(0,s.jsx)(T.Ui,{name:"Edu Review",properties:{teamId:t},children:(0,s.jsx)("div",{children:(0,s.jsxs)(o.K,{menu:(0,s.jsx)(d.h,{onClick:()=>{S(y.fv({view:"team",teamId:t})),e.onCloseOrComplete?.()},children:(0,s.jsx)(_.n,{svg:E.Z,className:"edu_review--modalCloseX---pQum",dataTestId:"close-button"})}),children:[(0,s.jsx)("span",{className:e.showBreadcrumbs?void 0:"edu_review--hidden--vd4Ih",children:(0,s.jsx)(g.O,{index:3})}),(0,s.jsxs)("div",{className:p.B.flex.flexColumn.itemsCenter.alignCenter.$,children:[(0,s.jsx)(u.rQ,{children:(0,h.tx)("edu.almost_done_everything_look_good")}),(0,s.jsx)(l.Ki,{multiple:4}),(0,s.jsx)(m.u,{isLoading:a,children:()=>(0,s.jsx)(c.G,{children:(0,s.jsx)(x.z,{selectedView:e,onClickConfirm:N,currency:(0,j.x_)(),canSeeBillingAddressExp:!1})})})]})]})})})}},707707:function(e,t,a){a.d(t,{E:()=>r});var s=a(581370);function r(){let{getConfig:e}=(0,s.it)("exp_streamlined_new_user_checkout");return!!e().getValue("enabled",!1)}},738529:function(e,t,a){a.d(t,{a:()=>r});var s=a(853505);function r({tableContainerRef:e}){let[t,a]=s.useState(window.innerHeight),r=()=>{a(window.innerHeight)};s.useEffect(()=>(window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)}),[]);let i=e.current?.getBoundingClientRect();return Math.max(t-(i?.top||0)-49-8-56,150)}},759684:function(e,t,a){a.d(t,{Y:()=>n,d:()=>i});var s,r,i=9793==a.j?((s=i||{}).CARD_ERROR="card_error",s.ESTIMATE_CALCULATION_ERROR="estimate_calculation_error",s.INVALID_PAID_SEAT_TOTAL="invalid_paid_seat_total",s.INVALID_LEGAL_NAME="invalid_legal_name",s.UPGRADE_ERROR="upgrade_error",s):null,n=9793==a.j?((r=n||{}).INIT="init",r.ON_TOGGLE_TEAM="on_toggle_team",r.SET_CURRENCY="set_currency",r.SET_ERROR="set_error",r.SET_IS_SUBMITTING="set_is_submitting",r.SET_HAS_DIFFERENT_LEGAL_NAME="set_has_different_legal_name",r.SET_RENEWAL_TERM="set_renewal_term",r.SET_TAX_PERCENT="set_tax_percent",r.UPDATE_ADDITIONAL_SEATS="update_additional_seats",r.UPDATE_DISPLAY_NAME="update_display_name",r.UPDATE_LEGAL_NAME="update_legal_name",r.UPDATE_STATE_FROM_NEW_TEAM_SELECTIONS="update_state_from_new_team_selections",r.UPDATE_TO_DEFAULT_SEAT_SELECTIONS="update_to_default_seat_selections",r.UPDATE_USER_SEAT_TYPE="update_user_seat_type",r):null},823076:function(e,t,a){a.d(t,{u:()=>i});var s=a(619369),r=a(952266);function i(e,t,a){if(0===e.length&&a)return{eligibleTeamsByTeamId:{},selectedTeamIds:new Set,eligibleUsersByUserId:{[a.user.id]:{...n(a.user),recommendedSeatTypeByTeamId:{},teamIds:[]}},selectedUserSeatTypes:{[a.user.id]:a.recommended_seat_type?.key??s.hH.EXPERT}};let i=e.reduce((e,t)=>(e[t.id]={...t,eligibleUsers:new Set},e),{}),l=new Set(Object.keys(i)),d={};t.forEach(e=>{let t=e.user,a=t.id;d[a]||(d[a]={...n(t),recommendedSeatTypeByTeamId:{},teamIds:[]}),d[a].recommendedSeatTypeByTeamId[e.team_id]=e.recommended_seat_type?.key??s.mI.VIEW,d[a].teamIds.push(e.team_id),i[e.team_id]&&i[e.team_id].eligibleUsers.add(a)});let o=(0,r.K)({eligibleTeamsByTeamId:i,selectedTeamIds:l,eligibleUsersByUserId:d,selectedUserSeatTypes:{},currentUpgradingUserId:a?.user.id});return{eligibleTeamsByTeamId:i,selectedTeamIds:l,eligibleUsersByUserId:d,selectedUserSeatTypes:o}}function n(e){return{id:e.id,email:e.email,handle:e.handle,img_url:e.img_url}}},537789:function(e,t,a){a.d(t,{_:()=>r});var s=a(590914);function r({eligibleUsersByUserId:e,eligibleTeamsByTeamId:t,selectedTeamIds:a,currentUpgradingUserId:r}){let i=[];return 0===a.length&&r?i.push({id:r,handle:e[r].handle,email:e[r].email,img_url:e[r].img_url,teams:"\u2014"}):Object.values(e).filter(e=>e.teamIds.some(e=>a.includes(e))).forEach(e=>{let r=e.teamIds,n=a.filter(e=>r.includes(e)).map(e=>t[e]),l=1===n.length?n[0].name:(0,s.t)("checkout.multiple_teams_label");i.push({id:e.id,handle:e.handle,email:e.email,img_url:e.img_url,teams:l})}),i}},116501:function(e,t,a){a.d(t,{P:()=>r});var s,r=9793==a.j?((s=r||{}).SINGLE_EDITOR="single_editor",s.MULTI_EDITOR="multi_editor",s):null},952266:function(e,t,a){a.d(t,{K:()=>r});var s=a(513366);function r({eligibleTeamsByTeamId:e,selectedTeamIds:t,eligibleUsersByUserId:a,selectedUserSeatTypes:r,currentUpgradingUserId:i}){if(0===t.size&&i)return{[i]:r[i]};let n={},l={};return t.forEach(t=>{e[t].eligibleUsers.forEach(e=>{if(!n[e])if(r[e])n[e]=r[e];else{let s=a[e];l[e]||(l[e]=[]),l[e].push(s.recommendedSeatTypeByTeamId[t])}})}),{...n,...Object.keys(l).reduce((e,t)=>(e[t]=(0,s.sW)(l[t]),e),{})}}},930690:function(e,t,a){a.r(t),a.d(t,{OrgUpgradeMultiTeamModal:()=>q});var s=a(750357),r=a(853505),i=a(577851),n=a(273634),l=a(103319),d=a(574059),o=a(903132),c=a(498869),m=a(240473),u=a(661193),_=a(590914),p=a(491420),h=a(404639),x=a(469271),g=a(926941),y=a(889835),f=a(328403),v=a(761008),T=a(920860),j=a(752212),E=a(248893),S=a(5794),N=a(13333),b=a(155969),C=a(850340),w=a(612661),A=a(29260),I=a(156802),k=a(555792),R=a(542144),P=a(71590),O=a(358852),D=a(832004),M=a(619369),U=a(877208),B=a(479852),L=a(892243);function V({currency:e,hideModal:t,choosePlan:a,TeamIllustration:r,upsellSource:n}){let l=(0,i.I0)();return(0,s.jsxs)("div",{className:u.B.flex.flexColumn.gap8.$,style:p.sx.add({padding:"48px 56px",maxWidth:"650px"}).$,children:[(0,s.jsx)("p",{className:u.B.textHeadingLarge.$,children:(0,_.tx)("org_upgrade.multi_team.bring_your_teams_together")}),(0,s.jsx)("p",{className:u.B.textHeadingMedium.$,style:p.sx.add({fontWeight:400}).$,children:(0,_.tx)("plan_comparison.campfire.org.description")}),(0,s.jsx)(k.CN,{className:"campfire_org_upgrade_multi_team_modal--closeButton--RyuW6",onClick:t,children:(0,s.jsx)(A.t,{})}),(0,s.jsxs)("div",{className:u.B.flex.gap16.$,children:[(0,s.jsxs)("div",{className:u.B.flex.flexColumn.gap16.flex1.mt16.$,children:[(0,s.jsx)(z,{currency:e}),(0,s.jsxs)("div",{children:[(0,s.jsx)(k.mB,{onClick:a,children:(0,_.tx)("plan_comparison.campfire.choose_plan")}),(0,s.jsx)("div",{className:u.B.font11.lh16.alignCenter.mt4.$,children:(0,_.tx)("plan_comparison.campfire.or_contact_sales",{contactSalesLink:(0,s.jsx)("button",{className:u.B.colorTextBrand.cursorPointer.$,onClick:()=>l(x.K4({type:R.gg,data:{source:P.f.ORG_SELF_SERVE_UPGRADE_MODAL}})),children:(0,_.tx)("plan_comparison.campfire.contact_sales")})})})]}),(0,s.jsx)("div",{className:u.B.bt1.bSolid.colorBorder.$}),(0,s.jsx)(G,{upsellSource:n})]}),(0,s.jsx)("div",{className:u.B.flex.flex1.itemsCenter.justifyCenter.$,children:r})]})]})}function z({currency:e}){let t={currency:e,tier:E.K0.ORG,renewalTerm:E.Xp.YEAR,unit:E.Xp.MONTH},a=(0,y.yW)({billableProductKeys:f.Hs,baseQuery:t}),[r]=(0,o.Eh)(a);if(null===r.data)throw Error("Price data is null");let i=new T.Lr(e);return(0,s.jsx)("div",{className:u.B.flex.flexColumn.$,children:f.Hs.sort(U.uE).map(e=>(0,w.Rw)(r.data[e])?null:(0,s.jsxs)("div",{className:u.B.flex.justifyBetween.$,children:[(0,s.jsxs)("div",{className:u.B.flex.gap4.itemsCenter.$,children:[(0,s.jsx)(O.UV,{type:e,size:"24",removeBackgroundColor:!0}),(0,s.jsx)("p",{className:u.B.textBodyLarge.$,children:function(e){switch(e){case M.hH.EXPERT:return(0,_.t)("nux.campfire.full_seat");case M.hH.DEVELOPER:return(0,_.t)("nux.campfire.dev_seat");case M.hH.COLLABORATOR:return(0,_.t)("nux.campfire.collab_seat");case M.hH.CONTENT:return(0,_.t)("nux.campfire.content_seat");default:(0,C.vE)(e)}}(e)})]}),(0,s.jsx)("p",{className:u.B.textBodyMedium.$,children:(0,_.tx)("nux.price_per_month",{price:(0,s.jsx)("span",{className:u.B.textBodyLargeStrong.$,children:i.formatMoney(r.data[e].amount)})})})]},e))})}function G(e){let t=e.upsellSource===L.V.CONNECTED_PROJECTS_MAXIMUM_CONNECTIONS,a=[t?(0,_.tx)("plan_comparison.campfire.org.feature.org_connected_projects",{orgConnectionsLimit:D.T[B.Lz.ORG]}):null,(0,_.tx)("plan_comparison.campfire.org.feature.unlimited_teams"),(0,_.tx)("plan_comparison.campfire.org.feature.branching"),(0,_.tx)("plan_comparison.campfire.org.feature.security"),(0,_.tx)("plan_comparison.campfire.org.feature.scim"),(0,_.tx)("plan_comparison.campfire.org.feature.customizations")].filter(Boolean);return(0,s.jsx)("div",{children:a.map((e,a)=>{let r=t&&0===a?(0,s.jsx)("span",{className:u.B.textBodyLargeStrong.$,children:e}):(0,s.jsx)("span",{children:e});return(0,s.jsxs)("div",{className:u.B.flex.$,children:[(0,s.jsx)(I.G,{className:u.B.minW24.$,style:{"--color-icon":"var(--color-icon-secondary)"}}),(0,s.jsx)("p",{className:u.B.textBodyLarge.$,children:r})]},a)})})}let H=(0,d.o1)("50ae1752a504eea59f2a3efac6b0f2d1ed74435a"),F=(0,d.o1)("e2148969d5a469e76c053a23b6647d487e6d64ee"),$=(0,d.o1)("fc0fcfadcfe50c96f4dcf859aabe1952c822ae2a");function Y(e){let t=(0,i.v9)(e=>e.teams),a=(0,i.v9)(e=>(0,j.ZT)(e.user,e.roles,e.teams)),r=(0,i.I0)(),n=()=>{r(x.hV())},d=e=>(0,s.jsxs)("div",{className:"org_upgrade_multi_team_modal--teamListEntry--H65PG",children:[(0,s.jsx)(S.Kn,{size:10,hideFallbackInitial:!0,entity:e,shape:"SQUARE"}),(0,s.jsx)("div",{className:"org_upgrade_multi_team_modal--teamListEntryName--iLIKI ellipsis--ellipsis--70pHK",children:e.name})]},e.id),c=(0,T.Id)(),g=f.$1.dict(e=>({currency:c.currency,billableProductKey:e,billableProductVariantKey:null,tier:E.K0.ORG,renewalTerm:E.Xp.YEAR,unit:E.Xp.MONTH})),v=(0,y.AL)(g,y.Me.UPSELL_MODALS),[N]=(0,o.Eh)(v);if(null===N.data)throw Error("Price data is null");let C=(0,s.jsx)("div",{className:"org_upgrade_multi_team_modal--teamIllustrationLeftSection--5zPBs",style:p.sx.add({width:"200px"}).$,children:(0,s.jsxs)("div",{className:"org_upgrade_multi_team_modal--dynamicTeamListSection--MHQyG",children:[(0,s.jsxs)("div",{className:"org_upgrade_multi_team_modal--teamListHeader--WMjTW",children:[(0,s.jsx)("img",{className:"org_upgrade_multi_team_modal--placeholderOrgLogo--b8oTc",src:$,draggable:!1,alt:""}),(0,s.jsx)("div",{className:"org_upgrade_multi_team_modal--teamListOrgName--yvaSJ",children:(0,_.tx)("org_upgrade.multi_team.acme_inc")}),(0,s.jsx)(m.n,{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path fill="#000" fill-opacity="1" fill-rule="evenodd" stroke="none" d="M12 16.05V9h1v7.05c1.141.232 2 1.24 2 2.45 0 1.21-.859 2.218-2 2.45V23h-1v-2.05c-1.141-.232-2-1.24-2-2.45 0-1.21.859-2.218 2-2.45m2 2.45c0 .828-.672 1.5-1.5 1.5-.828 0-1.5-.672-1.5-1.5 0-.828.672-1.5 1.5-1.5.828 0 1.5.672 1.5 1.5m5 4.5h1v-7.05c1.141-.232 2-1.24 2-2.45 0-1.21-.859-2.218-2-2.45V9h-1v2.05c-1.141.232-2 1.24-2 2.45 0 1.21.859 2.218 2 2.45zm2-9.5c0-.828-.672-1.5-1.5-1.5-.828 0-1.5.672-1.5 1.5 0 .828.672 1.5 1.5 1.5.828 0 1.5-.672 1.5-1.5"/></svg>',className:"org_upgrade_multi_team_modal--multiTeamOrgUpgradeAdjustSvg--s1GgX"})]}),(0,s.jsx)("div",{className:"org_upgrade_multi_team_modal--teamListDivider--ELxdf"}),(()=>{let e=[];for(var r=0;r<Math.min(4,a.length);r++){let s=t[a[r]];e.push(d(s))}return(0,s.jsx)("div",{className:"org_upgrade_multi_team_modal--teamList--a-R5d",children:e})})(),(0,s.jsxs)("div",{className:"org_upgrade_multi_team_modal--campfireTeamIllustrationRightSection--3FUOM",children:[(0,s.jsx)("img",{className:"org_upgrade_multi_team_modal--filesIllustration--faiwA",src:F,draggable:!1,alt:""}),(0,s.jsx)("img",{src:H,draggable:!1,alt:""})]}),(0,s.jsxs)("div",{className:u.B.flex.b1.bRadius3.itemsCenter.absolute.pr4.py4.ml36.$,style:p.sx.add({top:"100%",marginTop:"15px",maxWidth:"100px"}).$,children:[(0,s.jsx)(l.m,{className:u.B.minW16.$}),(0,s.jsx)("p",{className:u.B.textBodySmallStrong.$,children:(0,_.tx)("org_upgrade.illustration.sign_in_with_sso")}),(0,s.jsx)("div",{className:u.B.absolute.mt32.$,style:p.sx.add({right:"-8px"}).$,children:(0,s.jsx)(Z,{})})]})]})});return(0,s.jsx)(b.bc,{className:"org_upgrade_multi_team_modal--modal--gd4Gw",hide:n,size:"fitContent",useModalViewScroll:!1,children:(0,s.jsx)(V,{currency:c.currency,hideModal:n,choosePlan:()=>{n(),r(h.fv({view:"orgSelfServe",upsellSource:e.upsellSource}))},TeamIllustration:C,upsellSource:e.upsellSource})})}function Z(){return(0,s.jsxs)("svg",{width:"15",height:"17",viewBox:"0 0 15 17",fill:"none",children:[(0,s.jsxs)("mask",{id:"path-1-outside-1_15_11117",maskUnits:"userSpaceOnUse",x:"-0.5",y:"0.5",width:"16",height:"16",fill:"black",children:[(0,s.jsx)("rect",{fill:"white",x:"-0.5",y:"0.5",width:"16",height:"16"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.7753 2.25C4.7753 1.83579 5.11109 1.5 5.5253 1.5C5.93951 1.5 6.2753 1.83579 6.2753 2.25V7C6.2753 7.27614 6.49916 7.5 6.7753 7.5C7.05144 7.5 7.2753 7.27614 7.2753 7V6.25C7.2753 5.83579 7.61109 5.5 8.0253 5.5C8.43951 5.5 8.7753 5.83579 8.7753 6.25V7C8.7753 7.27614 8.99916 7.5 9.2753 7.5C9.55144 7.5 9.7753 7.27614 9.7753 7V6.75C9.7753 6.33579 10.1111 6 10.5253 6C10.9395 6 11.2753 6.33579 11.2753 6.75V6.99997C11.2753 7.27613 11.4992 7.5 11.7753 7.5H12.0254C12.1634 7.5 12.2754 7.38807 12.2754 7.25C12.2754 6.83579 12.6111 6.5 13.0254 6.5C13.4396 6.5 13.7754 6.83579 13.7754 7.25V9.75C13.7754 9.75099 13.7754 9.75197 13.7754 9.75296V11C13.7754 13.4853 11.7606 15.5 9.27535 15.5C7.72857 15.5 6.36406 14.7196 5.55409 13.531C4.83873 12.7173 3.72389 11.8364 2.76078 11.0754L2.76074 11.0754L2.76055 11.0753C2.45467 10.8336 2.16409 10.604 1.90649 10.3925C1.42761 9.99926 1.3593 9.26798 1.7686 8.80273C2.47277 8.00228 3.67449 9.08737 4.40263 9.86608C4.41077 9.87478 4.41894 9.88354 4.42715 9.89237C4.54973 10.0242 4.77535 9.93924 4.77535 9.75922L4.7753 9.75V2.25Z"})]}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.7753 2.25C4.7753 1.83579 5.11109 1.5 5.5253 1.5C5.93951 1.5 6.2753 1.83579 6.2753 2.25V7C6.2753 7.27614 6.49916 7.5 6.7753 7.5C7.05144 7.5 7.2753 7.27614 7.2753 7V6.25C7.2753 5.83579 7.61109 5.5 8.0253 5.5C8.43951 5.5 8.7753 5.83579 8.7753 6.25V7C8.7753 7.27614 8.99916 7.5 9.2753 7.5C9.55144 7.5 9.7753 7.27614 9.7753 7V6.75C9.7753 6.33579 10.1111 6 10.5253 6C10.9395 6 11.2753 6.33579 11.2753 6.75V6.99997C11.2753 7.27613 11.4992 7.5 11.7753 7.5H12.0254C12.1634 7.5 12.2754 7.38807 12.2754 7.25C12.2754 6.83579 12.6111 6.5 13.0254 6.5C13.4396 6.5 13.7754 6.83579 13.7754 7.25V9.75C13.7754 9.75099 13.7754 9.75197 13.7754 9.75296V11C13.7754 13.4853 11.7606 15.5 9.27535 15.5C7.72857 15.5 6.36406 14.7196 5.55409 13.531C4.83873 12.7173 3.72389 11.8364 2.76078 11.0754L2.76074 11.0754L2.76055 11.0753C2.45467 10.8336 2.16409 10.604 1.90649 10.3925C1.42761 9.99926 1.3593 9.26798 1.7686 8.80273C2.47277 8.00228 3.67449 9.08737 4.40263 9.86608C4.41077 9.87478 4.41894 9.88354 4.42715 9.89237C4.54973 10.0242 4.77535 9.93924 4.77535 9.75922L4.7753 9.75V2.25Z",fill:"white"}),(0,s.jsx)("path",{d:"M13.7754 9.75296L12.7754 9.7491V9.75296H13.7754ZM5.55409 13.531L6.38045 12.9679L6.34578 12.917L6.30513 12.8708L5.55409 13.531ZM2.76078 11.0754L3.38075 10.2908L3.37466 10.286L3.36849 10.2813L2.76078 11.0754ZM2.76074 11.0754L2.13996 11.8594L2.14646 11.8645L2.15303 11.8696L2.76074 11.0754ZM2.76055 11.0753L3.38133 10.2913L3.38052 10.2906L2.76055 11.0753ZM1.90649 10.3925L1.27191 11.1653L1.27191 11.1653L1.90649 10.3925ZM1.7686 8.80273L1.01778 8.14221H1.01778L1.7686 8.80273ZM4.40263 9.86608L5.13306 9.18309L5.13306 9.18309L4.40263 9.86608ZM4.7753 9.75H3.77528L3.77532 9.75602L4.7753 9.75ZM4.42715 9.89237L3.69482 10.5733L4.42715 9.89237ZM5.5253 0.5C4.5588 0.5 3.7753 1.2835 3.7753 2.25H5.7753C5.7753 2.38807 5.66337 2.5 5.5253 2.5V0.5ZM7.2753 2.25C7.2753 1.2835 6.4918 0.5 5.5253 0.5V2.5C5.38723 2.5 5.2753 2.38807 5.2753 2.25H7.2753ZM7.2753 7V2.25H5.2753V7H7.2753ZM6.2753 6.25V7H8.2753V6.25H6.2753ZM8.0253 4.5C7.0588 4.5 6.2753 5.2835 6.2753 6.25H8.2753C8.2753 6.38807 8.16337 6.5 8.0253 6.5V4.5ZM9.7753 6.25C9.7753 5.2835 8.9918 4.5 8.0253 4.5V6.5C7.88723 6.5 7.7753 6.38807 7.7753 6.25H9.7753ZM9.7753 7V6.25H7.7753V7H9.7753ZM8.7753 6.75V7H10.7753V6.75H8.7753ZM10.5253 5C9.5588 5 8.7753 5.7835 8.7753 6.75H10.7753C10.7753 6.88807 10.6634 7 10.5253 7V5ZM12.2753 6.75C12.2753 5.7835 11.4918 5 10.5253 5V7C10.3872 7 10.2753 6.88807 10.2753 6.75H12.2753ZM12.2753 6.99997V6.75H10.2753V6.99997H12.2753ZM12.0254 6.5H11.7753V8.5H12.0254V6.5ZM13.2754 7.25C13.2754 7.38807 13.1634 7.5 13.0254 7.5V5.5C12.0589 5.5 11.2754 6.2835 11.2754 7.25H13.2754ZM13.0254 7.5C12.8873 7.5 12.7754 7.38807 12.7754 7.25H14.7754C14.7754 6.2835 13.9919 5.5 13.0254 5.5V7.5ZM12.7754 7.25V9.75H14.7754V7.25H12.7754ZM12.7754 9.75L12.7754 9.7491L14.7753 9.75683C14.7754 9.75455 14.7754 9.75228 14.7754 9.75H12.7754ZM14.7754 11V9.75296H12.7754V11H14.7754ZM9.27535 16.5C12.3129 16.5 14.7754 14.0376 14.7754 11H12.7754C12.7754 12.933 11.2084 14.5 9.27535 14.5V16.5ZM4.72773 14.0942C5.716 15.5444 7.38393 16.5 9.27535 16.5V14.5C8.07321 14.5 7.01213 13.8948 6.38045 12.9679L4.72773 14.0942ZM2.14081 11.8601C3.12768 12.6398 4.1605 13.4604 4.80305 14.1913L6.30513 12.8708C5.51696 11.9742 4.32011 11.033 3.38075 10.2908L2.14081 11.8601ZM2.15303 11.8696L2.15308 11.8696L3.36849 10.2813L3.36845 10.2812L2.15303 11.8696ZM2.13977 11.8592L2.13996 11.8594L3.38152 10.2914L3.38133 10.2913L2.13977 11.8592ZM1.27191 11.1653C1.53818 11.3839 1.83659 11.6197 2.14058 11.8599L3.38052 10.2906C3.07274 10.0474 2.79 9.82399 2.54106 9.61959L1.27191 11.1653ZM1.01778 8.14221C0.225175 9.04318 0.36732 10.4226 1.27191 11.1653L2.54106 9.61959C2.52173 9.60372 2.50406 9.57558 2.50055 9.53613C2.49713 9.49765 2.50911 9.47495 2.51941 9.46324L1.01778 8.14221ZM5.13306 9.18309C4.76 8.78412 4.18894 8.21906 3.5653 7.86975C3.25213 7.69434 2.84133 7.52445 2.38081 7.5217C1.87057 7.51865 1.38659 7.72299 1.01778 8.14221L2.51941 9.46324C2.52177 9.46056 2.50353 9.48113 2.46192 9.49972C2.42048 9.51823 2.385 9.52176 2.36888 9.52166C2.35449 9.52158 2.42166 9.52154 2.58795 9.61468C2.92326 9.80249 3.31712 10.1693 3.6722 10.5491L5.13306 9.18309ZM5.15947 9.21142C5.15063 9.20191 5.14183 9.19247 5.13306 9.18309L3.6722 10.5491C3.6797 10.5571 3.68724 10.5652 3.69482 10.5733L5.15947 9.21142ZM3.77532 9.75602L3.77537 9.76525L5.77534 9.7532L5.77528 9.74398L3.77532 9.75602ZM3.7753 2.25V9.75H5.7753V2.25H3.7753ZM3.69482 10.5733C4.40798 11.3403 5.77535 10.8889 5.77535 9.75922H3.77535C3.77535 8.98963 4.69149 8.70813 5.15947 9.21142L3.69482 10.5733ZM9.2753 8.5C10.1037 8.5 10.7753 7.82843 10.7753 7H8.7753C8.7753 6.72386 8.99916 6.5 9.2753 6.5V8.5ZM6.7753 8.5C7.60373 8.5 8.2753 7.82843 8.2753 7H6.2753C6.2753 6.72386 6.49916 6.5 6.7753 6.5V8.5ZM10.2753 6.99997C10.2753 7.82841 10.9469 8.5 11.7753 8.5V6.5C12.0515 6.5 12.2753 6.72384 12.2753 6.99997H10.2753ZM7.7753 7C7.7753 7.82843 8.44687 8.5 9.2753 8.5V6.5C9.55144 6.5 9.7753 6.72386 9.7753 7H7.7753ZM12.0254 8.5C12.7157 8.5 13.2754 7.94036 13.2754 7.25H11.2754C11.2754 6.83579 11.6111 6.5 12.0254 6.5V8.5ZM5.2753 7C5.2753 7.82843 5.94687 8.5 6.7753 8.5V6.5C7.05144 6.5 7.2753 6.72386 7.2753 7H5.2753Z",fill:"black",fillOpacity:"0.8",mask:"url(#path-1-outside-1_15_11117)"})]})}let q=(0,g.x1)(function(e){return(0,s.jsx)(c.SV,{boundaryKey:"OrgUpgradeMultiTeamModal",team:n.k.BILLING_EXPERIENCE,fallback:(0,s.jsx)(v.N,{}),children:(0,s.jsx)(r.Suspense,{fallback:(0,s.jsx)(N.Y,{hiddenTitle:(0,_.tx)("org_upgrade.multi_team.bring_your_teams_together_with_the_figma_organization_plan"),estimatedWidth:500,estimatedHeight:500}),children:(0,s.jsx)(Y,{...e})})})},"Multi-Team Org Upgrade Modal")},463795:function(e,t,a){a.r(t),a.d(t,{PlanWithFigjamPriceView:()=>v,OrgUpgradeSingleTeamModal:()=>T});var s=a(750357),r=a(853505),i=a(273634),n=a(254081),l=a(498869),d=a(590914),o=a(926941),c=a(619369),m=a(761008),u=a(843589),_=a(479852),p=a(752212),h=a(164526),x=a(13333),g=a(541189);let y="org_upgrade_single_team_modal--priceRow--0yYbQ text--fontPos11--rO47d text--_fontBase--VaHfk",f="org_upgrade_single_team_modal--priceFigureWithFigjam--m10E6 text--fontPos16--TWa2I text--_fontBase--VaHfk";function v(e){return(0,s.jsxs)("div",{className:"org_upgrade_single_team_modal--planPriceView--hLD4Z",style:{padding:e.padding},"data-testid":e.dataTestId,children:[(0,s.jsx)("h2",{className:"org_upgrade_single_team_modal--planNameBase--a1yO- text--fontPos16--TWa2I text--_fontBase--VaHfk",children:e.name}),(0,s.jsx)("p",{className:"org_upgrade_single_team_modal--subtitle--De77G",children:e.subtitle}),(0,s.jsxs)("div",{className:y,children:[(0,s.jsxs)("p",{className:"org_upgrade_single_team_modal--figmaPriceWithDevMode--G1X89",children:[(0,d.tx)("plan_details.figma"),(0,s.jsx)("div",{className:"org_upgrade_single_team_modal--devModeText--YpnqO",children:(0,s.jsx)(n.F,{})})]}),(0,s.jsx)("div",{children:(0,s.jsx)("p",{className:f,children:e.prices[c.hH.DESIGN]})})]}),e.prices[c.hH.DEV_MODE]&&(0,s.jsxs)("div",{className:y,children:[(0,s.jsx)("p",{children:(0,d.tx)("plan_details.dev_mode_only")}),(0,s.jsx)("div",{children:(0,s.jsx)("p",{className:f,children:e.prices[c.hH.DEV_MODE]})})]}),(0,s.jsxs)("div",{className:y,children:[(0,s.jsx)("p",{children:(0,d.tx)("plan_details.fig_jam")}),(0,s.jsx)("div",{children:(0,s.jsx)("p",{className:f,children:e.prices[c.hH.FIGJAM]})})]})]})}let T=(0,o.x1)(function(e){let t=(0,p.Rs)();return(0,s.jsx)(l.SV,{boundaryKey:"OrgUpgradeSingleTeamModal",team:i.k.BILLING_EXPERIENCE,fallback:(0,s.jsx)(m.N,{}),children:(0,s.jsx)(r.Suspense,{fallback:(0,s.jsx)(x.Y,{hiddenTitle:(0,d.tx)("org_upgrade.single_team.get_more_out_of_figma_as_you_grow"),estimatedWidth:586,estimatedHeight:586}),children:(0,s.jsx)(g.iu,{team:t,resource:h.gx.ORG,currentPlan:u.V.Plan.PRO,upsellPlan:u.V.Plan.ORG,editorType:_.gg.DESIGN,upsellSource:e.upsellSource})})})},"Single-Team Org Upgrade Modal")},948340:function(e,t,a){a.r(t),a.d(t,{ResubscribeModal:()=>E});var s=a(750357),r=a(853505),i=a(577851),n=a(5929),l=a(451410),d=a(514177),o=a(317429);a(607906);var c=a(545449),m=a(590914),u=a(996834),_=a(469271),p=a(989067),h=a(871567),x=a(926941),g=a(7710),y=a(845277),f=a(920860),v=a(998324);let T=(0,x.z7)(n.zx),j=(0,x.z7)(n.zx);function E(e){let{upsellSource:t,paymentMethod:a,nextBillDate:n,amount:E,team:S,monthlySub:N=null,annualSub:b=null,currency:C,canSeeBillingAddressExp:w}=e,A=(0,i.I0)(),I=(0,y.A6)(),k=(0,i.v9)(e=>(0,v.np)(e,I)),[R,P]=(0,r.useState)(!1),{saveWithPaymentMethod:O,createPaymentElement:D,unmountPaymentElement:M}=(0,g.HR)({setupIntentParams:{redirect_url:k,subtotal_estimate:E,success_message:(0,m.t)("resubscribe_modal.success_message"),currency:C,teamId:S.id},paymentFlowSource:g.E.PRO_REACTIVATE,customerInfo:{teamId:S.id,orgId:void 0},defaultCountry:(0,f.yJ)(),currency:C,canSeeBillingAddressExp:w,isCheckout:!1});(0,c.O)(()=>(D({ready:()=>{P(!0)}}),()=>{M()}));let U=l.VO({defaultOpen:!0}),B=a?.object.last4,L=(0,u.lb)(E,C??"usd",{showCents:!0});return(0,s.jsxs)(x.Ui,{name:"Resubscribe Modal",properties:{upsellSource:t},children:[(0,s.jsx)(d.fC,{manager:U,width:"fit-content",children:(0,s.jsxs)(o.AU,{children:[(0,s.jsx)(o.h4,{children:(0,s.jsx)(o.Dx,{children:(0,m.tx)("resubscribe_modal.title")})}),(0,s.jsx)(o.uT,{...{className:"x1dc814f"},children:(0,s.jsx)("p",{children:(0,m.tx)("resubscribe_modal.body",{last4:B,formattedAmount:L,nextBillDate:n})})}),(0,s.jsx)(o.$_,{children:(0,s.jsxs)(o.Dj,{children:[(0,s.jsx)(j,{variant:"secondary",disabled:!R,onClick:()=>{A((0,_.hV)()),(0,p.nM)({team:S,dispatch:A,cancelling:!0,monthlySub:N,annualSub:b,currency:C,canSeeBillingAddressExp:w,estimatedChargeCents:E})},trackingProperties:{trackingDescriptor:h.y.UPDATE_PAYMENT},children:(0,m.tx)("resubscribe_modal.different_payment_method")}),(0,s.jsx)(T,{variant:"primary",disabled:!R,onClick:e=>{let t=async()=>{e.preventDefault(),await O(a),P(!0)};P(!1),t()},trackingProperties:{trackingDescriptor:h.y.REACTIVATE_YOUR_PROFESSIONAL_PLAN},children:(0,m.tx)("resubscribe_modal.reactivate_plan")})]})})]})}),(0,s.jsx)("div",{id:g.w_,...{className:"x1s85apg"}})]})}},12474:function(e,t,a){a.r(t),a.d(t,{UniversalUpgradeSequence:()=>G});var s=a(750357),r=a(853505),i=a(577851),n=a(661897),l=a(545449),d=a(365448),o=a(739842),c=a(590914),m=a(459090),u=a(453393),_=a(404639),p=a(469271),h=a(404756),x=a(926941),g=a(956964),y=a(845277),f=a(920860),v=a(672650),T=a(790312),j=a(798870),E=a(155969),S=a(870102),N=a(681768),b=a(84376),C=a(617054),w=a(259946),A=a(129237),I=a(431534),k=a(65181),R=a(70523),P=a(260251),O=a(242802),D=a(293111),M=a(61324),U=a(184388);let B=(0,A.u4)((e,{teamName:t,selectedView:a,currency:s,onSuccess:r,onError:i,onBillingCompleteRedirectInfo:n})=>{let l;N.ZP.post("/api/teams/create",{team_name:t}).then(({data:t})=>(l="team"in t.meta?t.meta.team:t.meta,e.dispatch(k.v_({team:l})),(0,P.H)("Team Created",l.id,e.getState()),M.$.getTeam({teamId:l.id}))).then(({data:t})=>{for(let a of t.meta)e.dispatch(I.v_({role:a}));r(),e.dispatch(h.F2({teamId:l.id,selectedView:a,newTeam:!0,currency:s,...n?{onBillingCompleteRedirectInfo:n}:{}}))}).catch(()=>{i()})});function L(e){let t=(0,i.I0)(),a=(0,O.dO)(),n=(0,i.v9)(D.G),l=(0,i.v9)(e=>e.roles.byTeamId),[d,m]=r.useState(!1),[u,_]=r.useState(!1),[h,x]=r.useState(""),g=(0,f.x_)(),y=()=>{t(p.hV())},v=(0,S.D)(()=>{m(!0),h?t(B({teamName:h,selectedView:e.selectedView,currency:g,onSuccess:y,onError:()=>{m(!1),_(!0)},onBillingCompleteRedirectInfo:e.onBillingCompleteRedirectInfo})):(m(!1),_(!0))});return a&&!(0,R.hy)({userId:a,teams:Object.values(n),rolesByTeamId:l})?(0,s.jsxs)("div",{"data-testid":"createTeamToUpgradeView",children:[(0,s.jsx)("p",{className:U.KZ,children:(0,c.tx)("universal_upgrade_sequence.subtitle")}),u&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(b.z,{message:(0,c.t)("universal_upgrade_sequence.error"),marginTop:16}),(0,s.jsx)(o.Ki,{multiple:1})]}),(0,s.jsx)(o.Ki,{multiple:2}),(0,s.jsxs)("div",{className:U.tn,children:[(0,s.jsx)("div",{className:U.Rc,children:(0,s.jsx)(C.H,{dataTestId:"createTeamInput",placeholder:(0,c.t)("universal_upgrade_sequence.team_name.placeholder"),value:h||"",onChange:e=>{x(e.target.value)},required:!0,maxLength:255})}),(0,s.jsx)(o.RS,{dataTestId:"nextButton",className:U.qp,disabled:!h||d,onClick:v,children:d?(0,s.jsx)(w.TK,{className:U.lY}):(0,c.tx)("universal_upgrade_sequence.next")})]})]}):null}var V=a(204764),z=a(499503);function G(e){let[t,a]=r.useState("selectTeam"),S=(0,i.I0)(),N=(0,y.A6)(),b=(0,g.Mn)(),C=(0,i.v9)(e=>e.payment.promo),w=(0,i.v9)(e=>e.payment.billingPeriod),A=()=>{S(p.eI())};if((0,l.O)(()=>{e.plan===V.s.PRO&&(0===(0,v.ez)(b).length?(S(u.Nf({openInNewTab:!n.YO})),a("createTeam")):a("selectTeam"))}),"selectTeam"===t){let t=(0,v.ez)(b);return(0,s.jsx)(x.Ui,{name:"Upgrade Select Team Modal",children:(0,s.jsxs)(E.bc,{hide:A,size:436,children:[(0,s.jsx)("h1",{"data-testid":"modalTitle",className:U.d$,children:(0,c.tx)("universal_upgrade_sequence.title")}),(0,s.jsx)(d.PZ,{dataTestId:"closeButton",className:U.Ah,onClick:A,innerText:(0,c.t)("universal_upgrade_sequence.close_modal")}),(0,s.jsx)(o.Ki,{multiple:2}),(0,s.jsx)(z.F,{eligibleTeams:t,selectTeam:t=>{"teamUpgrade"===N.view?S(_.fv({...N,teamFlowType:j.wD.UPGRADE_EXISTING_TEAM,teamId:t.id,paymentStep:(0,m.TR)(N.paymentStep,j.wD.UPGRADE_EXISTING_TEAM,N.billingPeriod||null,C,N.planType||j.rD.UNDETERMINED,C?T.iy.CONFIRM_PAY:T.iy.CHOOSE_PLAN),billingPeriod:e.billingPeriod||w,entryPoint:e.entryPoint})):S(h.F2({teamId:t.id,selectedView:N,newTeam:!1,currency:(0,f.x_)(),billingPeriod:e.billingPeriod,onBillingCompleteRedirectInfo:e.onBillingCompleteRedirectInfo,entryPoint:e.entryPoint,openInNewTab:e.openInNewTab})),S(p.hV()),e.onDone?.()}}),(0,s.jsx)(o.Ki,{multiple:2}),(0,s.jsx)(L,{selectedView:N,onBillingCompleteRedirectInfo:e.onBillingCompleteRedirectInfo})]})})}return(0,s.jsx)(s.Fragment,{})}},638124:function(e,t,a){a.r(t),a.d(t,{UpgradeContactSalesModal:()=>N});var s=a(750357),r=a(853505),i=a(577851),n=a(870102),l=a(330837),d=a(158639),o=a(681768),c=a(365448),m=a(84376),u=a(739842),_=a(240473),p=a(590914),h=a(469271),x=a(926941),g=a(712824),y=a(240191),f=a(155969),v=a(763967);let T="upgrade_contact_sales_modal--closeButton--9pv7g";var j=a(335489),E=a(700052);let S=(0,g.Y3)(function({hideModal:e}){return(0,s.jsx)(x.Ui,{name:"Upgrade Contact Sales Success Modal",children:(0,s.jsxs)(f.bc,{hide:e,size:480,children:[(0,s.jsxs)("div",{className:"upgrade_contact_sales_modal--successModalWrapper--qhlLg",children:[(0,s.jsxs)("div",{className:"upgrade_contact_sales_modal--successModalTitle--Vp9yQ upgrade_contact_sales_modal--modalTitle--kKN1X text--fontPos13--5OfL8 text--_fontBase--VaHfk",children:[(0,s.jsx)(_.n,{className:"upgrade_contact_sales_modal--successIcon--lrHKb",svg:E.Z}),(0,p.tx)("universal_upgrade.contact_sales.thank_you")]}),(0,s.jsx)(c.PZ,{className:T,onClick:e,innerText:"close"})]}),(0,s.jsx)("div",{className:"upgrade_contact_sales_modal--successModalText--M2hRy text--fontPos13--5OfL8 text--_fontBase--VaHfk",children:(0,p.tx)("universal_upgrade.contact_sales.sales_will_reach_out")})]})})},"ContactSalesSuccessModal");function N(e){return(0,s.jsx)(d.X,{label:"UpgradeContactSalesModal",children:(0,s.jsx)(b,{...e})})}function b(e){let t=(0,i.I0)(),a=(0,i.v9)(e=>e.user),[d,g]=(0,r.useState)({email:a?.email??"",name:a?.handle??"",overridePlaceholderText:e.overridePlaceholderText,freeText:"",result:void 0,companyName:void 0,companySize:"",jobTitle:"",topic:"",plan:"",product:"",phone:"",formErrors:{}}),E=()=>{t(h.eI())},N=(0,n.D)(()=>{let a={},s=(0,p.t)("universal_upgrade.this_field_is_required");if(d.email?(0,l.Jh)(d.email)||(a.email=(0,p.t)("universal_upgrade.please_provide_a_valid_email_address")):a.email=s,d.name||(a.name=s),d.companyName||(a.companyName=s),d.topic||(a.topic=s),d.plan||(a.plan=s),g(e=>({...e,formErrors:a,result:void 0})),0===Object.keys(a).length){let a={email:d.email,name:d.name,company_name:d.companyName,topic:d.topic,plan:d.plan,phone:d.phone,message:d.freeText,source:e.source,form_name:"topic_v1"};o.ZP.post("/api/form_post/org-lead-gen",a).then(()=>{g(e=>({...e,result:"success"})),t((0,h.K4)({type:S,data:{hideModal:()=>t(h.hV())}}))}).catch(()=>g(e=>({...e,result:"error"})))}}),b=e=>d.formErrors[e]?"upgrade_contact_sales_modal--error--YXYtY basic_form--labeledInputGroup--ruFib":void 0,C=e=>{let t=d.formErrors[e];return t?(0,s.jsx)("div",{"data-testid":"form-error",className:"upgrade_contact_sales_modal--errorMessage--SI1Xc text--fontPos11--rO47d text--_fontBase--VaHfk",children:t}):null},w=(e,t,a=!1)=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.hI,{htmlName:t,label:e,value:d[t]||"",onChange:e=>{let a={[t]:e.target.value};g(e=>({...e,...a}))},disabled:a,className:b(t)}),C(t)]}),A=(e,t,a)=>{let r=b(t)||v.ru;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:r,children:(0,s.jsxs)("div",{className:"upgrade_contact_sales_modal--select--B96hS address_form--selectRowFull--3AQH0",children:[(0,s.jsx)(u.ZU,{name:t,placeholder:e,defaultValue:"","data-testid":`${t}-select`,onChange:e=>{let a={[t]:e.target.value};g(e=>({...e,...a}))},required:!0,children:a}),(0,s.jsx)(_.n,{className:v.C8,svg:j.Z})]})}),C(t)]})};return(0,s.jsx)(x.Ui,{name:"Upgrade Contact Sales Modal",children:(0,s.jsxs)(f.bc,{className:"upgrade_contact_sales_modal--contactSalesModal--MghVQ",hide:E,size:480,children:[(0,s.jsxs)("div",{className:"upgrade_contact_sales_modal--titleWrapper--qnj40",children:[(0,s.jsx)("h1",{className:"upgrade_contact_sales_modal--modalTitle--kKN1X text--fontPos13--5OfL8 text--_fontBase--VaHfk",children:(0,p.tx)("universal_upgrade.contact_sales_title")}),(0,s.jsx)(c.PZ,{className:T,onClick:E,innerText:"close"})]}),(0,s.jsxs)("div",{className:"upgrade_contact_sales_modal--modalBody--nj7s9",children:["error"===d.result&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.z,{message:(0,p.t)("universal_upgrade.there_was_an_error_processing_your_information_please_try_again")}),(0,s.jsx)(u.Ki,{multiple:.5})]}),(0,s.jsxs)("fieldset",{children:[w((0,p.t)("universal_upgrade.email_address"),"email"),w((0,p.t)("universal_upgrade.full_name"),"name"),w((0,p.t)("universal_upgrade.company_name"),"companyName"),A((0,p.t)("contact_sales.which_topic_best_fits_your_needs"),"topic",(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("option",{value:"",disabled:!0,children:(0,p.t)("contact_sales.which_topic_best_fits_your_needs")}),[{name:(0,p.t)("contact_sales.topic.request_a_sales_demo_or_talk_to_sales"),value:"request_a_sales_demo_or_talk_to_sales"},{name:(0,p.t)("contact_sales.topic.billing_and_invoicing"),value:"billing_and_invoicing"},{name:(0,p.t)("contact_sales.topic.technical_and_product_support"),value:"technical_and_product_support"},{name:(0,p.t)("contact_sales.topic.educators_and_students"),value:"educators_and_students"}].map(e=>(0,s.jsx)("option",{value:e.value,"data-testid":`select-option-${e.value}`,children:e.name},e.value))]})),A((0,p.t)("contact_sales.what_figma_plan_are_you_inquiring_about"),"plan",(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("option",{value:"",disabled:!0,children:(0,p.t)("contact_sales.what_figma_plan_are_you_inquiring_about")}),[{name:(0,p.t)("contact_sales.plan.starter"),value:"starter"},{name:(0,p.t)("contact_sales.plan.professional"),value:"professional"},{name:(0,p.t)("contact_sales.plan.organization"),value:"organization"},{name:(0,p.t)("contact_sales.plan.enterprise"),value:"enterprise"},{name:(0,p.t)("contact_sales.plan.figma_for_government"),value:"figma_for_government"},{name:(0,p.t)("contact_sales.plan.not_sure"),value:"not_sure"}].map(e=>(0,s.jsx)("option",{value:e.value,"data-testid":`select-option-${e.value}`,children:e.name},e.value))]})),w((0,p.t)("contact_sales.phone_number_optional"),"phone")]}),(0,s.jsx)(u.Ki,{multiple:1}),(0,s.jsx)("p",{children:(0,p.tx)("universal_upgrade.how_can_we_help_optional")}),(0,s.jsx)(u.Ki,{multiple:1}),(0,s.jsx)(y.C,{className:"upgrade_contact_sales_modal--freeTextInput--0GSAI text--fontPos13--5OfL8 text--_fontBase--VaHfk",value:d.freeText,onChange:e=>g(t=>({...t,freeText:e.target.value})),placeholder:d.overridePlaceholderText??(0,p.t)("universal_upgrade.e_g_i_m_looking_to_set_up_a_demo_of_figma"),maxLength:500})]}),(0,s.jsxs)("div",{className:"upgrade_contact_sales_modal--modalFooter--xrO7u",children:[(0,s.jsx)(u.pJ,{onClick:E,children:(0,p.tx)("general.cancel")}),(0,s.jsx)(u.RS,{onClick:N,children:(0,p.tx)("universal_upgrade.submit")})]})]})})}},629339:function(e,t,a){a.r(t),a.d(t,{OrgSelfServeBillingRemodelPageInner:()=>ek,OrgHeader:()=>eP,OrgSelfServeBillingRemodelPage:()=>eR});var s=a(750357),r=a(853505),i=a(577851),n=a(850340),l=a(273634),d=a(444947),o=a(330837),c=a(458780),m=a(545449),u=a(903132),_=a(632959),p=a(681768),h=a(498869),x=a(589937),g=a(240473),y=a(661193),f=a(733791),v=a(367949),T=a(590914),j=a(501253),E=a(491420),S=a(823076),N=a(996834),b=a(537789),C=a(513366),w=a(646312),A=a(952266),I=a(542144),k=a(71590),R=a(462087),P=a(830114),O=a(382830),D=a(926941),M=a(248893),U=a(532713),B=a(790312),L=a(798870),V=a(428460);let z=(0,D.z7)(function(e){return(0,s.jsx)("div",{className:V.wt,onClick:e.onClick,children:(0,T.tx)("org_self_serve.headers.cancel")})});function G(e){if(e.currentStep===U.UC.Confirmation)return null;let t=[],a=null;if(e.newTeamProps){let s={step:U.UC.ChoosePlan,name:(0,T.t)("org_self_serve.headers.choose_plan")},r={step:U.UC.CreateTeam,name:(0,T.t)("org_self_serve.headers.create_team")};switch(e.newTeamProps?.teamFlowType){case L.wD.CREATE:t.push({step:U.UC.PseudoCreateTeam,name:(0,T.t)("org_self_serve.headers.create_team")}),t.push({step:U.UC.AddCollaborators,name:(0,T.t)("org_self_serve.headers.add_team_members")}),t.push(s);break;case L.wD.CREATE_AND_UPGRADE:t.push(s),t.push(r),a=U.UC.CreateTeam;break;case L.wD.UPGRADE_EXISTING_TEAM:t.push(s)}}e.canSeeTeamAndSeatSelectionSteps&&(t.push({step:U.UC.TeamSelect,name:(0,T.t)("org_self_serve.headers.teams_to_upgrade")}),e.isCampfireCart&&t.push({step:U.UC.SeatSelect,name:(0,T.t)("checkout.choose_seats")}),a=a??U.UC.TeamSelect),e.isCampfireCart?a=a??U.UC.Payment:(t.push({step:U.UC.Details,name:(0,T.t)("org_self_serve.headers.organization_details")}),a=a??U.UC.Details),t.push({step:U.UC.Payment,name:(0,T.t)("org_self_serve.headers.payment")}),t.push({step:U.UC.Review,name:(0,T.t)("org_self_serve.headers.review")}),t[t.findIndex(e=>e.step===a)].step=U.UC.Initial;let r=0;for(let a=0;a<t.length;a++)if(t[a].step===e.currentStep){r=a;break}return(0,s.jsxs)("div",{className:V.ec,children:[(0,s.jsx)(z,{onClick:e.onFileBrowserClick}),(0,s.jsx)("div",{className:V.fU,"data-testid":"stepBreadcrumbs",children:t.map((t,a)=>(0,s.jsx)(O.ut,{selected:e.currentStep===t.step,number:a+1,text:t.name,onClick:()=>{d.RQ.trackDefinedEvent("monetization_upgrades.checkout_breadcrumb_navigation",{fromStep:e.currentStep,toStep:t.step,tier:M.K0.ORG,isCampfireCart:!!e.isCampfireCart});let a=function(e){switch(e){case U.UC.ChoosePlan:return B.iy.PLAN_COMPARISON;case U.UC.AddCollaborators:return B.iy.ADD_COLLABORATORS;case U.UC.PseudoCreateTeam:return B.iy.CREATE_TEAM;default:return null}}(t.step);a&&e.onSelectTeamUpgradeStep?e.onSelectTeamUpgradeStep(a):e.setStep(t.step)},canClick:a<r,lightText:!0},a+1))})]})}var H=a(818780),F=a(697816),$=a(693287),Y=a(456677),Z=a(529972),q=a(404639),K=a(469271),W=a(404756),Q=a(121142),X=a(70523),J=a(871567),ee=a(271264),et=a(889835),ea=a(7710),es=a(260251),er=a(328403),ei=a(761008),en=a(581414),el=a(231229),ed=a(479852),eo=a(920860),ec=a(153074),em=a(20023),eu=a(548249),e_=a(750077),ep=a(95238),eh=a(576028),ex=a(8449),eg=a(149293),ey=a(6390),ef=a(156802),ev=a(739842),eT=a(659461),ej=a(8690);function eE({teams:e,selectedTeamIds:t,onToggle:a,newTeamName:r,isCartFullSend:i}){return(0,s.jsx)("div",{"data-testid":"org-select-teams-step",children:(0,s.jsxs)("div",{className:V.cZ,children:[r&&(0,s.jsx)(eS,{team:{id:"new-team",name:r,numMembers:1},isSelected:!0,onToggle:a},"new-team"),e.map(e=>(0,s.jsx)(eS,{team:e,isSelected:t.has(e.id),onToggle:a,isCartFullSend:i},e.id))]})})}function eS({team:e,isSelected:t,onToggle:a,isCartFullSend:r}){return(0,s.jsxs)("div",{"data-testid":`select_team--${e.id}`,children:[(0,s.jsx)(ey.Z,{className:ej.j,checked:t,onChange:()=>a(e.id),id:`select-team-${e.id}`,disabled:"new-team"===e.id,"aria-disabled":"new-team"===e.id}),(0,s.jsxs)("label",{htmlFor:`select-team-${e.id}`,className:V.yb,style:E.sx.if(t,E.sx.colorBorderSelected.colorBgSelectedTertiary,E.sx.if(r,E.sx.colorBg.colorBorder,E.sx.colorBg.add({borderColor:"var(--color-bg)"}))).$,children:[(0,s.jsx)(eT.Ir,{team:e}),(0,s.jsxs)("span",{className:y.B.maxWFull.$,children:[(0,s.jsx)("span",{className:y.B.block.maxWFull.font14.fpl__textBodyLargeLineHeight.colorText.truncate.$,children:e.name}),(0,s.jsx)("span",{className:y.B.block.font11.colorTextSecondary.ellipsis.$,children:(0,T.tx)("checkout.org_select_teams_member_count",{count:e.numMembers})})]}),t&&(0,s.jsx)("div",{className:V.DS,children:(0,s.jsx)(ef.G,{})})]})]},e.id)}function eN({orgDetails:e,onChangeFormInput:t}){return(0,s.jsx)(H.r,{title:(0,T.t)("checkout.organization_details"),children:(0,s.jsxs)("div",{className:y.B.font13.$,children:[(0,s.jsx)(ev.hI,{htmlName:"legal_org_name",label:(0,T.t)("org_self_serve.details_step.legal_company_name"),value:e.legalOrgName,onChange:t}),(0,s.jsx)(ev.hI,{htmlName:"org_name",label:(0,T.t)("org_self_serve.details_step.company_display_name"),placeholder:(0,T.t)("org_self_serve.details_step.company_display_name__different_from_company_name_sub_text"),value:e.orgName,onChange:t})]})})}var eb=a(85122),eC=a(453271),ew=a(662928);function eA({users:e,selectedUserSeatTypes:t,selectedTeamIds:a,additionalSeatsCount:i,onChangeSeat:n,onChangeAdditionalSeats:l,currency:d}){let o=(0,eb.t)({currency:d,tier:M.K0.ORG,renewalTerm:M.Xp.YEAR,showCents:!1}),[c]=(0,u.Eh)(o);if(null===c.data)throw Error("No seat types data");let m=c.data,{changeUserSeatType:_,selectSeatsState:p,setAdditionalSeats:h}=(({selectedTeamIds:e,selectedUserSeatTypes:t,additionalSeatsCount:a,onChangeSeat:s,onChangeAdditionalSeats:i})=>{let n=(0,eC.yR)(e,t,a),[l,d]=(0,r.useState)(n),o=(0,r.useCallback)(e=>{try{d(t=>(function(e,t){let a=(0,eC.Yg)(e,t);switch(a.type){case"success":return a.value;case"validation":throw Error("failed validation");case"error":throw Error("sent error")}})(t,e))}catch(e){}},[]);return{changeUserSeatType:(0,r.useCallback)((e,t)=>{o({type:"changeSeatType",userId:e,seatType:t}),s(e,t)},[s,o]),setAdditionalSeats:(0,r.useCallback)(e=>{o({type:"setAdditionalSeats",additionalSeatCounts:e}),i(e)},[i,o]),selectSeatsState:l}})({selectedTeamIds:a,selectedUserSeatTypes:t,additionalSeatsCount:i,onChangeSeat:n,onChangeAdditionalSeats:l});return(0,s.jsx)("div",{"data-testid":"select-seats-step-org",children:(0,s.jsx)(ew.f,{users:e,seatTypes:m,changeUserSeatType:_,selectSeatsState:p,setAdditionalSeats:h,tier:M.K0.ORG})})}var eI=a(315018);class ek extends r.Component{constructor(e){super(e),this.canSeeTeamAndSeatSelectionSteps=()=>Object.keys(this.state.eligibleTeamsByTeamId).length>0||this.state.loading||!!this.props.newTeamProps,this.effectiveStep=()=>{if(this.props.step===U.UC.Initial||this.props.step===U.UC.ChoosePlan)if(this.props.newTeamProps?.teamFlowType===L.wD.CREATE_AND_UPGRADE)return U.UC.CreateTeam;else if(this.canSeeTeamAndSeatSelectionSteps())return U.UC.TeamSelect;else return U.UC.Payment;return this.props.step},this.setStep=e=>{this.props.dispatch(q.fv({view:"orgSelfServe",step:e,orgMigrated:!1,newTeamProps:this.props.newTeamProps,upsellSource:this.props.upsellSource})),this.setState(e=>({payment:{...e.payment,card:null}}))},this.trackError=e=>{d.RQ.trackDefinedEvent("monetization_upgrades.checkout_payment_error",{message:e,paymentFlow:ea.E.ORG_UPGRADE,paymentMethodType:eu.Y7.CARD,isCampfireCart:!0})},this.onSubmit=()=>{let e=this.effectiveStep();switch(e){case U.UC.CreateTeam:this.state.newTeamName?.trim()&&this.setStep(U.UC.TeamSelect);break;case U.UC.AddCollaborators:this.setStep(U.UC.Payment);break;case U.UC.PseudoCreateTeam:this.setStep(U.UC.TeamSelect);break;case U.UC.TeamSelect:let t=(0,A.K)({eligibleTeamsByTeamId:this.state.eligibleTeamsByTeamId,selectedTeamIds:this.state.selectedTeamIds,eligibleUsersByUserId:this.state.eligibleUsersByUserId,selectedUserSeatTypes:this.state.selectedUserSeatTypes});this.setState({selectedUserSeatTypes:t}),this.setStep(U.UC.SeatSelect);break;case U.UC.SeatSelect:this.setStep(U.UC.Payment);break;case U.UC.Payment:this.onSubmitPaymentAndAddress();break;case U.UC.Review:this.onSubmitPurchaseOrder();break;case U.UC.Confirmation:break;default:(0,n.P2)(e)}},this.getNextButtonText=()=>{let e=this.effectiveStep();switch(e){case U.UC.CreateTeam:case U.UC.PseudoCreateTeam:case U.UC.AddCollaborators:return(0,T.t)("org_self_serve.create_team_step.next_select_team");case U.UC.TeamSelect:return(0,T.t)("checkout.org_self_serve.next_select_seats");case U.UC.SeatSelect:return(0,T.t)("org_self_serve.payment_step.next_payment");case U.UC.Payment:return(0,T.t)("org_self_serve.review_step.next_review");case U.UC.Review:case U.UC.Confirmation:return"";default:(0,n.P2)(e)}},this.getIsNextButtonDisabled=()=>{let e=this.effectiveStep();switch(e){case U.UC.CreateTeam:case U.UC.PseudoCreateTeam:return!this.state.newTeamName;case U.UC.TeamSelect:return this.state.loading;case U.UC.Payment:return this.state.apiPending||!this.state.orgDetails.legalOrgName;case U.UC.Review:case U.UC.Confirmation:case U.UC.AddCollaborators:case U.UC.SeatSelect:return!1;default:(0,n.P2)(e)}},this.getIsNextButtonLoading=()=>this.state.loading||this.state.apiPending,this.onTeamToggle=e=>{let t=!this.state.selectedTeamIds.has(e);d.RQ.trackDefinedEvent("monetization_upgrades.checkout_change_team_selection",{teamId:e,selectedTeam:t}),t?this.setState(t=>({selectedTeamIds:t.selectedTeamIds.add(e)})):this.setState(t=>(t.selectedTeamIds.delete(e),{selectedTeamIds:t.selectedTeamIds}))},this.onCardReady=e=>{let t={...this.state.payment,card:e};this.setState({payment:t})},this.onAddressChange=e=>{let t={...this.state.payment,address:e};this.setState({payment:t})},this.onShippingAddressChange=e=>{this.setState({shippingAddress:e})},this.onNameOnPaymentMethodChange=e=>{this.setState({nameOnPaymentMethod:e.trim()})},this.onClearToken=()=>{let e={...this.state.payment,token:null};this.setState({payment:e})},this.onVatIdChange=e=>{this.setState({vatId:e})},this.onRegionalVatIdChange=e=>{this.setState({regionalVatId:e})},this.onVatValidationFail=e=>{this.trackError(e),this.setState({apiPending:!1,paymentError:e})},this.onChangeNewTeamName=e=>{this.setState({newTeamName:e.trim()})},this.onChangeOrgDetails=e=>{let t=e.target.name,a=e.target.value;if(!t){e.preventDefault(),console.error("HTMLInputElement is missing name attribute:",e.target);return}let s=this.state.orgDetails;switch(t){case"actor_name":s.actorName=a.trim();break;case"legal_org_name":s.legalOrgName=a.trim();break;case"org_name":s.orgName=a.trim()}this.setState({orgDetails:s})},this.contactSales=()=>{this.props.dispatch((0,K.K4)({type:I.gg,data:{source:k.f.ORG_SELF_SERVE_UPGRADE_MODAL}}))},this.onFileBrowserClick=()=>{this.props.newTeamProps&&(0,en.bC)(this.props.user.id),c.ZP.redirect("/files/recent")},this.updateAdditionalEmptySeats=e=>{this.setState({additionalSeatCounts:e})},this.renderPurchaseSummary=()=>{let e=this.effectiveStep()===U.UC.TeamSelect?null:(0,C.fG)(this.state.selectedUserSeatTypes,this.state.additionalSeatCounts);return(0,s.jsx)($.z,{billingInterval:B.kT.YEAR,buttonText:this.getNextButtonText(),canEnforcePaidSeatMinimum:this.effectiveStep()===U.UC.SeatSelect,countByBillableProductKey:e,currency:this.state.currency,footer:(0,s.jsxs)("div",{className:V.RA,children:[(0,s.jsx)(g.n,{svg:eI.Z,className:V.mv}),(0,s.jsx)("p",{children:(0,T.tx)("org_self_serve.purchase_summary.have_questions",{contactSales:(0,s.jsx)("span",{className:V.kZ,onClick:this.contactSales,children:(0,T.tx)("org_self_serve.purchase_summary.contact_our_sales_team")})})})]}),isButtonDisabled:this.getIsNextButtonDisabled(),isLoading:this.getIsNextButtonLoading(),onClickNext:this.onSubmit,onSwitchCurrency:e=>{this.props.dispatch(W.NW({currency:e})),this.setState({currency:e})},tier:M.K0.ORG,title:(0,T.t)("checkout.your_organization_plan"),trackingProperties:{selectedTeamIds:(0,w.hO)(Array.from(this.state.selectedTeamIds)),selectedUserSeatTypes:(0,w.A4)(this.state.selectedUserSeatTypes),countBySeatType:(0,w.C7)(e)}})},this.state={loading:!0,eligibleTeamsByTeamId:{},selectedTeamIds:new Set,eligibleUsersByUserId:{},selectedUserSeatTypes:{},additionalSeatCounts:{collaborator:0,developer:0,expert:0},payment:{card:null,last4:null,address:(0,B.oX)((0,eo.xC)())},apiPending:!1,stripeCustomerId:null,taxRate:0,orgDetails:{actorName:"",actorEmail:this.props.user.email,legalOrgName:"",orgName:""},paymentError:null,currency:this.props.currency,shippingAddress:(0,B.oX)((0,eo.xC)()),nameOnPaymentMethod:"",vatId:null,regionalVatId:null,newTeamName:this.props.newTeamProps?.newTeamName||null,inviteEmails:this.props.newTeamProps?.inviteEmails||[]}}componentDidMount(){this.fetchTeamEligibleUpgrades()}fetchTeamEligibleUpgrades(){return eh.uU.getEligibleUpgrades().catch(e=>{let t=e.data.message;return this.props.dispatch(q.fv({view:"recentsAndSharing"})),this.props.dispatch(f.l.error(t||(0,T.t)("org_self_serve.confirmation_step.sorry_there_was_an_error_processing_your_request_refresh_and_try_again"))),this.setState({loading:!1}),Promise.reject()}).then(({data:e})=>{(0,w.hw)({eligibleTeamIds:e.meta.eligible_teams.map(e=>e.id),eligibleTeamUsers:e.meta.eligible_team_users,tier:M.K0.ORG,step:this.effectiveStep()});let{eligibleTeamsByTeamId:t,selectedTeamIds:a,eligibleUsersByUserId:s,selectedUserSeatTypes:r}=(0,S.u)(e.meta.eligible_teams,e.meta.eligible_team_users);this.setState({loading:!1,eligibleTeamsByTeamId:t,selectedTeamIds:a,eligibleUsersByUserId:s,selectedUserSeatTypes:r})})}componentDidUpdate(e,t){(0,o.Gd)(e.user.email)!==(0,o.Gd)(this.props.user.email)&&c.ZP.redirect("/purchase-organization")}getSubtotal(){let e=(0,C.fG)(this.state.selectedUserSeatTypes,this.state.additionalSeatCounts)||er.Hs.dict(e=>0);return(0,N.zX)(e,(0,C.LB)(this.props.productPriceBySeatType))}getTaxTotal(){let e=(0,C.fG)(this.state.selectedUserSeatTypes,this.state.additionalSeatCounts)||er.Hs.dict(e=>0);return(0,N.AC)(e,(0,C.LB)(this.props.productPriceBySeatType),this.state.taxRate)}getTotal(){let e=(0,C.fG)(this.state.selectedUserSeatTypes,this.state.additionalSeatCounts)||er.Hs.dict(e=>0);return(0,N.tf)(e,(0,C.LB)(this.props.productPriceBySeatType),this.state.taxRate)}getDisplayedCostBreakdown(){let e=this.getSubtotal(),t=this.getTaxTotal(),a=this.getTotal();return(0,C.Bw)({subtotal:e,taxTotal:t,total:a})}async onSubmitPaymentAndAddress(){let e=this.state.payment.address,t=this.state.payment.card,a=this.state.vatId,s=this.state.regionalVatId;if(null===t){let e=(0,T.t)("org_self_serve.payment_step.sorry_please_wait");this.trackError(e),this.setState({paymentError:e});return}if(this.setState({apiPending:!0}),a&&!await (0,ex.I)(a,e.country,()=>{},this.onVatValidationFail))return;if(this.props.canSeeBillingAddressExp&&!this.state.nameOnPaymentMethod){let e=(0,T.t)("org_self_serve.payment_step.name_on_payment_method_is_required");this.trackError(e),this.setState({apiPending:!1,paymentError:e});return}if(s&&!await (0,ex.I)(s,e.country,()=>{},this.onVatValidationFail,e.region))return;let r=this.props.canSeeBillingAddressExp?{name:this.state.nameOnPaymentMethod,address_line1:e.line1,address_line2:e.line2,address_country:e.country,address_city:e.city,address_state:e.region,address_zip:e.postal_code}:void 0;(0,eu.V3)(t,r).then(t=>{if(!t.error&&t.token)return(0,eu.B1)(t.token.id,this.getSubtotal(),this.state.currency).then(t=>this.props.canSeeBillingAddressExp?p.ZP.post("/api/orgs/validate_payment",{payment_method:t.payment_method,billing_address:e,shipping_address:(0,B.SV)(this.state.shippingAddress)?null:this.state.shippingAddress,selected_currency:this.state.currency,vat_gst_id:this.state.vatId,regional_vat_gst_id:this.state.regionalVatId||null}):p.ZP.post("/api/orgs/validate_payment",{payment_method:t.payment_method,address:e,selected_currency:this.state.currency,vat_gst_id:this.state.vatId,regional_vat_gst_id:this.state.regionalVatId||null})).catch(e=>{let t=e.data?.message||e.message;return this.trackError(t),this.setState({apiPending:!1,paymentError:t}),Promise.reject()}).then(({data:e})=>{this.setState(a=>({payment:{...a.payment,last4:t.token?.card?.last4||null},stripeCustomerId:e.meta.stripe_customer_id,taxRate:e.meta.tax_percent,apiPending:!1}),()=>this.setStep(U.UC.Review))});{let e=t.error?.message||(0,T.t)("org_self_serve.payment_step.there_was_an_error_processing_your_payment_please_try_again");this.trackError(e),this.setState({apiPending:!1,paymentError:e})}})}onSubmitPurchaseOrder(){this.props.dispatch(Q.v({completed_org_cart_flow:!0}));let e=(0,C.fG)(this.state.selectedUserSeatTypes,this.state.additionalSeatCounts),t=this.getDisplayedCostBreakdown(),a=(0,C.dq)(this.props.productPriceBySeatType),s={legal_org_name:this.state.orgDetails.legalOrgName,org_name:this.state.orgDetails.orgName||this.state.orgDetails.legalOrgName,team_ids:Array.from(this.state.selectedTeamIds),requested_seats:e,selected_user_seat_types:(0,C.g2)(this.state.selectedUserSeatTypes),stripe_customer_id:this.state.stripeCustomerId,selected_currency:this.state.currency,vat_gst_id:this.state.vatId||null,regional_vat_gst_id:this.state.regionalVatId||null,displayed_cost_breakdown:t,displayed_price_keys:a};this.state.newTeamName&&(s.new_team_options={team_name:this.state.newTeamName,add_to_org:!0}),this.setState({apiPending:!0}),p.ZP.post("/api/orgs",s).catch(s=>(this.props.dispatch(f.l.error((0,j.i)(s,s.data?.message||(0,T.t)("org_self_serve.review_step.sorry_there_was_an_error_please_try_again")))),(0,_.Jz)(l.k.BILLING_EXPERIENCE,Error(`[Billing] Org checkout API failed: ${s.data?.message}`),{extra:{eligibleTeamsByTeamId:this.state.eligibleTeamsByTeamId,eligibleUsersByUserId:this.state.eligibleUsersByUserId,selectedUserSeatTypes:this.state.selectedUserSeatTypes,selectedTeamIds:Array.from(this.state.selectedTeamIds),userId:this.props.user.id,countBySeatType:e,displayedCostBreakdown:t,displayedPriceKeys:a}}),this.setState({apiPending:!1}),Promise.reject())).then(e=>{this.setState({apiPending:!1},()=>this.setStep(U.UC.Confirmation)),this.state.inviteEmails.length&&e.data.meta.new_team&&this.props.dispatch((0,em.Pv)({emails:this.state.inviteEmails,resourceType:ed._g.TEAM,resourceIdOrKey:e.data.meta.new_team.id,level:e_.V5.EDITOR,teamId:e.data.meta.new_team.id})),this.state.newTeamName&&e.data.meta.new_team&&(0,en.bC)(this.props.user.id),(0,d.L9)("Self Serve Org Purchased (GTM)"),(0,es.iP)("Self Serve Org Purchased",{user:this.props.user},{org_name:s.org_name,upsellSource:this.props.upsellSource})})}render(){let e,t=this.effectiveStep(),a=(0,C.zS)(Object.values(this.state.eligibleTeamsByTeamId));if(t===U.UC.Review){let t=(0,C.fG)(this.state.selectedUserSeatTypes,this.state.additionalSeatCounts)||{};e=(0,s.jsx)(F.v,{billingAddress:this.state.payment.address,billingInterval:B.kT.YEAR,countByBillableProductKey:t,currency:this.state.currency,displayName:this.state.orgDetails.orgName||this.state.orgDetails.legalOrgName,isRequestPending:this.state.apiPending,legalName:this.state.orgDetails.legalOrgName,navigateToEditDetails:()=>this.setStep(U.UC.Payment),onSubmit:this.onSubmit,onSubmitTrackingProperties:{selectedTeamIds:(0,w.hO)(Array.from(this.state.selectedTeamIds)),selectedUserSeatTypes:(0,w.A4)(this.state.selectedUserSeatTypes),countBySeatType:(0,w.C7)((0,C.fG)(this.state.selectedUserSeatTypes,this.state.additionalSeatCounts)),domain:(0,o.Gd)(this.props.user.email),taxPercent:this.state.taxRate,subtotal:this.getSubtotal(),taxTotal:this.getTaxTotal(),total:this.getTotal()},shippingAddress:this.state.shippingAddress,taxPercent:this.state.taxRate,tier:M.K0.ORG,title:(0,T.t)("checkout.upgrade_to_an_organization_plan"),userEmail:this.state.orgDetails.actorEmail})}else e=t===U.UC.Confirmation?(0,s.jsx)(P.C,{totalCents:this.getTotal(),orgMigrated:this.props.orgMigrated,onFileBrowserClick:this.onFileBrowserClick,orgPayment:this.state.payment,currency:this.state.currency}):(0,s.jsxs)(s.Fragment,{children:[this.props.isOrgAdmin&&(0,s.jsx)(R.jy,{onContactSales:this.contactSales,onFileBrowserClick:this.onFileBrowserClick}),(0,o._E)(this.props.user.email)&&(0,s.jsx)(R.FA,{onFileBrowserClick:this.onFileBrowserClick}),(0,s.jsxs)("div",{style:E.sx.if(t===U.UC.CreateTeam,E.sx.flex.justifyCenter,E.sx.grid.add({gridTemplateColumns:"1fr 280px",gap:"48px"})).$,children:[t===U.UC.CreateTeam&&(0,s.jsx)("div",{className:V.cv,children:(0,s.jsx)(Y.O,{type:Y.A.ORG,teamName:this.state.newTeamName||"",setTeamName:this.onChangeNewTeamName,onNext:this.onSubmit})}),t===U.UC.TeamSelect&&(this.state.loading?(0,s.jsx)(Z.F,{}):(0,s.jsx)(eE,{teams:a,selectedTeamIds:this.state.selectedTeamIds,onToggle:this.onTeamToggle,newTeamName:this.state.newTeamName})),t===U.UC.SeatSelect&&(this.state.loading?(0,s.jsx)(Z.F,{}):(0,s.jsx)(eA,{users:(0,b._)({eligibleUsersByUserId:this.state.eligibleUsersByUserId,eligibleTeamsByTeamId:this.state.eligibleTeamsByTeamId,selectedTeamIds:Array.from(this.state.selectedTeamIds)}),selectedTeamIds:Array.from(this.state.selectedTeamIds),selectedUserSeatTypes:this.state.selectedUserSeatTypes,additionalSeatsCount:this.state.additionalSeatCounts,currency:this.state.currency,onChangeSeat:(e,t)=>{this.setState({selectedUserSeatTypes:{...this.state.selectedUserSeatTypes,[e]:t}})},onChangeAdditionalSeats:this.updateAdditionalEmptySeats})),t===U.UC.Payment&&(0,s.jsxs)("form",{"data-testid":"org-payment-and-details-step",children:[(0,s.jsx)(eN,{orgDetails:this.state.orgDetails,onChangeFormInput:this.onChangeOrgDetails}),(0,s.jsx)("div",{className:y.B.pt24.$,children:(0,s.jsxs)(H.r,{title:(0,T.t)("checkout.payment_details"),children:[this.state.paymentError&&(0,s.jsx)("div",{className:y.B.mb20.$,children:(0,s.jsx)(x.f,{color:x.Z.ERROR,text:this.state.paymentError})}),(0,s.jsx)(eg.g,{allowFullWidthForm:!0,billingAddress:this.state.payment.address,canSeeBillingAddressExp:this.props.canSeeBillingAddressExp,cardId:"team-upgrade-page-card",id:"team-upgrade-page-form",isCheckoutFlow:!0,isCommunityCheckout:!1,nameOnPaymentMethod:this.state.nameOnPaymentMethod,onBillingAddressChange:this.onAddressChange,onCardReady:this.onCardReady,onClearToken:this.onClearToken,onRegionalVatIdChange:this.onRegionalVatIdChange,onShippingAddressChange:this.onShippingAddressChange,onVatIdChange:this.onVatIdChange,regionalVatId:this.state.regionalVatId,setNameOnPaymentMethod:this.onNameOnPaymentMethodChange,shippingAddress:this.state.shippingAddress,vatId:this.state.vatId})]})})]}),t!==U.UC.CreateTeam&&this.renderPurchaseSummary()]})]});return(0,s.jsxs)(D.Ui,{name:ep.V4.ORG_CHECKOUT_FLOW,properties:{step:t,currency:this.state.currency,upsellSource:this.props.upsellSource,entryPoint:this.props.entryPoint,eligibleTeamIds:(0,w.hO)(Object.keys(this.state.eligibleTeamsByTeamId)),prices:(0,w.TA)(this.props.productPriceBySeatType)},enabled:!this.state.loading,trackingOptions:(0,ee.f)(l.k.MONETIZATION_UPGRADES),children:[t!==U.UC.Confirmation&&(0,s.jsx)("div",{className:y.B.sticky.top0.zIndexTopBar.selectNone.$,children:(0,s.jsx)(G,{currentStep:this.props.step,setStep:this.setStep,canSeeTeamAndSeatSelectionSteps:this.canSeeTeamAndSeatSelectionSteps(),onFileBrowserClick:this.onFileBrowserClick,newTeamProps:this.props.newTeamProps,onSelectTeamUpgradeStep:e=>{this.props.dispatch(q.fv({teamId:null,...this.props.newTeamProps?.previousView,view:"teamUpgrade",paymentStep:e,teamFlowType:this.props.newTeamProps?.teamFlowType||L.wD.CREATE_AND_UPGRADE}))},isCampfireCart:!0})}),(0,s.jsxs)("div",{className:y.B.selectNone.$,style:E.sx.mxAuto.add({padding:"48px",maxWidth:"1400px"}).$,children:[(0,s.jsx)(eP,{step:t}),e]})]})}}function eR(e){let t=(0,i.I0)(),a=(0,i.v9)(e=>e.user),r=(0,i.v9)(e=>(0,ec.OX)(e.orgUsersByOrgId,e.user.id).some(e=>e.permission===ed.Gu.ADMIN)),n=(0,X.ty)(),d=(0,i.v9)(e=>e.payment).currency||(0,eo.x_)();(0,m.O)(()=>{let e=document.createElement("div");return e.style.position="fixed",e.style.inset="0",e.style.background="var(--color-bg-secondary)",e.style.zIndex="-1",document.body.appendChild(e),()=>{document.body.removeChild(e)}});let o=(0,et.yW)({billableProductKeys:er.Hs,baseQuery:{currency:d,tier:M.K0.ORG,renewalTerm:M.Xp.YEAR,unit:M.Xp.YEAR}}),[c]=(0,u.Eh)(o);if("loaded"!==c.status)return(0,s.jsx)(ei.N,{});let _=c.data;return(0,s.jsx)(h.SV,{team:l.k.MONETIZATION_UPGRADES,boundaryKey:"OrgSelfServeBillingRemodelPage",fallback:h.NY.DEFAULT_FULL_PAGE,hasCustomWASMBuild:el.hU,children:(0,s.jsx)(ek,{...e,dispatch:t,user:a,isOrgAdmin:r,canSeeBillingAddressExp:n,productPriceBySeatType:_,currency:d})})}function eP({step:e}){let t=function(e){switch(e){case U.UC.TeamSelect:return(0,T.t)("checkout.org_self_serve.select_teams_title");case U.UC.SeatSelect:return(0,T.t)("checkout.org_self_serve.select_seats_header");case U.UC.Payment:return(0,T.t)("checkout.enter_your_payment_details");case U.UC.Review:return(0,T.t)("checkout.everything_look_good");default:return null}}(e),a=function(e){let t=(0,s.jsx)(v.Cr,{href:"/pricing",trackingProperties:{trackingDescriptor:J.y.LEARN_MORE_ABOUT_SEATS},newTab:!0,trusted:!0,children:(0,T.tx)("checkout.learn_more_about_seats")});switch(e){case U.UC.TeamSelect:return(0,T.t)("checkout.org_self_serve.select_teams_subtitle");case U.UC.SeatSelect:return(0,T.tx)("checkout.select_seats_table.seat_types_have_been_suggested",{learnMoreAboutSeatsLink:t});case U.UC.Review:return(0,T.t)("checkout.confirm_your_plan_seats_and_payment_details_then_you_re_all_set");default:return null}}(e);return t?(0,s.jsxs)("div",{className:y.B.mb32.$,"data-testid":"cart-org-header",children:[(0,s.jsx)("h2",{className:y.B.font15.lh24.fontMedium.$,children:t}),a&&(0,s.jsx)("p",{className:y.B.colorTextSecondary.font13.mt8.$,children:a})]}):null}ek.displayName="OrgSelfServePage"},462087:function(e,t,a){a.d(t,{jy:()=>F,FA:()=>H});var s=a(750357),r=a(853505),i=a(577851),n=a(492342),l=a(254081),d=a(566012),o=a(640296),c=a(365448),m=a(739842),u=a(558089),_=a(240473),p=a(661193),h=a(590914),x=a(491420),g=a(864197),y=a(870057),f=a(225094),v=a(890798),T=a(469271),j=a(522278),E=a(926941),S=a(260251),N=a(619369),b=a(328403),C=a(877208),w=a(920860),A=a(986752),I=a(260736),k=a(712824),R=a(5794),P=a(638103),O=a(68634),D=a(155969);let M=(0,a(178922).x2)("org_upgrade_user_info_extended",function({teamIds:e,teamNames:t}){return(0,s.jsx)("div",{children:e.map((e,a)=>{let r=(0,P.hx)(e,P.dn);return(0,s.jsxs)("div",{className:"org_self_serve_modal_tooltip_content--tooltipRow--BLx6y",children:[(0,s.jsx)("div",{style:x.sx.add({backgroundColor:r,minWidth:"10px",height:"10px",margin:"8px",borderRadius:"2px"}).$}),(0,s.jsx)("div",{children:t[a]})]},e)})})},e=>{let t=e.getAttribute("data-tooltip-team-names"),a=e.getAttribute("data-tooltip-team-ids");return{teamNames:t.split(","),teamIds:a.split(",")}}),U="org_self_serve_modals--modalContainer--x4RbC",B="org_self_serve_modals--modalWrapperSmall--8D0vj org_self_serve_modals--modalWrapper--XwFkR",L="org_self_serve_modals--modalHeader--hV2R2",V="org_self_serve_modals--modalText--lbo63";var z=a(220685);function G(e){return(0,s.jsx)("div",{style:{height:e.height||12}})}function H(e){return(0,s.jsx)(O.xm,{containerClassName:U,headerSize:"hidden",isCloseHidden:!0,title:"",minWidth:349,maxWidth:349,children:(0,s.jsxs)("div",{className:B,children:[(0,s.jsx)("div",{className:L,children:(0,h.tx)("org_self_serve.modals.invalid_email.figma_organization_only_allows_work_emails")}),(0,s.jsx)("div",{className:V,children:(0,h.tx)("org_self_serve.modals.invalid_email.change_email_address_to_proceed")}),(0,s.jsx)(G,{height:12}),(0,s.jsx)("a",{onClick:e.onFileBrowserClick,children:(0,h.tx)("org_self_serve.modals.invalid_email.go_to_the_file_browser")})]})})}function F(e){return(0,s.jsx)(O.xm,{containerClassName:U,headerSize:"hidden",isCloseHidden:!0,title:"",minWidth:349,maxWidth:349,children:(0,s.jsxs)("div",{className:B,children:[(0,s.jsx)("div",{className:L,children:(0,h.tx)("org_self_serve.modals.existing_org_admin.figma_organization_already_purchased")}),(0,s.jsx)("div",{className:V,children:(0,h.tx)("org_self_serve.modals.existing_org_admin.if_you_need_another_organization",{contactSales:(0,s.jsx)("a",{onClick:e.onContactSales,children:(0,h.tx)("org_self_serve.modals.existing_org_admin.contact_sales")})})}),(0,s.jsx)(G,{height:4}),(0,s.jsx)(G,{height:12}),(0,s.jsx)("a",{onClick:e.onFileBrowserClick,children:(0,h.tx)("org_self_serve.modals.existing_org_admin.go_to_the_file_browser")})]})})}function $({userData:e,checkboxHandler:t}){let[a,n]=(0,r.useState)(0),l=(0,i.I0)();return(0,s.jsx)(s.Fragment,{children:e.map((r,i)=>(0,s.jsxs)("div",{"data-testid":"user-data-row",children:[(0,s.jsxs)(Y,{rowType:"data",children:[(0,s.jsx)(R.oJ,{entity:r.user,includeUserEmailAddress:!0,size:24}),(0,s.jsx)(K,{userInfo:r}),(0,s.jsx)(y.X,{checked:r.designEditor,onChange:e=>{t({userId:r.user.id,type:"designEditor",newVal:e.currentTarget.checked})}}),(0,s.jsx)(m.v_,{checked:r.devMode,className:"org_self_serve_modals--devModeCheckbox--hBMBy",onChange:e=>{(({rect:e,designChecked:s,...r})=>{if(t(r),r.newVal&&a<3){n(e=>e+1);let t=s?(0,h.t)("checkout.switch_seat_from_design_to_devmode"):(0,h.t)("checkout.enabled_devmode");l(j.CJ({target:{kind:A.I7.TEXT,text:t},targetRect:{top:e.top,right:e.right+8,bottom:e.bottom,left:e.left+8,width:e.width,height:e.height},textAlign:"left",position:A.DU.RIGHT,hideAfterDelay:1e3}))}})({designChecked:r.designEditor,userId:r.user.id,type:"devMode",newVal:e.currentTarget.checked,rect:e.currentTarget.getBoundingClientRect()})}}),(0,s.jsx)(m.v_,{checked:r.figjamEditor,className:"org_self_serve_modals--figjamCheckbox--lvGbH",onChange:e=>{t({userId:r.user.id,type:"figjamEditor",newVal:e.currentTarget.checked})}})]}),i!==e.length-1&&(0,s.jsx)(Z,{})]},r.user.id))})}function Y({rowType:e,children:t}){let a="footer"===e?["55%","15%","15%","15%"]:["35%","20%","15%","15%","15%"];return(0,s.jsx)(g.j,{dataTestId:"seat-table-row",verticalAlignItems:"center",horizontalAlignItems:"start",padding:{top:"data"===e?14:16,right:16,bottom:"data"===e?14:16,left:16},backgroundColor:"header"===e?"hover":"default",spacing:0,children:t.map((e,t)=>(0,s.jsx)(g.j,{width:a[t],horizontalAlignItems:"start",verticalAlignItems:"center",padding:{right:16},children:e},t))})}function Z(){return(0,s.jsx)("div",{className:p.B.wFull.colorBgTertiary.h1.$})}function q({teamId:e}){return(0,s.jsx)("div",{className:p.B.w8.h8.bRadius2.minW8.$,style:x.sx.add({backgroundColor:(0,P.hx)(e,P.dn)}).$})}function K({userInfo:e}){return e.teams.length>1?(0,s.jsx)("div",{"data-tooltip-show-immediately":!0,"data-tooltip-type":I.fR.SPECIAL,"data-tooltip":M,"data-tooltip-team-names":e.teams.map(e=>e.name).join(","),"data-tooltip-team-ids":e.teams.map(e=>e.id).join(","),"data-tooltip-show-right":!0,"data-tooltip-light-mode":!0,children:(0,s.jsx)(f.x,{color:"default",children:(0,h.tx)("all_carts.editor_table.multiple_teams")})}):(0,s.jsxs)(g.j,{spacing:8,verticalAlignItems:"center",horizontalAlignItems:"start",children:[(0,s.jsx)(q,{teamId:e.teamIds[0]}),(0,s.jsx)("div",{className:p.B.noWrap.ellipsis.overflowHidden.$,children:(0,s.jsx)(f.x,{color:"default",children:e.teams[0]?.name})})]})}(0,k.Y3)(function(e){let t=e.isProTeam?b.$1.exclude([N.hH.DEV_MODE]):b.$1,[a,i]=(0,r.useState)(t.dict(t=>e.seatDataByLicenseType[t]?.currentSeats||0)),[o,c]=(0,r.useState)(null),m=new w.Lr(e.currency),u=a[N.hH.FIGJAM],p={[N.hH.DESIGN]:{headerString:(0,h.t)("all_carts.figma_design_editors.seat_rename"),totalSeatCount:a[N.hH.DESIGN],shouldShowDevModeIncludedText:!0},[N.hH.FIGJAM]:{headerString:(0,h.t)("all_carts.figjam_editors.seat_rename"),totalSeatCount:u,shouldShowDevModeIncludedText:!1},[N.hH.DEV_MODE]:{headerString:(0,h.t)("all_carts.dev_mode_only_seats"),totalSeatCount:a[N.hH.DEV_MODE]??0,shouldShowDevModeIncludedText:!1}};return(0,s.jsxs)(O.P6,{onSubmit:()=>{let s=!1;if(t.forEach(t=>{let r=a[t],i=e.seatDataByLicenseType[t]?.minSeats||0;void 0!==r&&!1===s&&(r<i||r>99)&&(c(t),s=!0)}),s)return;let r=t.reduce((e,t)=>e+(a[t]||0),0);e.minTotalSeats&&r<e.minTotalSeats?c("total"):(e.dispatch(T.hV()),e.updateAdditionalSeats(a))},confirmText:(0,h.t)("all_carts.save"),cancelText:(0,h.t)("all_carts.cancel"),title:(0,h.t)("all_carts.add_additional_editors.seat_rename"),children:[(0,s.jsx)("div",{className:"org_self_serve_modals--bannerContainer--xIFzD",children:o&&(0,s.jsxs)("div",{className:"org_self_serve_modals--errorBanner--IpSSs",children:[(0,s.jsx)(_.n,{className:"org_self_serve_modals--errorSvg--wasX5",svg:z.Z}),(0,s.jsxs)("div",{className:"org_self_serve_modals--errorBannerText--yi7CJ org_self_serve_modals--headerModalText--JGrjM",children:[o===N.hH.DESIGN&&(0,h.tx)("all_carts.you_need_a_minimum_n_design_editors.seat_rename",{minSeatsCount:e.seatDataByLicenseType[N.hH.DESIGN].minSeats}),o===N.hH.FIGJAM&&(0,h.tx)("all_carts.you_need_a_minimum_n_whiteboard_editors.seat_rename",{minSeatsCount:e.seatDataByLicenseType[N.hH.FIGJAM].minSeats}),o===N.hH.DEV_MODE&&(0,h.tx)("all_carts.you_need_a_minimum_n_dev_mode_seats",{minSeatsCount:e.seatDataByLicenseType[N.hH.DEV_MODE]?.minSeats||0}),"total"===o&&!!e.minTotalSeats&&((0,n.BZ)().org_checkout_min_seat_info_copy?(0,h.tx)("all_carts.minimum_seats",{minTotalSeats:e.minTotalSeats,minDesignSeats:e.seatDataByLicenseType[N.hH.DESIGN].minSeats,seatsText:(0,h.tx)("checkout.seats_text",{numOfSeats:e.minTotalSeats}),designSeatsText:(0,h.tx)("checkout.seats_text",{numOfSeats:e.seatDataByLicenseType[N.hH.DESIGN].minSeats})}):(0,h.tx)("all_carts.you_need_a_minimum_n_editors.seat_rename",{minSeatsCount:e.minTotalSeats}))]})]})}),t.sort(C.uE).map(t=>{let r=p[t],n=e.seatDataByLicenseType[t],o=a[t];return void 0===r||void 0===n||void 0===o?(0,s.jsx)(s.Fragment,{}):(0,s.jsxs)("div",{children:[(0,s.jsx)(G,{height:16}),(0,s.jsx)("div",{className:"org_self_serve_modals--headerModalBoldText--vHLs9 org_self_serve_modals--headerModalText--JGrjM",children:r.headerString}),r.shouldShowDevModeIncludedText&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(G,{height:4}),(0,s.jsx)(l.F,{})]}),(0,s.jsx)(G,{height:12}),(0,s.jsx)(d.u,{"data-testid":t+"-seat_counter",billableProductKey:(0,C.Jl)(t),incrementSeats:()=>(e=>{let t=a[e];void 0!==t&&t<99&&i({...a,[e]:t+1})})(t),decrementSeats:()=>(t=>{let s=e.seatDataByLicenseType[t],r=a[t];null!=s&&null!=r&&r>s.minSeats&&i({...a,[t]:r-1})})(t),numSeats:o,minSeatsCount:n.minSeats,headerText:m.formatMoney(r.totalSeatCount*n.seatUnitCostInCents*(e.showAnnualPrice?12:1)),headerSubText:(0,v.du)(e.showAnnualPrice,r.totalSeatCount,!0,n.seatUnitCostInCents,e.currency),updateAdditionalSeatsText:e=>((e,t)=>{if(""===e.target.value)return void t(0);let a=parseInt(e.target.value);isNaN(a)||t(a)})(e,e=>{i({...a,[t]:e})})})]},t)}),(0,s.jsx)(G,{height:18}),(0,s.jsx)("div",{className:"org_self_serve_modals--divider--sSB3Q"})]})},"AdditionalEditorsModal"),(0,k.Y3)(function({users:e,updateSelectedEditors:t,updateAdditionalEmptySeats:a,currency:i,minTotalSeats:n,dispatch:l,seatInfo:_,monthlyPriceByProduct:p}){let[x,y]=(0,r.useState)(e),[v,j]=(0,r.useState)({design:_.design.additionalSeatCount,figjam:_.figjam.additionalSeatCount,dev_mode:_.dev_mode.additionalSeatCount}),b=(0,r.useMemo)(()=>{let e=0,t=0,a=0;for(let s of Object.values(x))s.designEditor&&e++,s.devMode&&a++,s.figjamEditor&&t++;return(e+=v.design,a+=v.dev_mode,t+=v.figjam,n&&e+t+a<n)?3:e<_.design.minCount||e>99?1:2*(!!(t<_.figjam.minCount)||!!(t>99))},[v,x,n,_]),C=e=>{v[e]>=99||j(t=>({...t,[e]:t[e]+1}))},A=e=>{v[e]<=0||j(t=>({...t,[e]:t[e]-1}))},I=(e,t)=>{let a=""===e.target.value?0:parseInt(e.target.value);isNaN(a)||j(e=>({...e,[t]:a}))},k=new w.Lr(i),R=()=>{l(T.hV())};return(0,s.jsx)(E.Ui,{name:"Select Editors Modal",children:(0,s.jsxs)(D.bc,{size:864,maxHeight:672,hide:()=>l(T.hV()),className:"org_self_serve_modals--selectEditorsModal--MP4Ud",children:[(0,s.jsxs)("div",{className:"org_self_serve_modals--selectEditorModalHeader--tIDgs org_self_serve_modals--headerModalText--JGrjM",children:[(0,h.tx)("checkout.add_or_remove_editors"),(0,s.jsx)(c.ol,{customStyle:{position:"initial"},dispatch:l,onClose:R})]}),(0,s.jsx)(Z,{}),(0,s.jsxs)(Y,{rowType:"header",children:[(0,s.jsx)(f.x,{color:"default",fontWeight:"medium",children:(0,h.tx)("all_carts.editor_table.Name")}),(0,s.jsx)(f.x,{color:"default",fontWeight:"medium",children:(0,h.tx)("all_carts.editor_table.Teams")}),(0,s.jsxs)(g.j,{direction:"vertical",spacing:0,horizontalAlignItems:"start",verticalAlignItems:"center",children:[(0,s.jsx)(f.x,{color:"default",fontWeight:"medium",children:(0,h.tx)("general.figma_design")}),(0,s.jsxs)("div",{children:[(0,s.jsx)(f.x,{color:"handoff",fontWeight:"medium",children:(0,h.tx)("general.dev_mode")}),"\xa0",(0,s.jsx)(f.x,{color:"default",fontWeight:"medium",children:(0,h.tx)("checkout.dev_mode_included_text_formatted.included")})]})]}),(0,s.jsx)(f.x,{color:"default",fontWeight:"medium",children:(0,h.tx)("general.dev_mode")}),(0,s.jsx)(f.x,{color:"default",fontWeight:"medium",children:(0,h.tx)("general.figjam")})]}),(0,s.jsx)(Z,{}),(0,s.jsx)(u.l,{maxHeight:426,children:(0,s.jsx)($,{userData:Object.values(x),checkboxHandler:({userId:e,type:t,newVal:a})=>{let s={...x[e],[t]:a};"devMode"===t&&a&&(s.designEditor=!1),"designEditor"===t&&a&&(s.devMode=!1),y(t=>({...t,[e]:s})),(0,S.T6)({name:"org_checkout_select_editors_checkbox",licenseType:t,checked:a})}})}),(0,s.jsx)(Z,{}),(0,s.jsxs)(Y,{rowType:"footer",children:[(0,s.jsxs)(g.j,{spacing:0,direction:"vertical",horizontalAlignItems:"start",verticalAlignItems:"center",children:[(0,s.jsx)(f.x,{color:"default",fontWeight:"medium",children:(0,h.tx)("all_carts.add_additional_editors.seat_rename")}),(0,s.jsx)(f.x,{fontWeight:"regular",color:"secondary",children:(0,h.tx)("all_carts.add_additional_editors_description.seat_rename")})]}),(0,s.jsx)(d.u,{billableProductKey:N.hH.DESIGN,incrementSeats:()=>C(N.hH.DESIGN),decrementSeats:()=>A(N.hH.DESIGN),numSeats:v.design,minSeatsCount:0,headerText:"",headerSubText:"",updateAdditionalSeatsText:e=>I(e,N.hH.DESIGN)}),(0,s.jsx)(d.u,{billableProductKey:N.hH.DEV_MODE,incrementSeats:()=>C(N.hH.DEV_MODE),decrementSeats:()=>A(N.hH.DEV_MODE),numSeats:v.dev_mode,minSeatsCount:0,headerText:"",headerSubText:"",updateAdditionalSeatsText:e=>I(e,N.hH.DEV_MODE)}),(0,s.jsx)(d.u,{billableProductKey:N.hH.FIGJAM,incrementSeats:()=>C(N.hH.FIGJAM),decrementSeats:()=>A(N.hH.FIGJAM),numSeats:v.figjam,minSeatsCount:0,headerText:"",headerSubText:"",updateAdditionalSeatsText:e=>I(e,N.hH.FIGJAM)})]}),(0,s.jsxs)("div",{className:"org_self_serve_modals--selectEditorModalActions--1rbWd org_self_serve_modals--selectEditorModalFooter--3L3K-",children:[0!==b?(()=>{switch(b){case 0:default:return;case 1:return(0,s.jsx)(f.x,{color:"danger",children:(0,h.tx)("all_carts.you_need_a_minimum_n_design_editors.seat_rename",{minSeatsCount:_.design.minCount})});case 2:return(0,s.jsx)(f.x,{color:"danger",children:(0,h.tx)("all_carts.you_need_a_minimum_n_whiteboard_editors.seat_rename",{minSeatsCount:_.figjam.minCount})});case 3:return(0,s.jsx)(f.x,{color:"danger",children:(0,h.tx)("org_self_serve.purchase_summary.the_organization_plan_requires_at_least_count_editor_seats.seat_rename",{minCount:n})})}})():(0,s.jsx)(f.x,{fontWeight:"regular",color:"secondary",children:(0,h.tx)("all_carts.new_total",{total:k.formatMoney(function(e,t,a){let s=t.design,r=t.figjam,i=t.dev_mode;for(let t in e)e[t].designEditor?s++:e[t].devMode&&i++,e[t].figjamEditor&&r++;let n=s*a[N.hH.DESIGN]*12;return n+r*a[N.hH.FIGJAM]*12+i*a[N.hH.DEV_MODE]*12}(x,v,p),{showCents:!0})})}),(0,s.jsxs)("div",{className:"org_self_serve_modals--buttonGroup--c-4g1",children:[(0,s.jsx)(o.PL,{onClick:R,children:(0,h.t)("general.cancel")}),(0,s.jsx)(m.DF,{onClick:()=>{0===b&&(a(v),t(x),l(T.hV()))},disabled:0!==b,children:(0,h.t)("checkout.update_seats")})]})]})]})})},"SelectEditorsModal")},830114:function(e,t,a){a.d(t,{C:()=>h,p:()=>p});var s=a(750357),r=a(53022),i=a.n(r),n=a(739842),l=a(259946),d=a(240473),o=a(590914),c=a(920860),m=a(428460);if(9793==a.j)var u=a(700052);function _(e){return(0,s.jsx)("div",{style:{height:e.height||12}})}function p(){return(0,s.jsx)("span",{children:(0,o.tx)("org_self_serve.review_step.i_agree_to_msa_and_renewal_links",{msaLink:(0,s.jsx)(n.UU,{href:"/ssa",target:"_blank",trusted:!0,children:(0,o.tx)("org_self_serve.review_step.software_services_agreement")}),renewalLink:(0,s.jsx)(n.UU,{href:(0,o.Re)("/renewal-and-cancellation"),target:"_blank",trusted:!0,children:(0,o.tx)("org_self_serve.review_step.renewal_and_cancellation_terms")})})})}function h(e){let t=new c.Lr(e.currency);return(0,s.jsx)("div",{className:m.QQ,children:(0,s.jsxs)("div",{className:i()(m.lF,m.G1),children:[(0,s.jsxs)("div",{className:m.db,children:[(0,s.jsx)(d.n,{svg:u.Z,className:m.Um,useOriginalSrcFills_DEPRECATED:!0,autosize:!0,width:"32px",height:"32px"}),(0,s.jsx)("div",{className:m.tj,children:(0,o.tx)("org_self_serve.confirmation_step.you_re_all_set")})]}),(0,s.jsxs)("div",{className:m.Rj,children:[(0,s.jsx)("div",{className:m.VN,children:(0,o.tx)("org_self_serve.confirmation_step.order_confirmation_message")}),(0,s.jsx)(_,{height:24}),(0,s.jsx)("div",{className:m.Jm}),(0,s.jsx)(_,{height:24}),(0,s.jsxs)("div",{className:m.tP,children:[(0,s.jsxs)("div",{className:m.fK,children:[(0,o.tx)("org_self_serve.confirmation_step.total_amount_to_be_charged_to_card_ending_in_last4",{last4:e.orgPayment.last4}),(0,s.jsx)("span",{className:m.Wi,children:t.formatMoney(e.totalCents,{showCents:!1})})]}),(0,s.jsx)(_,{height:24}),(0,s.jsx)("div",{className:m.Jm}),(0,s.jsx)(_,{height:32}),(0,s.jsxs)("div",{className:m.RG,children:[!e.orgMigrated&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.TK,{}),(0,s.jsx)("div",{className:m.yR,children:(0,o.tx)("org_self_serve.confirmation_step.we_re_setting_up_your_organization")})]}),(0,s.jsx)(n.DF,{disabled:!e.orgMigrated,className:m.WT,onClick:e.onFileBrowserClick,dataTestId:"go-to-file-browser-button",children:(0,o.tx)("org_self_serve.confirmation_step.go_to_the_file_browser")})]})]})]})]})})}},132162:function(e,t,a){a.r(t),a.d(t,{PromoReviewPage:()=>y});var s=a(750357),r=a(853505),i=a(577851),n=a(158639),l=a(405944),d=a(705881),o=a(727025),c=a(590914),m=a(832200),u=a(404639),_=a(404756),p=a(300028),h=a(926941),x=a(920860),g=a(855325);function y(e){return(0,s.jsx)(n.X,{label:"PromoReviewPage",children:(0,s.jsx)(f,{...e})})}function f(e){let{selectedView:t,promo:a}=e,n=(0,i.I0)(),y=(0,g.pO)({teamId:t.teamId}),f=(0,r.useCallback)(()=>{(0,l.iZ)(),n(_.gj({promo:null})),n(u.fv(e.selectedView.previousView||{view:"team",teamId:t.teamId}))},[n,e.selectedView.previousView,t.teamId]);(0,r.useEffect)(()=>{a||f()},[a,f]);let v=()=>{n(p.Gz({teamId:t.teamId,teamName:t.teamName,promoCode:a?.code||"",onSuccess:f,onError:f}))};return a?(0,s.jsx)(h.Ui,{name:"Redeem Promo Code > Confirm",properties:{teamId:t.teamId},children:(0,s.jsxs)("div",{className:"promo_modals--promoReviewInner--cB2WV",children:[(0,s.jsx)("div",{className:"promo_modals--cancelRow--y-mM1",children:(0,s.jsx)("button",{type:"button",className:"promo_modals--cancelButton--LFCtU text--fontPos11--rO47d text--_fontBase--VaHfk",onClick:f,children:(0,c.tx)("promo.promo_review.cancel")})}),(0,s.jsx)("div",{className:"promo_modals--promoReviewTitle--pXR7K text--fontPos20--WslT3 text--_fontBase--VaHfk",children:(0,c.tx)("promo.promo_review.redeem_your_days_of_free_professional_plan",{days:a.promo_value})}),(0,s.jsx)("div",{className:"promo_modals--promoReviewDescription--WZiCG text--fontPos13--5OfL8 text--_fontBase--VaHfk",children:(0,c.tx)("promo.promo_review.any_additional_editors_invited_to_selected_view_team_name_will_also_be_free_of_charge_for_the_next_days.seat_rename",{teamName:t.teamName,days:a.promo_value})}),(0,s.jsx)("div",{children:(0,s.jsx)(o.u,{isLoading:y,children:()=>(0,s.jsx)(d.G,{children:(0,s.jsx)(m.z,{selectedView:t,onClickConfirm:v,currency:(0,x.x_)(),canSeeBillingAddressExp:!1})})})})]})}):null}},465237:function(e,t,a){a.d(t,{X:()=>N});var s=a(750357),r=a(853505),i=a(577851),n=a(612661),l=a(273634),d=a(451410),o=a(514177),c=a(317429),m=a(5929);if(9793==a.j)var u=a(17448);var _=a(444947),p=a(566012),h=a(661193),x=a(555792),g=a(590914),y=a(864197),f=a(469271),v=a(271264),T=a(877208),j=a(712824),E=a(453271);let S=(0,j.Y3)(function(e){let{seatTypes:t,additionalSeatCounts:a,setAdditionalSeats:i,open:l,onClose:u}=e,x=d.dd({open:l,onClose:u}),[f,v]=(0,r.useState)(a),j=e=>t=>{v((0,E.DA)(f,t,e))},S=j(1),N=j(-1),b=r.useCallback(e=>t=>v((0,E.DA)(f,e,t-(f[e]||0))),[f]);return(0,s.jsx)(o.fC,{manager:x,width:264,htmlAttributes:{"data-testid":"additional-seats--modal"},children:(0,s.jsxs)(c.AU,{children:[(0,s.jsx)(c.h4,{children:(0,s.jsx)(c.Dx,{children:(0,g.tx)("checkout.additional_seats.add_or_remove_unassigned_seats")})}),(0,s.jsxs)(c.uT,{children:[(0,s.jsx)("div",{className:h.B.pt8.pb24.colorTextSecondary.$,children:(0,s.jsx)("p",{children:(0,g.tx)("checkout.additional_seats.pre_purchase_seats_for_your_team_to_help_you_budget_and_save_time_later_on")})}),(0,s.jsx)(y.j,{direction:"vertical",spacing:16,padding:{bottom:16},children:Object.keys(f).sort(T.uE).map(e=>(0,n.Rw)(t[e])||(0,n.Rw)(f[e])?null:(0,s.jsx)("div",{"data-testid":`additional-seats--${e}`,children:(0,s.jsx)(p.u,{billableProductKey:e,numSeats:f[e],minSeatsCount:0,headerText:(0,g.t)("checkout.additional_seats.seat_label",{seatType:t[e].displayName}),headerSubText:(0,g.t)("checkout.price_per_month",{price:t[e].displayPrice}),incrementSeats:()=>S(e),decrementSeats:()=>N(e),updateAdditionalSeatsText:(0,p.Q)(b(e))})},e))})]}),(0,s.jsx)(c.$_,{children:(0,s.jsxs)(c.Dj,{children:[(0,s.jsx)(m.zx,{variant:"secondary",onClick:u,htmlAttributes:{"data-testid":"additional-seats--cancel"},children:(0,g.tx)("checkout.additional_seats.cancel")}),(0,s.jsx)(m.zx,{variant:"primary",onClick:()=>{_.RQ.trackDefinedEvent("monetization_upgrades.cart_additional_seats_changed_in_checkout",{additionalSeatCountsBefore:JSON.stringify(a),additionalSeatCountsAfter:JSON.stringify(f),tier:e.tier}),i(f),u()},htmlAttributes:{"data-testid":"additional-seats--confirm"},children:(0,g.tx)("checkout.additional_seats.confirm")})]})})]})})},"AdditionalSeatsModal");function N({seatTypes:e,additionalSeatCounts:t,setAdditionalSeats:a,tier:r}){let n=(0,i.I0)(),d=(0,v.f)(l.k.MONETIZATION_UPGRADES);return(0,s.jsx)(x.XT,{variant:"ghost","aria-label":(0,g.t)("checkout.additional_seats.add_seats_to_assign_later"),htmlAttributes:{"data-testid":"additional-seats--button"},trackingOptions:d,onClick:()=>{n((0,f.K4)({type:S,data:{seatTypes:e,additionalSeatCounts:t,setAdditionalSeats:a,tier:r}}))},iconPrefix:(0,s.jsx)(u._,{}),children:(0,g.tx)("checkout.additional_seats.add_seats_to_assign_later")})}},818780:function(e,t,a){a.d(t,{r:()=>n});var s=a(750357),r=a(661193),i=a(491420);function n({title:e,children:t,dataTestId:a}){return(0,s.jsxs)("div",{style:i.sx.p24.colorBg.add({borderRadius:"13px",height:"fit-content"}).$,"data-testid":a,children:[e&&(0,s.jsx)("h3",{className:r.B.mb16.fontMedium.font15.$,children:e}),t]})}},697816:function(e,t,a){a.d(t,{v:()=>w});var s=a(750357),r=a(491420),i=a(739842),n=a(661193),l=a(590914),d=a(871567),o=a(248893),c=a(790312),m=a(818780);function u(e){let t=e.shippingAddress&&!(0,c.SV)(e.shippingAddress);return(0,s.jsxs)(m.r,{title:(0,l.t)("checkout.cart_plan_details.subtitle"),dataTestId:"cart-plan-details",children:[(0,s.jsx)(_,{header:e.tier===o.K0.ORG?(0,l.t)("checkout.cart_plan_details.organization_name"):(0,l.t)("checkout.cart_plan_details.team_name"),value:e.displayName,dataTestId:"cart-plan-details-plan-name"}),e.legalName&&(0,s.jsx)(_,{header:(0,l.t)("checkout.cart_plan_details.legal_name"),value:e.legalName,dataTestId:"cart-plan-details-legal-name"}),(0,s.jsx)(_,{header:(0,l.t)("checkout.cart_plan_details.invoice_email"),value:e.userEmail,dataTestId:"cart-plan-details-invoice-email"}),e.billingAddress&&(0,s.jsx)(_,{header:(0,l.t)("checkout.cart_plan_details.billing_address"),value:p(e.billingAddress),dataTestId:"cart-plan-details-billing-address"}),t&&(0,s.jsx)(_,{header:(0,l.t)("checkout.cart_plan_details.shipping_address"),value:p(e.shippingAddress),dataTestId:"cart-plan-details-shipping-address"}),(0,s.jsx)(i.Cr,{onClick:e.navigateToEditDetails,className:n.B.font13.py12.$,trackingProperties:{trackingDescriptor:d.y.EDIT_PLAN_DETAILS},"data-testid":"cart-plan-details-edit-details",trusted:!0,children:(0,l.tx)("checkout.cart_plan_details.edit_details")})]})}function _({header:e,value:t,dataTestId:a}){return(0,s.jsxs)("div",{className:n.B.flex.flexColumn.py16.bb1.bSolid.colorBorder.itemsStart.$,"data-testid":a,children:[(0,s.jsx)("p",{className:n.B.font13.lh24.spacingWide.colorTextSecondary.pb4.$,children:e}),(0,s.jsx)("p",{className:n.B.font13.lh24.colorText.breakWord.$,children:t})]})}function p(e){return[e?.line1,e?.line2,e?.city,e?.region,e?.country,e?.postal_code].filter(function(e){return e}).join(", ")}var h=a(853505),x=a(850340),g=a(486020),y=a(944365),f=a(303501),v=a(555792),T=a(830114),j=a(890798),E=a(381597);let S=(0,s.jsx)(i.Z6,{target:"_blank",trusted:!0,href:"/pricing",children:(0,l.tx)("checkout.monthly_price")});function N({title:e,countByBillableProductKey:t,billingInterval:a,currency:i,taxPercent:u,isRequestPending:_,tier:p,onSubmit:x,onSubmitTrackingProperties:S}){let[N,C]=h.useState(!1),w=_||!N,A=(0,s.jsx)(g.X,{label:(0,s.jsx)(y._,{children:(0,s.jsx)("span",{className:n.B.font13.$,children:p===o.K0.ORG?(0,s.jsx)(T.p,{}):(0,s.jsx)(j.Ot,{})})}),checked:N,onChange:C}),I=(0,s.jsx)("div",{className:n.B.flex.justifyCenter.itemsCenter.$,"data-testid":"cart-review-submit-loading",children:(0,s.jsx)(f.T,{})});return(0,s.jsxs)(m.r,{title:e,dataTestId:"cart-review",children:[(0,s.jsx)("div",{className:n.B.mt16.$,children:(0,s.jsx)(E.y,{countByBillableProductKey:t,billingInterval:a,currency:i,taxPercent:u??0,isCartReviewSummary:!0,tier:p})}),(0,s.jsx)(b,{tier:p,isAnnual:a===c.kT.YEAR}),(0,s.jsx)("div",{className:n.B.my24.$,style:r.sx.add({marginLeft:"-10px"}).$,"data-testid":"cart-review-terms-checkbox",children:A}),(0,s.jsx)(v.r,{onClick:x,disabled:w,htmlAttributes:{"data-testid":"cart-review-submit-button"},trackingProperties:{trackingDescriptor:d.y.COMPLETE_PURCHASE,...S},children:_?I:(0,l.tx)("checkout.complete_purchase")})]})}function b({tier:e,isAnnual:t}){let a=e===o.K0.ORG?"https://help.figma.com/hc/articles/360040328293-Manage-billing-on-the-Organization-and-Enterprise-plans":"https://help.figma.com/hc/articles/360041061034-Manage-billing-on-the-Professional-plan";return(0,s.jsx)("div",{className:n.B.mt24.$,"data-testid":"cart-review-upgrade-information-banner",children:(0,s.jsxs)("div",{className:n.B.py8.px16.colorBgSecondary.bRadius5.flex.flexColumn.gap4.$,children:[(0,s.jsx)("p",{className:n.B.textBodyMediumStrong.$,children:(0,l.tx)("checkout.how_do_new_seat_additions_and_upgrades_work")}),(0,s.jsx)("p",{children:function(e,t){switch(e){case o.K0.ORG:return(0,l.tx)("checkout.cart_review_upgrade_info_org");case o.K0.PRO:return t?(0,l.tx)("checkout.cart_review_upgrade_info_pro_annual",{monthlyPriceLink:S}):(0,l.tx)("checkout.cart_review_upgrade_info_pro_monthly");default:(0,x.P2)(e)}}(e,t)}),(0,s.jsx)(i.Cr,{className:n.B.textBodyMediumStrong.$,style:r.sx.add({height:"16px"}).$,target:"_blank",href:a,trusted:!0,children:(0,l.tx)("checkout.learn_more")})]})})}var C=a(529972);function w(e){return(0,s.jsxs)("div",{style:r.sx.grid.add({gridTemplateColumns:"400px 1fr",gap:"48px"}).$,"data-testid":"cart-review-step",children:[(0,s.jsx)(u,{...e}),e.hasUpgradeSucceeded?(0,s.jsx)(C.F,{}):(0,s.jsx)(N,{...e})]})}},453271:function(e,t,a){a.d(t,{DA:()=>h,I7:()=>c,Yg:()=>p,v0:()=>l,vJ:()=>o,wM:()=>d,yR:()=>m,zS:()=>x});var s=a(862658),r=a.n(s),i=a(619369),n=a(328403);let l=1,d=1;function o(e,t){let a={};for(let s of Object.keys(e)){let r=e[s]||"";t.includes(s)&&(0,i.Vl)(r)&&(a[s]=r)}return a}function c(e,t,a){return{minimumPaidSeats:1,defaultAdditionalSeatType:i.hH.EXPERT,selectedTeamIds:[e],selectedUserSeatTypes:t,additionalSeatCounts:a}}function m(e,t,a){return{minimumPaidSeats:1,defaultAdditionalSeatType:i.hH.EXPERT,selectedTeamIds:e,selectedUserSeatTypes:t,additionalSeatCounts:a}}function u(e){return{type:"error",message:e}}function _(e){return{type:"success",value:e}}function p(e,t){var a,s,r,i,n;switch(t.type){case"changeSeatType":return a=e,s=t.userId,r=t.seatType,s in a.selectedUserSeatTypes?_({...a,selectedUserSeatTypes:{...a.selectedUserSeatTypes,[s]:r}}):u(`Tried to change seat for not-present user ${s}`);case"setAdditionalSeats":return i=e,Object.values(n=t.additionalSeatCounts).some(e=>e<0)?u("Blocked attempt to set negative additional seats"):_({...i,additionalSeatCounts:n})}}function h(e,t,a){return{...e,[t]:Math.max(0,(e[t]||0)+a)}}function x(e){let t=new Set(n.Hs.toArray()),a=new Set(Object.keys(e));return!(!r()(t,a)||Object.values(e).find(e=>Number.isNaN(e)||e<0))}},693287:function(e,t,a){a.d(t,{z:()=>S});var s=a(750357),r=a(853505),i=a(5929);if(9793==a.j)var n=a(303501);if(9793==a.j)var l=a(680441);if(9793==a.j)var d=a(974014);if(9793==a.j)var o=a(944365);var c=a(589937),m=a(661193),u=a(590914),_=a(491420),p=a(126341),h=a(547845);if(9793==a.j)var x=a(871567);var g=a(926941),y=a(128517),f=a(920860),v=a(790312),T=a(818780),j=a(381597);let E=(0,g.z7)(i.Hw);function S({title:e,countByBillableProductKey:t,tier:a,billingInterval:i,currency:c,buttonText:g,isButtonDisabled:S,isLoading:b,onClickNext:C,onSwitchCurrency:w,onSwitchBillingInterval:A,footer:I,canEnforcePaidSeatMinimum:k,trackingProperties:R}){let P=!!t,O=(0,f.EB)(),D=(0,y.LB)(),[M,U]=function(e,t,a,s){let[i,n]=r.useState(!1),l=r.useCallback((e,t)=>!!(s&&e&&!(0,p.D)(e,t)),[s]);r.useEffect(()=>{i&&!l(t,a)&&n(!1)},[t,a,s,i,l]);let d=r.useCallback(s=>{if(!i){if(l(t,a))return void n(!0);e(s)}},[t,a,i,l,e]);return[i,d]}(C,t,a,k),B=(0,s.jsx)("div",{className:m.B.flex.justifyCenter.itemsCenter.$,"data-testid":"cart-sidebar-loading",children:(0,s.jsx)(n.T,{})});return(0,s.jsxs)(T.r,{title:e,dataTestId:"cart-sidebar",children:[(0,s.jsx)("div",{className:m.B.mt16.$,children:P?(0,s.jsxs)(s.Fragment,{children:[O&&(0,s.jsxs)("div",{className:m.B.flex.justifyBetween.itemsCenter.pb16.bb1.bSolid.colorBorder.$,"data-testid":"cart-sidebar-currency-switcher",children:[(0,s.jsx)("p",{children:(0,u.tx)("checkout.sidebar.currency_label")}),(0,s.jsx)(h.w,{currency:c,dropdownShown:D,supportedCurrencies:(0,f._M)(),changeCurrency:e=>{w(e)},shortFormDisplay:!0,paddingOverride:0})]}),A&&P&&(0,s.jsx)("div",{className:m.B.my16.$,style:_.sx.add({marginLeft:"-8px"}).$,"data-testid":"cart-sidebar-billing-interval",children:(0,s.jsxs)(l.f,{legend:(0,s.jsx)(d.e,{children:(0,u.tx)("checkout.sidebar.switch_your_billing_interval")}),value:i,onChange:e=>A(e),children:[(0,s.jsx)(l.W,{value:v.kT.YEAR,label:(0,s.jsxs)(o._,{className:m.B.flex.itemsCenter.gap16.$,children:[(0,u.tx)("checkout.sidebar.annual")," ",(0,s.jsx)("b",{className:m.B.colorTextSuccess.fontSemiBold.colorBgSuccessTertiary.bRadius2.px4.block.$,style:_.sx.add({fontSize:"10px"}).$,children:(0,u.tx)("checkout.sidebar.save_up_to_20")})]})}),(0,s.jsx)(l.W,{value:v.kT.MONTH,label:(0,s.jsx)(o._,{children:(0,u.tx)("checkout.sidebar.monthly")})})]})}),(0,s.jsx)("div",{className:m.B.pt16.$,children:(0,s.jsx)(j.y,{countByBillableProductKey:t,billingInterval:i,currency:c,isCartReviewSummary:!1,tier:a})})]}):(0,s.jsx)("p",{className:m.B.colorTextSecondary.$,children:(0,u.tx)("checkout.sidebar.cannot_calculate_subtotal")})}),(0,s.jsxs)("div",{style:_.sx.add({marginTop:"80px"}).$,children:[M&&(0,s.jsx)(N,{}),(0,s.jsx)(E,{onClick:U,disabled:S||b,htmlAttributes:{"data-testid":"cart-sidebar-button"},trackingProperties:{trackingDescriptor:x.y.CART_SIDEBAR,...R},children:b?B:g}),I&&(0,s.jsx)("div",{className:m.B.mt16.$,"data-testid":"cart-sidebar-footer",children:I})]})]})}function N(){return(0,s.jsx)("div",{className:m.B.my8.$,"data-testid":"cart-sidebar-paid-seat-minimum-banner",children:(0,s.jsx)(c.f,{color:c.Z.WARNING,text:(0,s.jsx)("p",{style:_.sx.lh14.add({fontSize:"9px"}).$,children:(0,u.tx)("checkout.sidebar.paid_seat_minimum_banner")})})})}},832200:function(e,t,a){a.d(t,{z:()=>R});var s=a(750357),r=a(853505),i=a(577851),n=a(486020),l=a(944365),d=a(458780),o=a(739842),c=a(259946),m=a(590914),u=a(513827),_=a(890798),p=a(70523),h=a(5929),x=a(661193),g=a(404639),y=a(469271),f=a(926941),v=a(504495),T=a(790312);function j(e){return"org"===e.variant?(0,s.jsx)(S,{...e}):(0,s.jsx)(N,{...e})}let E=(0,f.z7)(h.zx);function S(e){let t=e.canSeeBillingAddressExp&&e.billingAddress,a=e.canSeeBillingAddressExp&&e.shippingAddress&&!(0,T.SV)(e.shippingAddress);return(0,s.jsxs)("div",{children:[(0,s.jsx)(b,{subtitle:(0,m.tx)(e.canSeeBillingAddressExp?"org_self_serve.review_step.details":"org_self_serve.review_step.organization_details")}),(0,s.jsx)(C,{header:(0,m.tx)(e.canSeeBillingAddressExp?"org_self_serve.review_step.company_legal_name":"org_self_serve.review_step.company_name"),value:e.legalName}),(0,s.jsx)(C,{header:(0,m.tx)(e.canSeeBillingAddressExp?"org_self_serve.review_step.display_name":"org_self_serve.review_step.company_display_name"),value:e.displayName}),!e.canSeeBillingAddressExp&&(0,s.jsx)(C,{header:(0,m.tx)("org_self_serve.review_step.domain"),value:e.domain}),!e.canSeeBillingAddressExp&&e.totalTeams>0&&(0,s.jsx)(C,{header:(0,m.tx)("org_self_serve.review_step.teams"),value:e.totalTeams.toString()}),e.canSeeBillingAddressExp&&(0,s.jsx)(C,{header:(0,m.tx)("org_self_serve.review_step.billing_email"),value:e.userEmail}),e.canSeeBillingAddressExp&&(0,s.jsx)(o.Cr,{onClick:e.navigateToEditOrganizationDetails,trackingEventName:"Edit organization details - checkout flow",trusted:!0,children:(0,m.tx)("org_self_serve.review_step.edit_organization")}),t&&(0,s.jsx)(C,{header:(0,m.tx)("org_self_serve.review_step.billing_address"),value:w(e.billingAddress)}),a&&(0,s.jsx)(C,{header:(0,m.tx)("org_self_serve.review_step.shipping_address"),value:w(e.shippingAddress)}),e.canSeeBillingAddressExp&&(0,s.jsx)(o.Cr,{onClick:e.navigateToEditPaymentDetails,trackingEventName:"Edit payment details - checkout flow",trusted:!0,children:(0,m.tx)("org_self_serve.review_step.edit_payment")})]})}function N(e){let t=(0,i.I0)(),a=(0,i.v9)(e=>e.selectedView),r=e.canSeeBillingAddressExp&&e.billingAddress,n=e.canSeeBillingAddressExp&&e.shippingAddress&&!(0,T.SV)(e.shippingAddress);return(0,s.jsxs)("div",{children:[(0,s.jsx)(b,{subtitle:(0,m.tx)("pro_cart.review.details")}),(0,s.jsx)(C,{header:(0,m.tx)("pro_cart.review.team_name"),value:e.displayName}),(0,s.jsx)(C,{header:(0,m.tx)("pro_cart.review.company_name"),value:e.legalName}),r&&(0,s.jsx)(C,{header:(0,m.tx)("pro_cart.review.billing_address"),value:w(e.billingAddress)}),n&&(0,s.jsx)(C,{header:(0,m.tx)("pro_cart.review.shipping_address"),value:w(e.shippingAddress)}),(0,s.jsx)(E,{variant:"link",onClick:e.canSeeBillingAddressExp?()=>{t(g.fv({...a,paymentStep:T.iy.PAYMENT_AND_ADDRESS}))}:()=>{t((0,y.K4)({type:v.z,data:{modalTitle:(0,m.t)("pro_cart.review.edit_details_modal_header"),displayName:e.displayName,legalName:e.legalName,updateNameImmediately:!1,canSeeBillingAddressExp:e.canSeeBillingAddressExp}}))},trackingEventName:"Edit team details - checkout flow",children:(0,m.tx)(e.canSeeBillingAddressExp?"pro_cart.review.edit_details":"pro_cart.review.edit_all_details")})]})}function b({subtitle:e}){return(0,s.jsx)("h2",{className:x.B.font15.fontMedium.lh24.colorText.$,children:e})}function C({header:e,value:t}){return(0,s.jsxs)("dl",{className:x.B.flex.flexColumn.mt16.$,children:[(0,s.jsx)("dt",{className:x.B.font11.lh16.spacingWide.colorText.$,children:e}),(0,s.jsx)("dd",{className:x.B.font13.lh24.fontMedium.colorText.breakWord.mb16.$,children:t})]})}function w(e){return[e?.line1,e?.line2,e?.city,e?.region,e?.country,e?.postal_code].filter(function(e){return e}).join(", ")}var A=a(915491),I=a(920860),k=a(157880);function R(e){let[t,a]=r.useState(!1),h=new I.Lr(e.currency),[x,g]=r.useState(!1),y=(0,i.v9)(e=>e.payment),f=(0,i.v9)(e=>e.payment,(e,t)=>x||e===t),v=(0,i.v9)(t=>e.selectedView.teamId?t.teams[e.selectedView.teamId].name:e.teamName)??"",E=(0,p.ES)(),S=y.displayName||v,N=y.legalName||v,b=y.billingPeriod===T.tv.STUDENT,C=!!(0,A.K)(e.selectedView,y),w=C||b,R=y.submitPending||!C&&!t,P=(0,u.k)(),{estimatedDesignCost:O,estimatedWhiteboardCost:D}=(0,A.A)({currency:e.currency}),M=y.numWhiteboardEditors,U=O(y.numDesignEditors,y.billingPeriod),B=D(M,y.billingPeriod),L=w?0:y.taxes?.total||U+B,V=new URLSearchParams(d.ZP.location.search),z=V.get("onCompleteRedirectFileKey"),G=V.get("onCompleteRedirectNodeId"),{trackingDescriptor:H,buttonText:F,finePrint:$}=(0,_.bF)({isPromo:C,isEducationTeam:b,claimsEndAtDate:y.promo?.claims_end_at}),Y=async t=>{t.preventDefault(),await g(!0),e.onClickConfirm()};return(0,s.jsxs)("div",{className:k.Ng,children:[(0,s.jsx)("div",{className:k.Xb,children:(0,s.jsx)(j,{displayName:S??"",legalName:N??"",canSeeBillingAddressExp:e.canSeeBillingAddressExp,billingAddress:e.billingAddress,shippingAddress:e.shippingAddress,variant:"team"})}),(0,s.jsxs)("div",{className:k.qR,children:[(0,s.jsx)("div",{className:k.r0,"data-testid":"review-step-upgrade-title",children:(0,m.tx)(b?"edu.checkout_team_name":E?y.billingPeriod===T.tv.ANNUAL?"pro_cart.review.exp_sticker_shock.upgrade_team_name_to_a_professional_team_yearly":"pro_cart.review.exp_sticker_shock.upgrade_team_name_to_a_professional_team_monthly":"pro_cart.review.upgrade_team_name_to_a_professional_team",{teamName:v})}),(!P||!w)&&(0,s.jsx)(_.jN,{payment:f,currency:e.currency,isPromo:C,isEducationTeam:b,hasCartStickerShock:E}),(0,s.jsx)("div",{className:k.Db}),(0,s.jsx)(o.Ki,{multiple:2}),f.taxes&&!!e.billingAddress&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(_.dm,{mainText:(0,m.tx)("pro_cart.info.subtotal"),priceText:h.formatMoney(C?0:f.taxes.sub_total||0,{showCents:!0}),"data-testid":"subtotal-summary"}),(0,s.jsx)(o.Ki,{multiple:1.5}),(0,s.jsx)(_.dm,{mainText:(0,m.tx)("pro_cart.review.tax"),priceText:h.formatMoney(f.taxes?.tax_total||0,{showCents:!0}),subText:(0,m.tx)("pro_cart.review.tax_percent",{taxPercent:f.taxes.lines[0]?.tax_percent||0}),"data-testid":"tax-summary"}),(0,s.jsx)(o.Ki,{multiple:1.5})]}),(0,s.jsx)(_.dm,{"data-testid":"confirm-total-summary",mainText:b?(0,m.tx)("pro_cart.review.total"):(0,m.tx)("pro_cart.review.total_due_today"),priceText:h.formatMoney(L,{showCents:!0,showFullFormat:(0,I.EB)()}),subText:C?(0,m.tx)("pro_cart.review.you_will_not_be_charged_during_the_free_period",{days:f.promo.promo_value}):void 0}),(0,s.jsx)(o.Ki,{multiple:2}),(0,s.jsxs)("div",{children:[$,!C&&(0,s.jsx)("div",{className:k.$o,children:(0,s.jsx)(n.X,{checked:t,onChange:a,label:(0,s.jsx)(l._,{children:(0,s.jsx)("span",{children:(0,s.jsx)(_.Ot,{})})})})})]}),(0,s.jsx)(o.Ki,{multiple:2.5}),(0,s.jsx)(o.Ki,{multiple:2.5}),(0,s.jsx)(o.RS,{className:k.Km,onClick:Y,trackingProperties:{teamId:e.selectedView.teamId,inPublishDraftExp:!!(G&&z),trackingDescriptor:H},disabled:R,dataTestId:"confirm-purchase-button",children:y.submitPending?(0,s.jsx)(c.TK,{className:k.M8}):F})]})]})}},456677:function(e,t,a){a.d(t,{A:()=>u,O:()=>_});var s,r=a(750357),i=a(739842),n=a(617054),l=a(240473),d=a(590914);if(9793==a.j)var o=a(871567);var c=a(157880);if(9793==a.j)var m=a(2851);var u=9793==a.j?((s=u||{}).STARTER="starter",s.PRO="pro",s.ORG="org",s):null;function _({type:e,teamName:t,setTeamName:a,onNext:s,upgradeExistingTeam:u,promo:_}){let p={starter:{title:(0,d.tx)("all_carts.create_team.create_a_new_team"),subtitle:(0,d.tx)("all_carts.create_team.after_creating_a_team"),placeholder:(0,d.t)("pro_cart.create_team.enter_a_name_for_your_working_group"),next:(0,d.tx)("all_carts.create_team.create_team"),trackingDescriptor:o.y.SEND_INVITES},pro:{title:(0,d.tx)("pro_cart.create_team.create_a_professional_team"),subtitle:(0,d.tx)("pro_cart.create_team.itll_have_unlimited_files_and_collaborative_features"),placeholder:(0,d.t)("pro_cart.create_team.enter_a_name_for_your_working_group"),next:_?(0,d.tx)("pro_cart.sidebar.next_review"):(0,d.tx)("pro_cart.create_team.next_set_editors.seat_rename"),trackingDescriptor:_?o.y.REVIEW:o.y.SET_EDITORS},org:{title:(0,d.tx)("org_self_serve.create_team_step.create_an_org_team"),subtitle:(0,d.tx)("org_self_serve.create_team_step.itll_have_unlimited_files_and_advanced_security"),placeholder:(0,d.t)("org_self_serve.create_team_step.enter_a_name_for_your_team"),next:(0,d.tx)("org_self_serve.create_team_step.next_select_team"),trackingDescriptor:o.y.SELECT_TEAM}}[e];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:c.nx,children:p.title}),(0,r.jsx)(i.Ki,{multiple:.5}),(0,r.jsx)("div",{className:c.Kp,children:p.subtitle}),(0,r.jsxs)("div",{className:c.KC,children:[(0,r.jsx)(l.n,{svg:m.Z,className:c.g2}),(0,r.jsx)(n.H,{className:c.TM,onChange:e=>a(e.target.value),value:t,placeholder:p.placeholder})]}),(0,r.jsx)(i.RS,{className:c.aL,onClick:s,trackingProperties:{trackingDescriptor:p.trackingDescriptor},disabled:!t.trim(),children:p.next}),!!u&&(0,r.jsx)(i.Z6,{className:c.fL,onClick:u,trusted:!0,trackingProperties:{trackingDescriptor:o.y.UPGRADE_EXISTING_TEAM},children:(0,d.tx)("pro_cart.create_team.upgrade_an_existing_team_instead")})]})}},529972:function(e,t,a){a.d(t,{F:()=>d});var s=a(750357);if(9793==a.j)var r=a(303501);var i=a(661193),n=a(491420),l=a(818780);function d(){return(0,s.jsx)(l.r,{title:null,dataTestId:"loading-cart-card",children:(0,s.jsx)("div",{className:i.B.flex.flexColumn.itemsCenter.justifyCenter.wFull.$,style:n.sx.add({height:"208px"}).$,children:(0,s.jsx)(r.T,{})})})}},381597:function(e,t,a){a.d(t,{y:()=>C});var s=a(750357);if(9793==a.j)var r=a(850340);if(9793==a.j)var i=a(612661);var n=a(273634);if(9793==a.j)var l=a(359721);var d=a(903132),o=a(632959),c=a(661193),m=a(590914),u=a(491420),_=a(225094),p=a(996834),h=a(513366),x=a(646312),g=a(157589),y=a(926941),f=a(889835),v=a(619369),T=a(328403),j=a(877208),E=a(920860),S=a(248893),N=a(790312);if(9793==a.j)var b=a(95238);function C({countByBillableProductKey:e,billingInterval:t,currency:a,isCartReviewSummary:r,taxPercent:i,tier:n}){let o=(0,f.yW)({billableProductKeys:T.Hs,baseQuery:{currency:a,tier:n,renewalTerm:t,unit:t}}),g=(0,f.yW)({billableProductKeys:T.Hs,baseQuery:{currency:a,tier:n,renewalTerm:t,unit:N.kT.MONTH}}),[v,E]=(0,d.Eh)(o,g);if(!v.data||!E.data)throw Error("Price data is null");let S=(0,h.LB)(v.data),C=(0,h.LB)(E.data),k=i||0,R=e=>(0,p.lb)(e,a,{showCents:r}),P=(0,p.zX)(e,S),O=(0,p.AC)(e,S,k),D=(0,p.tf)(e,S,k),M=R(P),U=R(O),B=R(D),L=(0,s.jsx)(_.x,{fontWeight:"medium",color:"tertiary",fontSize:11,children:(0,m.tx)("checkout.review_in_tax_disclaimer")}),V=t===N.kT.YEAR;return(0,s.jsx)(y.Ui,{name:b.V4.CART_REVIEW_PURCHASE_SUMMARY,properties:{tier:n,billingInterval:t,countBySeatType:(0,x.C7)(e),currency:a,taxPercent:k,subtotal:P,taxTotal:O,total:D},enabled:r,children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{style:u.sx.add({marginBottom:"24px"}).$,children:Object.keys(e).sort(j.uE).map(t=>(0,s.jsx)(w,{billableProductKey:t,count:e[t]||0,currency:a,isAnnual:V,isCartReviewSummary:r,paymentPrices:S,lineItemPrices:C},t))}),(0,s.jsxs)("div",{className:c.B.flex.justifyBetween.py4.$,"data-testid":"purchase-summary-subtotal",children:[(0,s.jsx)("h3",{className:c.B.fontMedium.if(r,c.B.font13.lh24).$,children:(0,m.tx)("checkout.subtotal")}),(0,s.jsx)("p",{className:c.B.if(r,c.B.font13.lh24).$,children:I({price:M,isCartReviewSummary:r,isAnnual:V})})]}),!r&&(0,s.jsx)(_.x,{fontWeight:"regular",color:"tertiary",fontSize:11,children:(0,m.tx)("checkout.tax_disclaimer_revised",{checkoutStep:L})}),r&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:c.B.flex.justifyBetween.py4.itemsCenter.$,"data-testid":"purchase-summary-taxes",children:[(0,s.jsxs)("div",{className:c.B.flexColumn.$,children:[(0,s.jsx)("h3",{className:c.B.font13.lh24.$,children:(0,m.tx)("checkout.purchase_summary.tax")}),(0,s.jsx)("h3",{className:c.B.colorTextSecondary.font13.lh24.$,children:(0,m.tx)("pro_cart.review.tax_percent",{taxPercent:k})})]}),(0,s.jsx)("p",{className:c.B.font13.lh24.$,children:I({price:U,isAnnual:V,isCartReviewSummary:r})})]}),(0,s.jsxs)("div",{className:c.B.flex.justifyBetween.py4.$,"data-testid":"purchase-summary-total-due",children:[(0,s.jsx)("h3",{className:c.B.fontMedium.font13.lh24.$,children:(0,m.tx)("checkout.purchase_summary.total_due_today")}),(0,s.jsx)("p",{className:c.B.font13.lh24.$,children:I({price:B,isAnnual:V,isCartReviewSummary:r})})]}),(0,s.jsx)("div",{"data-testid":"purchase-summary-plan-renewal",children:(0,s.jsxs)("p",{className:c.B.font13.lh24.flex.$,children:[(0,s.jsx)(l.J,{className:c.B.minW24.$}),(0,s.jsx)(A,{tier:n,isAnnual:V})]})})]})]})})}function w({billableProductKey:e,count:t,currency:a,isAnnual:r,isCartReviewSummary:l,paymentPrices:d,lineItemPrices:u}){if(!(0,v.Vl)(e))return(0,o.Jz)(n.k.MONETIZATION_UPGRADES,Error(`Received invalid billable product key ${e}`)),null;let _=d[e];if((0,i.Rw)(_))return(0,o.Jz)(n.k.BILLING_EXPERIENCE,Error(`Received null payment price on purchase summaryfor ${e}`)),null;let p=u[e];if((0,i.Rw)(p))return(0,o.Jz)(n.k.BILLING_EXPERIENCE,Error(`Received null line item price on purchase summary for ${e}`)),null;let h=new E.Lr(a),x=h.formatMoney(_*t,{showCents:l}),y=c.B.font13.lh24,f=(0,m.t)("checkout.price_per_month",{price:h.formatMoney(p)});return(0,s.jsxs)("div",{"data-testid":`purchase-summary-${e}-row`,className:c.B.flex.justifyBetween.py8.bb1.bSolid.colorBorder.if(l,c.B.itemsCenter,c.B.itemsStart).$,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:c.B.if(l,y).$,children:(0,m.tx)("checkout.purchase_summary.cart_line_item",{quantity:t,productLabel:(0,g.Wq)(e)})}),(0,s.jsx)("p",{className:c.B.colorTextSecondary.if(l,y).$,children:(0,m.tx)(r?"checkout.product_cost_breakdown_annually":"checkout.product_cost_breakdown_monthly",{price:f,quantity:t})})]}),(0,s.jsx)("p",{className:c.B.if(l,y).$,children:I({price:x,isCartReviewSummary:l,isAnnual:r})})]})}function A({tier:e,isAnnual:t}){switch(e){case S.K0.ORG:return(0,m.tx)("checkout.purchase_summary.plan_renewal_org");case S.K0.PRO:return t?(0,m.tx)("checkout.purchase_summary.plan_renewal_pro_annual"):(0,m.tx)("checkout.purchase_summary.plan_renewal_pro_monthly");default:(0,r.P2)(e)}}function I({price:e,isAnnual:t,isCartReviewSummary:a}){var s;return a?e:(s=e,t?(0,m.t)("checkout.price_per_year",{price:s}):(0,m.t)("checkout.price_per_month",{price:s}))}},662928:function(e,t,a){a.d(t,{f:()=>V});var s=a(750357),r=a(853505),i=a(527986),n=a(273634),l=a(410802),d=a(927385),o=a(715279),c=a(444947),m=a(558089),u=a(661193),_=a(590914),p=a(738529),h=a(513366),x=a(646312),g=a(70523),y=a(926941),f=a(271264),v=a(248893),T=a(95238),j=a(465237),E=a(577851),S=a(612661),N=a(403706),b=a(5929),C=a(981744),w=a(458857);a(607906);var A=a(358852),I=a(469271),k=a(242802),R=a(5794),P=a(161139);let O="select_seats_table--sidePadding--tFVJb",D="select_seats_table--userColumn--nowBz",M="select_seats_table--seatColumn--zJqS0",U="select_seats_table--teamColumn--gqz-y",B="select_seats_table--descriptionColumn--o2HN4";function L({user:e,seatTypes:t,selectedSeatType:a,changeSeatType:r,tier:i,teamId:n}){let l=(0,E.I0)(),d=(0,k.dO)(),o=e.id===d,c=(0,g.pg)(),m=i===v.K0.PRO&&c(),p=()=>{l((0,I.K4)({type:P.z,data:{user:e,seatTypes:t,selectedSeatType:a,setSelectedSeatType:r,tier:i,teamId:n}}))};if((0,S.Rw)(t[a]))return null;let h=(0,s.jsxs)(N.h,{...{className:"xh8yej3 x12ulsxz x1xijbu4 x133fa97 x19y5rnk xmkeg23 x1y0btm7 x7z60cl xkezfkh"},"aria-label":(0,_.t)("checkout.edit_user_seat_name",{name:e.handle}),onClick:p,children:[(0,s.jsx)("span",{...{className:"x1db2dqx"},children:(0,s.jsx)(A.UV,{type:a,size:"24"})}),(0,s.jsx)("span",{children:t[a].displayName}),(0,s.jsx)(C.T,{className:"x8x9d4c"})]});return(0,s.jsxs)("tr",{"data-testid":`select_seat_row--${e.id}`,children:[(0,s.jsx)("td",{"aria-hidden":!0,className:O}),(0,s.jsx)("td",{className:D,"data-testid":"select_seats_table_user_cell",children:(0,s.jsx)(R.oJ,{entity:e,includeUserEmailAddress:!0,size:24,showIsMe:o})}),(0,s.jsx)("td",{className:M,children:m?h:(0,s.jsx)(b.ps,{variant:"ghost","aria-label":(0,_.t)("checkout.edit_user_seat_name",{name:e.handle}),onClick:p,iconPrefix:(0,s.jsx)(A.UV,{type:a,size:"24"}),children:(0,s.jsxs)("span",{className:u.B.flex.justifyBetween.ml2.$,children:[t[a].displayName,(0,s.jsx)(w.o,{})]})})}),i===v.K0.ORG&&(0,s.jsx)("td",{className:U,children:e.teams}),(0,s.jsx)("td",{className:B,children:t[a].description}),(0,s.jsx)("td",{"aria-hidden":!0,className:O})]})}function V({users:e,seatTypes:t,selectSeatsState:a,changeUserSeatType:E,setAdditionalSeats:S,tier:N}){let b=(0,r.useRef)(null),C=(0,f.f)(n.k.MONETIZATION_UPGRADES),w=(0,p.a)({tableContainerRef:b}),[A,I]=r.useState(a),[k,R]=r.useState(!1),P=r.useMemo(()=>{let t=[...e];return(0,i.po)(t,e=>e.handle,{isDescending:k}),t},[e,k]),V=(0,h.s6)((0,h.UL)(a.selectedUserSeatTypes)),z=(0,h.s6)(a.additionalSeatCounts),G=(0,g.pg)(),H=N===v.K0.PRO&&G();return(0,s.jsx)(y.Ui,{name:T.V4.SELECT_SEATS_TABLE,properties:{selectedUserSeatTypes:(0,x.A4)(A.selectedUserSeatTypes),countBySeatType:(0,x.C7)((0,h.fG)(A.selectedUserSeatTypes,A.additionalSeatCounts)),selectedTeamIds:(0,x.hO)(A.selectedTeamIds),userIds:(0,x.hO)(e.map(e=>e.id))},trackingOptions:C,children:(0,s.jsx)("div",{children:(0,s.jsxs)("div",{className:"select_seats_table--tableContainer--8j06G",ref:b,"data-testid":"select-seats-table",children:[(0,s.jsx)(m.l,{maxHeight:w,className:"select_seats_table--scrollContainer--rUP9F",hideScrollbar:!0,horizontalScrollingDisabled:!0,children:(0,s.jsxs)("table",{className:"select_seats_table--table--iZveK",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{"aria-hidden":!0,className:O}),(0,s.jsxs)("th",{className:D,children:[(0,_.tx)("checkout.select_seats_table.user_column")," ",(0,s.jsx)("div",{className:u.B.inlineBlock.$,"data-testid":"select-seats-table-sort-users-button",children:(0,s.jsx)(l.h,{onClick:()=>R(e=>!e),"aria-label":(0,_.t)("checkout.select_seats_table.sort"),children:k?(0,s.jsx)(d.Q,{"data-testid":"select-seats-table-icon-arrow-up"}):(0,s.jsx)(o.A,{"data-testid":"select-seats-table-icon-arrow-down"})})})]}),(0,s.jsx)("th",{className:M,children:H?(0,_.tx)("checkout.select_seats_table.seat_column_exp"):(0,_.tx)("checkout.select_seats_table.seat_column")}),N===v.K0.ORG&&(0,s.jsx)("th",{className:U,children:(0,_.tx)("checkout.select_seats_table.team_column")}),(0,s.jsx)("th",{className:B,children:(0,_.tx)("checkout.select_seats_table.description_column")}),(0,s.jsx)("th",{"aria-hidden":!0,className:O})]})}),(0,s.jsx)("tbody",{children:P.map(e=>(0,s.jsx)(L,{user:e,seatTypes:t,selectedSeatType:a.selectedUserSeatTypes[e.id],changeSeatType:t=>{c.RQ.trackDefinedEvent("monetization_upgrades.user_seat_selection_changed_in_checkout",{targetUserId:e.id,previousSeatType:a.selectedUserSeatTypes[e.id],newSeatType:t,tier:N,teamId:N===v.K0.PRO?A.selectedTeamIds[0]:void 0}),E(e.id,t)},tier:N,teamId:N===v.K0.PRO?A.selectedTeamIds[0]:void 0},e.id))})]})}),(0,s.jsxs)("div",{className:u.B.py12.px24.bt1.bSolid.colorBorder.flex.itemsCenter.justifyBetween.$,children:[(0,s.jsx)(j.X,{tier:N,seatTypes:t,additionalSeatCounts:a.additionalSeatCounts,setAdditionalSeats:S}),(0,s.jsx)("p",{children:(0,_.tx)("checkout.select_seats_table.team_members_count",{assignedSeatsText:(0,_.tx)("checkout.select_seats_table.assigned_seats",{count:V}),unassignedSeatsText:(0,_.tx)("checkout.select_seats_table.unassigned_seats",{count:z})})})]})]})})})}},161139:function(e,t,a){a.d(t,{z:()=>x});var s=a(750357),r=a(273634),i=a(451410),n=a(514177),l=a(317429),d=a(661193),o=a(590914),c=a(864197),m=a(678353),u=a(130329),_=a(926941),p=a(271264),h=a(619369);let x=(0,a(712824).Y3)(function(e){let t=(0,p.f)(r.k.MONETIZATION_UPGRADES),{user:a,seatTypes:x,selectedSeatType:g,setSelectedSeatType:y,open:f,onClose:v,tier:T,teamId:j}=e,E=i.dd({open:f,onClose:v});return(0,s.jsx)(_.Ui,{name:"Select User Seat Type Modal",properties:{teamId:j},trackingOptions:t,children:(0,s.jsx)(n.fC,{manager:E,width:480,htmlAttributes:{"data-testid":"select-user-seat-type--modal"},children:(0,s.jsx)(l.AU,{children:(0,s.jsx)(l.uT,{children:(0,s.jsxs)(c.j,{direction:"vertical",spacing:0,padding:{horizontal:8,vertical:16},children:[(0,s.jsx)("div",{className:d.B.mb24.$,children:(0,s.jsx)(u.G,{user:a,text:(0,o.t)("modify_plan_user_seat_modal.choose_seat",{name:a.handle})})}),(0,s.jsx)(m.R,{currentSeatType:g,setNextSeatType:e=>{y(e),v()},availableSeatCounts:null,pricing:Object.fromEntries(Object.entries(x).filter(([e,t])=>e!==h.mI.VIEW&&!!t).map(([e,t])=>[e,t.displayPrice])),learnMoreLinkHref:"/pricing",displayPricing:!0,canSetCurrentSeatType:!0,tier:T})]})})})})})},"SelectUserSeatTypeModal")},459090:function(e,t,a){a.d(t,{TR:()=>E,yl:()=>S});var s=a(750357),r=a(577851),i=a(850340),n=a(444947),l=a(574059),d=a(382830),o=a(590914);if(9793==a.j)var c=a(453393);var m=a(404639);if(9793==a.j)var u=a(871567);var _=a(926941),p=a(581414),h=a(242802),x=a(855325),g=a(248893),y=a(790312),f=a(798870),v=a(157880);function T(e){return(0,s.jsx)(_.XT,{type:"button",className:v.wt,trackingProperties:{trackingDescriptor:u.y.CANCEL},onClick:e.onClick,dataTestId:"upgrade-breadcrumb-menu-cancel",children:(0,o.tx)("pro_cart.breadcrumbs.cancel")})}function j(e,t,a,s){let r=t===y.tv.STUDENT,n=[];switch(e){case f.wD.CREATE_AND_UPGRADE:n.push(0),n.push(1),r?n.push(4):a||(n.push(4),n.push(5)),n.push(6);break;case f.wD.UPGRADE_EXISTING_TEAM:s===f.rD.TEAM?(n.push(3),r||n.push(5)):r?(n.push(0),n.push(3)):a?n.push(0):(n.push(0),n.push(4),n.push(5)),n.push(6);break;case f.wD.CREATE:n.push(1),n.push(2),n.push(0),s===f.rD.TEAM&&(r?n.push(4):a||(n.push(4),n.push(5)),n.push(6));break;default:(0,i.vE)(e)}return n.map(e=>(function(e){switch(e){case 0:return{step:y.iy.PLAN_COMPARISON,text:(0,o.t)("pro_cart.breadcrumbs.choose_plan")};case 1:return{step:y.iy.CREATE_TEAM,text:(0,o.t)("pro_cart.breadcrumbs.create_team")};case 2:return{step:y.iy.ADD_COLLABORATORS,text:(0,o.t)("pro_cart.breadcrumbs.add_team_members")};case 3:return{step:y.iy.CHOOSE_PLAN,text:(0,o.t)("pro_cart.breadcrumbs.adjust_editors.seat_rename")};case 4:return{step:y.iy.CHOOSE_PLAN,text:(0,o.t)("pro_cart.breadcrumbs.set_editors.seat_rename")};case 5:return{step:y.iy.PAYMENT_AND_ADDRESS,text:(0,o.t)("pro_cart.breadcrumbs.payment_information")};case 6:return{step:y.iy.CONFIRM_PAY,text:(0,o.t)("pro_cart.breadcrumbs.review")}}})(e))}function E(e,t,a,s,r,i){let n=j(t,a,s,r).map(e=>e.step),l=n.indexOf(e);return i=i||n[0],-1===l?i:n[l+1]}function S(e){let{selectedView:t}=e,{teamId:a,paymentStep:i,teamFlowType:o}=t,u=(0,r.I0)(),_=(0,r.v9)(e=>e.payment.billingPeriod),E=(0,h.xJ)()?.id,S=j(o,_,(0,r.v9)(e=>e.payment.promo),e.selectedView.planType||f.rD.UNDETERMINED),N=S.findIndex(e=>e.step===i);return(0,s.jsxs)("div",{className:v.yP,"data-testid":"cart-breadcrumb-menu-pro",children:[(0,s.jsx)(T,{onClick:()=>{((0,l.nW)(),e.isCampfireCart?(0,x.FD)(u):(0,x.aC)(u),(0,f.GH)(o)&&null===a&&(0,p.bC)(E),E)?a&&(!t.previousView||"fullscreen"!==t.previousView.view)?u(c.NO({workspace:{userId:E,teamId:a,orgId:null},view:{view:"recentsAndSharing"}})):u(m.fv(t.previousView||{view:"recentsAndSharing"})):u(m.fv(t.previousView||(a?{view:"team",teamId:a}:{view:"recentsAndSharing"}))),t.callbackOnClose?.()}}),S.map((r,l)=>(0,s.jsx)(d.ut,{selected:i===r.step,number:l+1,text:r.text,canClick:l<N,lightText:!0,onClick:()=>{n.RQ.trackDefinedEvent("monetization_upgrades.checkout_breadcrumb_navigation",{fromStep:i,toStep:r.step,tier:g.K0.PRO,isCampfireCart:!!e.isCampfireCart,teamId:a??void 0}),u(m.fv({...t,paymentStep:r.step,billingPeriod:_===y.tv.UNSPECIFIED?void 0:_,planType:(0,f.F1)(o,r.step)?f.rD.UNDETERMINED:t.planType,teamFlowType:(0,f.Lr)(o)&&r.step===y.iy.PLAN_COMPARISON?f.wD.CREATE_AND_UPGRADE:t.teamFlowType}))}},r.text))]})}},28276:function(e,t,a){a.r(t),a.d(t,{TeamUpgradePageBillingRemodel:()=>eK});var s=a(750357),r=a(853505),i=a(577851),n=a(850340),l=a(273634),d=a(444947),o=a(330837),c=a(458780),m=a(545449),u=a(689342),_=a(574059),p=a(903132),h=a(158639),x=a(405944),g=a(475565),y=a(498869),f=a(589937),v=a(661193),T=a(733791),j=a(367949),E=a(590914),S=a(491420),N=a(996834),b=a(513366),C=a(646312),w=a(542144),A=a(204764),I=a(697816),k=a(693287),R=a(456677),P=a(529972),O=a(459090),D=a(739842),M=a(157880);function U({disableInviteButton:e,collaborators:t,setCollaborators:a,willSendInvites:r,skipInviteStep:i}){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h1",{className:M.nx,children:(0,E.tx)("pro_cart.add_collaborators.add_collaborators_to_your_team")}),(0,s.jsx)(D.Ki,{multiple:.5}),(0,s.jsx)("h2",{className:M.Kp,children:(0,E.tx)("pro_cart.add_collaborators.well_add_them_to_your_team")}),(0,s.jsx)(D.Ki,{multiple:4}),(0,s.jsxs)("div",{style:S.sx.flex.flexColumn.add({maxWidth:"400px"}).mlAuto.mrAuto.gap12.$,children:[t.map((e,r)=>(0,s.jsx)(D.Ev,{value:e,onChange:e=>{var s;return s=e.target.value,void(!(r>=t.length)&&a(t.map((e,t)=>t===r?s:e)))},placeholder:(0,E.t)("pro_cart.add_collaborators.email")},`collaborator-email-input-${r}`)),(0,s.jsx)(D.Z6,{onClick:()=>{a([...t,""])},trusted:!0,style:S.sx.alignLeft.font14.fontMedium.$,children:(0,E.tx)("pro_cart.add_collaborators.add_another")})]}),(0,s.jsxs)("div",{style:S.sx.flex.flexColumn.itemsCenter.mlAuto.mrAuto.mt24.gap24.fontMedium.font14.$,children:[(0,s.jsx)(D.RS,{disabled:!!e,style:S.sx.font14.add({height:"44px",width:"110px"}).$,onClick:r,children:(0,E.tx)("pro_cart.add_collaborators.sent_invites")}),(0,s.jsx)(D.Cr,{trusted:!0,onClick:i,style:S.sx.colorTextSecondary.alignCenter.$,children:(0,E.tx)("pro_cart.add_collaborators.skip_for_now")})]})]})}var B=a(193447),L=a(39269),V=a(400128),z=a(904018),G=a(479852),H=a(559235);function F({chooseStarterPlan:e,chooseEduPlan:t,chooseProPlan:a,chooseOrgPlan:r,currency:i,updateCurrency:n,upgradeExistingTeam:l}){let d=(0,L.e)(i);return(0,s.jsxs)("div",{style:S.sx.grid.gap16.p36.pb24.selectNone.mxAuto.add({width:"945px",maxWidth:"1049px"}).$,children:[(0,s.jsx)(V.j,{chooseEduPlan:t,chooseEnterprisePlan:B.ZT,chooseOrgPlan:r,chooseProPlan:a,chooseStarterPlan:e,currency:i,prices:d,teamPlan:G.Lz.STARTER,updateCurrency:n,withUpgradeExistingTeamOption:l}),(0,s.jsx)(H.LZ,{height:8}),(0,s.jsx)(z.C,{})]})}var $=a(453393),Y=a(654380),Z=a(404639),q=a(469271),K=a(404756),W=a(300028),Q=a(121142),X=a(70523),J=a(871567),ee=a(926941),et=a(271264),ea=a(889835),es=a(7710),er=a(619369),ei=a(328403),en=a(581414),el=a(397739),ed=a(231229),eo=a(956964),ec=a(242802),em=a(73838),eu=a(920860),e_=a(672650),ep=a(855325),eh=a(864638),ex=a(118960),eg=a(998324),ey=a(892243),ef=a(277413),ev=a(248893),eT=a(790312),ej=a(798870),eE=a(95238),eS=a(734753),eN=a(559062),eb=a(944365),eC=a(486020),ew=a(240473),eA=a(818780),eI=a(260251),ek=a(548249),eR=a(678811),eP=a(726821),eO=a(335489);let eD=(0,ee.v8)(e=>{let{dataTestId:t,children:a,...r}=e;return(0,s.jsx)("select",{...r,"data-testid":t,children:a})});function eM(e){let t=e.paymentMethods.filter(e=>e.type===ek.Y7.CARD||e.type===ek.Y7.SEPA);return(0,s.jsx)(s.Fragment,{children:t.map(e=>{let t=function(e){if(e.type===ek.Y7.CARD){var t=e.object;let a=t.display_brand in eV?eV[t.display_brand]:(0,E.t)("checkout.other");return`${a} \u2022\u2022\u2022\u2022 ${t.last4}`}if(e.type===ek.Y7.SEPA){var a=e.object;let t=a.country?a.country.toUpperCase():(0,E.t)("checkout.other");return`SEPA ${t} \u2022\u2022\u2022\u2022 ${a.last4}`}throw Error(`Unknown payment method type: ${e.type}`)}(e),a=(0,b.D6)(e.address);return(0,s.jsxs)("option",{className:v.B.flex.justifyBetween.gap2.$,value:e.id,children:[(0,s.jsx)("span",{className:v.B.font13.$,children:t}),a&&(0,s.jsx)("span",{className:v.B.colorTextSecondary.font13.$,children:` - ${a}`})]},e.id)})})}function eU(e){return(0,s.jsx)("div",{className:eP._1,children:(0,s.jsxs)("div",{className:v.B.flex.relative.wFull.itemsCenter.$,children:[(0,s.jsx)(eD,{name:"selected_saved_payment_method",trackingFieldName:"SelectExistingPaymentMethod",trackingPopulationLevel:e.selectedPaymentMethod?.id&&e.enableSavedPaymentMethods?eI.r4.POPULATED_COMPLETE:eI.r4.NOT_POPULATED,onChange:t=>{let a=t.target.value,s=e.paymentMethods.find(e=>e.id===a);s&&e.setSelectedPaymentMethod(s)},value:e.selectedPaymentMethod?.id,children:(0,s.jsx)(eM,{paymentMethods:e.paymentMethods})}),(0,s.jsx)(ew.n,{style:S.sx.add({position:"absolute",right:"16px",pointerEvents:"none",color:"var(--color-icon)",fill:"var(--color-icon)"}).$,svg:eO.Z})]})})}function eB(e){let{enableSavedPaymentMethods:t,setEnableSavedPaymentMethods:a}=e,r=(0,s.jsx)(eb._,{children:(0,s.jsx)("span",{className:v.B.font13.$,children:(0,E.t)("checkout.use_saved_payment_method")})});return(0,s.jsx)("div",{className:v.B.mb6.if(!t,v.B.mb0).$,children:(0,s.jsx)(eC.X,{label:r,onChange:e=>{a(e)},checked:t})})}function eL(e){let{paymentMethods:t,setSelectedPaymentMethod:a,setEnableSavedPaymentMethods:r,enableSavedPaymentMethods:n,selectedPaymentMethod:l}=e,{error:d,errorCode:o}=(0,i.v9)(e=>e.payment),c=!!d&&null===o;return(0,s.jsxs)(eA.r,{title:(0,E.t)("checkout.payment_details"),children:[t.length>0&&(0,s.jsxs)("div",{className:v.B.alignLeft.$,children:[(0,s.jsx)(eB,{enableSavedPaymentMethods:n,setEnableSavedPaymentMethods:r}),n&&(0,s.jsx)(eU,{selectedPaymentMethod:l,enableSavedPaymentMethods:n,setSelectedPaymentMethod:a,paymentMethods:t})]}),(0,s.jsx)("div",{className:v.B.alignLeft.$,children:(0,s.jsx)(eR.u,{billingAddress:e.billingAddress,canSeeBillingAddressExp:e.canSeeBillingAddressExp,createPaymentElement:e.createPaymentElement,error:e.error,hide:e.enableSavedPaymentMethods,isCampfireCart:e.isCampfireCart,legalCompanyName:e.legalCompanyName,nameOnPaymentMethod:e.nameOnPaymentMethod,onRegionalVatGstIdChange:e.onRegionalVatGstIdChange,onVatGstIdChange:e.onVatGstIdChange,paymentError:c?d:void 0,paymentFlow:e.paymentFlow,paymentMethodType:e.paymentMethodType,regionalVatGstId:e.regionalVatGstId,shippingAddress:e.shippingAddress,unmountPaymentElement:e.unmountPaymentElement,updateBillingAddress:e.updateBillingAddress,updateLegalCompanyName:e.updateLegalCompanyName,updateNameOnPaymentMethod:e.updateNameOnPaymentMethod,updateShippingAddress:e.updateShippingAddress,vatGstId:e.vatGstId})})]})}let eV={american_express:"American Express",cartes_bancaires:"Cartes Bancaires",diners_club:"Diners Club",discover:"Discover",eftpos_australia:"Eftpos Australia",interac:"Interac",jcb:"JCB",mastercard:"Mastercard",union_pay:"Union Pay",visa:"Visa"};var ez=a(612661),eG=a(85122),eH=a(453271),eF=a(662928);function e$(e){let t={...e.additionalSeatCounts};return Object.values(e.selectedUserSeatTypes).forEach(e=>{(0,er.S2)(e)&&e in t&&t[e]++}),{countBySeatType:t,selectedUserSeatTypes:e.selectedUserSeatTypes}}function eY({teamId:e,currency:t,renewalTerm:a,eligibleTeamUsers:i,initCampfireSeats:n,onUpdateCampfireSeats:l}){let d=(0,eG.t)({currency:t,tier:ev.K0.PRO,renewalTerm:a,showCents:!1}),[o]=(0,p.Eh)(d);if(null===o.data)throw Error("Seat types data is null");let c=o.data,{changeUserSeatType:m,selectSeatsState:u,setAdditionalSeats:_}=((e,t,a,s)=>{let[i,n]=(0,r.useState)(()=>{let r=function(e,t,a){let s,{countBySeatType:r,selectedUserSeatTypes:i}=e||{countBySeatType:{},selectedUserSeatTypes:{}},n=t.map(e=>e.user.id),l=(0,eH.vJ)(i,n);return t.forEach(e=>{let t=e.user.id;l[t]||(l[t]=e.recommended_seat_type?.key??er.mI.VIEW)}),s=(0,eH.zS)(r)?{...r}:{developer:0,collaborator:0,expert:0},Object.values(l).forEach(e=>{"view"!==e&&(0,ez.lm)(s[e])&&s[e]>0&&s[e]--}),(0,eH.I7)(a,l,s)}(a,t,e);return s(e$(r)),r}),l=(0,r.useCallback)(e=>{try{n(t=>{let a=function(e,t){let a=(0,eH.Yg)(e,t);switch(a.type){case"success":return a.value;case"validation":throw Error("failed validation");case"error":throw Error("sent error")}}(t,e);return s(e$(a)),a})}catch(e){}},[s]);return{changeUserSeatType:(0,r.useCallback)((e,t)=>{l({type:"changeSeatType",userId:e,seatType:t})},[l]),setAdditionalSeats:e=>l({type:"setAdditionalSeats",additionalSeatCounts:e}),selectSeatsState:i}})(e,i,n,l),h=i.map(e=>{let t=e.user;return{id:t.id,img_url:t.img_url,handle:t.handle,email:t.email}});return(0,s.jsx)(eF.f,{users:h,seatTypes:c,changeUserSeatType:m,selectSeatsState:u,setAdditionalSeats:_,tier:ev.K0.PRO})}let eZ=em.t1.Query({fetch:async e=>(await eS.g.getEligibleUpgradeData(e)).data.meta,stalenessPolicy:"never"});function eq(e){let t,a=(0,ec.xJ)(),n=a?.id,h=(0,_._F)(),y=(0,i.v9)(e=>e.payment),j=(0,i.v9)(e=>e.teams),D=e.selectedView.paymentStep,M=(0,i.v9)(e=>e.roles.byTeamId),B=(0,ex.Rt)("TeamUpgradeCart"),L=B.data?.permission===G.WM.ADMIN,[V,z]=(0,r.useState)(h?.team_name??""),[H,J]=(0,r.useState)(en.Wq),ed=(0,e_.ez)((0,eo.Mn)()),em=(0,X.hy)({userId:n,teams:Object.values(j),rolesByTeamId:M}),[eS,eb]=(0,r.useState)(!1),[eC,ew]=(0,r.useState)(h?.currency||y.currency||(0,eu.x_)()),eA=e=>{ew(e),tc(K.NW({currency:e}))},eI=y.billingPeriod,{editorStatusChanges:ek}=y,{ignoreCurrentPlan:eR}=e.selectedView,eP=e.selectedView.teamId,eO=(0,i.v9)(t=>(0,eg.np)(t,{...e.selectedView,paymentStep:eT.iy.CONFIRM_PAY})),eD=(0,i.v9)(t=>(0,eg.np)(t,{...e.selectedView,paymentStep:eT.iy.PAYMENT_AND_ADDRESS})),eM=(0,X.ty)(),eU=void 0===y.cartSelections,eB=(0,u.D9)(eU),eV=ei.Hs.dict(e=>y.cartSelections?.countBySeatType?.[e]||0),ez=eI&&(0,e_.Ui)(eI)||eT.kT.YEAR,eG=(0,ea.yW)({billableProductKeys:ei.Hs,baseQuery:{currency:eC,tier:ev.K0.PRO,renewalTerm:ez,unit:ez}}),[eH]=(0,p.Eh)(eG),eF=(0,ea.qJ)(eH);if(null===eF.data)throw Error("Price data is null");let e$=eF.data,eq=(0,b.LB)(e$),eK=(0,N.zX)(eV,eq),[eQ,eX]=(0,r.useState)([]),[eJ,e0]=(0,r.useState)(null),{createPaymentElement:e1,unmountPaymentElement:e5,savePayment:e2,saveWithPaymentMethod:e7,billingAddress:e3,updateBillingAddress:e4,shippingAddress:e9,updateShippingAddress:e8,customerLegalName:e6,setCustomerLegalName:te,nameOnPaymentMethod:tt,setNameOnPaymentMethod:ta,vatGstId:ts,setVatGstId:tr,regionalVatGstId:ti,setRegionalVatGstId:tn,paymentMethodType:tl,error:td}=(0,es.HR)({setupIntentParams:{redirect_url:eO,error_redirect_url:eD,subtotal_estimate:eK,currency:eC,teamId:eP??void 0},setPaymentMethods:eX,customerInfo:{teamId:eP},paymentFlowSource:es.E.PRO_UPGRADE,currency:eC,billingPeriod:eI,defaultCountry:(0,eu.yJ)(),initialBillingAddress:h?.billing_address,initialNameOnPaymentMethod:h?.name_on_payment_method,initialShippingAddress:h?.shipping_address,initialCustomerLegalName:h?.customer_legal_name,initialVatGstId:h?.vat_gst_id,initialRegionalVatGstId:h?.regional_vat_gst_id,teamName:h?.team_name||V,canSeeBillingAddressExp:eM,isCheckout:!0,isCampfireCart:!0}),to=td?.code===es.qo.UNINITIALIZED_STRIPE_ELEMENTS_ERROR,tc=(0,i.I0)(),tm=(0,ep.pO)({teamId:eP,canSeeBillingAddressExp:eM}),[tu]=(0,p.aM)(eZ({teamId:eP}),{enabled:!!eP}),t_="loaded"!==tu.status,tp={user:{id:n,img_url:a.img_url,handle:a.handle,email:a.email},id:"",team_id:eP,recommended_seat_type:{key:er.hH.EXPERT,license_types:[]}};(0,r.useEffect)(()=>{(0,eT.DN)(D)||tc(Z.fv({...e.selectedView,paymentStep:eT.iy.CHOOSE_PLAN}))},[D,tc,e.selectedView]),(0,r.useEffect)(()=>{"loaded"===tu.status&&(0,C.hw)({eligibleTeamIds:[eP],eligibleTeamUsers:tu.data.eligible_team_users,tier:ev.K0.PRO,step:D})},[tu]);let th=to||y.submitPending,tx=r.useCallback(()=>{tc(Z.fv({...e.selectedView,paymentStep:eT.iy.CHOOSE_PLAN,previousView:e.selectedView.previousView,ignoreCurrentPlan:eR,billingPeriod:eI}))},[tc,e.selectedView,eR,eI]),tg=eP?j[eP]?.name:V,ty=y.displayName||tg;(0,en.QQ)({loadingPaidEditors:tm,teamId:eP,teamName:eP?void 0:V,setTeamName:eP?void 0:z,collaborators:eP||e.selectedView.teamFlowType!==ej.wD.CREATE?void 0:H,setCollaborators:eP||e.selectedView.teamFlowType!==ej.wD.CREATE?void 0:J});let tf=(0,i.v9)(e=>e.currentUserOrgId),tv=eR?null:tf,tT=(0,i.v9)(e=>tv?e.orgById[tv]:null),tj=(0,eN.E)({currentOrgId:tv,currentTeamId:null}),tE=tj.data?.currentUser?.baseOrgUser?.workspaceUsers,tS=tE?.find(e=>e?.isMainWorkspace)?.workspaceId,{cannotCreateTeamReason:tN}=(0,ef.v8)(tT,tS??null),tb=(0,i.v9)(e=>(0,eh.isOrgUserExternallyRestrictedFromState)(e));(0,m.O)(()=>{tc(Q.v({entered_pro_cart_flow:!0}))}),(0,m.O)(()=>{let e=document.createElement("div");return e.style.position="fixed",e.style.inset="0",e.style.background="var(--color-bg-secondary)",e.style.zIndex="-1",document.body.appendChild(e),()=>{document.body.removeChild(e)}});let[tC,tw]=(0,r.useState)(!1);(0,r.useEffect)(()=>{D===eT.iy.PAYMENT_AND_ADDRESS&&to&&tx()}),(0,r.useEffect)(()=>{D===eT.iy.CONFIRM_PAY&&!tm&&eU&&(0,d.L9)("pro_cart_selections_undefined_on_review_step",{teamId:eP,userId:n})},[eU,tm,D,n,eP]),(0,r.useEffect)(()=>{D===eT.iy.CONFIRM_PAY&&eB&&!eU&&(0,d.L9)("monetization_upgrades.hydrated_pro_cart_selections",{teamId:eP,loadingPaidEditors:tm})},[eU,eB,tm,D,eP]);let tA=(0,i.v9)(e=>!!e.user&&(0,g.dE)(e.user));(0,r.useEffect)(()=>{tA&&e.selectedView.isEduTeam?tc(K._1({billingPeriod:eT.tv.STUDENT})):e.selectedView.isEduTeam&&tc(K._1({billingPeriod:eT.tv.UNSPECIFIED}))},[tc,e.selectedView.isEduTeam,tA]),(0,r.useEffect)(()=>{e.selectedView.teamFlowType===ej.wD.CREATE_AND_UPGRADE&&(tb||tN===ef.mt.TEAM_CREATION_CONTROL)&&(c.ZP.redirect("/"),tc(T.l.error((0,E.t)("team_creation.missing_team_creation_controls"))))},[e.selectedView.teamFlowType,tb,tN,tc]);let tI=y.currencyToSwitch;(0,r.useEffect)(()=>{tI&&ew(tI)},[ew,tI]),(0,r.useEffect)(()=>{eQ[0]&&(e0(eQ[0]),eb(!0))},[eQ,e0,eb]);let tk=eI===eT.tv.STUDENT,tR=H.filter(e=>e&&e.trim()).map(e=>e.trim()),tP=tR.filter(e=>!(0,o.Jh)(e)),tO=!!a&&tR.filter(e=>e===a.email).length>0,tD=async t=>{t.preventDefault();let a=new URL(window.location.href).searchParams,s=a.get("onCompleteRedirectFileKey"),r=a.get("onCompleteRedirectNodeId");t.currentTarget&&t.currentTarget.blur();let i=(0,O.TR)(e.selectedView.paymentStep,e.selectedView.teamFlowType,eI,y.promo,e.selectedView.planType||ej.rD.UNDETERMINED);D===eT.iy.CREATE_TEAM&&(z(V.trim()),tc(Z.fv({...e.selectedView,teamId:null,paymentStep:i,ignoreCurrentPlan:eR,billingPeriod:eI}))),D===eT.iy.ADD_COLLABORATORS&&(tP.length?tc(T.l.error((0,E.t)("pro_cart.add_collaborators.error.email_is_invalid",{string:tP[0]}))):tO?tc(T.l.error((0,E.t)("team_view.team_permissions_modal.youre_not_able_to_send_an_invite_to_yourself"))):tc(Z.fv({...e.selectedView,paymentStep:i,ignoreCurrentPlan:eR,billingPeriod:eI}))),D===eT.iy.CHOOSE_PLAN?tk?tc(Z.fv({...e.selectedView,paymentStep:i,billingPeriod:eT.tv.STUDENT,ignoreCurrentPlan:eR})):(tc(K.$R({editorStatusChanges:ek})),tc(Z.fv({...e.selectedView,paymentStep:i,billingPeriod:y.billingPeriod,...s?{searchParams:{onCompleteRedirectFileKey:s,onCompleteRedirectNodeId:r}}:{},ignoreCurrentPlan:eR}))):D===eT.iy.PAYMENT_AND_ADDRESS&&(tc(K.Xh({submitPending:!0})),eS&&eJ?await e7(eJ):await e2(),tc(K.Xh({submitPending:!1})))},tM=e.selectedView.teamFlowType===ej.wD.CREATE?()=>{tc((0,el.$Y)({teamName:V,orgAccess:G.Zn.PUBLIC,inviteEmails:tR,teamFlowType:e.selectedView.teamFlowType,onSuccess:()=>{(0,en.bC)(a?.id)},ignoreCurrentPlan:eR}))}:void 0;[ej.wD.CREATE_AND_UPGRADE,ej.wD.UPGRADE_EXISTING_TEAM].includes(e.selectedView.teamFlowType)&&(1===ed.length?t=t=>{t=t||e.selectedView.billingPeriod;let a=ej.wD.UPGRADE_EXISTING_TEAM;tc(Z.fv({...e.selectedView,teamFlowType:a,teamId:ed[0].id,paymentStep:(0,O.TR)(e.selectedView.paymentStep,a,t||null,y.promo,ej.rD.TEAM,eT.iy.CHOOSE_PLAN),planType:ej.rD.UNDETERMINED,billingPeriod:t,ignoreCurrentPlan:eR}))}:ed.length>1&&(t=e=>{e&&tc(K._1({billingPeriod:e})),tc((0,q.K4)({type:w.n2,data:{plan:A.s.PRO,upsellSource:ey.V.UPGRADE_EXISTING_FROM_TEAM_CREATION}}))}));let tU=a&&(0,en.D3)({teamId:eP,userId:a.id})?.is3DS;return e.selectedView.teamFlowType===ej.wD.CREATE_AND_UPGRADE&&(tb||tN===ef.mt.TEAM_CREATION_CONTROL)?(0,s.jsx)(s.Fragment,{}):(0,s.jsx)(ee.Ui,{name:eE.V4.TEAM_CHECKOUT_FLOW,properties:{teamId:e.selectedView.teamId,planType:e.selectedView.planType,entryPoint:e.selectedView.entryPoint,step:D,currency:eC,renewalTerm:ez,prices:(0,C.TA)(e$)},enabled:!(tm||t_),trackingOptions:(0,et.f)(l.k.MONETIZATION_UPGRADES),children:(0,s.jsxs)("div",{"data-testid":"team-upgrade-billing-remodel",className:v.B.selectNone.$,children:[(0,s.jsx)(O.yl,{selectedView:e.selectedView,isCampfireCart:!0}),(0,s.jsxs)("div",{style:S.sx.mxAuto.add({padding:"98px 48px 48px",maxWidth:"1400px"}).$,children:[D!==eT.iy.CREATE_TEAM&&(0,s.jsx)(eW,{step:D,teamName:tg??""}),D===eT.iy.PLAN_COMPARISON&&(0,s.jsx)(F,{chooseStarterPlan:t?void 0:tM,chooseEduPlan:()=>{eP?tc(K.y4({teamId:eP})):tc((0,q.K4)({type:Y.m}))},chooseProPlan:t=>{tc(K._1({billingPeriod:t}));let a=(0,ej.GH)(e.selectedView.teamFlowType)?e.selectedView.teamFlowType:ej.wD.CREATE_AND_UPGRADE;tc(Z.fv({...e.selectedView,teamFlowType:a,paymentStep:(0,O.TR)(e.selectedView.paymentStep,a,t,y.promo,ej.rD.TEAM),billingPeriod:t,planType:ej.rD.TEAM,openInNewTab:!1,ignoreCurrentPlan:eR}))},chooseOrgPlan:()=>{tc(K.s3({currency:eC,newTeamProps:{teamFlowType:e.selectedView.teamFlowType,newTeamName:V,inviteEmails:tR,previousView:e.selectedView},upsellSource:ey.V.UPGRADE_NEW_TEAM_V2}))},currency:eC,updateCurrency:eA,upgradeExistingTeam:t}),D===eT.iy.CREATE_TEAM&&(0,s.jsx)(R.O,{type:e.selectedView.teamFlowType===ej.wD.CREATE?R.A.STARTER:R.A.PRO,teamName:V,setTeamName:z,onNext:tD,upgradeExistingTeam:t?()=>t?.(eI):void 0,promo:y.promo}),D===eT.iy.ADD_COLLABORATORS&&(0,s.jsx)(U,{disableInviteButton:!tR.length,collaborators:H,setCollaborators:J,willSendInvites:tD,skipInviteStep:()=>{if(J(en.Wq),n){let e=(0,en.D3)({teamId:null,userId:n});e&&(0,en.i7)(n,{...e,newCollaborators:en.Wq})}tc(Z.fv({...e.selectedView,paymentStep:eT.iy.PLAN_COMPARISON,ignoreCurrentPlan:eR}))}}),D===eT.iy.CONFIRM_PAY?(0,s.jsxs)(s.Fragment,{children:[tU&&(0,s.jsx)("div",{className:v.B.mxAuto.alignLeft.mb16.$,children:(0,s.jsx)(f.f,{color:f.Z.INFORMATION,text:(0,E.t)("pro_cart.review.extra_validation")})}),tm||eU?(0,s.jsx)(P.F,{}):(0,s.jsx)(I.v,{billingAddress:e3,billingInterval:ez,countByBillableProductKey:eV,currency:eC,displayName:ty??"",hasUpgradeSucceeded:tC,isRequestPending:y.submitPending,legalName:y.legalName,navigateToEditDetails:()=>{tc(Z.fv({...e.selectedView,paymentStep:eT.iy.PAYMENT_AND_ADDRESS,previousView:e.selectedView.previousView,ignoreCurrentPlan:eR,billingPeriod:eI}))},onSubmit:()=>{let t=()=>{tw(!0),(0,_.nW)(),(0,ep.FD)(tc),(0,ej.GH)(e.selectedView.teamFlowType)&&null===eP&&(0,en.bC)(n)};if(e.selectedView.teamId&&tk)tc(K.Po({teamId:e.selectedView.teamId}));else if(e.selectedView.teamId&&y.promo){let a=e.selectedView.teamId;tc(W.Gz({teamId:a,teamName:j[a].name,promoCode:y.promo?.code||"",onSuccess:()=>{t(),(0,x.iZ)(),tc(K.gj({promo:null})),n?e.selectedView.previousView?Z.fv(e.selectedView.previousView):$.NO({workspace:{userId:n,orgId:null,teamId:a},view:{view:"allProjects"}}):tc(Z.fv(e.selectedView.previousView||{view:"team",teamId:a}))},onError:()=>{(0,x.iZ)(),tc(K.gj({promo:null})),tc(Z.fv({...e.selectedView,paymentStep:eT.iy.PLAN_COMPARISON,ignoreCurrentPlan:eR}))}}))}else{tc(Q.v({completed_pro_cart_flow:!0}));let{subtotal:a,taxTotal:s,total:r}=(0,b.bg)({countBySeatType:eV,applicablePrices:eq,taxPercent:y.taxes?.tax_percent??0}),i=(0,b.Bw)({subtotal:a,taxTotal:s,total:r});tc(K.Xh({submitPending:!0})),tc((0,W.$o)({teamId:e.selectedView.teamId,selectedCurrency:eC,teamName:V,teamFlowType:e.selectedView.teamFlowType,invites:tR,hasSelectedStudentTeam:tk,onSuccess:t,displayedCostBreakdown:i,isCampfireCart:!0,inStarterTeamLoopholes:em,displayedPriceKeys:(0,b.dq)(e$)}))}},onSubmitTrackingProperties:{selectedUserSeatTypes:(0,C.A4)(y.cartSelections?.selectedUserSeatTypes),countBySeatType:(0,C.C7)(eV),isTeamAdmin:L,...(0,b.bg)({countBySeatType:eV,applicablePrices:eq,taxPercent:y.taxes?.tax_percent??0})},shippingAddress:e9,taxPercent:y.taxes?.tax_percent,tier:ev.K0.PRO,title:(0,E.t)("checkout.upgrade_to_a_professional_plan"),userEmail:a?.email||""})]}):(0,s.jsxs)("div",{style:S.sx.grid.add({gridTemplateColumns:"1fr 280px",gap:"48px"}).$,children:[D===eT.iy.CHOOSE_PLAN&&(tm||t_&&!em?(0,s.jsx)(P.F,{}):(0,s.jsx)(eY,{teamId:e.selectedView.teamId??"",currency:eC,renewalTerm:ez,eligibleTeamUsers:tu.data?.eligible_team_users??[tp],initCampfireSeats:y.cartSelections,onUpdateCampfireSeats:e=>tc(K.gD({cartSelections:e}))})),D===eT.iy.PAYMENT_AND_ADDRESS&&(0,s.jsx)(eL,{billingAddress:e3,canSeeBillingAddressExp:eM,createPaymentElement:e1,enableSavedPaymentMethods:eS,error:td,isCampfireCart:!0,legalCompanyName:e6,nameOnPaymentMethod:tt,onRegionalVatGstIdChange:tn,onVatGstIdChange:tr,paymentFlow:es.E.PRO_UPGRADE,paymentMethodType:tl,paymentMethods:eQ,regionalVatGstId:ti,selectedPaymentMethod:eJ,setEnableSavedPaymentMethods:eb,setSelectedPaymentMethod:e0,shippingAddress:e9,unmountPaymentElement:e5,updateBillingAddress:e4,updateLegalCompanyName:te,updateNameOnPaymentMethod:ta,updateShippingAddress:e8,vatGstId:ts}),[eT.iy.CHOOSE_PLAN,eT.iy.PAYMENT_AND_ADDRESS].includes(D)&&(0,s.jsx)(k.z,{billingInterval:ez,buttonText:D===eT.iy.PAYMENT_AND_ADDRESS?(0,E.t)("pro_cart.sidebar.next_review"):(0,E.t)("pro_cart.sidebar.next_payment_information"),canEnforcePaidSeatMinimum:D===eT.iy.CHOOSE_PLAN,countByBillableProductKey:eV,currency:eC,isButtonDisabled:th,isLoading:y.submitPending,onClickNext:tD,onSwitchBillingInterval:e=>{d.RQ.trackDefinedEvent("monetization_upgrades.checkout_change_renewal_term",{teamId:eP??void 0,renewalTerm:e}),tc(K._1({billingPeriod:(0,e_.bv)(e)}))},onSwitchCurrency:eA,tier:ev.K0.PRO,title:(0,E.t)("checkout.your_professional_plan"),trackingProperties:{selectedUserSeatTypes:(0,C.A4)(y.cartSelections?.selectedUserSeatTypes),countBySeatType:(0,C.C7)(eV),savedPaymentMethodId:eS?eJ?.id:void 0}})]})]})]})})}function eK(e){return(0,s.jsx)(h.X,{label:"TeamUpgradePageBillingRemodel",children:(0,s.jsx)(y.SV,{team:l.k.MONETIZATION_UPGRADES,boundaryKey:"TeamUpgradeBillingRemodel",fallback:y.NY.DEFAULT_FULL_PAGE,hasCustomWASMBuild:ed.hU,children:(0,s.jsx)(eq,{...e})})})}function eW({step:e,teamName:t}){let a=(0,X.pg)(),r=(0,s.jsx)(j.Cr,{href:"/pricing",trackingProperties:{trackingDescriptor:J.y.LEARN_MORE_ABOUT_SEATS},newTab:!0,trusted:!0,children:(0,E.tx)("checkout.learn_more_about_seats")});return(0,s.jsxs)("div",{className:v.B.mb32.$,"data-testid":"cart-pro-header",children:[(0,s.jsx)("h2",{className:v.B.font15.lh24.fontMedium.$,children:function(e,t,a){if(!(0,eT.N8)(e)||(0,eT.DN)(e))switch(t=t||(0,E.t)("checkout.select_seats_header.your_team"),e){case eT.iy.PLAN_COMPARISON:return(0,E.tx)("pro_cart.choose_plan.choose_a_plan_for_your_new_team");case eT.iy.CHOOSE_PLAN:if(a)return(0,E.tx)("checkout.select_seats_header_exp",{teamName:t});return(0,E.tx)("checkout.select_seats_header",{teamName:t});case eT.iy.PAYMENT_AND_ADDRESS:return(0,E.tx)("checkout.enter_your_payment_details");case eT.iy.CONFIRM_PAY:return(0,E.tx)("checkout.everything_look_good");default:(0,n.P2)(e)}}(e,t,a())}),e===eT.iy.CHOOSE_PLAN&&(0,s.jsx)("p",{className:v.B.colorTextSecondary.font13.mt8.$,children:(0,E.tx)("checkout.select_seats_table.seat_types_have_been_suggested",{learnMoreAboutSeatsLink:r})}),e===eT.iy.CONFIRM_PAY&&(0,s.jsx)("p",{className:v.B.colorTextSecondary.font13.mt8.$,children:(0,E.tx)("checkout.confirm_your_plan_seats_and_payment_details_then_you_re_all_set")})]})}},452665:function(e,t,a){a.r(t),a.d(t,{TierUpgradeFlow:()=>as});var s=a(750357),r=a(853505),i=a(577851),n=a(273634),l=a(492342),d=a(444947),o=a(90957),c=a(330837),m=a(458780),u=a(45190),_=a(158639),p=a(632959),h=a(498869),x=a(355002),g=a(607906),y=a(555792),f=a(590914),v=a(367949),T=a(871567),j=a(790312);let E={[j.lQ.SELECT_TEAMS]:{name:(0,f.tx)("org_self_serve.headers.teams_to_upgrade"),getPageTitle:()=>(0,f.tx)("checkout.org_self_serve.select_teams_title"),buttonText:(0,f.tx)("checkout.org_self_serve.next_select_seats")},[j.lQ.SELECT_SEATS]:{name:(0,f.tx)("pro_cart.breadcrumbs.set_editors.seat_rename"),getPageTitle:e=>e?(0,f.tx)("checkout.unified_cart.select_seats_header.pro",{teamName:e}):(0,f.tx)("checkout.unified_cart.select_seats_header.org"),pageSubtitle:(0,f.tx)("checkout.unified_cart.select_seats_table.seat_types_have_been_suggested",{learnMoreAboutSeatsLink:(0,s.jsx)(v.Cr,{href:"/pricing",trackingProperties:{trackingDescriptor:T.y.LEARN_MORE_ABOUT_SEATS},newTab:!0,trusted:!0,children:(0,f.tx)("checkout.learn_more_about_seats")})}),buttonText:(0,f.tx)("pro_cart.sidebar.next_payment_information")},[j.lQ.PAYMENT_AND_ADDRESS]:{name:(0,f.tx)("pro_cart.breadcrumbs.payment_information"),getPageTitle:()=>(0,f.tx)("checkout.enter_your_payment_details"),buttonText:(0,f.tx)("pro_cart.sidebar.next_review")},[j.lQ.REVIEW]:{name:(0,f.tx)("pro_cart.breadcrumbs.review"),getPageTitle:()=>(0,f.tx)("checkout.everything_look_good")},[j.lQ.UPGRADE_TYPE]:{name:(0,f.tx)("checkout.breadcrumbs.upgrade_type"),getPageTitle:()=>(0,f.tx)("checkout.breadcrumbs.upgrade_type_title")},[j.lQ.SELECT_SEATS_AND_PAYMENT]:{name:(0,f.tx)("checkout.breadcrumbs.select_seats_and_payment"),getPageTitle:()=>(0,f.tx)("checkout.enter_your_payment_details"),pageSubtitle:(0,f.tx)("checkout.unified_cart.select_seats_table.seat_types_have_been_suggested",{learnMoreAboutSeatsLink:(0,s.jsx)(v.Cr,{href:"/pricing",trackingProperties:{trackingDescriptor:T.y.LEARN_MORE_ABOUT_SEATS},newTab:!0,trusted:!0,children:(0,f.tx)("checkout.learn_more_about_seats")})}),buttonText:(0,f.tx)("pro_cart.sidebar.next_review")}};var S=a(453393),N=a(404639),b=a(845277),C=a(242802),w=a(8690);function A({steps:e,currentStep:t,setStep:a,teamId:r}){let n=(0,i.I0)(),l=(0,C.xJ)()?.id,d=(0,b.A6)(),o=e.filter(e=>e!==j.lQ.CONFIRMATION);return(0,s.jsxs)("div",{...{className:"xixxii4 x78zum5 x1vqgdyp xh8yej3 x1t0vds8 xdqyycr x1yjdb4r xso031l x1q0q8m5 xertd99 xhtitgo"},children:[(0,s.jsx)(y.CN,{...{className:"x10l6tqk xomnu4r x1qpfodn xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l"},onClick:()=>{let e="teamUpgrade"===d.view?d.previousView:null;r&&e?.view!=="fullscreen"?n(S.NO({workspace:{userId:l,teamId:r,orgId:null},view:{view:"recentsAndSharing"}})):n(N.fv(e||{view:"recentsAndSharing"})),"teamUpgrade"===d.view&&d.callbackOnClose?.()},children:(0,f.t)("checkout.cancel")}),t!==j.lQ.UPGRADE_TYPE&&(0,s.jsx)("ol",{...{className:"x78zum5 x6s0dn4 xl56j7k xh8yej3"},children:o.map((e,r)=>(0,s.jsx)("li",{children:(0,s.jsxs)(y.CN,{onClick:()=>a(e),"aria-current":e===t?"step":void 0,...{0:{className:"x78zum5 x6s0dn4 xl56j7k xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l"},1:{className:"x78zum5 x6s0dn4 xl56j7k xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l xnbbluu"}}[e!==t|0],children:[(0,s.jsx)("span",{className:w.j,children:(0,f.t)("checkout.voice_over.steps",{stepNumber:r+1,totalSteps:o.length})}),E[e].name,r<o.length-1&&(0,s.jsx)(x.M,{className:"xe5c7bq"})]})},r))})]})}var I=a(303501),k=a(273143);function R({orgMigrated:e}){return(0,s.jsxs)("div",{...{className:"xht4xr3 x7iklje xack27t xat24cr x8x9d4c x1a4ebq4 x9h44rk xmkeg23 x1y0btm7 x7z60cl xg7h5cd"},children:[(0,s.jsx)("h1",{...{className:"xjz7g13 xuo4v2q xjnky0o xn4joj7 x1ul8uiu x12sbs06 x2b8uid"},children:(0,f.t)("checkout.org_confirmation.title")}),(0,s.jsx)("p",{...{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l x12sbs06"},children:(0,f.t)("checkout.org_confirmation.body")}),(0,s.jsxs)("div",{...{className:"x78zum5 x13a6bvl x6s0dn4"},children:[!e&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(I.T,{}),(0,s.jsx)("div",{...{className:"x9hsxk x1n0bwc9"},children:(0,f.t)("org_self_serve.confirmation_step.we_re_setting_up_your_organization")})]}),(0,s.jsx)(k.$,{disabled:!e,onClick:()=>{m.ZP.redirect("/files/recent")},children:(0,f.t)("checkout.org_confirmation.button")})]})]})}function P(){return(0,s.jsxs)("div",{...{className:"xht4xr3 x7iklje xack27t xat24cr x8x9d4c x1a4ebq4 x9h44rk xmkeg23 x1y0btm7 x7z60cl xg7h5cd"},children:[(0,s.jsx)("h1",{...{className:"xjz7g13 xuo4v2q xjnky0o xn4joj7 x1ul8uiu x12sbs06 x2b8uid"},children:(0,f.t)("checkout.pro_confirmation.title")}),(0,s.jsx)("p",{...{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l x12sbs06"},children:(0,f.t)("checkout.pro_confirmation.body")}),(0,s.jsx)("div",{...{className:"x78zum5 x13a6bvl x6s0dn4"},children:(0,s.jsx)(k.$,{onClick:()=>{m.ZP.redirect("/files/recent")},children:(0,f.t)("checkout.pro_confirmation.button")})})]})}var O=a(341546),D=a(987991),M=a(574059),U=a(484299),B=a(116501);function L({step:e,teamName:t}){return(0,s.jsxs)("div",{...{className:"xf1vcxl"},"data-testid":"cart-header",children:[(0,s.jsx)("h1",{...{className:"xjz7g13 xuo4v2q xjnky0o xn4joj7 x1ul8uiu"},tabIndex:0,children:E[e]?.getPageTitle(t)}),E[e]?.pageSubtitle&&(0,s.jsx)("p",{...{className:"x1swbamy xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l"},children:E[e]?.pageSubtitle})]})}function V({checkoutFlowType:e,setCheckoutFlowType:t,onClickNext:a}){return(0,s.jsxs)("div",{...{className:"x78zum5 xdt5ytf x6s0dn4 xk54qb2 x1kx8hp3 x180w3km x87ps6o"},children:[(0,s.jsx)(L,{step:j.lQ.UPGRADE_TYPE}),(0,s.jsxs)("div",{...{className:"x78zum5 xdt5ytf x6s0dn4 x18x6v2m"},children:[(0,s.jsxs)(O.f,{...{className:"x78zum5 x1pulhmw x1qjc9v5"},value:e??"",onChange:e=>t(e),children:[(0,s.jsx)(z,{id:B.P.SINGLE_EDITOR,title:(0,f.t)("checkout.upgrade_type_single_title"),description:(0,f.t)("checkout.upgrade_type_single_description"),imgUrl:(0,M.o1)("9f83fd329b1e36ac34fe65e902eaf55b25d0f3c0")}),(0,s.jsx)(z,{id:B.P.MULTI_EDITOR,title:(0,f.t)("checkout.upgrade_type_team_title"),description:(0,f.t)("checkout.upgrade_type_team_description"),imgUrl:(0,M.o1)("6453082a6c3b353ecf4e50938aa701fa258adbc8")})]}),(0,s.jsx)("div",{...{className:"xq1dxzn"},children:(0,s.jsx)(k.$,{onClick:a,disabled:!e,fullWidth:!0,children:(0,f.t)("checkout.upgrade_type_next")})})]})]})}function z({id:e,title:t,description:a,imgUrl:r}){return(0,s.jsxs)("label",{htmlFor:e,...{className:"x78zum5 xdt5ytf x6s0dn4 xg2d0mh xjsondq xfbns0s xbfr8j9 xmkeg23 x1y0btm7 x1mxnbhz x1yjdb4r xfl4w7x x7z60cl x16ukhit"},"data-testid":`upgrade-type-${e}`,children:[(0,s.jsx)(D.W,{value:e,id:e,className:"x10l6tqk x1i1rx1s xjm9jq1 x1717udv xkdpibf xb3r6kr xzpqnlu xuxw1ft xc342km"}),(0,s.jsx)(U.oG,{draggable:!1,src:r,alt:t,className:"x19kjcj4"}),(0,s.jsxs)("div",{...{className:"x78zum5 xdt5ytf x6s0dn4 xg2d0mh"},children:[(0,s.jsx)("span",{className:"xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh x1akne3o",children:t}),(0,s.jsx)("span",{className:"x1n0bwc9 x2b8uid",children:a})]})]})}var G=a(581370),H=a(707707),F=a(823076),$=a(513366),Y=a(759684),Z=a(126341);function q({additionalSeatsCount:e,selectedUserSeatTypes:t,tier:a}){let s=(0,$.fG)(t,e);return(0,Z.D)(s,a)?null:{code:Y.d.INVALID_PAID_SEAT_TOTAL,message:(0,f.t)("checkout.sidebar.paid_seat_minimum_banner")}}var K=a(646312),W=a(952266),Q=a(996834),X=a(850340),J=a(501253),ee=a(920860),et=a(118960),ea=a(548249),es=a(734753),er=a(8449),ei=a(865880),en=a(299418),el=a(73838);let ed=el.t1.Query({fetch:async e=>e&&(0,l.BZ)().cart_rewrite_full_send_saved_payment?(await es.g.getSavedPaymentMethods({planType:e?.type,planId:e?.parentId})).data.meta:{payment_methods:[]},stalenessPolicy:"never"});var eo=a(706367),ec=a(576572),em=a(548050),eu=a(810334),e_=a(881581),ep=a(585787);let eh="stripe-payment-element",ex=(0,eu.U)(e=>{let t=(0,et.I6)().unwrapOr(null),[a,s]=(0,r.useState)(null),[i,l]=(0,r.useState)(null),[o,c]=(0,r.useState)(null),[m,u]=(0,r.useState)(null),[_,h]=(0,r.useState)(!1),[x,g]=(0,r.useState)(!1),[y,v]=(0,r.useState)(void 0),T=(0,r.useRef)(null),j=(0,M.ZP)().user_data,E=(0,e_.y)(),S=(0,e_.A)(j);async function N(){if(T.current)return T.current;try{let t=(await (0,ea.fm)()).elements({mode:"setup",paymentMethodCreation:"manual",currency:e.currency,paymentMethodConfiguration:e.stripePaymentMethodConfiguration,...E});return T.current=t,t}catch(e){(0,d.L9)("setup_intent_creation_failed",w(),{forwardToDatadog:!0}),C({error:e,code:ep.uE.UNINITIALIZED_STRIPE_ELEMENTS_ERROR,message:(0,f.t)("payments.errors.error_loading_payment_form")})}}async function b(e){if(o&&!_)return{succeeded:!0,clientSecret:o,customerId:i};try{let{data:{meta:{client_secret:t,customer_id:a}}}=await em.E.createSetupIntent(e);return(0,d.L9)("setup_intent_creation_attempted",w(),{forwardToDatadog:!0}),c(t),l(a),h(!1),{succeeded:!0,clientSecret:t,customerId:a}}catch(e){return{succeeded:!1,clientSecret:null,customerId:null}}}function C({error:e,code:t,message:a,extra:r={}}){s({code:t,message:a}),(0,ec.dL)(e)||(0,ec.VA)(e)||(0,ec.Wo)(e)||(0,p.Jz)(n.k.BILLING,Error(`[Billing] ${"string"==typeof e?e:e.code??"StripeError"}`),t=>{let a="object"==typeof e?{stripe_error_details:(0,p.Tf)((0,ea.Am)(e)),...r}:r;return t.setExtras(a),(0,ec.Ys)(e)&&(t.setTag("stripe_error_type",e.type),(0,ec.dL)(e)&&t.setLevel("warning")),t})}function w(){return{planParentId:t?.key.parentId,paymentFlowSource:e.paymentFlowSource,currency:e.currency,isCampfireCart:!0}}function A(){return document.querySelectorAll("[name*=privateStripeFrame]").length}function I(e){let t;return((0,ec.dL)(e)||(0,ec.VA)(e)||(0,ec.Wo)(e))&&(t=e.message),t??(0,f.t)("payments.errors.confirm_setup_error")}return(0,r.useEffect)(()=>{let t=T.current;t&&t.update({currency:e.currency})},[e.currency]),{createPaymentElement:async(e={})=>{let t=await N();if(!t){let e={code:ep.uE.UNINITIALIZED_STRIPE_ELEMENTS_ERROR,message:(0,f.t)("payments.errors.error_loading_payment_form")};return C({...e,error:"Failed to get stripe elements"}),e}let a=t.getElement("payment")??t.create("payment",S);return a.on("ready",t=>{(0,d.L9)("Payment Form Loaded",{...w(),paymentMethod:y??ea.Y7.CARD,availableCurrencies:(0,ee._M)()}),y||v(ea.Y7.CARD),e.ready?.(t)}),a.on("change",t=>{let a=t.value?.type;(0,d.L9)("Choose Payment Method Type",{...w(),paymentMethod:a}),v(a),e.change?.(t)}),a.mount(`#${eh}`),null},unmountPaymentElement:async()=>{let e=await N();e?.getElement("payment")?.unmount()},createPaymentMethod:async e=>{if(!T.current){let e={code:ep.uE.MISSING_STRIPE_ELEMENTS_ERROR,message:(0,f.t)("payments.errors.confirm_setup_error")};return C({...e,error:"Cannot create payment method without Stripe elements"}),e}s(null);let{error:t}=await T.current.submit();if(t){let e=I(t),a={code:ep.uE.STRIPE_ELEMENTS_VALIDATION_ERROR,message:e};return s(a),a}(0,d.L9)("Add payment method",{...w(),paymentMethod:y},{forwardToDatadog:!0});let a=await (0,ea.fm)(),{error:r,paymentMethod:i}=await a.createPaymentMethod({elements:T.current,params:{billing_details:e}});if(r){let e={code:ep.uE.CREATE_PAYMENT_METHOD_ERROR,message:I(r)};return C({...e,error:r}),e}return i},confirmIntent:async({paymentMethod:e,createIntentParams:t})=>{if(!e){let e={code:ep.uE.MISSING_PAYMENT_METHOD_ERROR,message:(0,f.t)("payments.errors.confirm_setup_error")};return C({...e,error:"Payment method is required to confirm intent"}),e}let[a,{succeeded:s,clientSecret:r,customerId:i}]=await Promise.all([(0,ea.fm)(),b(t)]);if(!s){let e={code:ep.uE.CREATE_INTENT_ERROR,message:(0,f.t)("payments.errors.confirm_setup_error")};return C({...e,error:"Failed to create Setup Intent to confirm"}),e}let n=A(),o=setInterval(()=>{n!==A()&&((0,d.L9)("Stripe Authentication Modal"),clearInterval(o),g(!0))},1e3),{error:c,setupIntent:m}=await a.confirmSetup({clientSecret:r,redirect:"if_required",confirmParams:{return_url:`https://${window.location.host}`,payment_method:e}});if(clearInterval(o),c){let e={code:ep.uE.CONFIRM_INTENT_ERROR,message:I(c)};return C({...e,error:c}),e}if("succeeded"!==m.status){let e={code:ep.uE.CONFIRM_INTENT_ERROR,message:(0,f.t)("payments.errors.confirm_setup_error")};return C({...e,error:`SetupIntent confirmed with status ${m.status}`}),e}{let e={...m,customer:i};return l(i),u(m),h(!0),e}},paymentMethodType:y,error:a,stripeIntent:m,stripeCustomerId:i,is3ds:x}}),eg={stripePaymentMethod:void 0,savedPaymentMethod:void 0,vatGstId:"",regionalVatGstId:"",nameOnPaymentMethod:"",hasDifferentShippingAddress:!1,errors:[],savedPaymentMethods:[],isUsingSavedPaymentMethod:!1};function ey(e,t){switch(t.type){case eo.dN.TOGGLE_DIFFERENT_SHIPPING_ADDRESS:return{...e,hasDifferentShippingAddress:!e.hasDifferentShippingAddress};case eo.dN.INIT_SAVED_PAYMENT_METHODS:return{...e,savedPaymentMethods:t.payload,isUsingSavedPaymentMethod:t.payload.length>0,stripePaymentMethod:t.payload?.[0]?.id,savedPaymentMethod:t.payload?.[0]};case eo.dN.UPDATE_VAT_GST_ID:return{...e,vatGstId:t.payload};case eo.dN.UPDATE_REGIONAL_VAT_GST_ID:return{...e,regionalVatGstId:t.payload};case eo.dN.UPDATE_NAME_ON_PAYMENT_METHOD:return{...e,nameOnPaymentMethod:t.payload};case eo.dN.SET_ERRORS:return{...e,errors:t.payload};case eo.dN.SET_STRIPE_PAYMENT_METHOD:return{...e,stripePaymentMethod:t.payload};case eo.dN.TOGGLE_USE_SAVED_PAYMENT_METHOD:let a=e.isUsingSavedPaymentMethod;return{...e,isUsingSavedPaymentMethod:!a,stripePaymentMethod:a?void 0:e.savedPaymentMethod?.id};case eo.dN.SET_SAVED_PAYMENT_METHOD:return{...e,savedPaymentMethod:t.payload,stripePaymentMethod:t.payload?.id};default:(0,X.vE)(t)}}async function ef({billingAddress:e,shippingAddress:t,teamId:a,isCheckout:s}){if((0,j.SV)(e))return{code:eo.Ux.MISSING_ADDRESS_ERROR,message:(0,f.t)("checkout.errors.missing_address")};try{await ei.j.validateAddresses({billingAddress:e,shippingAddress:t,teamId:a,isCheckout:s})}catch(e){return{code:eo.Ux.ADDRESS_VALIDATION_ERROR,message:(0,J.i)(e)||e.message}}}async function ev({currency:e,billingAddress:t,shippingAddress:a,teamId:s,isCheckout:r}){if(!(0,j.SV)(t))try{await ei.j.validateCurrency({currency:e,billingAddress:t,shippingAddress:a,teamId:s,isCheckout:r})}catch(t){return{code:eo.Ux.CURRENCY_VALIDATION_ERROR,message:(0,f.t)("payments.errors.currency_mismatch_with_country_error",{selected_currency:e.toUpperCase()})}}}async function eT({vatGstId:e,country:t,region:a}){if(e)try{let s=await (0,er.u)(e,t,a);if(!s.data.meta.valid)return{code:eo.Ux.VAT_GST_ID_VERIFICATION_ERROR,message:(0,J.i)(s,(0,f.t)("tax.vat.vat_gst_validation_failed"))}}catch(e){return{code:eo.Ux.VAT_GST_ID_VERIFICATION_ERROR,message:e?.data?.message||(0,f.t)("tax.vat.vat_gst_validation_failed")}}}var ej=a(619369),eE=a(328403),eS=a(248893),eN=a(282566),eb=a(72071);let eC=el.t1.Query({fetch:async e=>(await es.g.getEligibleUpgradeData(e)).data.meta,stalenessPolicy:"never"});var ew=a(1093),eA=a(804890),eI=a(65181),ek=a(121142),eR=a(260251),eP=a(428785),eO=a(576028);async function eD({requestBody:e,teamId:t,userId:a,reduxDispatch:s,handleError:r,hasStreamlinedNewUserCheckoutExp:i}){try{let{data:{meta:{team:r}}}=await em.E.createTeamSubscription(t??"",e);r&&s(eI.gz({team:r,userInitiated:!1})),(0,d.L9)("Pro Team Purchased (GTM)"),s(ek.v({completed_pro_cart_flow:!0})),i||function({reduxDispatch:e,teamId:t,userId:a}){let s=new URLSearchParams(m.ZP.location.search);if(s.get("onCompleteRedirectFileKey")){let a=decodeURIComponent(s.get("onCompleteRedirectFileKey")),r=decodeURIComponent(s.get("onCompleteRedirectNodeId"));e(N.fv({...{view:"fullscreen",fileKey:a,nodeId:r},teamToMoveFileToOnNavigate:t,editorType:eP.TU.Design}))}else e(S.NO({workspace:{userId:a,teamId:t,orgId:null},view:{view:"allProjects",isProUpgrade:!0}}))}({reduxDispatch:s,teamId:r.id,userId:a})}catch(e){return r(e)}return null}async function eM({requestBody:e,user:t,upsellSource:a,handleError:s,reduxDispatch:r}){try{await eO.uU.createNewOrg(e),r(ek.v({completed_org_cart_flow:!0})),(0,d.L9)("Self Serve Org Purchased (GTM)"),(0,eR.iP)("Self Serve Org Purchased",{user:t},{org_name:e.org_name,upsellSource:a})}catch(e){return s(e)}return null}var eU=a(903132),eB=a(889835);function eL({currency:e,tier:t,renewalTerm:a,unit:s}){let r=(0,eB.yW)({billableProductKeys:eE.Hs,baseQuery:{currency:e,tier:t,renewalTerm:a,unit:s??a}}),[i]=(0,eU.Eh)(r),n=(0,eB.qJ)(i);if(null===n.data)throw Error("Price data is null");return n.data}let eV={eligibleTeamsByTeamId:{},eligibleUsersByUserId:{},currentUpgradingUserId:"",taxPercent:0,selectedUserSeatTypes:{},additionalSeatsCount:eE.Hs.dict(()=>0),selectedTeamIds:new Set,hasDifferentLegalName:!1,displayName:"",legalName:"",isLoading:!0,isSubmitting:!1,error:null};function ez({currency:e,renewalTerm:t,...a}){return{...eV,...a,currency:e??(0,ee.x_)(),renewalTerm:t??j.kT.YEAR}}function eG(e,t){switch(t.type){case Y.Y.UPDATE_DISPLAY_NAME:return{...e,displayName:t.payload.displayName};case Y.Y.UPDATE_LEGAL_NAME:return{...e,legalName:t.payload.legalName,error:e.error?.code===Y.d.INVALID_LEGAL_NAME?null:e.error};case Y.Y.SET_RENEWAL_TERM:return{...e,renewalTerm:t.payload.renewalTerm};case Y.Y.SET_CURRENCY:return{...e,currency:t.payload.currency};case Y.Y.SET_TAX_PERCENT:return{...e,taxPercent:t.payload.taxPercent};case Y.Y.SET_ERROR:return{...e,error:t.payload.error};case Y.Y.SET_IS_SUBMITTING:return{...e,isSubmitting:t.payload.isSubmitting};case Y.Y.SET_HAS_DIFFERENT_LEGAL_NAME:return{...e,legalName:"",hasDifferentLegalName:t.payload.hasDifferentLegalName};case Y.Y.INIT:return{...e,...t.payload,isLoading:!1};case Y.Y.UPDATE_ADDITIONAL_SEATS:return{...e,additionalSeatsCount:t.payload,error:q({additionalSeatsCount:t.payload,selectedUserSeatTypes:e.selectedUserSeatTypes,tier:e.tier})};case Y.Y.UPDATE_USER_SEAT_TYPE:{let{userId:a,seatType:s}=t.payload,r={...e.selectedUserSeatTypes,[a]:s};return{...e,selectedUserSeatTypes:r,error:q({additionalSeatsCount:e.additionalSeatsCount,selectedUserSeatTypes:r,tier:e.tier})}}case Y.Y.ON_TOGGLE_TEAM:{let{selectedTeamIds:a}=e,{toggledTeam:s}=t.payload,r=a.has(s);d.RQ.trackDefinedEvent("monetization_upgrades.checkout_change_team_selection",{teamId:s,selectedTeam:!r});let i=new Set(a);return r?i.delete(s):i.add(s),{...e,selectedTeamIds:i}}case Y.Y.UPDATE_STATE_FROM_NEW_TEAM_SELECTIONS:{let{eligibleTeamsByTeamId:t,selectedTeamIds:a,eligibleUsersByUserId:s,selectedUserSeatTypes:r,currentUpgradingUserId:i}=e;return{...e,selectedUserSeatTypes:(0,W.K)({eligibleTeamsByTeamId:t,selectedTeamIds:a,eligibleUsersByUserId:s,selectedUserSeatTypes:r,currentUpgradingUserId:i})}}case Y.Y.UPDATE_TO_DEFAULT_SEAT_SELECTIONS:{let{shouldUseSingleEditor:a}=t.payload;if(a)return{...e,selectedUserSeatTypes:{[e.currentUpgradingUserId]:ej.hH.EXPERT},additionalSeatsCount:eE.Hs.dict(()=>0)};{let{eligibleTeamsByTeamId:t,selectedTeamIds:a,eligibleUsersByUserId:s,currentUpgradingUserId:r}=e;return{...e,selectedUserSeatTypes:(0,W.K)({eligibleTeamsByTeamId:t,selectedTeamIds:a,eligibleUsersByUserId:s,selectedUserSeatTypes:{},currentUpgradingUserId:r})}}}default:return e}}var eH=a(542144),eF=a(71590),e$=a(462087),eY=a(529972),eZ=a(469271),eq=a(926941),eK=a(231229),eW=a(479852),eQ=a(10553),eX=a(95238),eJ=a(680441),e0=a(974014),e1=a(944365),e5=a(739640),e2=a(115908),e7=a(875533),e3=a(439592),e4=a(547845),e9=a(128517),e8=a(998324);function e6({title:e,children:t,dataTestId:a,noHeaderMargin:r}){return(0,s.jsxs)("div",{...{className:"x1a4ebq4 x9h44rk xmkeg23 x1y0btm7 x7z60cl xg7h5cd"},"data-testid":a,children:[e&&(0,s.jsx)("h2",{...{0:{className:"x12sbs06 xor4psk x1ncjjhx xaoa4km x2i041 x14terfx"},1:{className:"xor4psk x1ncjjhx xaoa4km x2i041 x14terfx xat24cr"}}[0|!!r],children:e}),t]})}var te=a(612661),tt=a(157589),ta=a(877208);function ts({isCartReviewSummary:e=!1,state:t}){let{countBySeatType:a,renewalTerm:r,currency:i,taxPercent:n,tier:l,applicablePriceData:d}=t,o=eL({currency:i,tier:l,renewalTerm:r,unit:j.kT.MONTH}),c=(0,$.LB)(d),m=(0,$.LB)(o),u=n||0,_=t=>(0,Q.lb)(t,i,{showCents:e}),p=(0,Q.zX)(a,c),h=(0,Q.AC)(a,c,u),x=(0,Q.tf)(a,c,u),g=_(p),y=_(h),v=_(x),T=r===j.kT.YEAR;return(0,s.jsx)(eq.Ui,{name:eX.V4.CART_REVIEW_PURCHASE_SUMMARY,properties:{tier:l,renewalTerm:r,countBySeatType:(0,K.C7)(a),currency:i,taxPercent:u,subtotal:p,taxTotal:h,total:x},enabled:e,children:(0,s.jsxs)("table",{...{className:"xh8yej3 x1mwwwfo x1gukg7c"},children:[(0,s.jsx)("tbody",{children:Object.keys(a).sort(ta.uE).map(t=>(0,s.jsx)(tr,{billableProductKey:t,count:a[t]||0,currency:i,isAnnual:T,isCartReviewSummary:e,paymentPrices:c,lineItemPrices:m},t))}),(0,s.jsxs)("tfoot",{children:[(0,s.jsx)("tr",{...{className:"x1vi7shn xp6roeo x3ajldb"},"data-testid":"purchase-summary-subtotal",children:(0,s.jsx)(ti,{label:(0,f.tx)("checkout.subtotal"),amount:tn({price:g,isCartReviewSummary:e,isAnnual:T})})}),e&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("tr",{...{className:"x1vi7shn xp6roeo x3ajldb"},"data-testid":"purchase-summary-taxes",children:(0,s.jsx)(ti,{label:(0,f.tx)("checkout.purchase_summary.tax"),subtext:(0,f.tx)("pro_cart.review.tax_percent",{taxPercent:u}),amount:tn({price:y,isAnnual:T,isCartReviewSummary:e})})}),(0,s.jsx)("tr",{...{className:"x1vi7shn xp6roeo x3ajldb"},"data-testid":"purchase-summary-total-due",children:(0,s.jsx)(ti,{label:(0,f.tx)("checkout.purchase_summary.total_due_today"),amount:tn({price:v,isAnnual:T,isCartReviewSummary:e})})})]})]})]})})}function tr({billableProductKey:e,count:t,currency:a,isAnnual:r,isCartReviewSummary:i,paymentPrices:l,lineItemPrices:d}){if(!(0,ej.Vl)(e))return(0,p.Jz)(n.k.MONETIZATION_UPGRADES,Error(`Received invalid billable product key ${e}`)),null;let o=l[e];if((0,te.Rw)(o))return(0,p.Jz)(n.k.BILLING_EXPERIENCE,Error(`Received null payment price on purchase summary for ${e}`)),null;let c=d[e];if((0,te.Rw)(c))return(0,p.Jz)(n.k.BILLING_EXPERIENCE,Error(`Received null line item price on purchase summary for ${e}`)),null;let m=new ee.Lr(a),u=m.formatMoney(o*t,{showCents:i}),_=(0,f.t)("checkout.price_per_month",{price:m.formatMoney(c)});return(0,s.jsx)("tr",{...{className:"x1vi7shn xp6roeo x3ajldb xso031l x1q0q8m5 xertd99"},"data-testid":`purchase-summary-${e}-row`,children:(0,s.jsx)(ti,{label:(0,f.tx)("checkout.purchase_summary.cart_line_item",{quantity:t,productLabel:(0,tt.Wq)(e)}),subtext:(0,f.tx)(r?"checkout.rewrite.product_cost_breakdown_annually":"checkout.rewrite.product_cost_breakdown_monthly",{price:_}),amount:tn({price:u,isCartReviewSummary:i,isAnnual:r})})})}function ti({label:e,subtext:t,amount:a}){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("td",{...{className:"x1uil0o3"},children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{children:e}),t&&(0,s.jsx)("p",{className:"x1n0bwc9",children:t})]})}),(0,s.jsx)("td",{...{className:"x1hr2gdg x1uil0o3"},children:(0,s.jsx)("p",{children:a})})]})}function tn({price:e,isAnnual:t,isCartReviewSummary:a}){var s;return a?e:(s=e,t?(0,f.t)("checkout.price_per_year",{price:s}):(0,f.t)("checkout.price_per_month",{price:s}))}function tl({state:e,dispatch:t,buttonText:a,canSwitchRenewalTerm:r,onClickNext:l,nextStep:d,onContactSalesClick:o,trackingProperties:c,shouldRenderCartData:m}){let{tier:u,countBySeatType:_,renewalTerm:p,currency:h,cartSelectionError:x,isSubmitting:g}=e,y=(0,ee.EB)(),v=(0,e9.LB)(),E=(0,b.A6)(),S=(0,i.v9)(e=>"teamUpgrade"===E.view?(0,e8.np)(e,{...E,paymentStep:d}):"orgSelfServe"===E.view?(0,e8.np)(e,{...E,step:d}):void(0,X.P2)(E.view));return(0,s.jsxs)(e6,{title:u===eS.K0.PRO?(0,f.t)("checkout.your_professional_plan"):(0,f.t)("checkout.your_organization_plan"),dataTestId:"cart-sidebar",noHeaderMargin:!0,children:[(0,s.jsx)("div",{children:m&&_?(0,s.jsxs)(s.Fragment,{children:[y&&(0,s.jsxs)("div",{...{className:"x78zum5 x1qughib x6s0dn4 xso031l x1q0q8m5 xertd99 x1vi7shn xp6roeo"},"data-testid":"cart-sidebar-currency-switcher",children:[(0,s.jsx)("p",{...{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l"},children:(0,f.tx)("checkout.sidebar.currency_label")}),(0,s.jsx)(e4.w,{currency:h,dropdownShown:v,supportedCurrencies:(0,ee._M)(),changeCurrency:e=>{t({type:Y.Y.SET_CURRENCY,payload:{currency:e}})},shortFormDisplay:!0,paddingOverride:0})]}),r&&(0,s.jsx)("fieldset",{...{className:"x1vi7shn xp6roeo"},"data-testid":"cart-sidebar-billing-interval",children:(0,s.jsxs)(eJ.f,{legend:(0,s.jsx)(e0.e,{children:(0,f.tx)("checkout.sidebar.switch_your_billing_interval")}),value:p,onChange:e=>{t({type:Y.Y.SET_RENEWAL_TERM,payload:{renewalTerm:e}})},children:[(0,s.jsx)(eJ.W,{value:j.kT.YEAR,label:(0,s.jsxs)(e1._,{...{className:"x78zum5 x6s0dn4 xg2d0mh"},children:[(0,f.tx)("checkout.sidebar.annual")," ",(0,s.jsx)(e5.C,{variant:"successOutline",size:"md",children:(0,f.tx)("checkout.sidebar.save_up_to_20")})]})}),(0,s.jsx)(eJ.W,{value:j.kT.MONTH,label:(0,s.jsx)(e1._,{children:(0,f.tx)("checkout.sidebar.monthly")})})]})}),(0,s.jsxs)("div",{children:[(0,s.jsx)(ts,{isCartReviewSummary:!1,state:e}),(0,s.jsx)("p",{...{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x1rdy4ex xp6roeo x3vvef7"},children:(0,f.tx)("checkout.rewrite.tax_disclaimer_revised")})]})]}):(0,s.jsx)("p",{...{className:"x1n0bwc9 x1hk0uxs"},children:(0,f.tx)("checkout.sidebar.cannot_calculate_subtotal")})}),(0,s.jsxs)("div",{...{className:"x7hzu26"},children:[x&&(0,s.jsx)("div",{...{className:"x1ef8nbk"},children:(0,s.jsx)(e2.mQ,{variant:"warn",children:(0,s.jsx)(e7.v,{children:x.message})})}),a&&(0,s.jsx)(k.k,{onClick:e=>{e.preventDefault(),l()},disabled:g,href:S,htmlAttributes:{"data-testid":"cart-sidebar-button"},trackingProperties:{trackingDescriptor:T.y.CART_SIDEBAR,...c},trackingOptions:{teamName:n.k.MONETIZATION_UPGRADES,addToRUM:!0},children:g?(0,s.jsx)("div",{...{className:"x78zum5 xl56j7k x6s0dn4 x1g5ndwp"},"data-testid":"cart-sidebar-loading",children:(0,s.jsx)(I.T,{})}):a}),u===eS.K0.ORG&&(0,s.jsxs)("div",{...{className:"x7hzu26 x78zum5 xg2d0mh"},"data-testid":"cart-sidebar-footer",children:[(0,s.jsx)(e3.h,{}),(0,s.jsx)("p",{children:(0,f.tx)("org_self_serve.purchase_summary.have_questions",{contactSales:(0,s.jsx)("button",{type:"button",...{className:"x1quhyk7"},onClick:o,children:(0,f.tx)("org_self_serve.purchase_summary.contact_our_sales_team")})})})]})]})]})}var td=a(739842),to=a(486020),tc=a(545449),tm=a(589937),tu=a(259946),t_=a(240473),tp=a(661193),th=a(491420),tx=a(75086),tg=a(721926),ty=a(220685);function tf({createPaymentElement:e,unmountPaymentElement:t,paymentElementEventHandlers:a,paymentFlow:i,state:n,dispatch:l,canUpdateVatIds:o,shouldRenderErrors:c=!0}){let[m,u]=(0,r.useState)(!1),{vatGstId:_,regionalVatGstId:p,nameOnPaymentMethod:h,hasDifferentShippingAddress:x,errors:g,stripeError:y,paymentMethodType:v,billingAddress:T,shippingAddressInput:j}=n,E=i===ep.E.PRO_UPGRADE||i===ep.E.ORG_UPGRADE,S={paymentFlow:i,paymentMethodType:v,isCampfireCart:!0},N=[...g,y].filter(e=>!!e).map(e=>e.message);return(0,tc.O)(()=>((async function(){await e({ready:e=>{u(!0),a?.ready?.(e)},change:a?.change})})(),()=>{t()})),(0,r.useEffect)(()=>{y&&d.RQ.trackDefinedEvent("monetization_upgrades.checkout_payment_error",{...S,message:y.message})},[y]),y?.code===ep.uE.UNINITIALIZED_STRIPE_ELEMENTS_ERROR?(0,s.jsxs)("div",{...{className:"x78zum5 xdt5ytf x6s0dn4 xl56j7k x2b8uid"},children:[(0,s.jsx)(t_.n,{svg:ty.Z,...{className:"x1w6u5r6 x1fz3pi1 xqql8cr"}}),(0,s.jsx)("p",{...{className:"x1874spd x1t2kcbv x1n0bwc9 x1evy7pa"},children:y.message})]}):(0,s.jsxs)("div",{...{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l"},"data-testid":"stripe-payment-form",children:[c&&N.length>0&&(0,s.jsx)("div",{...{className:"x1buy44e"},children:N.map((e,t)=>(0,s.jsx)("div",{...{className:"x611mgq"},children:(0,s.jsx)(tm.f,{color:tm.Z.ERROR,"aria-live":"polite",text:e})},t))}),(0,s.jsx)("div",{id:eh}),m?(0,s.jsxs)("div",{style:th.sx.add({marginTop:"7px"}).if(v&&ea.B6.includes(v),{marginTop:"15px"}).$,children:[(0,s.jsx)(td.hI,{value:h,htmlName:"name_on_card",label:(0,f.t)("pro_cart.payment.name_on_payment_method_label"),placeholder:(0,f.t)("pro_cart.payment.name_on_payment_method"),onChange:e=>{l({type:eo.dN.UPDATE_NAME_ON_PAYMENT_METHOD,payload:e.target.value.trim()})},autoCompleteName:"name on payment method",trackingFieldName:"Name On Payment Method",dataTestId:"name-on-payment-method"}),(0,s.jsx)(tx.k,{address:T,updateAddress:e=>{l({type:eo.dN.UPDATE_BILLING_ADDRESS,payload:e})},isBillingAddress:!0,canSeeBillingAddressExp:!0}),o&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(tg.Z,{onChange:e=>l({type:eo.dN.UPDATE_VAT_GST_ID,payload:e}),country:T.country,vatId:_,isCommunityCheckout:i===ep.E.COMMUNITY_CHECKOUT}),(0,s.jsx)(tg.Z,{onChange:e=>l({type:eo.dN.UPDATE_REGIONAL_VAT_GST_ID,payload:e}),country:T.country,region:T.region,vatId:p,isCommunityCheckout:i===ep.E.COMMUNITY_CHECKOUT,variant:"regional"})]}),v===ea.Y7.SEPA&&(0,s.jsx)("p",{...{className:"x1n0bwc9 x1j6dyjg x1d3mw78 xqp8s7e"},children:(0,f.tx)("pro_cart.payment.sepa_direct_debit_mandate")}),E&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{...{className:"x78zum5 x6s0dn4 xpgiz1h x13q985h x1u94j8j"},style:th.sx.if(x,{marginBottom:"24px"}).$,"data-testid":"stripe-payment-shipping-address-checkbox",children:(0,s.jsx)(to.X,{label:(0,s.jsx)(e1._,{children:(0,s.jsx)("span",{className:tp.B.font13.$,children:(0,f.tx)("checkout.i_have_a_different_shipping_address")})}),checked:x,onChange:()=>{l({type:eo.dN.TOGGLE_DIFFERENT_SHIPPING_ADDRESS})}})})}),x&&(0,s.jsx)(tx.k,{address:j,updateAddress:e=>{l({type:eo.dN.UPDATE_SHIPPING_ADDRESS,payload:e})},canSeeBillingAddressExp:!0})]}):(0,s.jsx)("div",{...{className:"x78zum5 xaehx54 x6s0dn4 xl56j7k"},children:(0,s.jsx)(tu.TK,{})})]})}var tv=a(335489);let tT=(0,eq.v8)(e=>{let{dataTestId:t,children:a,...r}=e;return(0,s.jsx)("select",{...r,"data-testid":t,children:a})});function tj({selectedPaymentMethod:e,setSelectedPaymentMethod:t,paymentMethods:a}){return(0,s.jsx)("div",{...{className:"x78zum5 xdt5ytf xl56j7k x1n2onr6 xmkeg23 x1y0btm7 x7z60cl xgqun6i x1yjdb4r x9f619 x192jxwq xh8yej3 xn3w4p2 x1gnnqk1 x11ugzjr"},"data-testid":"payment-method-dropdown",children:(0,s.jsxs)("div",{...{className:"x78zum5 x1n2onr6 xh8yej3 x6s0dn4"},children:[(0,s.jsx)(tT,{...{className:"x1akne3o xf3scy2 x1yjdb4r x5kalc8 x1vy7i8i x1mvmbdv xjyslct x1iyjqo2 x1se2ifz xfn42iu xng3xce x1r7ld26 x1a2a7pz x1x7eeca"},name:"selected_saved_payment_method",dataTestId:"payment-method-select",trackingFieldName:"SelectExistingPaymentMethod",trackingPopulationLevel:e?.id?eR.r4.POPULATED_COMPLETE:eR.r4.NOT_POPULATED,onChange:e=>{let s=e.target.value,r=a.find(e=>e.id===s);r&&t(r)},value:e?.id,children:a.map(e=>(0,s.jsx)(tE,{paymentMethod:e},e.id))}),(0,s.jsx)(t_.n,{...{className:"x10l6tqk x1f6937p x47corl x1epfdc x1ja3g5x"},svg:tv.Z})]})})}function tE({paymentMethod:e}){return(0,r.createElement)("option",{...{className:"x78zum5 x1qughib x1nfngrj"},value:e.id,key:e.id},(0,s.jsx)("span",{...{className:"xemv814"},children:e.payment_method}),e.billing_address&&(0,s.jsx)("span",{...{className:"x1n0bwc9 xemv814"},children:` - ${(0,$.D6)(e.billing_address)}`}))}function tS(e){let{isUsingSavedPaymentMethod:t,savedPaymentMethod:a,savedPaymentMethods:r,errors:i,stripeError:n}=e.state,d=(0,l.BZ)().cart_rewrite_full_send_saved_payment,o=[n,...i].filter(e=>!!e);return(0,s.jsxs)(s.Fragment,{children:[o.length>0&&(0,s.jsx)("div",{...{className:"x1buy44e"},children:o.map((e,t)=>(0,s.jsx)("div",{...{className:"x611mgq"},children:(0,s.jsx)(e2.eB,{variant:"danger","data-testid":"inline-banner",children:(0,s.jsx)(e7.v,{children:e.message})})},t))}),d&&r.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(to.X,{label:(0,s.jsx)(e1._,{children:(0,s.jsx)("span",{...{className:"xemv814"},children:(0,f.t)("checkout.use_saved_payment_method")})}),onChange:()=>{e.dispatch({type:eo.dN.TOGGLE_USE_SAVED_PAYMENT_METHOD})},checked:t}),(0,s.jsx)("div",{className:"x19ueytk"}),t&&(0,s.jsx)(tj,{selectedPaymentMethod:a,setSelectedPaymentMethod:t=>{e.dispatch({type:eo.dN.SET_SAVED_PAYMENT_METHOD,payload:t})},paymentMethods:r})]}),(0,s.jsx)("div",{...{0:{},1:{className:"xqtp20y xb3r6kr xg01cxk"}}[0|!!(d&&t)],children:(0,s.jsx)(tf,{...e,shouldRenderErrors:!1})})]})}function tN({state:e,dispatch:t,createPaymentElement:a,unmountPaymentElement:i}){let{tier:n,hasDifferentLegalName:l,legalName:d}=e,[o,c]=(0,r.useState)(!1),m=(0,r.useMemo)(()=>({...e,errors:e.paymentFormErrors,stripeError:e.stripeError}),[e]);return(0,s.jsxs)(e6,{title:(0,f.t)("checkout.payment_details"),children:[(0,s.jsx)("div",{...{className:"xdpxx8g"},children:(0,s.jsx)(tS,{canUpdateVatIds:!0,createPaymentElement:a,dispatch:t,paymentFlow:n===eS.K0.ORG?ep.E.ORG_UPGRADE:ep.E.PRO_UPGRADE,state:m,unmountPaymentElement:i,paymentElementEventHandlers:{ready:()=>c(!0)}})}),o&&n===eS.K0.PRO&&(0,s.jsxs)("div",{...{className:"xpgiz1h xemv814"},children:[(0,s.jsx)(to.X,{label:(0,s.jsx)(e1._,{children:(0,s.jsx)("span",{...{className:"xemv814"},children:(0,f.tx)("checkout.i_have_a_different_legal_name")})}),checked:l,onChange:()=>{t({type:Y.Y.SET_HAS_DIFFERENT_LEGAL_NAME,payload:{hasDifferentLegalName:!l}})}}),(0,s.jsx)("div",{className:"x19ueytk"}),l&&(0,s.jsx)(td.hI,{value:d||"",htmlName:"legal_company_name",label:(0,f.t)("pro_cart.payment.legal_company_name_label"),placeholder:(0,f.t)("pro_cart.payment.legal_company_name_placeholder"),onChange:e=>{t({type:Y.Y.UPDATE_LEGAL_NAME,payload:{legalName:e.target.value.trim()}})},autoCompleteName:"legal company name",trackingFieldName:"Legal Company Name",dataTestId:"legal-company-name"})]})]})}function tb({state:e,dispatch:t,createPaymentElement:a,unmountPaymentElement:r}){let{tier:i,legalName:n,displayName:l}=e;return(0,s.jsxs)("div",{children:[i===eS.K0.ORG&&(0,s.jsx)("div",{...{className:"xpezlj7"},children:(0,s.jsx)(e6,{title:(0,f.t)("checkout.organization_details"),children:(0,s.jsxs)("div",{...{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l"},children:[(0,s.jsx)(td.hI,{htmlName:"legal_org_name",label:(0,f.t)("org_self_serve.details_step.legal_company_name"),value:n,onChange:e=>{let a=e.target.value;t({type:Y.Y.UPDATE_LEGAL_NAME,payload:{legalName:a.trim()}})}}),(0,s.jsx)(td.hI,{noMarginBottom:!0,htmlName:"org_name",label:(0,f.t)("org_self_serve.details_step.company_display_name"),placeholder:(0,f.t)("org_self_serve.details_step.company_display_name__different_from_company_name_sub_text"),value:l,onChange:e=>{let a=e.target.value;t({type:Y.Y.UPDATE_DISPLAY_NAME,payload:{displayName:a.trim()}})}})]})})}),(0,s.jsx)(tN,{state:e,dispatch:t,createPaymentElement:a,unmountPaymentElement:r})]})}var tC=a(810973),tw=a(359721);let tA=(0,s.jsx)(v.Cr,{newTab:!0,trusted:!0,href:"/pricing",children:(0,f.tx)("checkout.monthly_price")});function tI({state:e,onSubmit:t}){let{renewalTerm:a,isSubmitting:i,tier:n}=e,[l,d]=r.useState(!1),o=(0,s.jsx)("div",{...{className:"x78zum5 xl56j7k x6s0dn4 x1g5ndwp"},"data-testid":"cart-review-submit-loading",children:(0,s.jsx)(I.T,{})});return(0,s.jsxs)(e6,{title:n===eS.K0.ORG?(0,f.t)("checkout.upgrade_to_an_organization_plan"):(0,f.t)("checkout.upgrade_to_a_professional_plan"),dataTestId:"cart-review",children:[(0,s.jsxs)("div",{...{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l xpgiz1h"},children:[(0,s.jsx)(ts,{state:e,isCartReviewSummary:!0}),(0,s.jsx)("div",{"data-testid":"purchase-summary-plan-renewal",children:(0,s.jsxs)("p",{...{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l x78zum5"},children:[(0,s.jsx)(tw.J,{className:"xrxf7wd"}),(0,s.jsx)(tO,{tier:n,isAnnual:a===j.kT.YEAR})]})})]}),(0,s.jsx)(tk,{tier:n,isAnnual:a===j.kT.YEAR}),(0,s.jsx)("div",{...{className:"x1bz8wuu x1hk0uxs x18wv8x9"},"data-testid":"cart-review-terms-checkbox",children:(0,s.jsx)(to.X,{label:(0,s.jsx)(e1._,{children:(0,s.jsx)("span",{children:n===eS.K0.ORG?(0,s.jsx)(tR,{}):(0,s.jsx)(tP,{})})}),checked:l,onChange:d})}),(0,s.jsx)(k.$,{fullWidth:!0,onClick:t,disabled:i||!l,htmlAttributes:{"data-testid":"cart-review-submit-button"},trackingProperties:{trackingDescriptor:T.y.COMPLETE_PURCHASE,...{}},children:i?o:(0,f.tx)("checkout.complete_purchase")})]})}function tk({tier:e,isAnnual:t}){let a=e===eS.K0.ORG?"https://help.figma.com/hc/articles/360040328293-Manage-billing-on-the-Organization-and-Enterprise-plans":"https://help.figma.com/hc/articles/360041061034-Manage-billing-on-the-Professional-plan";return(0,s.jsx)("div",{...{className:"x1bz8wuu"},"data-testid":"cart-review-upgrade-information-banner",children:(0,s.jsxs)("div",{...{className:"x1vi7shn xp6roeo x1nz7w5u xyx8554 x1v8gsql x19y5rnk x78zum5 xdt5ytf xg2d0mh"},children:[(0,s.jsx)("p",{...{className:"xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh"},children:(0,f.tx)("checkout.how_do_new_seat_additions_and_upgrades_work")}),(0,s.jsx)("p",{children:function(e,t){switch(e){case eS.K0.ORG:return(0,f.tx)("checkout.cart_review_upgrade_info_org");case eS.K0.PRO:return t?(0,f.tx)("checkout.cart_review_upgrade_info_pro_annual",{monthlyPriceLink:tA}):(0,f.tx)("checkout.cart_review_upgrade_info_pro_monthly");default:(0,X.P2)(e)}}(e,t)}),(0,s.jsx)("div",{...{className:"xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh xlup9mm"},children:(0,s.jsx)(v.Cr,{newTab:!0,href:a,trusted:!0,children:(0,f.tx)("checkout.learn_more")})})]})})}function tR(){return(0,f.tx)("org_self_serve.review_step.i_agree_to_msa_and_renewal_links",{msaLink:(0,s.jsx)(tC.r,{href:"/ssa",newTab:!0,trusted:!0,children:(0,f.tx)("org_self_serve.review_step.software_services_agreement")}),renewalLink:(0,s.jsx)(tC.r,{href:(0,f.Re)("/renewal-and-cancellation"),newTab:!0,trusted:!0,children:(0,f.tx)("org_self_serve.review_step.renewal_and_cancellation_terms")})})}function tP(){return(0,f.tx)("pro_cart.review.agree_with_privacy_and_cancellation",{termsOfServiceLink:(0,s.jsx)(v.Cr,{href:"/tos",newTab:!0,trusted:!0,children:(0,f.tx)("pro_cart.review.tos")}),privacyLink:(0,s.jsx)(v.Cr,{href:"/privacy",newTab:!0,trusted:!0,children:(0,f.tx)("pro_cart.review.privacy_policy")}),cancellationLink:(0,s.jsx)(v.Cr,{href:"/pricing-faq/#how-do-i-cancel-my-paid-plan",newTab:!0,trusted:!0,children:(0,f.tx)("pro_cart.review.cancellation_policy")})})}function tO({tier:e,isAnnual:t}){switch(e){case eS.K0.ORG:return(0,f.tx)("checkout.purchase_summary.plan_renewal_org");case eS.K0.PRO:return t?(0,f.tx)("checkout.purchase_summary.plan_renewal_pro_annual"):(0,f.tx)("checkout.purchase_summary.plan_renewal_pro_monthly");default:(0,X.P2)(e)}}function tD({navigateToEditDetails:e,state:t}){let a=(0,M.ZP)().user_data,{displayName:r,legalName:i,tier:n,billingAddress:l,hasDifferentShippingAddress:d,shippingAddressInput:o}=t;return(0,s.jsxs)(e6,{title:(0,f.t)("checkout.cart_plan_details.subtitle"),dataTestId:"cart-plan-details",children:[(0,s.jsx)(tM,{header:n===eS.K0.ORG?(0,f.t)("checkout.cart_plan_details.organization_name"):(0,f.t)("checkout.cart_plan_details.team_name"),value:r||i,dataTestId:"cart-plan-details-plan-name"}),i&&(0,s.jsx)(tM,{header:(0,f.t)("checkout.cart_plan_details.legal_name"),value:i,dataTestId:"cart-plan-details-legal-name"}),(0,s.jsx)(tM,{header:(0,f.t)("checkout.cart_plan_details.invoice_email"),value:a?.email??"",dataTestId:"cart-plan-details-invoice-email"}),l&&(0,s.jsx)(tM,{header:(0,f.t)("checkout.cart_plan_details.billing_address"),value:(0,$.D6)(l),dataTestId:"cart-plan-details-billing-address"}),d&&!(0,j.SV)(o)&&(0,s.jsx)(tM,{header:(0,f.t)("checkout.cart_plan_details.shipping_address"),value:(0,$.D6)(o),dataTestId:"cart-plan-details-shipping-address"}),(0,s.jsx)("div",{...{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l x1w4f5ud x1vamu9a"},children:(0,s.jsx)(y.Ok,{onClick:e,trackingProperties:{trackingDescriptor:T.y.EDIT_PLAN_DETAILS},"data-testid":"cart-plan-details-edit-details",children:(0,f.tx)("checkout.cart_plan_details.edit_details")})})]})}function tM({header:e,value:t,dataTestId:a}){return(0,s.jsxs)("div",{...{className:"x78zum5 xdt5ytf xuzqwsy xpezlj7 xso031l x1q0q8m5 xertd99 x1cy8zhl"},"data-testid":a,children:[(0,s.jsx)("h4",{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l x1n0bwc9 x1ihwiht",children:e}),(0,s.jsx)("p",{className:"xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l x1akne3o x13faqbe",children:t})]})}function tU(e){let t=e.state.is3ds;return(0,s.jsxs)(s.Fragment,{children:[t&&(0,s.jsx)("div",{...{className:"x8x9d4c xack27t xdpxx8g x4vex6e"},children:(0,s.jsx)(e2.eB,{variant:"brand",children:(0,s.jsx)(e7.v,{children:(0,f.t)("pro_cart.review.extra_validation")})})}),(0,s.jsxs)("div",{...{className:"xrvj5dj xe1a36 xvossa"},"data-testid":"cart-review-step",children:[(0,s.jsx)(tD,{...e}),(0,s.jsx)(tI,{...e})]})]})}var tB=a(527986),tL=a(410802),tV=a(5929),tz=a(927385),tG=a(715279),tH=a(174349),tF=a(558089),t$=a(85122),tY=a(738529),tZ=a(537789),tq=a(465237),tK=a(161139),tW=a(358852),tQ=a(5794);function tX({state:e,teamId:t,shouldShowTeamColumn:a,dispatch:i}){let{tier:n,selectedUserSeatTypes:l,additionalSeatsCount:o,eligibleUsersByUserId:c,eligibleTeamsByTeamId:m,selectedTeamIds:u,currentUpgradingUserId:_}=e,p=(0,tZ._)({eligibleUsersByUserId:c,eligibleTeamsByTeamId:m,selectedTeamIds:Array.from(u),currentUpgradingUserId:_}),h=(0,r.useRef)(null),x=(0,tY.a)({tableContainerRef:h}),[y,v]=r.useState(!1),T=r.useMemo(()=>{let e=[...p];return(0,tB.po)(e,e=>e.handle,{isDescending:y}),e},[p,y]),j=(0,$.s6)((0,$.UL)(l)),E=(0,$.s6)(o),S=(0,t$.t)({currency:e.currency,tier:e.tier,renewalTerm:e.renewalTerm,showCents:!1}),[N]=(0,eU.Eh)(S);if(null===N.data)throw Error("No seat types data");let b=N.data;return(0,s.jsx)("div",{"data-testid":"select-seats-step",children:(0,s.jsxs)("div",{...{className:"x1yjdb4r x1mxnbhz xmkeg23 x1y0btm7 x7z60cl"},ref:h,children:[(0,s.jsx)(tF.l,{maxHeight:x,className:g.AK(t0.scrollContainer),hideScrollbar:!0,horizontalScrollingDisabled:!0,children:(0,s.jsxs)("table",{...{className:"xh8yej3 x140o2bo"},children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsxs)("th",{...{className:"x1uncgzr x1gcgh60 xctkrei xdpxx8g xxymvpz x1xvsi7n xdmjnt8 x7wzq59 xylkp1l x8phwbh x1vjfegm x1yjdb4r x19j9cuy"},children:[(0,f.tx)("checkout.select_seats_table.user_column")," ",(0,s.jsx)("div",{...{className:"x1rg5ohu"},"data-testid":"select-seats-table-sort-users-button",children:(0,s.jsx)(tL.h,{onClick:()=>v(e=>!e),"aria-label":(0,f.t)("checkout.select_seats_table.sort"),children:y?(0,s.jsx)(tz.Q,{"data-testid":"select-seats-table-icon-arrow-up"}):(0,s.jsx)(tG.A,{"data-testid":"select-seats-table-icon-arrow-down"})})})]}),(0,s.jsx)("th",{...{className:"x19zpy19 xf7z5ut xdpxx8g xxymvpz x1gcgh60 x7wzq59 xylkp1l x8phwbh x1vjfegm x1yjdb4r"},children:(0,f.tx)("checkout.select_seats_table.seat_column")}),a&&(0,s.jsx)("th",{...{className:"xj35x94 xx99whi xdpxx8g xxymvpz xb3r6kr xuxw1ft xlyipyv x7wzq59 xylkp1l x8phwbh x1vjfegm x1yjdb4r"},children:(0,f.tx)("checkout.select_seats_table.team_column")}),(0,s.jsx)("th",{...{className:"x8rdmch x1jwbysl xdpxx8g xxymvpz x7wzq59 xylkp1l x8phwbh x1vjfegm x1yjdb4r x1vp1w89 x1akne3o"},children:(0,f.tx)("checkout.select_seats_table.description_column")})]})}),(0,s.jsx)("tbody",{...{className:"x1yjdb4r x499qwo"},children:T.map(e=>(0,s.jsx)(tJ,{user:e,seatTypes:b,selectedSeatType:l[e.id],changeSeatType:a=>{var s;d.RQ.trackDefinedEvent("monetization_upgrades.user_seat_selection_changed_in_checkout",{targetUserId:e.id,previousSeatType:l[e.id],newSeatType:a,tier:n,teamId:t??void 0}),s=e.id,i({type:Y.Y.UPDATE_USER_SEAT_TYPE,payload:{userId:s,seatType:a}})},tier:n,teamId:t??void 0,shouldShowTeamColumn:a},e.id))})]})}),(0,s.jsxs)("div",{...{className:"x1xvsi7n xdmjnt8 x8rdmch xyx8554 x178xt8z x13fuv20 x16ufvko x78zum5 x6s0dn4 x1qughib"},children:[(0,s.jsx)(tq.X,{tier:n,seatTypes:b,additionalSeatCounts:o,setAdditionalSeats:e=>{i({type:Y.Y.UPDATE_ADDITIONAL_SEATS,payload:e})}}),(0,s.jsx)("p",{children:(0,f.tx)("checkout.select_seats_table.team_members_count",{assignedSeatsText:(0,f.tx)("checkout.select_seats_table.assigned_seats",{count:j}),unassignedSeatsText:(0,f.tx)("checkout.select_seats_table.unassigned_seats",{count:E})})})]})]})})}function tJ({user:e,seatTypes:t,selectedSeatType:a,changeSeatType:r,tier:n,shouldShowTeamColumn:l,teamId:d}){let o=(0,i.I0)(),c=(0,C.dO)(),m=e.id===c;return(0,te.Rw)(t[a])?null:(0,s.jsxs)("tr",{"data-testid":`select_seat_row--${e.id}`,children:[(0,s.jsx)("td",{...{className:"x1uncgzr x1gcgh60 xctkrei xdpxx8g xxymvpz"},"data-testid":"select_seats_table_user_cell",children:(0,s.jsx)(tQ.oJ,{entity:e,includeUserEmailAddress:!0,size:24,showIsMe:m})}),(0,s.jsx)("td",{...{className:"x19zpy19 xf7z5ut xdpxx8g xxymvpz"},children:(0,s.jsx)(tV.Hw,{variant:"ghost","aria-label":(0,f.t)("checkout.edit_user_seat_name",{name:e.handle}),onClick:()=>{o((0,eZ.K4)({type:tK.z,data:{user:e,seatTypes:t,selectedSeatType:a,setSelectedSeatType:r,tier:n,teamId:d}}))},children:(0,s.jsxs)("span",{...{className:"x78zum5 x6s0dn4 x1qughib"},children:[(0,s.jsxs)("span",{...{className:"x78zum5 x6s0dn4 x8vt714"},children:[(0,s.jsx)(tW.UV,{type:a,size:"24"}),t[a].displayName]}),(0,s.jsx)(tH.a,{})]})})}),l&&(0,s.jsx)("td",{...{className:"xj35x94 xx99whi xdpxx8g xxymvpz xb3r6kr xuxw1ft xlyipyv"},children:e.teams}),(0,s.jsx)("td",{...{className:"x8rdmch x1jwbysl xdpxx8g xxymvpz x1n0bwc9"},children:t[a].description})]})}let t0={scrollContainer:{kIxVMA:"x19j9cuy",ksF3WI:"x1vp1w89",krdFHd:null,kfmiAY:null,$$css:!0}};var t1=a(6390),t5=a(156802),t2=a(659461);function t7({dispatch:e,state:t}){let{selectedTeamIds:a,eligibleTeamsByTeamId:r}=t,i=(0,$.zS)(Object.values(r));return(0,s.jsx)("div",{"data-testid":"org-select-teams-step",children:(0,s.jsx)("div",{...{className:"xrvj5dj x1i71x30 xnby9oq x1xvdgkk"},children:i.map(t=>(0,s.jsx)(t3,{team:t,isSelected:a.has(t.id),onToggle:t=>{e({type:Y.Y.ON_TOGGLE_TEAM,payload:{toggledTeam:t}})}},t.id))})})}function t3({team:e,isSelected:t,onToggle:a}){return(0,s.jsxs)("div",{"data-testid":`select_team--${e.id}`,children:[(0,s.jsx)(t1.Z,{className:w.j,checked:t,onChange:()=>a(e.id),id:`select-team-${e.id}`,disabled:"new-team"===e.id,"aria-disabled":"new-team"===e.id}),(0,s.jsxs)("label",{htmlFor:`select-team-${e.id}`,...{0:{className:"x87ps6o x1ypdohk xrvj5dj x146aooz x1pulhmw x6s0dn4 xmkeg23 x1y0btm7 x19y5rnk x1d5d5yt xjtplnu x7z60cl x1yjdb4r"},1:{className:"x87ps6o x1ypdohk xrvj5dj x146aooz x1pulhmw x6s0dn4 xmkeg23 x1y0btm7 x19y5rnk x1d5d5yt xjtplnu x1va2ikv xpjdn5u"}}[0|!!t],children:[(0,s.jsx)(t2.Ir,{team:e}),(0,s.jsxs)("span",{...{className:"x193iq5w"},children:[(0,s.jsx)("span",{...{className:"x1lliihq x193iq5w xuzfeq1 x8yk33q x1e00guj x18zpg43 x22v61l x1akne3o xb3r6kr xlyipyv xuxw1ft"},children:e.name}),(0,s.jsx)("span",{...{className:"x1lliihq x4oah1p xewu7z0 x2ua9qx x1dnis8n xawads1 x1n0bwc9 xb3r6kr xlyipyv xuxw1ft"},children:(0,f.tx)("checkout.org_select_teams_member_count",{count:e.numMembers})})]}),t&&(0,s.jsx)("div",{...{className:"xzdfcct x8x9d4c"},children:(0,s.jsx)(t5.G,{})})]})]},e.id)}function t4({contactSales:e,step:t,state:a,performTierUpgrade:r,setStep:i,teamId:n,dispatch:l,createPaymentElement:d,unmountPaymentElement:o,onNext:c,getNextStep:m}){let{tier:_}=a,{teamName:p}=(0,u.mU)((0,eQ.SHG)({teamId:n})).transform(({team:e})=>({teamName:e?.name??""})).unwrapOr({teamName:""});return(0,s.jsxs)("div",{...{className:"xg01n1d x4gyc16 x10im51j xvueqy4 x87ps6o"},children:[(0,s.jsx)(L,{step:t,teamName:p}),t===j.lQ.REVIEW?(0,s.jsx)(tU,{state:a,onSubmit:r,navigateToEditDetails:()=>i(j.lQ.PAYMENT_AND_ADDRESS)}):(0,s.jsxs)("div",{...{className:"xrvj5dj x3uu4nb x1fwvi78"},children:[t===j.lQ.SELECT_TEAMS&&(0,s.jsx)(t7,{state:a,dispatch:l}),t===j.lQ.SELECT_SEATS&&(0,s.jsx)(tX,{state:a,teamId:n,dispatch:l,shouldShowTeamColumn:_===eS.K0.ORG}),t===j.lQ.PAYMENT_AND_ADDRESS&&(0,s.jsx)(tb,{state:a,dispatch:l,createPaymentElement:d,unmountPaymentElement:o}),(0,s.jsx)(tl,{buttonText:E[t]?.buttonText??null,state:a,dispatch:l,onClickNext:c,nextStep:m(),canSwitchRenewalTerm:_===eS.K0.PRO,onContactSalesClick:e,shouldRenderCartData:t!==j.lQ.SELECT_TEAMS})]})]})}var t9=a(205433),t8=a(260736);function t6({teamId:e,dispatch:t,state:a}){let{currency:l,currentUpgradingUserId:o,eligibleUsersByUserId:c,renewalTerm:m,selectedUserSeatTypes:u,tier:_}=a,h=r.useRef(null),x=(0,t$.t)({currency:l,tier:_,renewalTerm:m,showCents:!1}),g=(0,i.I0)(),[v]=(0,t9.j)([x]);if(null===v)throw(0,p.Jz)(n.k.MONETIZATION_UPGRADES,Error("Invalid state: No seat types data"),{extra:{currency:l,tier:_,renewalTerm:m,showCents:!1,seatTypesQuery:x,seatTypesResponse:v}}),Error("No seat types data");let T=u[o],j=(0,ta.AI)(T,{overridePlanTier:_}),E=T===ej.hH.EXPERT,S=c[o];return S?(0,s.jsx)("div",{...{className:"x9h44rk xmkeg23 x1y0btm7 x7z60cl x1ef8nbk x1kzcg16"},children:(0,s.jsxs)("table",{...{className:"xh8yej3 x140o2bo"},children:[(0,s.jsxs)("colgroup",{children:[(0,s.jsx)("col",{className:"xqyf9gi"}),(0,s.jsx)("col",{className:"x13qflfw"}),(0,s.jsx)("col",{className:"xo5x3gg"})]}),(0,s.jsx)("thead",{...{className:"x10l6tqk xzpqnlu"},children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{scope:"col",children:(0,f.tx)("checkout.select_seats_table.user_column")}),(0,s.jsx)("th",{scope:"col",children:(0,f.tx)("checkout.select_seats_table.seat_column")}),(0,s.jsx)("th",{scope:"col",children:(0,f.t)("checkout.edit_user_seat_name",{name:S.handle})})]})}),(0,s.jsx)("tbody",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{...{className:"xctkrei"},children:(0,s.jsx)(tQ.oJ,{entity:S,includeUserEmailAddress:!0,size:24,showIsMe:!0})}),(0,s.jsxs)("td",{...{className:"xxymvpz"},children:[(0,s.jsxs)("div",{...{className:"x78zum5 xg2d0mh x6s0dn4"},children:[(0,s.jsx)(tW.UV,{removeBackgroundColor:!0,type:T,size:"16"}),(0,s.jsx)("p",{children:(0,tt.qx)(T)}),E&&(0,s.jsx)("div",{children:(0,s.jsx)(e5.C,{variant:"brandOutline",size:"md",children:(0,f.t)("checkout.recommended")})})]}),(0,s.jsx)("p",{"data-tooltip-type":t8.fR.TEXT,"data-tooltip":h.current&&h.current.offsetWidth<h.current.scrollWidth?j:null,"data-tooltip-timeout-delay":500,...{className:"xv1l7n4 xuxw1ft xb3r6kr xlyipyv"},ref:h,children:j})]}),(0,s.jsx)("td",{...{className:"x16dsc37 x1hr2gdg xuxw1ft x4p5aij"},children:(0,s.jsx)(y.Ok,{onClick:()=>{g((0,eZ.K4)({type:tK.z,data:{user:S,seatTypes:v,selectedSeatType:T,setSelectedSeatType:a=>{var s;d.RQ.trackDefinedEvent("monetization_upgrades.user_seat_selection_changed_in_checkout",{targetUserId:S.id,previousSeatType:T,newSeatType:a,tier:_,teamId:e}),s=S.id,t({type:Y.Y.UPDATE_USER_SEAT_TYPE,payload:{userId:s,seatType:a}})},tier:_,teamId:e}}))},children:(0,f.tx)("members_table.batch_actions_menu.role_change.seat_rename")})})]})})]})}):((0,p.Jz)(n.k.MONETIZATION_UPGRADES,Error("Invalid user"),{extra:{user:S}}),null)}function ae({state:e,dispatch:t,createPaymentElement:a,unmountPaymentElement:r,teamId:i}){let{tier:l}=e;return i&&l===eS.K0.PRO?(0,s.jsxs)("div",{children:[(0,s.jsx)(t6,{teamId:i,dispatch:t,state:e}),(0,s.jsx)(tN,{state:e,dispatch:t,createPaymentElement:a,unmountPaymentElement:r})]}):((0,p.Jz)(n.k.MONETIZATION_UPGRADES,Error("Invalid state: missing teamId or invalid tier in SeatSelectionAndPaymentDetailsStep"),{extra:{teamId:i,tier:l}}),null)}function at({contactSales:e,step:t,state:a,performTierUpgrade:r,setStep:i,teamId:n,dispatch:l,createPaymentElement:d,unmountPaymentElement:o,onNext:c,getNextStep:m}){let{tier:_}=a,{teamName:p}=(0,u.mU)((0,eQ.SHG)({teamId:n})).transform(({team:e})=>({teamName:e?.name??""})).unwrapOr({teamName:""});return(0,s.jsxs)("div",{...{className:"xg01n1d x4gyc16 x10im51j xvueqy4 x87ps6o"},children:[(0,s.jsx)(L,{step:t,teamName:p}),t===j.lQ.SELECT_SEATS_AND_PAYMENT&&(0,s.jsxs)("div",{...{className:"xrvj5dj x3uu4nb x1fwvi78"},children:[(0,s.jsx)(ae,{state:a,teamId:n,dispatch:l,createPaymentElement:d,unmountPaymentElement:o}),(0,s.jsx)(tl,{buttonText:E[t]?.buttonText??null,state:a,dispatch:l,onClickNext:c,nextStep:m(),canSwitchRenewalTerm:_===eS.K0.PRO,onContactSalesClick:e,shouldRenderCartData:!0})]}),t===j.lQ.REVIEW&&(0,s.jsx)(tU,{state:a,onSubmit:r,navigateToEditDetails:()=>i(j.lQ.SELECT_SEATS_AND_PAYMENT)})]})}function aa({teamId:e,entryPoint:t,...a}){let _=function(){let{getConfig:e}=(0,G.it)("exp_single_editor_checkout");return!!e().getValue("enabled",!1)}(),h=(0,H.E)(),x=(0,b.A6)(),g=(0,i.I0)(),{state:y,dispatch:v,createPaymentElement:T,unmountPaymentElement:E,validateUserSeatTypeSelections:S,validatePaymentInputs:w,collectPaymentDetails:I,performTierUpgrade:k}=function({teamId:e,...t}){let[a,s]=(0,r.useReducer)(eG,t,ez),{tier:n,currency:l,renewalTerm:d,selectedUserSeatTypes:o,additionalSeatsCount:c,hasDifferentLegalName:m,legalName:u}=a,_=(0,M.Gm)().stripe_payment_method_configurations?.[n],p=eL({currency:l,tier:n,renewalTerm:d}),{state:h,dispatch:x,createPaymentElement:g,unmountPaymentElement:y,createPaymentMethod:v,confirmIntent:T}=function({useStripeProps:e,currency:t,defaultCountry:a,isCheckout:s,upgradingTier:i}){let n=(0,et.I6)().unwrapOr(null),[l,d]=(0,r.useReducer)(ey,eg),{address:o,updateAddress:c,trimAddress:m}=(0,en.S)({defaultCountry:a??(0,ee.yJ)()}),{address:u,updateAddress:_,trimAddress:p}=(0,en.S)({defaultCountry:a??(0,ee.yJ)()}),{createPaymentElement:h,unmountPaymentElement:x,createPaymentMethod:g,confirmIntent:y,error:v,paymentMethodType:T,stripeIntent:E,stripeCustomerId:S,is3ds:N}=ex({...e,currency:t}),b={name:l.nameOnPaymentMethod,address:(0,ea.fY)(o)},C=l.isUsingSavedPaymentMethod?(0,ea.Lm)(l.savedPaymentMethod?.billing_address):o,w=l.hasDifferentShippingAddress&&!(0,j.SV)(u)?u:o,A=l.savedPaymentMethod?.shipping_address?(0,ea.Lm)(l.savedPaymentMethod?.shipping_address):C,I=l.isUsingSavedPaymentMethod?A:w,{status:k,savedPaymentMethods:R}=function(){let e=(0,et.I6)().unwrapOr(null),[t]=(0,el.aM)(ed(e?.key),{enabled:!!e});return"loaded"===t.status?{status:t.status,savedPaymentMethods:t.data?.payment_methods??[]}:{status:t.status,savedPaymentMethods:[]}}();(0,r.useEffect)(()=>{"loaded"===k&&d({type:eo.dN.INIT_SAVED_PAYMENT_METHODS,payload:R})},[k]);let P=async()=>{m(),p();let e=await M();if(d({type:eo.dN.SET_ERRORS,payload:e}),e.length>0)return e;let t=await g(b);if((0,ep.c4)(t)||!t)return t;try{await es.g.postValidatePayment({billingAddress:C,shippingAddress:I,paymentMethodId:t.id})}catch(t){let e=[{code:eo.Ux.PAYMENT_METHOD_VALIDATION_ERROR,message:t.message}];return d({type:eo.dN.SET_ERRORS,payload:e}),e}return d({type:eo.dN.SET_STRIPE_PAYMENT_METHOD,payload:t.id}),t.id},O=async({paymentMethod:a,createIntentParams:s})=>{let r=a||l.stripePaymentMethod;if(!r){let e=[{code:eo.Ux.MISSING_PAYMENT_METHOD_ERROR,message:(0,f.t)("payments.errors.missing_payment_method")}];return d({type:eo.dN.SET_ERRORS,payload:e}),e}let o=await y({paymentMethod:r,createIntentParams:{...s,redirectUrl:"/",currency:t,billingAddress:C,shippingAddress:I,stripePaymentMethodConfiguration:e.stripePaymentMethodConfiguration}});if((0,ep.c4)(o))return o;if(o.customer)try{await es.g.postSavePayment({paymentMethodId:r,stripeCustomerId:o.customer,teamId:s.teamId,planRecordId:n?.planRecordId,currency:t,billingAddress:C,shippingAddress:I,upgradingTier:i})}catch(t){let e=[{code:eo.Ux.SAVE_PAYMENT_METHOD_ERROR,message:t.message}];return d({type:eo.dN.SET_ERRORS,payload:e}),e}return o},D=(0,r.useCallback)(e=>{switch(e.type){case eo.dN.UPDATE_BILLING_ADDRESS:c(e.payload);break;case eo.dN.UPDATE_SHIPPING_ADDRESS:_(e.payload);break;default:d(e)}},[c,_]);async function M(){let{vatGstId:e,regionalVatGstId:a,nameOnPaymentMethod:r}=l,i=await Promise.all([ef({billingAddress:C,shippingAddress:I,teamId:n?.key.parentId??null,isCheckout:!!s}),ev({currency:t,billingAddress:C,shippingAddress:I,teamId:n?.key.parentId??null,isCheckout:!!s}),eT({vatGstId:e,country:C.country}),eT({vatGstId:a,country:C.country,region:C.region})]);return r||i.unshift({code:eo.Ux.NAME_ON_PAYMENT_METHOD_REQUIRED,message:(0,f.t)("payments.errors.name_on_payment_method_required")}),i.filter(e=>!!e)}return{state:{...l,billingAddress:C,shippingAddress:I,shippingAddressInput:u,stripeError:v,paymentMethodType:T,stripeIntent:E,is3ds:N,stripeCustomerId:S},dispatch:D,createPaymentElement:h,unmountPaymentElement:x,createPaymentMethod:P,confirmIntent:O}}({useStripeProps:{currency:l,paymentFlowSource:ep.E.PRO_UPGRADE,stripePaymentMethodConfiguration:_},currency:l,defaultCountry:(0,ee.yJ)(),isCheckout:!0,upgradingTier:n}),{status:E,data:{eligibleTeams:S,eligibleTeamUsers:b,currentUpgradingUser:w}}=function({teamId:e,tier:t}){let a=(0,i.I0)(),[s]=(0,el.aM)(eC({tier:t,teamId:e}));return((0,eb.J)(s,(0,f.t)("org_self_serve.confirmation_step.sorry_there_was_an_error_processing_your_request_refresh_and_try_again")),"errors"===s.status&&a(N.fv({view:"recentsAndSharing"})),"loaded"===s.status)?{status:s.status,data:{eligibleTeams:s.data.eligible_teams,eligibleTeamUsers:s.data.eligible_team_users,currentUpgradingUser:s.data.current_upgrading_user}}:{status:s.status,data:{eligibleTeams:[],eligibleTeamUsers:[],currentUpgradingUser:null}}}({teamId:e,tier:n}),A=(0,r.useMemo)(()=>(0,$.fG)(o,c),[o,c]),I=(0,r.useMemo)(()=>(0,$.LB)(p),[p]),k=(0,r.useMemo)(()=>({...a,...h,applicablePriceData:p,paymentFormErrors:h.errors,cartSelectionError:a.error,countBySeatType:A}),[a,h,p,A]),R=function({state:e,cartDispatch:t,teamId:a}){let s=(0,i.I0)(),n=(0,C.xJ)(),l=(0,H.E)(),d=function(e){let{tier:t,currency:a,renewalTerm:s,selectedUserSeatTypes:r,selectedTeamIds:i,displayName:n,legalName:l,taxPercent:d,applicablePriceData:o,vatGstId:c,regionalVatGstId:m,stripeCustomerId:u,countBySeatType:_}=e,p=(0,$.LB)(o),{subtotal:h,taxTotal:x,total:g}=(0,$.bg)({countBySeatType:_,applicablePrices:p,taxPercent:d}),y={selected_user_seat_types:(0,$.g2)(r),billing_interval:s,displayed_cost_breakdown:{subtotal:h,tax_total:x,total:g},displayed_price_keys:(0,$.dq)(o),selected_currency:a,vat_gst_id:c||null,regional_vat_gst_id:m||null,is_cart_rewrite:!0};return t===eS.K0.PRO?{...y,legal_name:l||null,display_name:n||null,count_by_billable_product:_}:{...y,requested_seats:_,org_name:n||l,legal_org_name:l,team_ids:Array.from(i),stripe_customer_id:u||null,new_team_options:0===i.size?{team_name:n||l,add_to_org:!0}:void 0}}(e),o=(0,r.useCallback)(e=>{let a=(0,J.i)(e,e.data?.message||(0,f.t)("org_self_serve.review_step.sorry_there_was_an_error_please_try_again"));if("CARD_ERROR"!==e.data.reason)return s(ew.R.enqueue({type:"checkout-flow-error",message:a,error:!0,preventDismissal:!0,icon:eA.B4.WARNING_EXCLAMATION_WITH_TRIANGLE})),{code:Y.d.UPGRADE_ERROR,message:a};{let e={code:Y.d.CARD_ERROR,message:a};return t({type:Y.Y.SET_ERROR,payload:{error:e}}),e}},[t,s]);return(0,r.useCallback)(async()=>{if(t({type:Y.Y.SET_IS_SUBMITTING,payload:{isSubmitting:!0}}),e.tier===eS.K0.PRO){let e=await eD({requestBody:d,teamId:a,userId:n.id,reduxDispatch:s,handleError:o,hasStreamlinedNewUserCheckoutExp:l});if(e)return t({type:Y.Y.SET_IS_SUBMITTING,payload:{isSubmitting:!1}}),e}else{let a=await eM({requestBody:d,user:n,upsellSource:e.upsellSource,handleError:o,reduxDispatch:s});if(a)return t({type:Y.Y.SET_IS_SUBMITTING,payload:{isSubmitting:!1}}),a}return null},[e.tier,e.upsellSource,t,s,d,a,n,o,l])}({state:k,cartDispatch:s,teamId:e});(0,r.useEffect)(()=>{if("loaded"===E){let{eligibleTeamsByTeamId:e,selectedTeamIds:t,eligibleUsersByUserId:a,selectedUserSeatTypes:r}=(0,F.u)(S,b,w);(0,K.hw)({eligibleTeamIds:S.map(e=>e.id).filter(e=>!!e),eligibleTeamUsers:b,tier:n}),s({type:Y.Y.INIT,payload:{eligibleTeamsByTeamId:e,selectedTeamIds:t,eligibleUsersByUserId:a,selectedUserSeatTypes:r,currentUpgradingUserId:w.user.id}})}},[E]);let P=(0,r.useCallback)(e=>{(0,eo.MI)(e)?x(e):s(e)},[s,x]);async function O(){s({type:Y.Y.SET_IS_SUBMITTING,payload:{isSubmitting:!0}});let t=h.isUsingSavedPaymentMethod?h.stripePaymentMethod:await v();if((0,eo.Q1)(t)||(0,ep.c4)(t))return s({type:Y.Y.SET_IS_SUBMITTING,payload:{isSubmitting:!1}}),t;let a=await T({paymentMethod:t,createIntentParams:{teamId:e,subtotalEstimate:(0,Q.zX)(A,I),currency:l,createStripeCustomer:!0}});if((0,ep.c4)(a)||(0,eo.Q1)(a))return s({type:Y.Y.SET_IS_SUBMITTING,payload:{isSubmitting:!1}}),a;try{let t=await eN.n.calculateEstimate({teamId:e,address:h.billingAddress,billingAddress:h.billingAddress,shippingAddress:h.shippingAddress,currency:l,vatGstId:h.vatGstId,regionalVatGstId:h.regionalVatGstId});s({type:Y.Y.SET_TAX_PERCENT,payload:{taxPercent:t.data.meta.estimate.tax_percent??0}})}catch(t){let e={code:Y.d.ESTIMATE_CALCULATION_ERROR,message:(0,f.t)("payments.errors.estimate_calculation_error")};return s({type:Y.Y.SET_ERROR,payload:{error:e}}),s({type:Y.Y.SET_IS_SUBMITTING,payload:{isSubmitting:!1}}),e}return s({type:Y.Y.SET_IS_SUBMITTING,payload:{isSubmitting:!1}}),null}let D=(0,r.useCallback)(()=>{let e=q({additionalSeatsCount:c,selectedUserSeatTypes:o,tier:n});return P({type:Y.Y.SET_ERROR,payload:{error:e}}),e},[P,c,o,n]),U=(0,r.useCallback)(()=>{if((n===eS.K0.ORG||n===eS.K0.PRO&&m)&&!u){let e={code:Y.d.INVALID_LEGAL_NAME,message:(0,f.t)("checkout.errors.missing_legal_name")};return P({type:Y.Y.SET_ERROR,payload:{error:e}}),e}return null},[P,n,u,m]);return{state:k,dispatch:P,createPaymentElement:g,unmountPaymentElement:y,collectPaymentDetails:O,performTierUpgrade:R,validateUserSeatTypeSelections:D,validatePaymentInputs:U}}({teamId:e,tier:a.tier,currency:a.currency,renewalTerm:a.renewalTerm,upsellSource:a.upsellSource}),{tier:O,currency:D,renewalTerm:U,selectedTeamIds:L,selectedUserSeatTypes:z,additionalSeatsCount:Z,countBySeatType:W,applicablePriceData:X,eligibleTeamsByTeamId:er,isLoading:ei,stripeError:ec,cartSelectionError:em,isSubmitting:eu,eligibleUsersByUserId:e_}=y,[eh,ej]=(0,r.useState)(null);(0,r.useEffect)(()=>{!ei&&1===Object.keys(e_).length&&O===eS.K0.PRO&&_&&ej(B.P.SINGLE_EDITOR)},[ei,e_,ej,_,O]);let eE=(0,r.useMemo)(()=>ei?[]:function({tier:e,eligibleTeams:t,checkoutFlowType:a,isSingleEditorCheckoutExpEnabled:s,hasStreamlinedNewUserCheckoutExp:r}){let i=[j.lQ.SELECT_SEATS,j.lQ.PAYMENT_AND_ADDRESS,j.lQ.REVIEW],n=[j.lQ.SELECT_SEATS_AND_PAYMENT,j.lQ.REVIEW],l=[];if(e===eS.K0.PRO)return l=s?a===B.P.SINGLE_EDITOR?[j.lQ.UPGRADE_TYPE,...n]:[j.lQ.UPGRADE_TYPE,...i]:i,r&&l.push(j.lQ.CONFIRMATION),l;{let e=[...i,j.lQ.CONFIRMATION];return t.length>0?[j.lQ.SELECT_TEAMS,...e]:e}}({tier:O,eligibleTeams:Object.values(er),checkoutFlowType:eh,isSingleEditorCheckoutExpEnabled:_,hasStreamlinedNewUserCheckoutExp:h}),[ei,O,er,eh,_,h]),[eI,ek]=(0,r.useState)(eE[0]),{teamName:eR,isOrgAdmin:eP,userEmail:eO}=(0,u.mU)((0,eQ.SHG)({teamId:e})).transform(({team:e,currentUser:t})=>({teamName:e?.name??"",userEmail:t?.email??"",isOrgAdmin:t?.baseOrgUsers?.some(e=>e.permission===eW.Gu.ADMIN)})).unwrapOr({teamName:"",isOrgAdmin:!1,userEmail:""}),eU=(0,r.useCallback)(e=>{"teamUpgrade"===x.view?g((0,N.fv)({...x,paymentStep:e})):"orgSelfServe"===x.view&&g((0,N.fv)({...x,step:e}))},[g]),eB=(0,r.useCallback)(t=>{if(-1===eE.indexOf(t))return void(0,p.Jz)(n.k.MONETIZATION_UPGRADES,Error(`Invalid step: ${t}`),{extra:{steps:eE,step:t}});ek(t),eU(t),eI&&d.RQ.trackDefinedEvent("monetization_upgrades.checkout_change_step",{teamId:e?.toString(),currentStep:eI,tier:O,newStep:t,selectedTeamIds:(0,K.hO)(Array.from(L)),selectedUserSeatTypes:(0,K.A4)(z)??void 0,additionalSeatsCount:(0,K.C7)(Z)??void 0,countBySeatType:(0,K.C7)(W)??void 0})},[eE,eU,e,eI,O,L,z,Z,W]),eV=(0,r.useCallback)(e=>{let t=eE.indexOf(eI);eE.indexOf(e)>t||eB(e)},[eI,eE,eB]),eK=(0,r.useCallback)(()=>eE[Math.min(eE.indexOf(eI)+1,eE.length-1)],[eI,eE]),eJ=(0,r.useCallback)(async()=>{if(eu)return!1;switch(v({type:Y.Y.SET_ERROR,payload:{error:null}}),eI){case j.lQ.SELECT_TEAMS:v({type:Y.Y.UPDATE_STATE_FROM_NEW_TEAM_SELECTIONS});break;case j.lQ.SELECT_SEATS:if(await S())return!1;break;case j.lQ.PAYMENT_AND_ADDRESS:if(w()||await I())return!1;break;case j.lQ.SELECT_SEATS_AND_PAYMENT:if(await S()||w()||await I())return!1}return eB(eK()),!0},[eI,eB,S,w,I,v,eK,eu]),e0=(0,r.useCallback)(async()=>{let e=await k();e||O!==eS.K0.ORG||eB(j.lQ.CONFIRMATION),!e&&O===eS.K0.PRO&&h&&eB(j.lQ.CONFIRMATION)},[k,eB,O,h]),e1=(0,r.useCallback)(e=>{v({type:Y.Y.UPDATE_TO_DEFAULT_SEAT_SELECTIONS,payload:{shouldUseSingleEditor:e===B.P.SINGLE_EDITOR}}),ej(e)},[v,ej]),e5=()=>{g((0,eZ.K4)({type:eH.gg,data:{source:eF.f.ORG_SELF_SERVE_UPGRADE_MODAL}}))},e2=()=>{m.ZP.redirect("/files/recent")};return(0,r.useEffect)(()=>{if(!ei&&!eI){let s=eE[0];eB(s),(0,l.BZ)().enable_starter_cart_rum_tracking&&(0,o.yV)({collectErrors:!0,service:"cart",sessionSampleRate:100,alwaysInit:!0}),d.RQ.trackDefinedEvent("monetization_upgrades.checkout_entry",{teamId:e?.toString(),entryPoint:t??void 0,upsellSource:a.upsellSource,step:s,tier:O,currency:D,renewalTerm:U,selectedTeamIds:(0,K.hO)(Array.from(L)),selectedUserSeatTypes:(0,K.A4)(z)??void 0,additionalSeatsCount:(0,K.C7)(Z)??void 0,countBySeatType:(0,K.C7)(W)??void 0})}},[ei,eI,eE,eB,e,t,a.upsellSource,O,D,U,L,z,W,Z]),(0,r.useEffect)(()=>{eI===j.lQ.PAYMENT_AND_ADDRESS&&ec?.code===ep.uE.UNINITIALIZED_STRIPE_ELEMENTS_ERROR&&(eh===B.P.SINGLE_EDITOR?eB(j.lQ.UPGRADE_TYPE):eB(j.lQ.SELECT_SEATS))},[ec?.code,eI,eB,eh]),(0,r.useEffect)(()=>{em?.code===Y.d.CARD_ERROR&&eI===j.lQ.REVIEW&&(eh===B.P.SINGLE_EDITOR?eB(j.lQ.SELECT_SEATS_AND_PAYMENT):eB(j.lQ.PAYMENT_AND_ADDRESS))},[em?.code,eB,eI,eh,O]),(0,r.useEffect)(()=>{eR&&v({type:Y.Y.UPDATE_DISPLAY_NAME,payload:{displayName:eR}})},[eR,v]),(0,r.useEffect)(()=>{document.querySelector("h1")?.focus()},[eI]),(0,s.jsx)(eq.Ui,{name:eX.V4.TIER_UPGRADE_FLOW,properties:{teamId:e?.toString(),entryPoint:t,upsellSource:a.upsellSource,tier:O,step:eI,currency:D,renewalTerm:U,prices:(0,K.TA)(X)},enabled:!ei,trackingOptions:{teamName:n.k.MONETIZATION_UPGRADES,addToRUM:!0},children:(0,s.jsx)(r.Suspense,{fallback:(0,s.jsx)(eY.F,{}),children:ei||!eI?(0,s.jsx)(eY.F,{}):eI===j.lQ.CONFIRMATION?O===eS.K0.ORG?(0,s.jsx)(R,{orgMigrated:a.orgMigrated}):(0,s.jsx)(P,{}):(0,s.jsxs)("form",{children:[O===eS.K0.ORG&&eP&&(0,s.jsx)(e$.jy,{onContactSales:e5,onFileBrowserClick:e2}),O===eS.K0.ORG&&(0,c._E)(eO)&&(0,s.jsx)(e$.FA,{onFileBrowserClick:e2}),(0,s.jsx)(A,{steps:eE,currentStep:eI,setStep:eV,teamId:e}),eI===j.lQ.UPGRADE_TYPE&&(0,s.jsx)(V,{checkoutFlowType:eh,setCheckoutFlowType:e1,onClickNext:eJ}),eI!==j.lQ.UPGRADE_TYPE&&(eh===B.P.SINGLE_EDITOR?(0,s.jsx)(at,{contactSales:e5,createPaymentElement:T,dispatch:v,getNextStep:eK,onNext:eJ,performTierUpgrade:e0,setStep:eB,state:y,step:eI,teamId:e,unmountPaymentElement:E}):(0,s.jsx)(t4,{contactSales:e5,createPaymentElement:T,dispatch:v,getNextStep:eK,onNext:eJ,performTierUpgrade:e0,setStep:eB,state:y,step:eI,teamId:e,unmountPaymentElement:E}))]})})})}function as(e){return(0,s.jsx)(_.X,{label:"TierUpgradeFlow",children:(0,s.jsx)(h.SV,{team:n.k.MONETIZATION_UPGRADES,boundaryKey:"TierUpgradeFlow",fallback:h.NY.DEFAULT_FULL_PAGE,hasCustomWASMBuild:eK.hU,children:(0,s.jsx)(aa,{...e})})})}},164109:function(e,t,a){a.d(t,{eG:()=>x});var s=a(853505),r=a(492342),i=a(363240),n=a(551916),l=a(224051),d=a(996679),o=a(195787),c=a(609373),m=a(70523),u=a(860195),_=a(479852),p=a(10553);let h=(0,i.xu)(({orgId:e})=>(0,i.cn)(t=>e?t(p.iKZ.Query({orgId:e})).transform(({org:e})=>{let t=!!(0,o.Wg)(e?.isSalesAssistedPlanProperty)?.value,a=!!(0,o.Wg)(e?.subscriptionShouldNotAutoRenewPlanProperty);return{isSalesAssisted:t,noTosAcceptanceKey:(0,o.Wg)(e?.plan?.termsOfServiceAcceptanceByTermsKey)?.termsKey!==_.vJ.SEATS_MODEL_BILLING_2025,shouldNotAutoRenew:a}}):n.IE.disabled()));function x(e){let t=e?.id??null,a=!(0,m._g)(),{warningStatus:n,renewalDate:_,warningType:p}=function(e){let t=(0,l.A9)(e),a=t.data?.analyze_data_contract_v2_start,s=a?(0,d.Z)(a):null,r=(0,d.Z)();function i(e,t,a){return{warningType:e,renewalDate:t,warningStatus:a}}if(s&&r.isBefore(s))if(30>=s.diff(r,"day"))return i("error",s,"loaded");else if(90>=s.diff(r,"day"))return i("warning",s,"loaded");else return i(null,s,"loaded");return i(null,s,t.status)}(t),x=!!(0,r.BZ)().order_form_billing_terms_banner,g=(0,u.Y)(),y=(0,i.Dv)((0,s.useMemo)(()=>h({orgId:t}),[t])),f=(0,o.Wg)(y.data),v=function({orgCreatedAt:e,isSalesAssisted:t,noTosAcceptanceKey:a,shouldNotAutoRenew:s,onExclusionList:r,isAdminView:i,isTermsOfServiceUpdateOn:n}){return!!(e&&(0,c.Z)({date:new Date(e)})&&t&&a&&(s||r)&&(i||n))}({orgCreatedAt:e?.created_at,isSalesAssisted:!!f?.isSalesAssisted,noTosAcceptanceKey:!!f?.noTosAcceptanceKey,shouldNotAutoRenew:!!f?.shouldNotAutoRenew,onExclusionList:a,isAdminView:g,isTermsOfServiceUpdateOn:function(e){let t=!!(0,r.BZ)().terms_of_service_may_2025_update,a=(0,d.Z)(),s=!!e&&a.isBefore(e)&&30>=e.diff(a,"day");return t&&s}(_)}),T=(0,s.useMemo)(()=>"loaded"===y.status&&!!v,[y.status,v]);return"loading"===y.status||"loading"===n?(0,o.AC)():(0,o.wl)({isEligible:x&&T,renewalDate:_,warningType:p})}},315828:function(e,t,a){a.d(t,{Y:()=>h,i:()=>x});var s=a(492342),r=a(363240),i=a(551916),n=a(224051),l=a(996679),d=a(574059),o=a(195787),c=a(70523),m=a(860195),u=a(479852),_=a(10553),p=a(118960);let h=(0,r.xu)(e=>(0,r.cn)(t=>e?t(_.iKZ.Query({orgId:e})).transform(({org:e})=>!!(0,o.Wg)(e?.isSalesAssistedPlanProperty)?.value&&!(0,o.Wg)(e?.subscriptionShouldNotAutoRenewPlanProperty)&&(0,o.Wg)(e?.plan?.termsOfServiceAcceptanceByTermsKey)?.termsKey!==u.vJ.SEATS_MODEL_BILLING_2025):i.IE.disabled()));function x(e,t){let a=(0,c._g)(),i=(0,n.A9)(e?.id),u=(0,m.Y)(),_=(0,r.Dv)(h(e?.id??null)),x=(0,p.Rt)("useProductTermsEligibility"),g=(0,p.N1)(x).unwrapOr(!1),y=i.data?.analyze_data_contract_v2_start,f=y?(0,l.Z)(y):null,v=(0,l.Z)(),T=!!f&&v.isBefore(f)&&90>=f.diff(v,"day"),j=!!f&&v.isBefore(f)&&30>=f.diff(v,"day"),E=(0,l.Z)((0,d.Gm)().analyze_data_flow_v2_until),S=!!e&&(0,l.Z)(e.created_at).isBefore(E),N=(0,s.BZ)().terms_of_service_may_2025_update;return e?.id&&(g||t)&&S&&a&&("loaded"!==_.status||_.data)?"loading"===i.status||"loading"===_.status?(0,o.AC)():T&&_.data&&(u||N&&j)?(0,o.wl)({isEligible:!0,orgTermsInfo:{organizationName:e?.name??"organization",renewalDate:f}}):(0,o.wl)({isEligible:!1}):(0,o.wl)({isEligible:!1})}},609373:function(e,t,a){a.d(t,{Z:()=>i});var s=a(996679),r=a(574059);function i(e){let t=(0,r.Gm)().analyze_data_flow_v2_until;return!!t&&(0,s.Z)(e.date).isBefore((0,s.Z)(t))}},261779:function(e,t,a){let s;a.d(t,{s:()=>n});var r=a(109643),i=a(712824);function n(){return s??=(0,i.Y3)(r.Z.createLazyComponent(()=>Promise.all([a.e("7625"),a.e("1259"),a.e("7424"),a.e("4248"),a.e("592"),a.e("6481"),a.e("1402"),a.e("7571"),a.e("313"),a.e("1779"),a.e("6985"),a.e("6761"),a.e("476"),a.e("4126"),a.e("6006"),a.e("33"),a.e("3841"),a.e("390"),a.e("114"),a.e("9042"),a.e("5522"),a.e("6635"),a.e("1780"),a.e("8461"),a.e("3990"),a.e("1889"),a.e("8247"),a.e("224"),a.e("7907"),a.e("5157"),a.e("428"),a.e("2570")]).then(a.bind(a,629132)).then(e=>e.ChangeVatGstIdModal),(0,i.NQ)("ChangeVatGstIdModal")),"ChangeVatGstIdModal")}},706367:function(e,t,a){a.d(t,{MI:()=>l,Q1:()=>d,Ux:()=>i,dN:()=>n});var s,r,i=9793==a.j?((s=i||{}).ADDRESS_VALIDATION_ERROR="address-validation-error",s.MISSING_ADDRESS_ERROR="missing-address-error",s.CURRENCY_VALIDATION_ERROR="currency-validation-error",s.MISSING_PAYMENT_METHOD_ERROR="missing-payment-method-error",s.NAME_ON_PAYMENT_METHOD_REQUIRED="name-on-payment-method-required",s.PAYMENT_METHOD_VALIDATION_ERROR="payment-method-validation-error",s.SAVE_PAYMENT_METHOD_ERROR="save-payment-method-error",s.VAT_GST_ID_VERIFICATION_ERROR="vat-gst-id-verification-error",s):null,n=9793==a.j?((r=n||{}).INIT_SAVED_PAYMENT_METHODS="init_saved_payment_methods",r.SET_ERRORS="set_errors",r.SET_STRIPE_PAYMENT_METHOD="set_stripe_payment_method",r.SET_SAVED_PAYMENT_METHOD="set_saved_payment_method",r.TOGGLE_DIFFERENT_SHIPPING_ADDRESS="toggle_different_shipping_address",r.TOGGLE_USE_SAVED_PAYMENT_METHOD="toggle_use_saved_payment_method",r.UPDATE_BILLING_ADDRESS="update_billing_address",r.UPDATE_NAME_ON_PAYMENT_METHOD="update_name_on_payment_method",r.UPDATE_REGIONAL_VAT_GST_ID="update_regional_vat_gst_id",r.UPDATE_SHIPPING_ADDRESS="update_shipping_address",r.UPDATE_VAT_GST_ID="update_vat_gst_id",r):null;function l(e){var t;return"object"==typeof e&&null!==e&&"type"in e&&"string"==typeof(t=e.type)&&Object.values(n).includes(t)}function d(e){return Array.isArray(e)&&e.every(o)}function o(e){var t;return"object"==typeof e&&null!==e&&"code"in e&&"string"==typeof(t=e.code)&&Object.values(i).includes(t)&&"message"in e&&"string"==typeof e.message}},585787:function(e,t,a){a.d(t,{E:()=>i,c4:()=>l,uE:()=>n});var s,r,i=9793==a.j?((s=i||{}).PRO_UPGRADE="pro_upgrade",s.PRO_CHANGE_PAYMENT="pro_change_payment",s.ORG_UPGRADE="org_upgrade",s.ORG_CHANGE_PAYMENT="org_change_payment",s.COMMUNITY_CHECKOUT="community_checkout",s):null,n=9793==a.j?((r=n||{}).CREATE_PAYMENT_METHOD_ERROR="create-payment-method-error",r.CREATE_INTENT_ERROR="create-intent-error",r.CONFIRM_INTENT_ERROR="confirm-intent-error",r.MISSING_STRIPE_ELEMENTS_ERROR="missing-stripe-elements-error",r.MISSING_PAYMENT_METHOD_ERROR="missing-payment-method-error",r.UNINITIALIZED_STRIPE_ELEMENTS_ERROR="uninitialized-stripe-elements-error",r.STRIPE_ELEMENTS_VALIDATION_ERROR="stripe-elements-validation-error",r):null;function l(e){var t;return"object"==typeof e&&null!==e&&"code"in e&&"string"==typeof(t=e.code)&&Object.values(n).includes(t)&&"message"in e&&"string"==typeof e.message}},504495:function(e,t,a){a.d(t,{z:()=>j});var s=a(750357),r=a(853505),i=a(577851),n=a(53022),l=a.n(n),d=a(818265),o=a(739842),c=a(661193),m=a(733791),u=a(292670),_=a(590914),p=a(501253),h=a(469271),x=a(404756),g=a(865880),y=a(712824),f=a(68634),v=a(274065);let T=r.memo(function(e){let t=(0,i.I0)(),{displayName:a,legalName:n}=e,[y,T]=r.useState(a||""),[j,E]=r.useState(n||""),{isLoading:S,withLoading:N}=(0,u.$)(),b=()=>{t(h.hV())},C=async a=>{a.preventDefault(),await N(async()=>{if(e.updateNameImmediately&&e.team)try{e.canSeeBillingAddressExp?await (0,d.i0)().optimisticallyUpdate({Plan:{[`team::${e.team.id}`]:{name:y}}},g.j.updateDisplayName({teamId:e.team.id,updatedDisplayName:y})):await (0,d.i0)().optimisticallyUpdate({Plan:{[`team::${e.team.id}`]:{name:y}}},g.j.updateTeamName({teamId:e.team.id,updatedDisplayName:y,updatedLegalName:j}))}catch(s){let a=e.canSeeBillingAddressExp?(0,_.t)("update_company_details_modal.update_display_name.error"):(0,_.t)("update_company_details_modal.update_team_name.error");throw t(m.l.error((0,p.i)(s)||a)),s}else t(x.sy({legalName:j,displayName:y}));b()})};return(0,s.jsx)(f.xm,{onClose:b,title:e.modalTitle,minWidth:448,maxWidth:448,fixedTop:!0,children:(0,s.jsxs)("form",{onSubmit:C,className:c.B.p16.$,children:[(0,s.jsxs)("div",{className:c.B.mt4.$,children:[(0,s.jsxs)("label",{htmlFor:"teamName",className:c.B.colorTextSecondary.$,children:[(0,s.jsx)("strong",{className:c.B.block.colorText.$,children:(0,_.tx)("pro_cart.review.edit_details.team_name_label")}),(0,_.tx)("pro_cart.review.edit_details.team_name_description")]}),(0,s.jsx)(o.Sc,{value:y,id:"teamName",onChange:e=>{T(e.target.value)},dataTestId:"company-team-name",className:c.B.block.mt8.wFull.$})]}),!e.canSeeBillingAddressExp&&(0,s.jsxs)("div",{className:c.B.mt20.$,children:[(0,s.jsxs)("label",{htmlFor:"legalName",className:c.B.colorTextSecondary.$,children:[(0,s.jsx)("strong",{className:c.B.block.colorText.$,children:(0,_.tx)("pro_cart.review.edit_details.company_name_label")}),(0,_.tx)("pro_cart.review.edit_details.company_name_description")]}),(0,s.jsx)(o.Sc,{value:j,id:"legalName",onChange:e=>{E(e.target.value)},dataTestId:"company-name",className:c.B.block.mt8.wFull.$})]}),(0,s.jsxs)("div",{className:l()(v.UN,v.kD),children:[(0,s.jsx)(o.pJ,{onClick:b,disabled:S,children:(0,_.tx)("pro_cart.review.edit_details.cancel")}),(0,s.jsx)(o.RS,{className:v.iY,disabled:S,type:"submit",children:(0,_.tx)("pro_cart.review.edit_details.save")})]})]})})}),j=(0,y.Y3)(T,"UpdateCompanyDetailsModal")},860195:function(e,t,a){a.d(t,{Y:()=>n});var s=a(577851),r=a(880944);let i=9793==a.j?["orgAdminSettings","billingGroupDashboard","orgDomainManagement","orgIdpManagement","abandonedDraftFiles","teamAdminConsole","seatRequests","licenseGroup"]:null;function n(){let e=(0,s.v9)(e=>e.selectedView);return!!i.some(t=>t===e.view)||"workspace"===e.view&&e.subView===r.ep.ADMIN}},855325:function(e,t,a){a.d(t,{FD:()=>C,aC:()=>w,pO:()=>N});var s=a(853505),r=a(577851),i=a(444947),n=a(330837),l=a(689342),d=a(574059),o=a(681768),c=a(733791),m=a(590914),u=a(513827),_=a(404639),p=a(150789),h=a(404756),x=a(272727),g=a(328403),y=a(479852),f=a(790312),v=a(810334),T=a(581414),j=a(242802),E=a(979076),S=a(672650);let N=(0,v.U)(({teamId:e,canSeeBillingAddressExp:t})=>{let a=(0,r.I0)(),p=(0,r.v9)(e=>e.loadingState),g=(0,r.v9)(t=>e?t.teamUserByTeamId[e]:null),v=(0,r.v9)(e=>e.selectedView),N=(0,j.xJ)(),[C,A]=(0,s.useState)(!0),I=(0,l.D9)(e),k=(0,u.k)(),R=x.gI.loadingKeyForPayload({teamId:e}),P=(0,E.W_)(p,R),O=(0,d._F)();(0,s.useEffect)(()=>{a(x.gI({teamId:e}))},[a,e]);let D=function(){let e=(0,r.I0)();return(0,s.useCallback)(t=>{(0,i.L9)("Loaded Saved Cart State",{teamId:t.teamId,lastSavedAt:t.updatedAt}),e(h.Sd(t))},[e])}();return(0,s.useEffect)(()=>{async function s(t){try{let s=await o.ZP.post("/api/subscriptions/teams/calculate_estimate",{...t,team_id:e});a(h.Es({taxes:s.data.meta.estimate}))}catch(e){a(c.l.error((0,m.t)("payments.errors.estimate_calculation_error"))),a(_.fv({...v,paymentStep:f.iy.PAYMENT_AND_ADDRESS}))}A(!1)}if(void 0===I||I===e||C||(w(a),A(!0)),(!e||P)&&C){let l=(0,S.S2)(g,N),d=Object.entries(l).map(([e,t])=>{if((0,n.Rn)(t.email||""))return e}).filter(e=>!!e);a(h.mE({figmaEmailTeamUsers:d}));let o=(0,T.D3)({teamId:e,userId:N?.id});if(o){o.editorStatusChanges=(0,T.z8)(o.editorStatusChanges,l);let n=(0,S.Z$)(l,o.editorStatusChanges,y.gg.DESIGN),c=(0,S.Z$)(l,o.editorStatusChanges,y.gg.WHITEBOARD),m=n+o.numEmptyDesignSeats,u=c+o.numEmptyWhiteboardSeats;if(D({numDesignEditors:m,numWhiteboardEditors:u,editorStatusChanges:o.editorStatusChanges,teamId:e,updatedAt:o.updatedAt,cartSelections:o.cartSelections}),O){var r;let e=(r=O.billing_period,f.tv[f.tv[r]]),i=t?{billing_address:O.billing_address,shipping_address:O.shipping_address||O.billing_address}:null;a(h._1({billingPeriod:e})),a(h.VD({vatGstId:O.vat_gst_id})),a(h.sy({legalName:O.customer_legal_name||O.company_name,displayName:O.display_name})),a(h.ik({regionalVatGstId:O.regional_vat_gst_id})),s({address:O.address,editor_status_changes:o.editorStatusChanges,figma_email_team_users:d,selected_currency:O.currency,annual_quantity:(0,S.qZ)(e,m),monthly_quantity:(0,S.m6)(e,m),annual_whiteboard_quantity:(0,S.qZ)(e,u),monthly_whiteboard_quantity:(0,S.m6)(e,u),vat_gst_id:O.vat_gst_id,regional_vat_gst_id:O.regional_vat_gst_id,...i})}else"teamUpgrade"===v.view&&v.paymentStep===f.iy.CONFIRM_PAY&&v.billingPeriod!==f.tv.STUDENT&&i.RQ.trackDefinedEvent("monetization_upgrades.pro_checkout_confirmation_without_payment_flow_data",{isCampfireCart:k,teamId:e??void 0}),A(!1)}else A(!1)}},[a,P,g,I,e,N,C,O,v,D,t,k]),(0,s.useEffect)(()=>()=>{e&&b(a,e)},[a,e]),C}),b=(0,v.U)((e,t)=>{let a=x.gI.loadingKeyForPayload({teamId:t});e(p.IV({key:a}))});function C(e){e(h.gD({cartSelections:{countBySeatType:g.Hs.dict(e=>0),selectedUserSeatTypes:{}}}))}function w(e){e(h.$R({editorStatusChanges:{upgrade:{whiteboard:[],design:[],slides:[],sites:[],cooper:[],figmake:[]},downgrade:{whiteboard:[],design:[],slides:[],sites:[],cooper:[],figmake:[]}}})),e(h.Rd({numDesignEditors:0})),e(h.DY({numWhiteboardEditors:0}))}},933195:function(e,t,a){a.d(t,{U:()=>r});var s,r=9793==a.j?((s=r||{}).NAME="Name",s.ACTIVE_AT="Last active",s.DESIGN_PAID_STATUS="Design role",s.FIGJAM_PAID_STATUS="FigJam role",s.BILLING_INTERVAL="Billing interval",s):null},707082:function(e,t,a){a.d(t,{Ay:()=>i,Wx:()=>d,cE:()=>s,hV:()=>n,jF:()=>o,xZ:()=>l,zr:()=>r});let s="show_m10n_approval_banner",r="show_m10n_stripe_onboarding_incomplete",i="seen_advanced_prototyping_upsell",n="seen_slides_pro_templates_announcement",l="seen_sites_missing_required_password_unpublished_toast",d=9793==a.j?["collective_upsell_widget_seen_1","collective_upsell_widget_seen_10","collective_upsell_widget_seen_100"]:null,o=9793==a.j?["collective_upsell_full_screen_seen_1","collective_upsell_full_screen_seen_10"]:null},566012:function(e,t,a){a.d(t,{Q:()=>m,u:()=>c});var s=a(750357),r=a(240473),i=a(661193),n=a(491420),l=a(926941),d=a(122591),o=a(784475);function c(e){return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:i.B.flex.itemsCenter.$,children:[(0,s.jsxs)("div",{className:"seat_counter--seatCounter--S58e-",children:[(0,s.jsx)(l.XT,{disabled:e.numSeats<=e.minSeatsCount,innerText:`remove additional ${e.billableProductKey} seat`,className:"seat_counter--minusButton--ELonE",onClick:e.decrementSeats,dataTestId:`remove-additional-${e.billableProductKey}`,children:(0,s.jsx)(r.n,{svg:d.Z})}),(0,s.jsx)("input",{value:e.numSeats,maxLength:2,onChange:e.updateAdditionalSeatsText,className:"seat_counter--additionalSeatsInput--U5yb4",onFocus:e=>e.target.select()}),(0,s.jsx)(l.XT,{disabled:e.numSeats>=(e.maxSeatsCount?Math.min(e.maxSeatsCount,99):99),innerText:`add additional ${e.billableProductKey} seat`,className:"seat_counter--plusButton--ixQhQ",onClick:e.incrementSeats,dataTestId:`add-additional-${e.billableProductKey}`,children:(0,s.jsx)(r.n,{svg:o.Z})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"seat_counter--headerText--BI1Ev",children:e.headerText}),e.headerSubText&&(0,s.jsx)("div",{className:"seat_counter--headerSubText--jl0fh seat_counter--headerText--BI1Ev",children:e.headerSubText}),e.clarificationText&&(0,s.jsx)("span",{style:n.sx.colorText.colorBgSecondary.h16.pl4.pr4.mt8.bRadius1.inlineBlock.add({fontSize:"9px"}).$,children:e.clarificationText})]})]})})}function m(e,t){return a=>{if(""===a.target.value)return void e(0);let s=parseInt(a.target.value);isNaN(s)||(s>99?e(99):t&&s>t?e(t):e(s))}}},84376:function(e,t,a){a.d(t,{z:()=>i});var s=a(750357),r=a(853505);class i extends r.Component{render(){return(0,s.jsxs)("div",{className:"persisted_error--container--ajy0g",style:{marginTop:this.props.marginTop??32},children:[(0,s.jsx)("div",{className:"persisted_error--sideBar--MpPGy"}),(0,s.jsx)("div",{className:"persisted_error--message--J6Pdj",children:this.props.message})]})}}},763946:function(e,t,a){a.d(t,{_:()=>s});let s=49},705881:function(e,t,a){a.d(t,{G:()=>n});var s=a(750357),r=a(853505);if(9793==a.j)var i=a(303501);function n(e){return(0,s.jsx)(r.Suspense,{fallback:(0,s.jsx)(i.T,{}),children:e.children})}},292670:function(e,t,a){a.d(t,{$:()=>r});var s=a(853505);function r(){let[e,t]=s.useState(!1);return{isLoading:e,withLoading:async e=>{try{t(!0),await e()}finally{t(!1)}}}}},359721:function(e,t,a){a.d(t,{J:()=>i});var s=a(853505),r=a(750357);let i=(0,s.memo)(function(e){return(0,r.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,r.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",d:"M17.523 12.036a.5.5 0 0 1 .449.546A5.999 5.999 0 0 1 7 15.315V17.5a.5.5 0 0 1-1 0v-3a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1H8.002q.066.089.137.175a5 5 0 0 0 8.838-2.69.5.5 0 0 1 .546-.45M17.5 6a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1 0-1h1.498a5 5 0 0 0-8.975 2.515.5.5 0 1 1-.995-.097A6 6 0 0 1 17 8.684V6.5a.5.5 0 0 1 .5-.5"})})})},546518:function(e,t,a){function s(){return new DOMException("Operation aborted by user.","AbortError")}function r(e){return e instanceof DOMException&&"AbortError"===e.name}a.d(t,{D:()=>r,z:()=>s})},207885:function(e,t,a){function s(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}a.d(t,{Z:()=>r});let r=9793==a.j?function e(t,a){if(t===a)return!0;if(null==t||null==a)return!1;if(Array.isArray(t))return Array.isArray(a)&&t.length===a.length&&t.every(function(t,s){return e(t,a[s])});if("object"==typeof t||"object"==typeof a){var r=s(t),i=s(a);return r!==t||i!==a?e(r,i):Object.keys(Object.assign({},t,a)).every(function(s){return e(t[s],a[s])})}return!1}:null}}]);

//# debugId=93f5c3ba-9dc9-5329-b57b-df8671a4a94e

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/2c48b64b6cf49f41921112425d35e4677978e569/c5e2cae0-094ef217f5a044df.min.js.map